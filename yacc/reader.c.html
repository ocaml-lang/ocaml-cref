<!-- generated by the vscode.pl tool from vscoded.-->

<html>
 <head>
  <title>ocaml/yacc/reader.c - ocaml</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

.nav-bar {
    font-size: 120%;
    margin-top: 5px;
    margin-bottom: 5px;
}

.nav-link {
    padding-left: 5em;
    padding-right: 5em;
}

ul.toc {
    line-height: 200%;
    font-size: 150%;
}

code {
    font-family: consolas, monospace;
    line-height: 130%;
}

span.Constant {
    color: DarkGreen;
}

span.Special {
    color: #c06000;
}

span.Comment {
    color: DarkRed;
    font-style: italic;
}

span.Identifier {
    color: DarkCyan;
}

span.PreProc {
    color: DarkMagenta;
}

span.Statement, span.Type, span.Keyword, span.Repeat, span.Conditional,
    span.Operator, span.Exception
{
    color: DarkBlue;
}

span.Todo {
    color: DarkRed;
    background-color: Gold;
    font-style: italic;
}

span.Underlined {
    text-decoration: underline;
}

span.linkable {
    font-weight: bold;
}

code ol {
    counter-reset: item;
    list-style-type: none;
    margin-left: 0;
    padding-left: 0;
    list-style-position: inside;
}

code li {
    display: block;
}

code li:before {
    content: counter(item) "  ";
    counter-increment: item;
    color: #999;
    padding-right: 0.5em;
    padding-left: 0.4em;
    list-style-position: inside;
    text-align: right
}

  </style>
 </head>
 <body>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="index.html">Top Level</a></span>
 </p>

  <h1>ocaml/yacc/reader.c - ocaml</h1>
 <h2>Global variables defined</h2>
 <ul class="toc">
<li><a href="#L1074">at_first</a></li>
<li><a href="#L70">buffer</a></li>
<li><a href="#L29">cache</a></li>
<li><a href="#L30">cache_size</a></li>
<li><a href="#L63">caml_ident_body</a></li>
<li><a href="#L61">caml_ident_start</a></li>
<li><a href="#L72">capacity</a></li>
<li><a href="#L30">cinc</a></li>
<li><a href="#L36">cptr</a></li>
<li><a href="#L41">gensym</a></li>
<li><a href="#L39">goal</a></li>
<li><a href="#L929">infline</a></li>
<li><a href="#L42">last_was_action</a></li>
<li><a href="#L71">length</a></li>
<li><a href="#L36">line</a></li>
<li><a href="#L37">linesize</a></li>
<li><a href="#L44">maxitems</a></li>
<li><a href="#L47">maxrules</a></li>
<li><a href="#L51">name_pool</a></li>
<li><a href="#L50">name_pool_size</a></li>
<li><a href="#L32">ntags</a></li>
<li><a href="#L45">pitem</a></li>
<li><a href="#L48">plhs</a></li>
<li><a href="#L40">prec</a></li>
<li><a href="#L35">saw_eof</a></li>
<li><a href="#L33">tag_table</a></li>
<li><a href="#L32">tagmax</a></li>
</ul>
 <h2>Functions defined</h2>
 <ul class="toc">
<li><a href="#L1104">add_symbol</a></li>
<li><a href="#L1024">advance_to_start</a></li>
<li><a href="#L94">cachec</a></li>
<li><a href="#L1399">check_symbols</a></li>
<li><a href="#L1136">copy_action</a></li>
<li><a href="#L595">copy_text</a></li>
<li><a href="#L869">declare_start</a></li>
<li><a href="#L768">declare_tokens</a></li>
<li><a href="#L840">declare_types</a></li>
<li><a href="#L154">dup_line</a></li>
<li><a href="#L1091">end_rule</a></li>
<li><a href="#L1002">expand_items</a></li>
<li><a href="#L1011">expand_rules</a></li>
<li><a href="#L1357">free_tags</a></li>
<li><a href="#L108">get_line</a></li>
<li><a href="#L690">get_name</a></li>
<li><a href="#L706">get_number</a></li>
<li><a href="#L720">get_tag</a></li>
<li><a href="#L970">initialize_grammar</a></li>
<li><a href="#L271">is_ocaml_ident_start_char</a></li>
<li><a href="#L1553">is_polymorphic</a></li>
<li><a href="#L669">is_reserved</a></li>
<li><a href="#L537">keyword</a></li>
<li><a href="#L1571">make_goal</a></li>
<li><a href="#L1274">mark_symbol</a></li>
<li><a href="#L463">nextc</a></li>
<li><a href="#L931">output_token_type</a></li>
<li><a href="#L1622">pack_grammar</a></li>
<li><a href="#L1373">pack_names</a></li>
<li><a href="#L1418">pack_symbols</a></li>
<li><a href="#L427">parse_line_directive</a></li>
<li><a href="#L82">pop_stack</a></li>
<li><a href="#L1682">print_grammar</a></li>
<li><a href="#L232">process_apostrophe</a></li>
<li><a href="#L261">process_apostrophe_body</a></li>
<li><a href="#L357">process_comment</a></li>
<li><a href="#L275">process_open_curly_bracket</a></li>
<li><a href="#L200">process_quoted_string</a></li>
<li><a href="#L73">push_stack</a></li>
<li><a href="#L890">read_declarations</a></li>
<li><a href="#L1318">read_grammar</a></li>
<li><a href="#L1718">reader</a></li>
<li><a href="#L57">safe_fwrite</a></li>
<li><a href="#L53">safe_putc</a></li>
<li><a href="#L171">skip_comment</a></li>
<li><a href="#L1076">start_rule</a></li>
<li><a href="#L415">substring</a></li>
</ul>
 <h2>Macros defined</h2>
 <ul class="toc">
<li><a href="#L66">In_bitmap</a></li>
<li><a href="#L27">LINESIZE</a></li>
</ul>
 <h2>Source code</h2>

  <code><ol><li><span class="Comment">/**************************************************************************/<br/></li>
<li></span><span class="Comment">/*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */<br/></li>
<li></span><span class="Comment">/*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; OCaml&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */<br/></li>
<li></span><span class="Comment">/*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */<br/></li>
<li></span><span class="Comment">/*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Xavier Leroy, projet Cristal, INRIA Rocquencourt&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; */<br/></li>
<li></span><span class="Comment">/*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */<br/></li>
<li></span><span class="Comment">/*&nbsp;&nbsp; Copyright 1996 Institut National de Recherche en Informatique et&nbsp; &nbsp;&nbsp; */<br/></li>
<li></span><span class="Comment">/*&nbsp; &nbsp;&nbsp; en Automatique.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */<br/></li>
<li></span><span class="Comment">/*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */<br/></li>
<li></span><span class="Comment">/*&nbsp;&nbsp; All rights reserved.&nbsp; This file is distributed under the terms of&nbsp; &nbsp; */<br/></li>
<li></span><span class="Comment">/*&nbsp;&nbsp; the GNU Lesser General Public License version 2.1, with the&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */<br/></li>
<li></span><span class="Comment">/*&nbsp;&nbsp; special exception on linking described in the file LICENSE.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */<br/></li>
<li></span><span class="Comment">/*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */<br/></li>
<li></span><span class="Comment">/**************************************************************************/<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Based on public-domain code from Berkeley Yacc */<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#include </span><span class="Constant">&lt;string.h&gt;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&lt;stdbool.h&gt;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&quot;defs.h&quot;<br/></li>
<li></span><br/></li>
<li><span class="Comment">/*&nbsp; The <a href="#L36" title="ocaml/yacc/reader.c:36">line</a> size must be a positive integer.&nbsp; One hundred was chosen&nbsp; &nbsp; &nbsp; */<br/></li>
<li></span><span class="Comment">/*&nbsp; because few lines in Yacc input grammars exceed 100 characters.&nbsp; &nbsp; &nbsp; &nbsp; */<br/></li>
<li></span><span class="Comment">/*&nbsp; Note that if a <a href="#L36" title="ocaml/yacc/reader.c:36">line</a> exceeds <a href="#L27" title="ocaml/yacc/reader.c:27">LINESIZE</a> characters, the <a href="#L36" title="ocaml/yacc/reader.c:36">line</a> <a href="#L70" title="ocaml/yacc/reader.c:70">buffer</a>&nbsp; &nbsp; &nbsp;&nbsp; */<br/></li>
<li></span><span class="Comment">/*&nbsp; will be expanded to accommodate it.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; */<br/></li>
<li></span><br/></li>
<li><a id="L27">&#x200c;</a><span class="PreProc">#define <span class="linkable">LINESIZE</span> </span><span class="Constant">100<br/></li>
<li></span><br/></li>
<li><a id="L29">&#x200c;</a><span class="Type">char</span> *<span class="linkable">cache</span>;<br/></li>
<li><a id="L30">&#x200c;</a><a id="L30">&#x200c;</a><span class="Type">int</span> <span class="linkable">cinc</span>, <span class="linkable">cache_size</span>;<br/></li>
<li><br/></li>
<li><a id="L32">&#x200c;</a><a id="L32">&#x200c;</a><span class="Type">int</span> <span class="linkable">ntags</span>, <span class="linkable">tagmax</span>;<br/></li>
<li><a id="L33">&#x200c;</a><span class="Type">char</span> **<span class="linkable">tag_table</span>;<br/></li>
<li><br/></li>
<li><a id="L35">&#x200c;</a><span class="Type">char</span> <span class="linkable">saw_eof</span>;<br/></li>
<li><a id="L36">&#x200c;</a><a id="L36">&#x200c;</a><span class="Type">char</span> *<span class="linkable">cptr</span>, *<span class="linkable">line</span>;<br/></li>
<li><a id="L37">&#x200c;</a><span class="Type">int</span> <span class="linkable">linesize</span>;<br/></li>
<li><br/></li>
<li><a id="L39">&#x200c;</a><a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> *<span class="linkable">goal</span>;<br/></li>
<li><a id="L40">&#x200c;</a><span class="Type">int</span> <span class="linkable">prec</span>;<br/></li>
<li><a id="L41">&#x200c;</a><span class="Type">int</span> <span class="linkable">gensym</span>;<br/></li>
<li><a id="L42">&#x200c;</a><span class="Type">char</span> <span class="linkable">last_was_action</span>;<br/></li>
<li><br/></li>
<li><a id="L44">&#x200c;</a><span class="Type">int</span> <span class="linkable">maxitems</span>;<br/></li>
<li><a id="L45">&#x200c;</a><a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> **<span class="linkable">pitem</span>;<br/></li>
<li><br/></li>
<li><a id="L47">&#x200c;</a><span class="Type">int</span> <span class="linkable">maxrules</span>;<br/></li>
<li><a id="L48">&#x200c;</a><a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> **<span class="linkable">plhs</span>;<br/></li>
<li><br/></li>
<li><a id="L50">&#x200c;</a><span class="Type">int</span> <span class="linkable">name_pool_size</span>;<br/></li>
<li><a id="L51">&#x200c;</a><span class="Type">char</span> *<span class="linkable">name_pool</span>;<br/></li>
<li><br/></li>
<li><a id="L53">&#x200c;</a><span class="Type">static</span> <span class="Type">int</span> <span class="linkable">safe_putc</span>(<span class="Type">int</span> x, <span class="Type">FILE</span> *f) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> f == <span class="Constant">NULL</span> ? x : putc(x, f);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L57">&#x200c;</a><span class="Type">static</span> <span class="Type">size_t</span> <span class="linkable">safe_fwrite</span>(<span class="Type">void</span> *ptr, <span class="Type">size_t</span> nmemb, <span class="Type">FILE</span> *f) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> f == <span class="Constant">NULL</span> ? nmemb : fwrite(ptr, <span class="Constant">1</span>, nmemb, f);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L61">&#x200c;</a><span class="Type">static</span> <span class="Type">unsigned</span> <span class="Type">char</span> <span class="linkable">caml_ident_start</span>[<span class="Constant">32</span>] =<br/></li>
<li><span class="Constant">&quot;</span><span class="Special">\000\000\000\000\000\000\000\000\376\377\377\207\376\377\377\007\000\000\000\000\000\000\000\000\377\377\177\377\377\377\177\377</span><span class="Constant">&quot;</span>;<br/></li>
<li><a id="L63">&#x200c;</a><span class="Type">static</span> <span class="Type">unsigned</span> <span class="Type">char</span> <span class="linkable">caml_ident_body</span>[<span class="Constant">32</span>] =<br/></li>
<li><span class="Constant">&quot;</span><span class="Special">\000\000\000\000\200\000\377\003\376\377\377\207\376\377\377\007\000\000\000\000\000\000\000\000\377\377\177\377\377\377\177\377</span><span class="Constant">&quot;</span>;<br/></li>
<li><br/></li>
<li><a id="L66">&#x200c;</a><span class="PreProc">#define <span class="linkable">In_bitmap</span>(bm,c) (bm[(</span><span class="Type">unsigned</span><span class="PreProc"> </span><span class="Type">char</span><span class="PreProc">)(c) &gt;&gt; </span><span class="Constant">3</span><span class="PreProc">] &amp; (</span><span class="Constant">1</span><span class="PreProc"> &lt;&lt; ((c) &amp; </span><span class="Constant">7</span><span class="PreProc">)))<br/></li>
<li></span><br/></li>
<li><span class="Type">void</span> <a href="#L1076" title="ocaml/yacc/reader.c:1076">start_rule</a> (<a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> *bp, <span class="Type">int</span> s_lineno);<br/></li>
<li><br/></li>
<li><a id="L70">&#x200c;</a><span class="Type">static</span> <span class="Type">char</span> *<span class="linkable">buffer</span>;<br/></li>
<li><a id="L71">&#x200c;</a><span class="Type">static</span> <span class="Type">size_t</span> <span class="linkable">length</span>;<br/></li>
<li><a id="L72">&#x200c;</a><span class="Type">static</span> <span class="Type">size_t</span> <span class="linkable">capacity</span>;<br/></li>
<li><a id="L73">&#x200c;</a><span class="Type">static</span> <span class="Type">void</span> <span class="linkable">push_stack</span>(<span class="Type">char</span> x) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L71" title="ocaml/yacc/reader.c:71">length</a> - <span class="Constant">1</span> &gt;= <a href="#L72" title="ocaml/yacc/reader.c:72">capacity</a>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L70" title="ocaml/yacc/reader.c:70">buffer</a> = realloc(<a href="#L70" title="ocaml/yacc/reader.c:70">buffer</a>, <a href="#L72" title="ocaml/yacc/reader.c:72">capacity</a> = <span class="Constant">3</span>*<a href="#L71" title="ocaml/yacc/reader.c:71">length</a>/<span class="Constant">2</span> + <span class="Constant">100</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (!<a href="#L70" title="ocaml/yacc/reader.c:70">buffer</a>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <a href="#L70" title="ocaml/yacc/reader.c:70">buffer</a>[++<a href="#L71" title="ocaml/yacc/reader.c:71">length</a>] = x;<br/></li>
<li>&nbsp; &nbsp; <a href="#L70" title="ocaml/yacc/reader.c:70">buffer</a>[<span class="Constant">0</span>] = <span class="Special">'\1'</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L82">&#x200c;</a><span class="Type">static</span> <span class="Type">void</span> <span class="linkable">pop_stack</span>(<span class="Type">char</span> x) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (!<a href="#L70" title="ocaml/yacc/reader.c:70">buffer</a> || <a href="#L70" title="ocaml/yacc/reader.c:70">buffer</a>[<a href="#L71" title="ocaml/yacc/reader.c:71">length</a>--] != x) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">switch</span> (x) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <span class="Constant">'{'</span>: x = <span class="Constant">'}'</span>; <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <span class="Constant">'('</span>: x = <span class="Constant">')'</span>; <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">default</span>: <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; fprintf(<span class="Constant">stderr</span>, <span class="Constant">&quot;Mismatched parentheses or braces: '</span><span class="Special">%c</span><span class="Constant">'</span><span class="Special">\n</span><span class="Constant">&quot;</span>, x);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L89" title="ocaml/yacc/error.c:89">syntax_error</a>(<a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> - <span class="Constant">1</span>);<br/></li>
<li>&nbsp;&nbsp; }<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L94">&#x200c;</a><span class="Type">static</span> <span class="Type">void</span> <span class="linkable">cachec</span>(<span class="Type">int</span> c)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; assert(<a href="#L30" title="ocaml/yacc/reader.c:30">cinc</a> &gt;= <span class="Constant">0</span>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L30" title="ocaml/yacc/reader.c:30">cinc</a> &gt;= <a href="#L30" title="ocaml/yacc/reader.c:30">cache_size</a>)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L30" title="ocaml/yacc/reader.c:30">cache_size</a> += <span class="Constant">256</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L29" title="ocaml/yacc/reader.c:29">cache</a> = <a href="defs.h.html#L127" title="ocaml/yacc/defs.h:127">REALLOC</a>(<a href="#L29" title="ocaml/yacc/reader.c:29">cache</a>, <a href="#L30" title="ocaml/yacc/reader.c:30">cache_size</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L29" title="ocaml/yacc/reader.c:29">cache</a> == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <a href="#L29" title="ocaml/yacc/reader.c:29">cache</a>[<a href="#L30" title="ocaml/yacc/reader.c:30">cinc</a>] = c;<br/></li>
<li>&nbsp; &nbsp; ++<a href="#L30" title="ocaml/yacc/reader.c:30">cinc</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><a id="L108">&#x200c;</a><span class="Type">static</span> <span class="Type">void</span> <span class="linkable">get_line</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">FILE</span> *f = <a href="main.c.html#L71" title="ocaml/yacc/main.c:71">input_file</a>;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> c;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> i;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L35" title="ocaml/yacc/reader.c:35">saw_eof</a> || (c = getc(f)) == <span class="Constant">EOF</span>)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a>) { <a href="defs.h.html#L123" title="ocaml/yacc/defs.h:123">FREE</a>(<a href="#L36" title="ocaml/yacc/reader.c:36">line</a>); <a href="#L36" title="ocaml/yacc/reader.c:36">line</a> = <span class="Constant">0</span>; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L35" title="ocaml/yacc/reader.c:35">saw_eof</a> = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a> == <span class="Constant">0</span> || <a href="#L37" title="ocaml/yacc/reader.c:37">linesize</a> != (<a href="#L27" title="ocaml/yacc/reader.c:27">LINESIZE</a> + <span class="Constant">1</span>))<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a>) <a href="defs.h.html#L123" title="ocaml/yacc/defs.h:123">FREE</a>(<a href="#L36" title="ocaml/yacc/reader.c:36">line</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L37" title="ocaml/yacc/reader.c:37">linesize</a> = <a href="#L27" title="ocaml/yacc/reader.c:27">LINESIZE</a> + <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L36" title="ocaml/yacc/reader.c:36">line</a> = <a href="defs.h.html#L124" title="ocaml/yacc/defs.h:124">MALLOC</a>(<a href="#L37" title="ocaml/yacc/reader.c:37">linesize</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a> == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; i = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; ++<a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (;;)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>[i]&nbsp; =&nbsp; c;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (++i &gt;= <a href="#L37" title="ocaml/yacc/reader.c:37">linesize</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L37" title="ocaml/yacc/reader.c:37">linesize</a> += <a href="#L27" title="ocaml/yacc/reader.c:27">LINESIZE</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L36" title="ocaml/yacc/reader.c:36">line</a> = <a href="defs.h.html#L127" title="ocaml/yacc/defs.h:127">REALLOC</a>(<a href="#L36" title="ocaml/yacc/reader.c:36">line</a>, <a href="#L37" title="ocaml/yacc/reader.c:37">linesize</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a> ==&nbsp; <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Special">'\n'</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (i &gt;= <span class="Constant">2</span> &amp;&amp; <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>[i-<span class="Constant">2</span>] == <span class="Special">'\r'</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>[i-<span class="Constant">2</span>] = <span class="Special">'\n'</span>; i--;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>[i] = <span class="Special">'\0'</span>; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> = <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; c = getc(f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c ==&nbsp; <span class="Constant">EOF</span>) { <a href="#L35" title="ocaml/yacc/reader.c:35">saw_eof</a> = <span class="Constant">1</span>; c = <span class="Special">'\n'</span>; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">char</span> *<br/></li>
<li><a id="L154">&#x200c;</a><span class="linkable">dup_line</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span> *p, *s, *t;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a> == <span class="Constant">0</span>) <span class="Statement">return</span> (<span class="Constant">0</span>);<br/></li>
<li>&nbsp; &nbsp; s = <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">while</span> (*s != <span class="Special">'\n'</span>) ++s;<br/></li>
<li>&nbsp; &nbsp; p = <a href="defs.h.html#L124" title="ocaml/yacc/defs.h:124">MALLOC</a>(s - <a href="#L36" title="ocaml/yacc/reader.c:36">line</a> + <span class="Constant">1</span>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (p == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; s = <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>;<br/></li>
<li>&nbsp; &nbsp; t = p;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">while</span> ((*t++ = *s++) != <span class="Special">'\n'</span>) <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> (p);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><a id="L171">&#x200c;</a><span class="Type">static</span> <span class="Type">void</span> <span class="linkable">skip_comment</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span> *s;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> st_lineno = <a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span> *st_line = <a href="#L154" title="ocaml/yacc/reader.c:154">dup_line</a>();<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span> *st_cptr = st_line + (<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> - <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; s = <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> + <span class="Constant">2</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (;;)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (*s == <span class="Constant">'*'</span> &amp;&amp; s[<span class="Constant">1</span>] == <span class="Constant">'/'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> = s + <span class="Constant">2</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="defs.h.html#L123" title="ocaml/yacc/defs.h:123">FREE</a>(st_line);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (*s == <span class="Special">'\n'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L108" title="ocaml/yacc/reader.c:108">get_line</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a> == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L95" title="ocaml/yacc/error.c:95">unterminated_comment</a>(st_lineno, st_line, st_cptr, <span class="Constant">'/'</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s = <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ++s;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L200">&#x200c;</a><span class="Type">static</span> <span class="Type">void</span> <span class="linkable">process_quoted_string</span>(<span class="Type">char</span> c, <span class="Type">FILE</span> *<span class="Type">const</span> f)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> s_lineno = <a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span> *s_line = <a href="#L154" title="ocaml/yacc/reader.c:154">dup_line</a>();<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span> *s_cptr = s_line + (<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> - <a href="#L36" title="ocaml/yacc/reader.c:36">line</a> - <span class="Constant">1</span>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span> quote = c;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (;;)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; c = *<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>++;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L53" title="ocaml/yacc/reader.c:53">safe_putc</a>(c, f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c == quote)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="defs.h.html#L123" title="ocaml/yacc/defs.h:123">FREE</a>(s_line);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Special">'\n'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L109" title="ocaml/yacc/error.c:109">unterminated_string</a>(s_lineno, s_line, s_cptr);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Special">'\\'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; c = *<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>++;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L53" title="ocaml/yacc/reader.c:53">safe_putc</a>(c, f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Special">'\n'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L108" title="ocaml/yacc/reader.c:108">get_line</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a> == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L109" title="ocaml/yacc/error.c:109">unterminated_string</a>(s_lineno, s_line, s_cptr);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L232">&#x200c;</a><span class="Type">static</span> <span class="Type">int</span> <span class="linkable">process_apostrophe</span>(<span class="Type">FILE</span> *<span class="Type">const</span> f)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[<span class="Constant">0</span>] != <span class="Constant">0</span> &amp;&amp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[<span class="Constant">0</span>] != <span class="Special">'\\'</span> &amp;&amp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[<span class="Constant">1</span>] == <span class="Special">'\''</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L57" title="ocaml/yacc/reader.c:57">safe_fwrite</a>(<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>, <span class="Constant">2</span>, f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> += <span class="Constant">2</span>;<br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">else</span> <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[<span class="Constant">0</span>] == <span class="Special">'\\'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; (isdigit((<span class="Type">unsigned</span> <span class="Type">char</span>) <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[<span class="Constant">1</span>]) || <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[<span class="Constant">1</span>] == <span class="Constant">'x'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; isdigit((<span class="Type">unsigned</span> <span class="Type">char</span>) <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[<span class="Constant">2</span>])<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; isdigit((<span class="Type">unsigned</span> <span class="Type">char</span>) <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[<span class="Constant">3</span>])<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[<span class="Constant">4</span>] == <span class="Special">'\''</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L57" title="ocaml/yacc/reader.c:57">safe_fwrite</a>(<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>, <span class="Constant">5</span>, f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> += <span class="Constant">5</span>;<br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">else</span> <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[<span class="Constant">0</span>] == <span class="Special">'\\'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[<span class="Constant">1</span>] == <span class="Constant">'o'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[<span class="Constant">2</span>] &gt;= <span class="Constant">'0'</span> &amp;&amp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[<span class="Constant">2</span>] &lt;= <span class="Constant">'3'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[<span class="Constant">3</span>] &gt;= <span class="Constant">'0'</span> &amp;&amp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[<span class="Constant">3</span>] &lt;= <span class="Constant">'7'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[<span class="Constant">4</span>] &gt;= <span class="Constant">'0'</span> &amp;&amp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[<span class="Constant">4</span>] &lt;= <span class="Constant">'7'<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;&amp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[<span class="Constant">5</span>] == <span class="Special">'\''</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L57" title="ocaml/yacc/reader.c:57">safe_fwrite</a>(<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>, <span class="Constant">6</span>, f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> += <span class="Constant">6</span>;<br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">else</span> <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[<span class="Constant">0</span>] == <span class="Special">'\\'</span> &amp;&amp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[<span class="Constant">2</span>] == <span class="Special">'\''</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L57" title="ocaml/yacc/reader.c:57">safe_fwrite</a>(<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>, <span class="Constant">3</span>, f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> += <span class="Constant">3</span>;<br/></li>
<li>&nbsp; &nbsp; } <span class="Statement">else</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">1</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L261">&#x200c;</a><span class="Type">static</span> <span class="Type">void</span> <span class="linkable">process_apostrophe_body</span>(<span class="Type">FILE</span> *f)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (!<a href="#L232" title="ocaml/yacc/reader.c:232">process_apostrophe</a>(f)) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">while</span> (<a href="#L66" title="ocaml/yacc/reader.c:66">In_bitmap</a>(<a href="#L63" title="ocaml/yacc/reader.c:63">caml_ident_body</a>, *<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>)) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; putc(*<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>, f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>++;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L271">&#x200c;</a><span class="Type">static</span> <span class="Type">bool</span> <span class="linkable">is_ocaml_ident_start_char</span>(<span class="Type">char</span> p) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> p == <span class="Constant">'_'</span> || (p &gt;= <span class="Constant">'a'</span> &amp;&amp; p &lt;= <span class="Constant">'z'</span>);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L275">&#x200c;</a><span class="Type">static</span> <span class="Type">void</span> <span class="linkable">process_open_curly_bracket</span>(<span class="Type">FILE</span> *f) {<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span> *idcptr = <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (*idcptr == <span class="Constant">'%'</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (*++idcptr == <span class="Constant">'%'</span>) idcptr++;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L66" title="ocaml/yacc/reader.c:66">In_bitmap</a>(<a href="#L61" title="ocaml/yacc/reader.c:61">caml_ident_start</a>, *idcptr)) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; idcptr++;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">while</span> (<a href="#L66" title="ocaml/yacc/reader.c:66">In_bitmap</a>(<a href="#L63" title="ocaml/yacc/reader.c:63">caml_ident_body</a>, *idcptr)) idcptr++;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">while</span> (*idcptr == <span class="Constant">'.'</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; idcptr++;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L66" title="ocaml/yacc/reader.c:66">In_bitmap</a>(<a href="#L61" title="ocaml/yacc/reader.c:61">caml_ident_start</a>, *idcptr)) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; idcptr++;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">while</span> (<a href="#L66" title="ocaml/yacc/reader.c:66">In_bitmap</a>(<a href="#L63" title="ocaml/yacc/reader.c:63">caml_ident_body</a>, *idcptr)) idcptr++;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">while</span> (*idcptr == <span class="Constant">' '</span> || *idcptr == <span class="Constant">9</span> || *idcptr == <span class="Constant">12</span>) idcptr++;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; } <span class="Statement">else</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L271" title="ocaml/yacc/reader.c:271">is_ocaml_ident_start_char</a>(*idcptr) || *idcptr == <span class="Constant">'|'</span>)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">char</span> *newcptr = idcptr;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">size_t</span> size = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">char</span> *buf;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">while</span> (<a href="#L271" title="ocaml/yacc/reader.c:271">is_ocaml_ident_start_char</a>(*newcptr)) { newcptr++; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (*newcptr == <span class="Constant">'|'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; { <span class="Comment">/* Raw string */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> s_lineno;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">char</span> *s_line;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">char</span> *s_cptr;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; size = newcptr - idcptr;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; buf = <a href="defs.h.html#L124" title="ocaml/yacc/defs.h:124">MALLOC</a>(size + <span class="Constant">2</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (!buf) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; memcpy(buf, idcptr, size);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; buf[size] = <span class="Constant">'}'</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; buf[size + <span class="Constant">1</span>] = <span class="Special">'\0'</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L57" title="ocaml/yacc/reader.c:57">safe_fwrite</a>(<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>, newcptr - <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> + <span class="Constant">1</span>, f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> = newcptr + <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s_lineno = <a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s_line = <a href="#L154" title="ocaml/yacc/reader.c:154">dup_line</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s_cptr = s_line + (<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> - <a href="#L36" title="ocaml/yacc/reader.c:36">line</a> - <span class="Constant">1</span>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">for</span> (;;)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">char</span> c = *<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>++;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L53" title="ocaml/yacc/reader.c:53">safe_putc</a>(c, f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">'|'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> match = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">size_t</span> i;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">0</span>; i &lt;= size; ++i) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[i] != buf[i]) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; match = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (match) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="defs.h.html#L123" title="ocaml/yacc/defs.h:123">FREE</a>(s_line);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="defs.h.html#L123" title="ocaml/yacc/defs.h:123">FREE</a>(buf);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L57" title="ocaml/yacc/reader.c:57">safe_fwrite</a>(<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>, size, f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> += size;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Special">'\n'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L108" title="ocaml/yacc/reader.c:108">get_line</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a> == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L109" title="ocaml/yacc/error.c:109">unterminated_string</a>(s_lineno, s_line, s_cptr);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="defs.h.html#L123" title="ocaml/yacc/defs.h:123">FREE</a>(buf);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L357">&#x200c;</a><span class="Type">static</span> <span class="Type">void</span> <span class="linkable">process_comment</span>(<span class="Type">FILE</span> *<span class="Type">const</span> f) {<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span> c = *<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">unsigned</span> depth = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">'*'</span>)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> c_lineno = <a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">char</span> *c_line = <a href="#L154" title="ocaml/yacc/reader.c:154">dup_line</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">char</span> *c_cptr = c_line + (<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> - <a href="#L36" title="ocaml/yacc/reader.c:36">line</a> - <span class="Constant">1</span>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L53" title="ocaml/yacc/reader.c:53">safe_putc</a>(<span class="Constant">'*'</span>, f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; ++<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">for</span> (;;)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; c = *<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>++;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L53" title="ocaml/yacc/reader.c:53">safe_putc</a>(c, f);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">switch</span> (c)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <span class="Constant">'*'</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (*<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> == <span class="Constant">')'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; depth--;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (depth == <span class="Constant">0</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="defs.h.html#L123" title="ocaml/yacc/defs.h:123">FREE</a>(c_line);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <span class="Special">'\n'</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L108" title="ocaml/yacc/reader.c:108">get_line</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a> == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L95" title="ocaml/yacc/error.c:95">unterminated_comment</a>(c_lineno, c_line, c_cptr, <span class="Constant">'('</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <span class="Constant">'('</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (*<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> == <span class="Constant">'*'</span>) ++depth;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <span class="Special">'\''</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L232" title="ocaml/yacc/reader.c:232">process_apostrophe</a>(f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <span class="Constant">'&quot;'</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L200" title="ocaml/yacc/reader.c:200">process_quoted_string</a>(c, f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <span class="Constant">'{'</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L275" title="ocaml/yacc/reader.c:275">process_open_curly_bracket</a>(f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">default</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L66" title="ocaml/yacc/reader.c:66">In_bitmap</a>(<a href="#L61" title="ocaml/yacc/reader.c:61">caml_ident_start</a>, c)) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">while</span> (<a href="#L66" title="ocaml/yacc/reader.c:66">In_bitmap</a>(<a href="#L63" title="ocaml/yacc/reader.c:63">caml_ident_body</a>, *<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>)) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L53" title="ocaml/yacc/reader.c:53">safe_putc</a>(*<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>, f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>++;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L415">&#x200c;</a><span class="Type">static</span> <span class="Type">char</span> *<span class="linkable">substring</span> (<span class="Type">char</span> *str, <span class="Type">int</span> start, <span class="Type">int</span> len)<br/></li>
<li>{<br/></li>
<li>&nbsp; <span class="Type">int</span> i;<br/></li>
<li>&nbsp; <span class="Type">char</span> *buf = <a href="defs.h.html#L124" title="ocaml/yacc/defs.h:124">MALLOC</a> (len+<span class="Constant">1</span>);<br/></li>
<li>&nbsp; <span class="Statement">if</span> (buf == <span class="Constant">NULL</span>) <span class="Statement">return</span> <span class="Constant">NULL</span>;<br/></li>
<li>&nbsp; <span class="Statement">for</span> (i = <span class="Constant">0</span>; i &lt; len; i++){<br/></li>
<li>&nbsp; &nbsp; buf[i] = str[start+i];<br/></li>
<li>&nbsp; }<br/></li>
<li>&nbsp; buf[i] = <span class="Special">'\0'</span>;&nbsp; &nbsp; &nbsp; <span class="Comment">/* PR#4796 */<br/></li>
<li></span>&nbsp; <span class="Statement">return</span> buf;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L427">&#x200c;</a><span class="Type">static</span> <span class="Type">void</span> <span class="linkable">parse_line_directive</span> (<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; <span class="Type">int</span> i = <span class="Constant">0</span>, j = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; <span class="Type">int</span> line_number = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; <span class="Type">char</span> *file_name = <span class="Constant">NULL</span>;<br/></li>
<li><br/></li>
<li> <span class="Statement">again</span><span class="cUserCont">:<br/></li>
<li></span>&nbsp; <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a> == <span class="Constant">0</span>) <span class="Statement">return</span>;<br/></li>
<li>&nbsp; <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a>[i] != <span class="Constant">'#'</span>) <span class="Statement">return</span>;<br/></li>
<li>&nbsp; ++ i;<br/></li>
<li>&nbsp; <span class="Statement">while</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a>[i] == <span class="Constant">' '</span> || <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>[i] == <span class="Special">'\t'</span>) ++ i;<br/></li>
<li>&nbsp; <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a>[i] &lt; <span class="Constant">'0'</span> || <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>[i] &gt; <span class="Constant">'9'</span>) <span class="Statement">return</span>;<br/></li>
<li>&nbsp; <span class="Statement">while</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a>[i] &gt;= <span class="Constant">'0'</span> &amp;&amp; <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>[i] &lt;= <span class="Constant">'9'</span>){<br/></li>
<li>&nbsp; &nbsp; line_number = line_number * <span class="Constant">10</span> + <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>[i] - <span class="Constant">'0'</span>;<br/></li>
<li>&nbsp; &nbsp; ++ i;<br/></li>
<li>&nbsp; }<br/></li>
<li>&nbsp; <span class="Statement">while</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a>[i] == <span class="Constant">' '</span> || <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>[i] == <span class="Special">'\t'</span>) ++ i;<br/></li>
<li>&nbsp; <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a>[i] == <span class="Constant">'&quot;'</span>){<br/></li>
<li>&nbsp; &nbsp; ++ i;<br/></li>
<li>&nbsp; &nbsp; j = i;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">while</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a>[j] != <span class="Constant">'&quot;'</span> &amp;&amp; <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>[j] != <span class="Special">'\0'</span>) ++j;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a>[j] == <span class="Constant">'&quot;'</span>){<br/></li>
<li>&nbsp; &nbsp; &nbsp; file_name = <a href="#L415" title="ocaml/yacc/reader.c:415">substring</a> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a>, i, j - i);<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (file_name == <span class="Constant">NULL</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a> ();<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; }<br/></li>
<li>&nbsp; <a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a> = line_number - <span class="Constant">1</span>;<br/></li>
<li>&nbsp; <span class="Statement">if</span> (file_name != <span class="Constant">NULL</span>){<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="main.c.html#L49" title="ocaml/yacc/main.c:49">virtual_input_file_name</a> != <span class="Constant">NULL</span>) <a href="defs.h.html#L123" title="ocaml/yacc/defs.h:123">FREE</a> (<a href="main.c.html#L49" title="ocaml/yacc/main.c:49">virtual_input_file_name</a>);<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L49" title="ocaml/yacc/main.c:49">virtual_input_file_name</a> = file_name;<br/></li>
<li>&nbsp; }<br/></li>
<li>&nbsp; <a href="#L108" title="ocaml/yacc/reader.c:108">get_line</a> ();<br/></li>
<li>&nbsp; <span class="Statement">goto</span> again;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">int<br/></li>
<li><a id="L463">&#x200c;</a></span><span class="linkable">nextc</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span> *s;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a> == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L108" title="ocaml/yacc/reader.c:108">get_line</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L427" title="ocaml/yacc/reader.c:427">parse_line_directive</a> ();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a> == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> (<span class="Constant">EOF</span>);<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; s = <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (;;)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">switch</span> (*s)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <span class="Special">'\n'</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L108" title="ocaml/yacc/reader.c:108">get_line</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L427" title="ocaml/yacc/reader.c:427">parse_line_directive</a> ();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a> == <span class="Constant">0</span>) <span class="Statement">return</span> (<span class="Constant">EOF</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s = <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <span class="Constant">' '</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <span class="Special">'\t'</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <span class="Special">'\f'</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <span class="Special">'\r'</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <span class="Special">'\v'</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <span class="Constant">','</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <span class="Constant">';'</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ++s;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <span class="Special">'\\'</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> = s;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> (<span class="Constant">'%'</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <span class="Constant">'('</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (s[<span class="Constant">1</span>] == <span class="Constant">'*'</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> = s + <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L357" title="ocaml/yacc/reader.c:357">process_comment</a>(<span class="Constant">NULL</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s = <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> + <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } <span class="Statement">else</span> {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> = s;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> (*s);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <span class="Constant">'/'</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (s[<span class="Constant">1</span>] == <span class="Constant">'*'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> = s;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L171" title="ocaml/yacc/reader.c:171">skip_comment</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s = <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else</span> <span class="Statement">if</span> (s[<span class="Constant">1</span>] == <span class="Constant">'/'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L108" title="ocaml/yacc/reader.c:108">get_line</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L427" title="ocaml/yacc/reader.c:427">parse_line_directive</a> ();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a> == <span class="Constant">0</span>) <span class="Statement">return</span> (<span class="Constant">EOF</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; s = <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">/* fall through */<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">default</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> = s;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> (*s);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">int<br/></li>
<li><a id="L537">&#x200c;</a></span><span class="linkable">keyword</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> c;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span> *t_cptr = <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; c = *++<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (isalpha(c))<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L30" title="ocaml/yacc/reader.c:30">cinc</a> = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">for</span> (;;)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (isalpha(c))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (isupper(c)) c = tolower(c);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L94" title="ocaml/yacc/reader.c:94">cachec</a>(c);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else</span> <span class="Statement">if</span> (isdigit(c) || c == <span class="Constant">'_'</span> || c == <span class="Constant">'.'</span> || c == <span class="Constant">'$'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L94" title="ocaml/yacc/reader.c:94">cachec</a>(c);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; c = *++<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L94" title="ocaml/yacc/reader.c:94">cachec</a>(<a href="defs.h.html#L59" title="ocaml/yacc/defs.h:59">NUL</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (strcmp(<a href="#L29" title="ocaml/yacc/reader.c:29">cache</a>, <span class="Constant">&quot;token&quot;</span>) == <span class="Constant">0</span> || strcmp(<a href="#L29" title="ocaml/yacc/reader.c:29">cache</a>, <span class="Constant">&quot;term&quot;</span>) == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> (<a href="defs.h.html#L80" title="ocaml/yacc/defs.h:80">TOKEN</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (strcmp(<a href="#L29" title="ocaml/yacc/reader.c:29">cache</a>, <span class="Constant">&quot;type&quot;</span>) == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> (<a href="defs.h.html#L86" title="ocaml/yacc/defs.h:86">TYPE</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (strcmp(<a href="#L29" title="ocaml/yacc/reader.c:29">cache</a>, <span class="Constant">&quot;left&quot;</span>) == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> (<a href="defs.h.html#L81" title="ocaml/yacc/defs.h:81">LEFT</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (strcmp(<a href="#L29" title="ocaml/yacc/reader.c:29">cache</a>, <span class="Constant">&quot;right&quot;</span>) == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> (<a href="defs.h.html#L82" title="ocaml/yacc/defs.h:82">RIGHT</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (strcmp(<a href="#L29" title="ocaml/yacc/reader.c:29">cache</a>, <span class="Constant">&quot;nonassoc&quot;</span>) == <span class="Constant">0</span> || strcmp(<a href="#L29" title="ocaml/yacc/reader.c:29">cache</a>, <span class="Constant">&quot;binary&quot;</span>) == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> (<a href="defs.h.html#L83" title="ocaml/yacc/defs.h:83">NONASSOC</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (strcmp(<a href="#L29" title="ocaml/yacc/reader.c:29">cache</a>, <span class="Constant">&quot;start&quot;</span>) == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> (<a href="defs.h.html#L87" title="ocaml/yacc/defs.h:87">START</a>);<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; ++<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">'{'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> (<a href="defs.h.html#L85" title="ocaml/yacc/defs.h:85">TEXT</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">'%'</span> || c == <span class="Special">'\\'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> (<a href="defs.h.html#L84" title="ocaml/yacc/defs.h:84">MARK</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">'&lt;'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> (<a href="defs.h.html#L81" title="ocaml/yacc/defs.h:81">LEFT</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">'&gt;'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> (<a href="defs.h.html#L82" title="ocaml/yacc/defs.h:82">RIGHT</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">'0'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> (<a href="defs.h.html#L80" title="ocaml/yacc/defs.h:80">TOKEN</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">'2'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> (<a href="defs.h.html#L83" title="ocaml/yacc/defs.h:83">NONASSOC</a>);<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <a href="error.c.html#L89" title="ocaml/yacc/error.c:89">syntax_error</a>(<a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>, t_cptr);<br/></li>
<li>&nbsp; &nbsp; <span class="Comment">/*NOTREACHED*/<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">return</span> <span class="Constant">0</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L595">&#x200c;</a><span class="Type">static</span> <span class="Type">void</span> <span class="linkable">copy_text</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> c;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">FILE</span> *f = <a href="main.c.html#L73" title="ocaml/yacc/main.c:73">text_file</a>;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> need_newline = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> t_lineno = <a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span> *t_line = <a href="#L154" title="ocaml/yacc/reader.c:154">dup_line</a>();<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span> *t_cptr = t_line + (<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> - <a href="#L36" title="ocaml/yacc/reader.c:36">line</a> - <span class="Constant">2</span>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (*<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> == <span class="Special">'\n'</span>)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L108" title="ocaml/yacc/reader.c:108">get_line</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a> == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L115" title="ocaml/yacc/error.c:115">unterminated_text</a>(t_lineno, t_line, t_cptr);<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; fprintf(f, <a href="defs.h.html#L265" title="ocaml/yacc/defs.h:265">line_format</a>, <a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>, <a href="main.c.html#L58" title="ocaml/yacc/main.c:58">input_file_name_disp</a>);<br/></li>
<li><br/></li>
<li><span class="Statement">loop</span><span class="cUserCont">:<br/></li>
<li></span>&nbsp; &nbsp; c = *<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>++;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">switch</span> (c)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">case</span> <span class="Special">'\n'</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; putc(<span class="Special">'\n'</span>, f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; need_newline = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L108" title="ocaml/yacc/reader.c:108">get_line</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a>) <span class="Statement">goto</span> loop;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L115" title="ocaml/yacc/error.c:115">unterminated_text</a>(t_lineno, t_line, t_cptr);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">case</span> <span class="Constant">'&quot;'</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; putc(c, f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L200" title="ocaml/yacc/reader.c:200">process_quoted_string</a>(c, f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">goto</span> loop;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">case</span> <span class="Special">'\''</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; putc(c, f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L261" title="ocaml/yacc/reader.c:261">process_apostrophe_body</a>(f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">goto</span> loop;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">case</span> <span class="Constant">'('</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; putc(c, f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; need_newline = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L357" title="ocaml/yacc/reader.c:357">process_comment</a>(f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">goto</span> loop;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">case</span> <span class="Constant">'%'</span>:<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">case</span> <span class="Special">'\\'</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (*<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> == <span class="Constant">'}'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (need_newline) putc(<span class="Special">'\n'</span>, f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ++<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="defs.h.html#L123" title="ocaml/yacc/defs.h:123">FREE</a>(t_line);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">/* fall through */<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">case</span> <span class="Constant">'{'</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; putc(c, f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L275" title="ocaml/yacc/reader.c:275">process_open_curly_bracket</a>(f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">goto</span> loop;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">default</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; putc(c, f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L66" title="ocaml/yacc/reader.c:66">In_bitmap</a>(<a href="#L61" title="ocaml/yacc/reader.c:61">caml_ident_start</a>, c)) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">while</span> (<a href="#L66" title="ocaml/yacc/reader.c:66">In_bitmap</a>(<a href="#L63" title="ocaml/yacc/reader.c:63">caml_ident_body</a>, *<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>)) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; putc(*<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>, f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>++;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; need_newline = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">goto</span> loop;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">int<br/></li>
<li><a id="L669">&#x200c;</a></span><span class="linkable">is_reserved</span>(<span class="Type">char</span> *name)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span> *s;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (strcmp(name, <span class="Constant">&quot;.&quot;</span>) == <span class="Constant">0</span> ||<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; strcmp(name, <span class="Constant">&quot;$accept&quot;</span>) == <span class="Constant">0</span> ||<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; strcmp(name, <span class="Constant">&quot;$end&quot;</span>) == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> (<span class="Constant">1</span>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (name[<span class="Constant">0</span>] == <span class="Constant">'$'</span> &amp;&amp; name[<span class="Constant">1</span>] == <span class="Constant">'$'</span> &amp;&amp; isdigit((<span class="Type">unsigned</span> <span class="Type">char</span>) name[<span class="Constant">2</span>]))<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; s = name + <span class="Constant">3</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">while</span> (isdigit((<span class="Type">unsigned</span> <span class="Type">char</span>) *s)) ++s;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (*s == <a href="defs.h.html#L59" title="ocaml/yacc/defs.h:59">NUL</a>) <span class="Statement">return</span> (<span class="Constant">1</span>);<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> (<span class="Constant">0</span>);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> *<br/></li>
<li><a id="L690">&#x200c;</a><span class="linkable">get_name</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> c;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="#L30" title="ocaml/yacc/reader.c:30">cinc</a> = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (c = *<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>; <a href="defs.h.html#L109" title="ocaml/yacc/defs.h:109">IS_IDENT</a>(c); c = *++<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L94" title="ocaml/yacc/reader.c:94">cachec</a>(c);<br/></li>
<li>&nbsp; &nbsp; <a href="#L94" title="ocaml/yacc/reader.c:94">cachec</a>(<a href="defs.h.html#L59" title="ocaml/yacc/defs.h:59">NUL</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L669" title="ocaml/yacc/reader.c:669">is_reserved</a>(<a href="#L29" title="ocaml/yacc/reader.c:29">cache</a>)) <a href="error.c.html#L130" title="ocaml/yacc/error.c:130">used_reserved</a>(<a href="#L29" title="ocaml/yacc/reader.c:29">cache</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> (<a href="symtab.c.html#L72" title="ocaml/yacc/symtab.c:72">lookup</a>(<a href="#L29" title="ocaml/yacc/reader.c:29">cache</a>));<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">int<br/></li>
<li><a id="L706">&#x200c;</a></span><span class="linkable">get_number</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> c;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> n;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; n = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (c = *<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>; isdigit(c); c = *++<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; n = <span class="Constant">10</span>*n + (c - <span class="Constant">'0'</span>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> (n);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">char</span> *<br/></li>
<li><a id="L720">&#x200c;</a><span class="linkable">get_tag</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> c;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> i;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span> *s;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span> *t_line = <a href="#L154" title="ocaml/yacc/reader.c:154">dup_line</a>();<br/></li>
<li>&nbsp; &nbsp; <span class="Type">long</span> bracket_depth;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="#L30" title="ocaml/yacc/reader.c:30">cinc</a> = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; bracket_depth = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">while</span> (<span class="Constant">1</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; c = *++<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">EOF</span>) <a href="error.c.html#L47" title="ocaml/yacc/error.c:47">unexpected_EOF</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Special">'\n'</span>) <a href="error.c.html#L89" title="ocaml/yacc/error.c:89">syntax_error</a>(<a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">'&gt;'</span> &amp;&amp; <span class="Constant">0</span> == bracket_depth &amp;&amp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[-<span class="Constant">1</span>] != <span class="Constant">'-'</span>) <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">'['</span>) ++ bracket_depth;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">']'</span>) -- bracket_depth;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L94" title="ocaml/yacc/reader.c:94">cachec</a>(c);<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; ++<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>;<br/></li>
<li>&nbsp; &nbsp; <a href="#L94" title="ocaml/yacc/reader.c:94">cachec</a>(<a href="defs.h.html#L59" title="ocaml/yacc/defs.h:59">NUL</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">0</span>; i &lt; <a href="#L32" title="ocaml/yacc/reader.c:32">ntags</a>; ++i)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (strcmp(<a href="#L29" title="ocaml/yacc/reader.c:29">cache</a>, <a href="#L33" title="ocaml/yacc/reader.c:33">tag_table</a>[i]) == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> (<a href="#L33" title="ocaml/yacc/reader.c:33">tag_table</a>[i]);<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L32" title="ocaml/yacc/reader.c:32">ntags</a> &gt;= <a href="#L32" title="ocaml/yacc/reader.c:32">tagmax</a>)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L32" title="ocaml/yacc/reader.c:32">tagmax</a> += <span class="Constant">16</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L33" title="ocaml/yacc/reader.c:33">tag_table</a> = (<span class="Type">char</span> **)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (<a href="#L33" title="ocaml/yacc/reader.c:33">tag_table</a> ? <a href="defs.h.html#L127" title="ocaml/yacc/defs.h:127">REALLOC</a>(<a href="#L33" title="ocaml/yacc/reader.c:33">tag_table</a>, <a href="#L32" title="ocaml/yacc/reader.c:32">tagmax</a>*<span class="Statement">sizeof</span>(<span class="Type">char</span> *))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; : <a href="defs.h.html#L124" title="ocaml/yacc/defs.h:124">MALLOC</a>(<a href="#L32" title="ocaml/yacc/reader.c:32">tagmax</a>*<span class="Statement">sizeof</span>(<span class="Type">char</span> *)));<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L33" title="ocaml/yacc/reader.c:33">tag_table</a> == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; s = <a href="defs.h.html#L124" title="ocaml/yacc/defs.h:124">MALLOC</a>(<a href="#L30" title="ocaml/yacc/reader.c:30">cinc</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span>&nbsp; (s == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li>&nbsp; &nbsp; strcpy(s, <a href="#L29" title="ocaml/yacc/reader.c:29">cache</a>);<br/></li>
<li>&nbsp; &nbsp; <a href="#L33" title="ocaml/yacc/reader.c:33">tag_table</a>[<a href="#L32" title="ocaml/yacc/reader.c:32">ntags</a>] = s;<br/></li>
<li>&nbsp; &nbsp; ++<a href="#L32" title="ocaml/yacc/reader.c:32">ntags</a>;<br/></li>
<li>&nbsp; &nbsp; <a href="defs.h.html#L123" title="ocaml/yacc/defs.h:123">FREE</a>(t_line);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> (s);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">void<br/></li>
<li><a id="L768">&#x200c;</a></span><span class="linkable">declare_tokens</span>(<span class="Type">int</span> assoc)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> c, column;<br/></li>
<li>&nbsp; &nbsp; <a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> *bp;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span> *tag = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (assoc != <a href="defs.h.html#L80" title="ocaml/yacc/defs.h:80">TOKEN</a>) ++<a href="#L40" title="ocaml/yacc/reader.c:40">prec</a>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; c = <a href="#L463" title="ocaml/yacc/reader.c:463">nextc</a>();<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">EOF</span>) <a href="error.c.html#L47" title="ocaml/yacc/error.c:47">unexpected_EOF</a>();<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">'&lt;'</span>)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; column = <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> - <a href="#L36" title="ocaml/yacc/reader.c:36">line</a> + <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; tag = <a href="#L720" title="ocaml/yacc/reader.c:720">get_tag</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; c = <a href="#L463" title="ocaml/yacc/reader.c:463">nextc</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">EOF</span>) <a href="error.c.html#L47" title="ocaml/yacc/error.c:47">unexpected_EOF</a>();<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (;;)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (isalpha(c) || c == <span class="Constant">'_'</span> || c == <span class="Constant">'.'</span> || c == <span class="Constant">'$'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bp = <a href="#L690" title="ocaml/yacc/reader.c:690">get_name</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else</span> <span class="Statement">if</span> (c == <span class="Special">'\''</span> || c == <span class="Constant">'&quot;'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L103" title="ocaml/yacc/error.c:103">invalid_literal</a>(<a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (bp == <a href="#L39" title="ocaml/yacc/reader.c:39">goal</a>) <a href="error.c.html#L138" title="ocaml/yacc/error.c:138">tokenized_start</a>(bp-&gt;name);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; bp-&gt;class = <a href="defs.h.html#L92" title="ocaml/yacc/defs.h:92">TERM</a>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (tag)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (bp-&gt;tag &amp;&amp; tag != bp-&gt;tag)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L146" title="ocaml/yacc/error.c:146">retyped_warning</a>(bp-&gt;name);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bp-&gt;tag = tag;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (assoc == <a href="defs.h.html#L80" title="ocaml/yacc/defs.h:80">TOKEN</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bp-&gt;true_token = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (tag) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bp-&gt;<a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a> = <a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bp-&gt;column = column;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (bp-&gt;<a href="#L40" title="ocaml/yacc/reader.c:40">prec</a> &amp;&amp; <a href="#L40" title="ocaml/yacc/reader.c:40">prec</a> != bp-&gt;<a href="#L40" title="ocaml/yacc/reader.c:40">prec</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L153" title="ocaml/yacc/error.c:153">reprec_warning</a>(bp-&gt;name);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bp-&gt;assoc = assoc;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bp-&gt;<a href="#L40" title="ocaml/yacc/reader.c:40">prec</a> = <a href="#L40" title="ocaml/yacc/reader.c:40">prec</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (strcmp(bp-&gt;name, <span class="Constant">&quot;EOF&quot;</span>) == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bp-&gt;value = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; c = <a href="#L463" title="ocaml/yacc/reader.c:463">nextc</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">EOF</span>) <a href="error.c.html#L47" title="ocaml/yacc/error.c:47">unexpected_EOF</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (isdigit(c))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">int</span> value = <a href="#L706" title="ocaml/yacc/reader.c:706">get_number</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (bp-&gt;value != <a href="defs.h.html#L98" title="ocaml/yacc/defs.h:98">UNDEFINED</a> &amp;&amp; value != bp-&gt;value)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L160" title="ocaml/yacc/error.c:160">revalued_warning</a>(bp-&gt;name);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bp-&gt;value = value;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; c = <a href="#L463" title="ocaml/yacc/reader.c:463">nextc</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">EOF</span>) <a href="error.c.html#L47" title="ocaml/yacc/error.c:47">unexpected_EOF</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">void<br/></li>
<li><a id="L840">&#x200c;</a></span><span class="linkable">declare_types</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> c;<br/></li>
<li>&nbsp; &nbsp; <a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> *bp;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span> *tag;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; c = <a href="#L463" title="ocaml/yacc/reader.c:463">nextc</a>();<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">EOF</span>) <a href="error.c.html#L47" title="ocaml/yacc/error.c:47">unexpected_EOF</a>();<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (c != <span class="Constant">'&lt;'</span>) <a href="error.c.html#L89" title="ocaml/yacc/error.c:89">syntax_error</a>(<a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>);<br/></li>
<li>&nbsp; &nbsp; tag = <a href="#L720" title="ocaml/yacc/reader.c:720">get_tag</a>();<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (;;)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; c = <a href="#L463" title="ocaml/yacc/reader.c:463">nextc</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (isalpha(c) || c == <span class="Constant">'_'</span> || c == <span class="Constant">'.'</span> || c == <span class="Constant">'$'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bp = <a href="#L690" title="ocaml/yacc/reader.c:690">get_name</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else</span> <span class="Statement">if</span> (c == <span class="Special">'\''</span> || c == <span class="Constant">'&quot;'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L103" title="ocaml/yacc/error.c:103">invalid_literal</a>(<a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (bp-&gt;tag &amp;&amp; tag != bp-&gt;tag)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L146" title="ocaml/yacc/error.c:146">retyped_warning</a>(bp-&gt;name);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; bp-&gt;tag = tag;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">void<br/></li>
<li><a id="L869">&#x200c;</a></span><span class="linkable">declare_start</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> c;<br/></li>
<li>&nbsp; &nbsp; <a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> *bp;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">static</span> <span class="Type">int</span> entry_counter = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (;;) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; c = <a href="#L463" title="ocaml/yacc/reader.c:463">nextc</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (!isalpha(c) &amp;&amp; c != <span class="Constant">'_'</span> &amp;&amp; c != <span class="Constant">'.'</span> &amp;&amp; c != <span class="Constant">'$'</span>) <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; bp = <a href="#L690" title="ocaml/yacc/reader.c:690">get_name</a>();<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (bp-&gt;class == <a href="defs.h.html#L92" title="ocaml/yacc/defs.h:92">TERM</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L167" title="ocaml/yacc/error.c:167">terminal_start</a>(bp-&gt;name);<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (entry_counter &gt;= <a href="defs.h.html#L154" title="ocaml/yacc/defs.h:154">MAX_ENTRY_POINT</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L174" title="ocaml/yacc/error.c:174">too_many_entries</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; bp-&gt;entry = ++entry_counter;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">void<br/></li>
<li><a id="L890">&#x200c;</a></span><span class="linkable">read_declarations</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> c, k;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="#L30" title="ocaml/yacc/reader.c:30">cache_size</a> = <span class="Constant">256</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="#L29" title="ocaml/yacc/reader.c:29">cache</a> = <a href="defs.h.html#L124" title="ocaml/yacc/defs.h:124">MALLOC</a>(<a href="#L30" title="ocaml/yacc/reader.c:30">cache_size</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L29" title="ocaml/yacc/reader.c:29">cache</a> == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (;;)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; c = <a href="#L463" title="ocaml/yacc/reader.c:463">nextc</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">EOF</span>) <a href="error.c.html#L47" title="ocaml/yacc/error.c:47">unexpected_EOF</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c != <span class="Constant">'%'</span>) <a href="error.c.html#L89" title="ocaml/yacc/error.c:89">syntax_error</a>(<a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">switch</span> (k = <a href="#L537" title="ocaml/yacc/reader.c:537">keyword</a>())<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <a href="defs.h.html#L84" title="ocaml/yacc/defs.h:84">MARK</a>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <a href="defs.h.html#L85" title="ocaml/yacc/defs.h:85">TEXT</a>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L595" title="ocaml/yacc/reader.c:595">copy_text</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <a href="defs.h.html#L80" title="ocaml/yacc/defs.h:80">TOKEN</a>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <a href="defs.h.html#L81" title="ocaml/yacc/defs.h:81">LEFT</a>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <a href="defs.h.html#L82" title="ocaml/yacc/defs.h:82">RIGHT</a>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <a href="defs.h.html#L83" title="ocaml/yacc/defs.h:83">NONASSOC</a>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L768" title="ocaml/yacc/reader.c:768">declare_tokens</a>(k);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <a href="defs.h.html#L86" title="ocaml/yacc/defs.h:86">TYPE</a>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L840" title="ocaml/yacc/reader.c:840">declare_types</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <a href="defs.h.html#L87" title="ocaml/yacc/defs.h:87">START</a>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L869" title="ocaml/yacc/reader.c:869">declare_start</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>}<br/></li>
<li><a id="L929">&#x200c;</a><span class="Type">static</span> <span class="Type">int</span> <span class="linkable">infline</span> = <span class="Constant">1</span>;<br/></li>
<li><br/></li>
<li><a id="L931">&#x200c;</a><span class="Type">static</span> <span class="Type">void</span> <span class="linkable">output_token_type</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; <a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> * bp;<br/></li>
<li>&nbsp; <span class="Type">int</span> i;<br/></li>
<li><br/></li>
<li>&nbsp; fprintf(<a href="main.c.html#L76" title="ocaml/yacc/main.c:76">interface_file</a>, <span class="Constant">&quot;type token =</span><span class="Special">\n</span><span class="Constant">&quot;</span>);<br/></li>
<li>&nbsp; <span class="Statement">if</span> (!<a href="main.c.html#L28" title="ocaml/yacc/main.c:28">rflag</a>) ++<a href="main.c.html#L50" title="ocaml/yacc/main.c:50">outline</a>;<br/></li>
<li>&nbsp; fprintf(<a href="main.c.html#L72" title="ocaml/yacc/main.c:72">output_file</a>, <span class="Constant">&quot;type token =</span><span class="Special">\n</span><span class="Constant">&quot;</span>);<br/></li>
<li>&nbsp; <span class="Statement">for</span> (bp = <a href="symtab.c.html#L23" title="ocaml/yacc/symtab.c:23">first_symbol</a>; bp; bp = bp-&gt;next) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (bp-&gt;class == <a href="defs.h.html#L92" title="ocaml/yacc/defs.h:92">TERM</a> &amp;&amp; bp-&gt;true_token) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; fprintf(<a href="main.c.html#L76" title="ocaml/yacc/main.c:76">interface_file</a>, <span class="Constant">&quot;&nbsp; | </span><span class="Special">%s</span><span class="Constant">&quot;</span>, bp-&gt;name);<br/></li>
<li>&nbsp; &nbsp; &nbsp; fprintf(<a href="main.c.html#L72" title="ocaml/yacc/main.c:72">output_file</a>, <span class="Constant">&quot;&nbsp; | </span><span class="Special">%s</span><span class="Constant">&quot;</span>, bp-&gt;name);<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (bp-&gt;tag) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">/* Print the type expression in parentheses to make sure<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; that the constructor is unary */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; fprintf(<a href="main.c.html#L72" title="ocaml/yacc/main.c:72">output_file</a>, <span class="Constant">&quot; of (</span><span class="Special">\n</span><span class="Constant">&quot;</span> <a href="defs.h.html#L265" title="ocaml/yacc/defs.h:265">line_format</a>, bp-&gt;<a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>, <a href="main.c.html#L58" title="ocaml/yacc/main.c:58">input_file_name_disp</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; fprintf(<a href="main.c.html#L76" title="ocaml/yacc/main.c:76">interface_file</a>, <span class="Constant">&quot; of (</span><span class="Special">\n</span><span class="Constant">&quot;</span> <a href="defs.h.html#L265" title="ocaml/yacc/defs.h:265">line_format</a>, bp-&gt;<a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>, <a href="main.c.html#L58" title="ocaml/yacc/main.c:58">input_file_name_disp</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">0</span>; i &lt; bp-&gt;column; i++) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fputc(<span class="Constant">' '</span>, <a href="main.c.html#L76" title="ocaml/yacc/main.c:76">interface_file</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fputc(<span class="Constant">' '</span>, <a href="main.c.html#L72" title="ocaml/yacc/main.c:72">output_file</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; fprintf(<a href="main.c.html#L76" title="ocaml/yacc/main.c:76">interface_file</a>, <span class="Constant">&quot;</span><span class="Special">%s\n</span><span class="Constant">&quot;</span> <a href="defs.h.html#L265" title="ocaml/yacc/defs.h:265">line_format</a> <span class="Constant">&quot;)&quot;</span>, bp-&gt;tag, <a href="#L929" title="ocaml/yacc/reader.c:929">infline</a> + <span class="Constant">5</span>, <a href="main.c.html#L55" title="ocaml/yacc/main.c:55">interface_file_name_disp</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; fprintf(<a href="main.c.html#L72" title="ocaml/yacc/main.c:72">output_file</a>, <span class="Constant">&quot;</span><span class="Special">%s\n</span><span class="Constant">&quot;</span> <a href="defs.h.html#L265" title="ocaml/yacc/defs.h:265">line_format</a> <span class="Constant">&quot;)&quot;</span>, bp-&gt;tag, <a href="main.c.html#L50" title="ocaml/yacc/main.c:50">outline</a> + <span class="Constant">5</span>, <a href="main.c.html#L55" title="ocaml/yacc/main.c:55">code_file_name_disp</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L929" title="ocaml/yacc/reader.c:929">infline</a> += <span class="Constant">4</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (!<a href="main.c.html#L28" title="ocaml/yacc/main.c:28">rflag</a>) <a href="main.c.html#L50" title="ocaml/yacc/main.c:50">outline</a> += <span class="Constant">4</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; fprintf(<a href="main.c.html#L76" title="ocaml/yacc/main.c:76">interface_file</a>, <span class="Constant">&quot;</span><span class="Special">\n</span><span class="Constant">&quot;</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L929" title="ocaml/yacc/reader.c:929">infline</a>++;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (!<a href="main.c.html#L28" title="ocaml/yacc/main.c:28">rflag</a>) ++<a href="main.c.html#L50" title="ocaml/yacc/main.c:50">outline</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; fprintf(<a href="main.c.html#L72" title="ocaml/yacc/main.c:72">output_file</a>, <span class="Constant">&quot;</span><span class="Special">\n</span><span class="Constant">&quot;</span>);<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; }<br/></li>
<li>&nbsp; fprintf(<a href="main.c.html#L76" title="ocaml/yacc/main.c:76">interface_file</a>, <span class="Constant">&quot;</span><span class="Special">\n</span><span class="Constant">&quot;</span>);<br/></li>
<li>&nbsp; <a href="#L929" title="ocaml/yacc/reader.c:929">infline</a>++;<br/></li>
<li>&nbsp; <span class="Statement">if</span> (!<a href="main.c.html#L28" title="ocaml/yacc/main.c:28">rflag</a>) ++<a href="main.c.html#L50" title="ocaml/yacc/main.c:50">outline</a>;<br/></li>
<li>&nbsp; fprintf(<a href="main.c.html#L72" title="ocaml/yacc/main.c:72">output_file</a>, <span class="Constant">&quot;</span><span class="Special">\n</span><span class="Constant">&quot;</span>);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">void<br/></li>
<li><a id="L970">&#x200c;</a></span><span class="linkable">initialize_grammar</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L78" title="ocaml/yacc/main.c:78">nitems</a> = <span class="Constant">4</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="#L44" title="ocaml/yacc/reader.c:44">maxitems</a> = <span class="Constant">300</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="#L45" title="ocaml/yacc/reader.c:45">pitem</a> = (<a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> **) <a href="defs.h.html#L124" title="ocaml/yacc/defs.h:124">MALLOC</a>(<a href="#L44" title="ocaml/yacc/reader.c:44">maxitems</a>*<span class="Statement">sizeof</span>(<a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> *));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L45" title="ocaml/yacc/reader.c:45">pitem</a> == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="#L45" title="ocaml/yacc/reader.c:45">pitem</a>[<span class="Constant">0</span>] = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="#L45" title="ocaml/yacc/reader.c:45">pitem</a>[<span class="Constant">1</span>] = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="#L45" title="ocaml/yacc/reader.c:45">pitem</a>[<span class="Constant">2</span>] = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="#L45" title="ocaml/yacc/reader.c:45">pitem</a>[<span class="Constant">3</span>] = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L79" title="ocaml/yacc/main.c:79">nrules</a> = <span class="Constant">3</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="#L47" title="ocaml/yacc/reader.c:47">maxrules</a> = <span class="Constant">100</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="#L48" title="ocaml/yacc/reader.c:48">plhs</a> = (<a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> **) <a href="defs.h.html#L124" title="ocaml/yacc/defs.h:124">MALLOC</a>(<a href="#L47" title="ocaml/yacc/reader.c:47">maxrules</a>*<span class="Statement">sizeof</span>(<a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> *));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L48" title="ocaml/yacc/reader.c:48">plhs</a> == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="#L48" title="ocaml/yacc/reader.c:48">plhs</a>[<span class="Constant">0</span>] = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="#L48" title="ocaml/yacc/reader.c:48">plhs</a>[<span class="Constant">1</span>] = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="#L48" title="ocaml/yacc/reader.c:48">plhs</a>[<span class="Constant">2</span>] = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L96" title="ocaml/yacc/main.c:96">rprec</a> = (<span class="Type">short</span> *) <a href="defs.h.html#L124" title="ocaml/yacc/defs.h:124">MALLOC</a>(<a href="#L47" title="ocaml/yacc/reader.c:47">maxrules</a>*<span class="Statement">sizeof</span>(<span class="Type">short</span>));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="main.c.html#L96" title="ocaml/yacc/main.c:96">rprec</a> == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L96" title="ocaml/yacc/main.c:96">rprec</a>[<span class="Constant">0</span>] = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L96" title="ocaml/yacc/main.c:96">rprec</a>[<span class="Constant">1</span>] = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L96" title="ocaml/yacc/main.c:96">rprec</a>[<span class="Constant">2</span>] = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L97" title="ocaml/yacc/main.c:97">rassoc</a> = (<span class="Type">char</span> *) <a href="defs.h.html#L124" title="ocaml/yacc/defs.h:124">MALLOC</a>(<a href="#L47" title="ocaml/yacc/reader.c:47">maxrules</a>*<span class="Statement">sizeof</span>(<span class="Type">char</span>));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="main.c.html#L97" title="ocaml/yacc/main.c:97">rassoc</a> == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L97" title="ocaml/yacc/main.c:97">rassoc</a>[<span class="Constant">0</span>] = <a href="defs.h.html#L80" title="ocaml/yacc/defs.h:80">TOKEN</a>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L97" title="ocaml/yacc/main.c:97">rassoc</a>[<span class="Constant">1</span>] = <a href="defs.h.html#L80" title="ocaml/yacc/defs.h:80">TOKEN</a>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L97" title="ocaml/yacc/main.c:97">rassoc</a>[<span class="Constant">2</span>] = <a href="defs.h.html#L80" title="ocaml/yacc/defs.h:80">TOKEN</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">void<br/></li>
<li><a id="L1002">&#x200c;</a></span><span class="linkable">expand_items</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="#L44" title="ocaml/yacc/reader.c:44">maxitems</a> += <span class="Constant">300</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="#L45" title="ocaml/yacc/reader.c:45">pitem</a> = (<a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> **) <a href="defs.h.html#L127" title="ocaml/yacc/defs.h:127">REALLOC</a>(<a href="#L45" title="ocaml/yacc/reader.c:45">pitem</a>, <a href="#L44" title="ocaml/yacc/reader.c:44">maxitems</a>*<span class="Statement">sizeof</span>(<a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> *));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L45" title="ocaml/yacc/reader.c:45">pitem</a> == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">void<br/></li>
<li><a id="L1011">&#x200c;</a></span><span class="linkable">expand_rules</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="#L47" title="ocaml/yacc/reader.c:47">maxrules</a> += <span class="Constant">100</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="#L48" title="ocaml/yacc/reader.c:48">plhs</a> = (<a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> **) <a href="defs.h.html#L127" title="ocaml/yacc/defs.h:127">REALLOC</a>(<a href="#L48" title="ocaml/yacc/reader.c:48">plhs</a>, <a href="#L47" title="ocaml/yacc/reader.c:47">maxrules</a>*<span class="Statement">sizeof</span>(<a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> *));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L48" title="ocaml/yacc/reader.c:48">plhs</a> == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L96" title="ocaml/yacc/main.c:96">rprec</a> = (<span class="Type">short</span> *) <a href="defs.h.html#L127" title="ocaml/yacc/defs.h:127">REALLOC</a>(<a href="main.c.html#L96" title="ocaml/yacc/main.c:96">rprec</a>, <a href="#L47" title="ocaml/yacc/reader.c:47">maxrules</a>*<span class="Statement">sizeof</span>(<span class="Type">short</span>));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="main.c.html#L96" title="ocaml/yacc/main.c:96">rprec</a> == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L97" title="ocaml/yacc/main.c:97">rassoc</a> = (<span class="Type">char</span> *) <a href="defs.h.html#L127" title="ocaml/yacc/defs.h:127">REALLOC</a>(<a href="main.c.html#L97" title="ocaml/yacc/main.c:97">rassoc</a>, <a href="#L47" title="ocaml/yacc/reader.c:47">maxrules</a>*<span class="Statement">sizeof</span>(<span class="Type">char</span>));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="main.c.html#L97" title="ocaml/yacc/main.c:97">rassoc</a> == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">void<br/></li>
<li><a id="L1024">&#x200c;</a></span><span class="linkable">advance_to_start</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> c;<br/></li>
<li>&nbsp; &nbsp; <a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> *bp;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span> *s_cptr;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> s_lineno;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (;;)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; c = <a href="#L463" title="ocaml/yacc/reader.c:463">nextc</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c != <span class="Constant">'%'</span>) <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; s_cptr = <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">switch</span> (<a href="#L537" title="ocaml/yacc/reader.c:537">keyword</a>())<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <a href="defs.h.html#L84" title="ocaml/yacc/defs.h:84">MARK</a>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L182" title="ocaml/yacc/error.c:182">no_grammar</a>();<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <a href="defs.h.html#L85" title="ocaml/yacc/defs.h:85">TEXT</a>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L595" title="ocaml/yacc/reader.c:595">copy_text</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">case</span> <a href="defs.h.html#L87" title="ocaml/yacc/defs.h:87">START</a>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L869" title="ocaml/yacc/reader.c:869">declare_start</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">break</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">default</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L89" title="ocaml/yacc/error.c:89">syntax_error</a>(<a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>, s_cptr);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; c = <a href="#L463" title="ocaml/yacc/reader.c:463">nextc</a>();<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (!isalpha(c) &amp;&amp; c != <span class="Constant">'_'</span> &amp;&amp; c != <span class="Constant">'.'</span> &amp;&amp; c != <span class="Constant">'_'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L89" title="ocaml/yacc/error.c:89">syntax_error</a>(<a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>);<br/></li>
<li>&nbsp; &nbsp; bp = <a href="#L690" title="ocaml/yacc/reader.c:690">get_name</a>();<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L39" title="ocaml/yacc/reader.c:39">goal</a> == <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (bp-&gt;class == <a href="defs.h.html#L92" title="ocaml/yacc/defs.h:92">TERM</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L167" title="ocaml/yacc/error.c:167">terminal_start</a>(bp-&gt;name);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L39" title="ocaml/yacc/reader.c:39">goal</a> = bp;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; s_lineno = <a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>;<br/></li>
<li>&nbsp; &nbsp; c = <a href="#L463" title="ocaml/yacc/reader.c:463">nextc</a>();<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">EOF</span>) <a href="error.c.html#L47" title="ocaml/yacc/error.c:47">unexpected_EOF</a>();<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (c != <span class="Constant">':'</span>) <a href="error.c.html#L89" title="ocaml/yacc/error.c:89">syntax_error</a>(<a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>);<br/></li>
<li>&nbsp; &nbsp; <a href="#L1076" title="ocaml/yacc/reader.c:1076">start_rule</a>(bp, s_lineno);<br/></li>
<li>&nbsp; &nbsp; ++<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><a id="L1074">&#x200c;</a><span class="Type">int</span> <span class="linkable">at_first</span>;<br/></li>
<li><br/></li>
<li><a id="L1076">&#x200c;</a><span class="Type">void</span> <span class="linkable">start_rule</span>(<a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> *bp, <span class="Type">int</span> s_lineno)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (bp-&gt;class == <a href="defs.h.html#L92" title="ocaml/yacc/defs.h:92">TERM</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L190" title="ocaml/yacc/error.c:190">terminal_lhs</a>(s_lineno);<br/></li>
<li>&nbsp; &nbsp; bp-&gt;class = <a href="defs.h.html#L93" title="ocaml/yacc/defs.h:93">NONTERM</a>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="main.c.html#L79" title="ocaml/yacc/main.c:79">nrules</a> &gt;= <a href="#L47" title="ocaml/yacc/reader.c:47">maxrules</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L1011" title="ocaml/yacc/reader.c:1011">expand_rules</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="#L48" title="ocaml/yacc/reader.c:48">plhs</a>[<a href="main.c.html#L79" title="ocaml/yacc/main.c:79">nrules</a>] = bp;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L96" title="ocaml/yacc/main.c:96">rprec</a>[<a href="main.c.html#L79" title="ocaml/yacc/main.c:79">nrules</a>] = <a href="defs.h.html#L98" title="ocaml/yacc/defs.h:98">UNDEFINED</a>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L97" title="ocaml/yacc/main.c:97">rassoc</a>[<a href="main.c.html#L79" title="ocaml/yacc/main.c:79">nrules</a>] = <a href="defs.h.html#L80" title="ocaml/yacc/defs.h:80">TOKEN</a>;<br/></li>
<li>&nbsp; &nbsp; <a href="#L1074" title="ocaml/yacc/reader.c:1074">at_first</a> = <span class="Constant">1</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">void<br/></li>
<li><a id="L1091">&#x200c;</a></span><span class="linkable">end_rule</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (!<a href="#L42" title="ocaml/yacc/reader.c:42">last_was_action</a>) <a href="error.c.html#L229" title="ocaml/yacc/error.c:229">default_action_error</a>();<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="#L42" title="ocaml/yacc/reader.c:42">last_was_action</a> = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="main.c.html#L78" title="ocaml/yacc/main.c:78">nitems</a> &gt;= <a href="#L44" title="ocaml/yacc/reader.c:44">maxitems</a>) <a href="#L1002" title="ocaml/yacc/reader.c:1002">expand_items</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="#L45" title="ocaml/yacc/reader.c:45">pitem</a>[<a href="main.c.html#L78" title="ocaml/yacc/main.c:78">nitems</a>] = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; ++<a href="main.c.html#L78" title="ocaml/yacc/main.c:78">nitems</a>;<br/></li>
<li>&nbsp; &nbsp; ++<a href="main.c.html#L79" title="ocaml/yacc/main.c:79">nrules</a>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">void<br/></li>
<li><a id="L1104">&#x200c;</a></span><span class="linkable">add_symbol</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> c;<br/></li>
<li>&nbsp; &nbsp; <a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> *bp;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> s_lineno = <a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span> *ecptr = <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; c = *<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Special">'\''</span> || c == <span class="Constant">'&quot;'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L103" title="ocaml/yacc/error.c:103">invalid_literal</a>(s_lineno, <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; bp = <a href="#L690" title="ocaml/yacc/reader.c:690">get_name</a>();<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; c = <a href="#L463" title="ocaml/yacc/reader.c:463">nextc</a>();<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">':'</span>)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L1091" title="ocaml/yacc/reader.c:1091">end_rule</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L1076" title="ocaml/yacc/reader.c:1076">start_rule</a>(bp, s_lineno);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; ++<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L42" title="ocaml/yacc/reader.c:42">last_was_action</a>) <a href="error.c.html#L89" title="ocaml/yacc/error.c:89">syntax_error</a> (<a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>, ecptr);<br/></li>
<li>&nbsp; &nbsp; <a href="#L42" title="ocaml/yacc/reader.c:42">last_was_action</a> = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (++<a href="main.c.html#L78" title="ocaml/yacc/main.c:78">nitems</a> &gt; <a href="#L44" title="ocaml/yacc/reader.c:44">maxitems</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L1002" title="ocaml/yacc/reader.c:1002">expand_items</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="#L45" title="ocaml/yacc/reader.c:45">pitem</a>[<a href="main.c.html#L78" title="ocaml/yacc/main.c:78">nitems</a>-<span class="Constant">1</span>] = bp;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">void<br/></li>
<li><a id="L1136">&#x200c;</a></span><span class="linkable">copy_action</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> c;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> i, n;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> depth;<br/></li>
<li>&nbsp; &nbsp; <a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> *item;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span> *tagres;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">FILE</span> *f = <a href="main.c.html#L67" title="ocaml/yacc/main.c:67">action_file</a>;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> a_lineno = <a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span> *a_line = <a href="#L154" title="ocaml/yacc/reader.c:154">dup_line</a>();<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span> *a_cptr = a_line + (<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> - <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="#L73" title="ocaml/yacc/reader.c:73">push_stack</a>(<span class="Constant">'{'</span>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L42" title="ocaml/yacc/reader.c:42">last_was_action</a>) <a href="error.c.html#L89" title="ocaml/yacc/error.c:89">syntax_error</a> (<a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>);<br/></li>
<li>&nbsp; &nbsp; <a href="#L42" title="ocaml/yacc/reader.c:42">last_was_action</a> = <span class="Constant">1</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Comment">/*<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; fprintf(f, &quot;(* Rule %d, file %s, <a href="#L36" title="ocaml/yacc/reader.c:36">line</a> %d *)\n&quot;,<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="main.c.html#L79" title="ocaml/yacc/main.c:79">nrules</a>-2, <a href="main.c.html#L57" title="ocaml/yacc/main.c:57">input_file_name</a>, <a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>);<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="main.c.html#L33" title="ocaml/yacc/main.c:33">sflag</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; fprintf(f, <span class="Constant">&quot;yyact.(</span><span class="Special">%d</span><span class="Constant">) &lt;- (fun __caml_parser_env -&gt;</span><span class="Special">\n</span><span class="Constant">&quot;</span>, <a href="main.c.html#L79" title="ocaml/yacc/main.c:79">nrules</a>-<span class="Constant">2</span>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; fprintf(f, <span class="Constant">&quot;; (fun __caml_parser_env -&gt;</span><span class="Special">\n</span><span class="Constant">&quot;</span>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; n = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (i = <a href="main.c.html#L78" title="ocaml/yacc/main.c:78">nitems</a> - <span class="Constant">1</span>; <a href="#L45" title="ocaml/yacc/reader.c:45">pitem</a>[i]; --i) ++n;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">1</span>; i &lt;= n; i++) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; item = <a href="#L45" title="ocaml/yacc/reader.c:45">pitem</a>[<a href="main.c.html#L78" title="ocaml/yacc/main.c:78">nitems</a> + i - n - <span class="Constant">1</span>];<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (item-&gt;class == <a href="defs.h.html#L92" title="ocaml/yacc/defs.h:92">TERM</a> &amp;&amp; !item-&gt;tag) <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; fprintf(f, <span class="Constant">&quot;&nbsp; &nbsp; let _</span><span class="Special">%d</span><span class="Constant"> = &quot;</span>, i);<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (item-&gt;tag)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; fprintf(f, <span class="Constant">&quot;(Parsing.peek_val __caml_parser_env </span><span class="Special">%d</span><span class="Constant"> : </span><span class="Special">%s</span><span class="Constant">) in</span><span class="Special">\n</span><span class="Constant">&quot;</span>, n - i,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item-&gt;tag);<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">else</span> <span class="Statement">if</span> (<a href="main.c.html#L33" title="ocaml/yacc/main.c:33">sflag</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; fprintf(f, <span class="Constant">&quot;Parsing.peek_val __caml_parser_env </span><span class="Special">%d</span><span class="Constant"> in</span><span class="Special">\n</span><span class="Constant">&quot;</span>, n - i);<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; fprintf(f, <span class="Constant">&quot;(Parsing.peek_val __caml_parser_env </span><span class="Special">%d</span><span class="Constant"> : '</span><span class="Special">%s</span><span class="Constant">) in</span><span class="Special">\n</span><span class="Constant">&quot;</span>, n - i,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item-&gt;name);<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; fprintf(f, <span class="Constant">&quot;&nbsp; &nbsp; Obj.repr(</span><span class="Special">\n</span><span class="Constant">&quot;</span>);<br/></li>
<li>&nbsp; &nbsp; fprintf(f, <a href="defs.h.html#L265" title="ocaml/yacc/defs.h:265">line_format</a>, <a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>, <a href="main.c.html#L58" title="ocaml/yacc/main.c:58">input_file_name_disp</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">0</span>; i &lt; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> - <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>; i++) fputc(<span class="Constant">' '</span>, f);<br/></li>
<li>&nbsp; &nbsp; fputc (<span class="Constant">'('</span>, f);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; depth = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>++;<br/></li>
<li><br/></li>
<li><span class="Statement">loop</span><span class="cUserCont">:<br/></li>
<li></span>&nbsp; &nbsp; c = *<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">'$'</span>)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (isdigit((<span class="Type">unsigned</span> <span class="Type">char</span>) <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[<span class="Constant">1</span>]))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ++<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; i = <a href="#L706" title="ocaml/yacc/reader.c:706">get_number</a>();<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (i &lt;= <span class="Constant">0</span> || i &gt; n)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L214" title="ocaml/yacc/error.c:214">unknown_rhs</a>(i);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; item = <a href="#L45" title="ocaml/yacc/reader.c:45">pitem</a>[<a href="main.c.html#L78" title="ocaml/yacc/main.c:78">nitems</a> + i - n - <span class="Constant">1</span>];<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (item-&gt;class == <a href="defs.h.html#L92" title="ocaml/yacc/defs.h:92">TERM</a> &amp;&amp; !item-&gt;tag)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L221" title="ocaml/yacc/error.c:221">illegal_token_ref</a>(i, item-&gt;name);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fprintf(f, <span class="Constant">&quot;_</span><span class="Special">%d</span><span class="Constant">&quot;</span>, i);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">goto</span> loop;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">'_'</span> || c == <span class="Constant">'$'</span> || <a href="#L66" title="ocaml/yacc/reader.c:66">In_bitmap</a>(<a href="#L61" title="ocaml/yacc/reader.c:61">caml_ident_start</a>, c))<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">do<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; putc(c, f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; c = *++<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; } <span class="Statement">while</span> (c == <span class="Constant">'_'</span> || c == <span class="Constant">'$'</span> || <a href="#L66" title="ocaml/yacc/reader.c:66">In_bitmap</a>(<a href="#L63" title="ocaml/yacc/reader.c:63">caml_ident_body</a>, c));<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">goto</span> loop;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">'}'</span> &amp;&amp; depth == <span class="Constant">1</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; fprintf(f, <span class="Constant">&quot;)</span><span class="Special">\n</span><span class="Constant"># 0</span><span class="Special">\n</span><span class="Constant">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>++;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L82" title="ocaml/yacc/reader.c:82">pop_stack</a>(<span class="Constant">'{'</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; tagres = <a href="#L48" title="ocaml/yacc/reader.c:48">plhs</a>[<a href="main.c.html#L79" title="ocaml/yacc/main.c:79">nrules</a>]-&gt;tag;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (tagres)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; fprintf(f, <span class="Constant">&quot; : </span><span class="Special">%s</span><span class="Constant">))</span><span class="Special">\n</span><span class="Constant">&quot;</span>, tagres);<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">else</span> <span class="Statement">if</span> (<a href="main.c.html#L33" title="ocaml/yacc/main.c:33">sflag</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; fprintf(f, <span class="Constant">&quot;))</span><span class="Special">\n</span><span class="Constant">&quot;</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; fprintf(f, <span class="Constant">&quot; : '</span><span class="Special">%s</span><span class="Constant">))</span><span class="Special">\n</span><span class="Constant">&quot;</span>, <a href="#L48" title="ocaml/yacc/reader.c:48">plhs</a>[<a href="main.c.html#L79" title="ocaml/yacc/main.c:79">nrules</a>]-&gt;name);<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="main.c.html#L33" title="ocaml/yacc/main.c:33">sflag</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; fprintf(f, <span class="Constant">&quot;</span><span class="Special">\n</span><span class="Constant">&quot;</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="defs.h.html#L123" title="ocaml/yacc/defs.h:123">FREE</a>(a_line);<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">return</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; putc(c, f);<br/></li>
<li>&nbsp; &nbsp; ++<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">switch</span> (c)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">case</span> <span class="Special">'\n'</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L108" title="ocaml/yacc/reader.c:108">get_line</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L36" title="ocaml/yacc/reader.c:36">line</a>) <span class="Statement">goto</span> loop;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L205" title="ocaml/yacc/error.c:205">unterminated_action</a>(a_lineno, a_line, a_cptr);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">case</span> <span class="Constant">'{'</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L275" title="ocaml/yacc/reader.c:275">process_open_curly_bracket</a>(f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">/* Even if there is a raw string, we deliberately keep the<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; * closing '}' in the <a href="#L70" title="ocaml/yacc/reader.c:70">buffer</a> */<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L73" title="ocaml/yacc/reader.c:73">push_stack</a>(<span class="Constant">'{'</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; ++depth;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">goto</span> loop;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">case</span> <span class="Constant">'}'</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; --depth;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L82" title="ocaml/yacc/reader.c:82">pop_stack</a>(<span class="Constant">'{'</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">goto</span> loop;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">case</span> <span class="Constant">'&quot;'</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L200" title="ocaml/yacc/reader.c:200">process_quoted_string</a>(<span class="Constant">'&quot;'</span>, f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">goto</span> loop;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">case</span> <span class="Special">'\''</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L261" title="ocaml/yacc/reader.c:261">process_apostrophe_body</a>(f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">goto</span> loop;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">case</span> <span class="Constant">'('</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L73" title="ocaml/yacc/reader.c:73">push_stack</a>(<span class="Constant">'('</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L357" title="ocaml/yacc/reader.c:357">process_comment</a>(f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">goto</span> loop;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">case</span> <span class="Constant">')'</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L82" title="ocaml/yacc/reader.c:82">pop_stack</a>(<span class="Constant">'('</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">goto</span> loop;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">default</span>:<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">goto</span> loop;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">int<br/></li>
<li><a id="L1274">&#x200c;</a></span><span class="linkable">mark_symbol</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> c;<br/></li>
<li>&nbsp; &nbsp; <a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> *bp;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; c = <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[<span class="Constant">1</span>];<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">'%'</span> || c == <span class="Special">'\\'</span>)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> += <span class="Constant">2</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">return</span> (<span class="Constant">1</span>);<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">'='</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> += <span class="Constant">2</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">else</span> <span class="Statement">if</span> ((c == <span class="Constant">'p'</span> || c == <span class="Constant">'P'</span>) &amp;&amp;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ((c = <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[<span class="Constant">2</span>]) == <span class="Constant">'r'</span> || c == <span class="Constant">'<a href="lalr.c.html#L48" title="ocaml/yacc/lalr.c:48">R</a>'</span>) &amp;&amp;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ((c = <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[<span class="Constant">3</span>]) == <span class="Constant">'e'</span> || c == <span class="Constant">'E'</span>) &amp;&amp;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ((c = <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[<span class="Constant">4</span>]) == <span class="Constant">'c'</span> || c == <span class="Constant">'C'</span>) &amp;&amp;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ((c = <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>[<span class="Constant">5</span>], !<a href="defs.h.html#L109" title="ocaml/yacc/defs.h:109">IS_IDENT</a>(c))))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a> += <span class="Constant">5</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L89" title="ocaml/yacc/error.c:89">syntax_error</a>(<a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; c = <a href="#L463" title="ocaml/yacc/reader.c:463">nextc</a>();<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (isalpha(c) || c == <span class="Constant">'_'</span> || c == <span class="Constant">'.'</span> || c == <span class="Constant">'$'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; bp = <a href="#L690" title="ocaml/yacc/reader.c:690">get_name</a>();<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">else</span> <span class="Statement">if</span> (c == <span class="Special">'\''</span> || c == <span class="Constant">'&quot;'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L103" title="ocaml/yacc/error.c:103">invalid_literal</a>(<a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L89" title="ocaml/yacc/error.c:89">syntax_error</a>(<a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">/*NOTREACHED*/<br/></li>
<li></span>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="main.c.html#L96" title="ocaml/yacc/main.c:96">rprec</a>[<a href="main.c.html#L79" title="ocaml/yacc/main.c:79">nrules</a>] != <a href="defs.h.html#L98" title="ocaml/yacc/defs.h:98">UNDEFINED</a> &amp;&amp; bp-&gt;<a href="#L40" title="ocaml/yacc/reader.c:40">prec</a> != <a href="main.c.html#L96" title="ocaml/yacc/main.c:96">rprec</a>[<a href="main.c.html#L79" title="ocaml/yacc/main.c:79">nrules</a>])<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L198" title="ocaml/yacc/error.c:198">prec_redeclared</a>();<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L96" title="ocaml/yacc/main.c:96">rprec</a>[<a href="main.c.html#L79" title="ocaml/yacc/main.c:79">nrules</a>] = bp-&gt;<a href="#L40" title="ocaml/yacc/reader.c:40">prec</a>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L97" title="ocaml/yacc/main.c:97">rassoc</a>[<a href="main.c.html#L79" title="ocaml/yacc/main.c:79">nrules</a>] = bp-&gt;assoc;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">return</span> (<span class="Constant">0</span>);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">void<br/></li>
<li><a id="L1318">&#x200c;</a></span><span class="linkable">read_grammar</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> c;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="#L970" title="ocaml/yacc/reader.c:970">initialize_grammar</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="#L1024" title="ocaml/yacc/reader.c:1024">advance_to_start</a>();<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (;;)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; c = <a href="#L463" title="ocaml/yacc/reader.c:463">nextc</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">'|'</span> &amp;&amp; <a href="#L1074" title="ocaml/yacc/reader.c:1074">at_first</a>){<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ++<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; c = <a href="#L463" title="ocaml/yacc/reader.c:463">nextc</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L1074" title="ocaml/yacc/reader.c:1074">at_first</a> = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">EOF</span>) <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (isalpha(c) || c == <span class="Constant">'_'</span> || c == <span class="Constant">'.'</span> || c == <span class="Constant">'$'</span> || c == <span class="Special">'\''</span> ||<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; c == <span class="Constant">'&quot;'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L1104" title="ocaml/yacc/reader.c:1104">add_symbol</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else</span> <span class="Statement">if</span> (c == <span class="Constant">'{'</span> || c == <span class="Constant">'='</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L1136" title="ocaml/yacc/reader.c:1136">copy_action</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else</span> <span class="Statement">if</span> (c == <span class="Constant">'|'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L1091" title="ocaml/yacc/reader.c:1091">end_rule</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L1076" title="ocaml/yacc/reader.c:1076">start_rule</a>(<a href="#L48" title="ocaml/yacc/reader.c:48">plhs</a>[<a href="main.c.html#L79" title="ocaml/yacc/main.c:79">nrules</a>-<span class="Constant">1</span>], <span class="Constant">0</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ++<a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else</span> <span class="Statement">if</span> (c == <span class="Constant">'%'</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L1274" title="ocaml/yacc/reader.c:1274">mark_symbol</a>()) <span class="Statement">break</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L89" title="ocaml/yacc/error.c:89">syntax_error</a>(<a href="main.c.html#L48" title="ocaml/yacc/main.c:48">lineno</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">line</a>, <a href="#L36" title="ocaml/yacc/reader.c:36">cptr</a>);<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <a href="#L1091" title="ocaml/yacc/reader.c:1091">end_rule</a>();<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">void<br/></li>
<li><a id="L1357">&#x200c;</a></span><span class="linkable">free_tags</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> i;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L33" title="ocaml/yacc/reader.c:33">tag_table</a> == <span class="Constant">0</span>) <span class="Statement">return</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">0</span>; i &lt; <a href="#L32" title="ocaml/yacc/reader.c:32">ntags</a>; ++i)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; assert(<a href="#L33" title="ocaml/yacc/reader.c:33">tag_table</a>[i]);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="defs.h.html#L123" title="ocaml/yacc/defs.h:123">FREE</a>(<a href="#L33" title="ocaml/yacc/reader.c:33">tag_table</a>[i]);<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <a href="defs.h.html#L123" title="ocaml/yacc/defs.h:123">FREE</a>(<a href="#L33" title="ocaml/yacc/reader.c:33">tag_table</a>);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">void<br/></li>
<li><a id="L1373">&#x200c;</a></span><span class="linkable">pack_names</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> *bp;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span> *p, *s, *t;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="#L50" title="ocaml/yacc/reader.c:50">name_pool_size</a> = <span class="Constant">13</span>;&nbsp; <span class="Comment">/* 13 == sizeof(&quot;$end&quot;) + sizeof(&quot;$accept&quot;) */<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">for</span> (bp = <a href="symtab.c.html#L23" title="ocaml/yacc/symtab.c:23">first_symbol</a>; bp; bp = bp-&gt;next)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L50" title="ocaml/yacc/reader.c:50">name_pool_size</a> += strlen(bp-&gt;name) + <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="#L51" title="ocaml/yacc/reader.c:51">name_pool</a> = <a href="defs.h.html#L124" title="ocaml/yacc/defs.h:124">MALLOC</a>(<a href="#L50" title="ocaml/yacc/reader.c:50">name_pool_size</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L51" title="ocaml/yacc/reader.c:51">name_pool</a> == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; strcpy(<a href="#L51" title="ocaml/yacc/reader.c:51">name_pool</a>, <span class="Constant">&quot;$accept&quot;</span>);<br/></li>
<li>&nbsp; &nbsp; strcpy(<a href="#L51" title="ocaml/yacc/reader.c:51">name_pool</a>+<span class="Constant">8</span>, <span class="Constant">&quot;$end&quot;</span>);<br/></li>
<li>&nbsp; &nbsp; t = <a href="#L51" title="ocaml/yacc/reader.c:51">name_pool</a> + <span class="Constant">13</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (bp = <a href="symtab.c.html#L23" title="ocaml/yacc/symtab.c:23">first_symbol</a>; bp; bp = bp-&gt;next)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; p = t;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; s = bp-&gt;name;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">while</span> ((*t++ = *s++)) <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="defs.h.html#L123" title="ocaml/yacc/defs.h:123">FREE</a>(bp-&gt;name);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; bp-&gt;name = p;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">void<br/></li>
<li><a id="L1399">&#x200c;</a></span><span class="linkable">check_symbols</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> *bp;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L39" title="ocaml/yacc/reader.c:39">goal</a>-&gt;class == <a href="defs.h.html#L91" title="ocaml/yacc/defs.h:91">UNKNOWN</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L238" title="ocaml/yacc/error.c:238">undefined_goal</a>(<a href="#L39" title="ocaml/yacc/reader.c:39">goal</a>-&gt;name);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (bp = <a href="symtab.c.html#L23" title="ocaml/yacc/symtab.c:23">first_symbol</a>; bp; bp = bp-&gt;next)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (bp-&gt;class == <a href="defs.h.html#L91" title="ocaml/yacc/defs.h:91">UNKNOWN</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L244" title="ocaml/yacc/error.c:244">undefined_symbol</a>(bp-&gt;name);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bp-&gt;class = <a href="defs.h.html#L92" title="ocaml/yacc/defs.h:92">TERM</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">void<br/></li>
<li><a id="L1418">&#x200c;</a></span><span class="linkable">pack_symbols</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> *bp;<br/></li>
<li>&nbsp; &nbsp; <a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> **v;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> i, j, k, n;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L81" title="ocaml/yacc/main.c:81">nsyms</a> = <span class="Constant">2</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L82" title="ocaml/yacc/main.c:82">ntokens</a> = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (bp = <a href="symtab.c.html#L23" title="ocaml/yacc/symtab.c:23">first_symbol</a>; bp; bp = bp-&gt;next)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; ++<a href="main.c.html#L81" title="ocaml/yacc/main.c:81">nsyms</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (bp-&gt;class == <a href="defs.h.html#L92" title="ocaml/yacc/defs.h:92">TERM</a>) ++<a href="main.c.html#L82" title="ocaml/yacc/main.c:82">ntokens</a>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L85" title="ocaml/yacc/main.c:85">start_symbol</a> = <a href="main.c.html#L82" title="ocaml/yacc/main.c:82">ntokens</a>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L83" title="ocaml/yacc/main.c:83">nvars</a> = <a href="main.c.html#L81" title="ocaml/yacc/main.c:81">nsyms</a> - <a href="main.c.html#L82" title="ocaml/yacc/main.c:82">ntokens</a>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L86" title="ocaml/yacc/main.c:86">symbol_name</a> = (<span class="Type">char</span> **) <a href="defs.h.html#L124" title="ocaml/yacc/defs.h:124">MALLOC</a>(<a href="main.c.html#L81" title="ocaml/yacc/main.c:81">nsyms</a>*<span class="Statement">sizeof</span>(<span class="Type">char</span> *));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="main.c.html#L86" title="ocaml/yacc/main.c:86">symbol_name</a> == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L87" title="ocaml/yacc/main.c:87">symbol_value</a> = (<span class="Type">short</span> *) <a href="defs.h.html#L124" title="ocaml/yacc/defs.h:124">MALLOC</a>(<a href="main.c.html#L81" title="ocaml/yacc/main.c:81">nsyms</a>*<span class="Statement">sizeof</span>(<span class="Type">short</span>));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="main.c.html#L87" title="ocaml/yacc/main.c:87">symbol_value</a> == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L88" title="ocaml/yacc/main.c:88">symbol_prec</a> = (<span class="Type">short</span> *) <a href="defs.h.html#L124" title="ocaml/yacc/defs.h:124">MALLOC</a>(<a href="main.c.html#L81" title="ocaml/yacc/main.c:81">nsyms</a>*<span class="Statement">sizeof</span>(<span class="Type">short</span>));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="main.c.html#L88" title="ocaml/yacc/main.c:88">symbol_prec</a> == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L89" title="ocaml/yacc/main.c:89">symbol_assoc</a> = <a href="defs.h.html#L124" title="ocaml/yacc/defs.h:124">MALLOC</a>(<a href="main.c.html#L81" title="ocaml/yacc/main.c:81">nsyms</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="main.c.html#L89" title="ocaml/yacc/main.c:89">symbol_assoc</a> == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L90" title="ocaml/yacc/main.c:90">symbol_tag</a> = (<span class="Type">char</span> **) <a href="defs.h.html#L124" title="ocaml/yacc/defs.h:124">MALLOC</a>(<a href="main.c.html#L81" title="ocaml/yacc/main.c:81">nsyms</a>*<span class="Statement">sizeof</span>(<span class="Type">char</span> *));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="main.c.html#L90" title="ocaml/yacc/main.c:90">symbol_tag</a> == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L91" title="ocaml/yacc/main.c:91">symbol_true_token</a> = (<span class="Type">char</span> *) <a href="defs.h.html#L124" title="ocaml/yacc/defs.h:124">MALLOC</a>(<a href="main.c.html#L81" title="ocaml/yacc/main.c:81">nsyms</a>*<span class="Statement">sizeof</span>(<span class="Type">char</span>));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="main.c.html#L91" title="ocaml/yacc/main.c:91">symbol_true_token</a> == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v = (<a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> **) <a href="defs.h.html#L124" title="ocaml/yacc/defs.h:124">MALLOC</a>(<a href="main.c.html#L81" title="ocaml/yacc/main.c:81">nsyms</a>*<span class="Statement">sizeof</span>(<a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> *));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (v == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; v[<span class="Constant">0</span>] = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; v[<a href="main.c.html#L85" title="ocaml/yacc/main.c:85">start_symbol</a>] = <span class="Constant">0</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; i = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; j = <a href="main.c.html#L85" title="ocaml/yacc/main.c:85">start_symbol</a> + <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (bp = <a href="symtab.c.html#L23" title="ocaml/yacc/symtab.c:23">first_symbol</a>; bp; bp = bp-&gt;next)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (bp-&gt;class == <a href="defs.h.html#L92" title="ocaml/yacc/defs.h:92">TERM</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v[i++] = bp;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v[j++] = bp;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; assert(i == <a href="main.c.html#L82" title="ocaml/yacc/main.c:82">ntokens</a> &amp;&amp; j == <a href="main.c.html#L81" title="ocaml/yacc/main.c:81">nsyms</a>);<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">1</span>; i &lt; <a href="main.c.html#L82" title="ocaml/yacc/main.c:82">ntokens</a>; ++i)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v[i]-&gt;index = i;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="#L39" title="ocaml/yacc/reader.c:39">goal</a>-&gt;index = <a href="main.c.html#L85" title="ocaml/yacc/main.c:85">start_symbol</a> + <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; k = <a href="main.c.html#L85" title="ocaml/yacc/main.c:85">start_symbol</a> + <span class="Constant">2</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">while</span> (++i &lt; <a href="main.c.html#L81" title="ocaml/yacc/main.c:81">nsyms</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (v[i] != <a href="#L39" title="ocaml/yacc/reader.c:39">goal</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v[i]-&gt;index = k;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ++k;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="#L39" title="ocaml/yacc/reader.c:39">goal</a>-&gt;value = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; k = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (i = <a href="main.c.html#L85" title="ocaml/yacc/main.c:85">start_symbol</a> + <span class="Constant">1</span>; i &lt; <a href="main.c.html#L81" title="ocaml/yacc/main.c:81">nsyms</a>; ++i)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (v[i] != <a href="#L39" title="ocaml/yacc/reader.c:39">goal</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v[i]-&gt;value = k;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ++k;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; k = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">1</span>; i &lt; <a href="main.c.html#L82" title="ocaml/yacc/main.c:82">ntokens</a>; ++i)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; n = v[i]-&gt;value;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (n &gt; <span class="Constant">256</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">for</span> (j = k++; j &gt; <span class="Constant">0</span> &amp;&amp; <a href="main.c.html#L87" title="ocaml/yacc/main.c:87">symbol_value</a>[j-<span class="Constant">1</span>] &gt; n; --j)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="main.c.html#L87" title="ocaml/yacc/main.c:87">symbol_value</a>[j] = <a href="main.c.html#L87" title="ocaml/yacc/main.c:87">symbol_value</a>[j-<span class="Constant">1</span>];<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="main.c.html#L87" title="ocaml/yacc/main.c:87">symbol_value</a>[j] = n;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (v[<span class="Constant">1</span>]-&gt;value == <a href="defs.h.html#L98" title="ocaml/yacc/defs.h:98">UNDEFINED</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; v[<span class="Constant">1</span>]-&gt;value = <span class="Constant">256</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; j = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; n = <span class="Constant">257</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">2</span>; i &lt; <a href="main.c.html#L82" title="ocaml/yacc/main.c:82">ntokens</a>; ++i)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (v[i]-&gt;value == <a href="defs.h.html#L98" title="ocaml/yacc/defs.h:98">UNDEFINED</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">while</span> (j &lt; k &amp;&amp; n == <a href="main.c.html#L87" title="ocaml/yacc/main.c:87">symbol_value</a>[j])<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">while</span> (++j &lt; k &amp;&amp; n == <a href="main.c.html#L87" title="ocaml/yacc/main.c:87">symbol_value</a>[j]) <span class="Statement">continue</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ++n;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; v[i]-&gt;value = n;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ++n;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L86" title="ocaml/yacc/main.c:86">symbol_name</a>[<span class="Constant">0</span>] = <a href="#L51" title="ocaml/yacc/reader.c:51">name_pool</a> + <span class="Constant">8</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L87" title="ocaml/yacc/main.c:87">symbol_value</a>[<span class="Constant">0</span>] = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L88" title="ocaml/yacc/main.c:88">symbol_prec</a>[<span class="Constant">0</span>] = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L89" title="ocaml/yacc/main.c:89">symbol_assoc</a>[<span class="Constant">0</span>] = <a href="defs.h.html#L80" title="ocaml/yacc/defs.h:80">TOKEN</a>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L90" title="ocaml/yacc/main.c:90">symbol_tag</a>[<span class="Constant">0</span>] = <span class="Constant">&quot;&quot;</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L91" title="ocaml/yacc/main.c:91">symbol_true_token</a>[<span class="Constant">0</span>] = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">1</span>; i &lt; <a href="main.c.html#L82" title="ocaml/yacc/main.c:82">ntokens</a>; ++i)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="main.c.html#L86" title="ocaml/yacc/main.c:86">symbol_name</a>[i] = v[i]-&gt;name;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="main.c.html#L87" title="ocaml/yacc/main.c:87">symbol_value</a>[i] = v[i]-&gt;value;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="main.c.html#L88" title="ocaml/yacc/main.c:88">symbol_prec</a>[i] = v[i]-&gt;<a href="#L40" title="ocaml/yacc/reader.c:40">prec</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="main.c.html#L89" title="ocaml/yacc/main.c:89">symbol_assoc</a>[i] = v[i]-&gt;assoc;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="main.c.html#L90" title="ocaml/yacc/main.c:90">symbol_tag</a>[i] = v[i]-&gt;tag;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="main.c.html#L91" title="ocaml/yacc/main.c:91">symbol_true_token</a>[i] = v[i]-&gt;true_token;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L86" title="ocaml/yacc/main.c:86">symbol_name</a>[<a href="main.c.html#L85" title="ocaml/yacc/main.c:85">start_symbol</a>] = <a href="#L51" title="ocaml/yacc/reader.c:51">name_pool</a>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L87" title="ocaml/yacc/main.c:87">symbol_value</a>[<a href="main.c.html#L85" title="ocaml/yacc/main.c:85">start_symbol</a>] = -<span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L88" title="ocaml/yacc/main.c:88">symbol_prec</a>[<a href="main.c.html#L85" title="ocaml/yacc/main.c:85">start_symbol</a>] = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L89" title="ocaml/yacc/main.c:89">symbol_assoc</a>[<a href="main.c.html#L85" title="ocaml/yacc/main.c:85">start_symbol</a>] = <a href="defs.h.html#L80" title="ocaml/yacc/defs.h:80">TOKEN</a>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L90" title="ocaml/yacc/main.c:90">symbol_tag</a>[<a href="main.c.html#L85" title="ocaml/yacc/main.c:85">start_symbol</a>] = <span class="Constant">&quot;&quot;</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L91" title="ocaml/yacc/main.c:91">symbol_true_token</a>[<a href="main.c.html#L85" title="ocaml/yacc/main.c:85">start_symbol</a>] = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (++i; i &lt; <a href="main.c.html#L81" title="ocaml/yacc/main.c:81">nsyms</a>; ++i)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; k = v[i]-&gt;index;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="main.c.html#L86" title="ocaml/yacc/main.c:86">symbol_name</a>[k] = v[i]-&gt;name;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="main.c.html#L87" title="ocaml/yacc/main.c:87">symbol_value</a>[k] = v[i]-&gt;value;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="main.c.html#L88" title="ocaml/yacc/main.c:88">symbol_prec</a>[k] = v[i]-&gt;<a href="#L40" title="ocaml/yacc/reader.c:40">prec</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="main.c.html#L89" title="ocaml/yacc/main.c:89">symbol_assoc</a>[k] = v[i]-&gt;assoc;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="main.c.html#L90" title="ocaml/yacc/main.c:90">symbol_tag</a>[i] = v[i]-&gt;tag;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="main.c.html#L91" title="ocaml/yacc/main.c:91">symbol_true_token</a>[i] = v[i]-&gt;true_token;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="defs.h.html#L123" title="ocaml/yacc/defs.h:123">FREE</a>(v);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><a id="L1553">&#x200c;</a><span class="Type">static</span> <span class="Type">int</span> <span class="linkable">is_polymorphic</span>(<span class="Type">char</span> * s)<br/></li>
<li>{<br/></li>
<li>&nbsp; <span class="Statement">while</span> (*s != <span class="Constant">0</span>) {<br/></li>
<li>&nbsp; &nbsp; <span class="Type">char</span> c = *s++;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Special">'\''</span> || c == <span class="Constant">'#'</span>) <span class="Statement">return</span> <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">'['</span>) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; c = *s;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">while</span> (c == <span class="Constant">' '</span> || c == <span class="Special">'\t'</span> || c == <span class="Special">'\r'</span> || c == <span class="Special">'\n'</span>) c = *++s;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (c == <span class="Constant">'&lt;'</span> || c == <span class="Constant">'&gt;'</span>) <span class="Statement">return</span> <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L66" title="ocaml/yacc/reader.c:66">In_bitmap</a>(<a href="#L61" title="ocaml/yacc/reader.c:61">caml_ident_start</a>, c)) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">while</span> (<a href="#L66" title="ocaml/yacc/reader.c:66">In_bitmap</a>(<a href="#L63" title="ocaml/yacc/reader.c:63">caml_ident_body</a>, *s)) s++;<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; }<br/></li>
<li>&nbsp; <span class="Statement">return</span> <span class="Constant">0</span>;<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">void<br/></li>
<li><a id="L1571">&#x200c;</a></span><span class="linkable">make_goal</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; <span class="Type">static</span> <span class="Type">char</span> name[<span class="Constant">7</span>] = <span class="Constant">&quot;'</span><span class="Special">\\</span><span class="Constant">xxx'&quot;</span>;<br/></li>
<li>&nbsp; <a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> * bp;<br/></li>
<li>&nbsp; <a href="defs.h.html#L133" title="ocaml/yacc/defs.h:133">bucket</a> * bc;<br/></li>
<li><br/></li>
<li>&nbsp; <a href="#L39" title="ocaml/yacc/reader.c:39">goal</a> = <a href="symtab.c.html#L72" title="ocaml/yacc/symtab.c:72">lookup</a>(<span class="Constant">&quot;</span><span class="Special">%e</span><span class="Constant">ntry%&quot;</span>);<br/></li>
<li>&nbsp; <a href="main.c.html#L80" title="ocaml/yacc/main.c:80">ntotalrules</a> = <a href="main.c.html#L79" title="ocaml/yacc/main.c:79">nrules</a> - <span class="Constant">2</span>;<br/></li>
<li>&nbsp; <span class="Statement">for</span>(bp = <a href="symtab.c.html#L23" title="ocaml/yacc/symtab.c:23">first_symbol</a>; bp != <span class="Constant">0</span>; bp = bp-&gt;next) {<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (bp-&gt;entry) {<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L1076" title="ocaml/yacc/reader.c:1076">start_rule</a>(<a href="#L39" title="ocaml/yacc/reader.c:39">goal</a>, <span class="Constant">0</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="main.c.html#L78" title="ocaml/yacc/main.c:78">nitems</a> + <span class="Constant">2</span>&gt; <a href="#L44" title="ocaml/yacc/reader.c:44">maxitems</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L1002" title="ocaml/yacc/reader.c:1002">expand_items</a>();<br/></li>
<li>&nbsp; &nbsp; &nbsp; name[<span class="Constant">2</span>] = <span class="Constant">'0'</span> + ((bp-&gt;entry &gt;&gt; <span class="Constant">6</span>) &amp; <span class="Constant">7</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; name[<span class="Constant">3</span>] = <span class="Constant">'0'</span> + ((bp-&gt;entry &gt;&gt; <span class="Constant">3</span>) &amp; <span class="Constant">7</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; name[<span class="Constant">4</span>] = <span class="Constant">'0'</span> + (bp-&gt;entry &amp; <span class="Constant">7</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; bc = <a href="symtab.c.html#L72" title="ocaml/yacc/symtab.c:72">lookup</a>(name);<br/></li>
<li>&nbsp; &nbsp; &nbsp; bc-&gt;class = <a href="defs.h.html#L92" title="ocaml/yacc/defs.h:92">TERM</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; bc-&gt;value = (<span class="Type">unsigned</span> <span class="Type">char</span>) bp-&gt;entry;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L45" title="ocaml/yacc/reader.c:45">pitem</a>[<a href="main.c.html#L78" title="ocaml/yacc/main.c:78">nitems</a>++] = bc;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L45" title="ocaml/yacc/reader.c:45">pitem</a>[<a href="main.c.html#L78" title="ocaml/yacc/main.c:78">nitems</a>++] = bp;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (bp-&gt;tag == <span class="Constant">NULL</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L251" title="ocaml/yacc/error.c:251">entry_without_type</a>(bp-&gt;name);<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L1553" title="ocaml/yacc/reader.c:1553">is_polymorphic</a>(bp-&gt;tag))<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="error.c.html#L259" title="ocaml/yacc/error.c:259">polymorphic_entry_point</a>(bp-&gt;name);<br/></li>
<li>&nbsp; &nbsp; &nbsp; fprintf(<a href="main.c.html#L69" title="ocaml/yacc/main.c:69">entry_file</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">&quot;let </span><span class="Special">%s</span><span class="Constant"> (lexfun : Lexing.lexbuf -&gt; token) (lexbuf : Lexing.lexbuf) =</span><span class="Special">\n</span><span class="Constant">&nbsp;&nbsp; (Parsing.yyparse yytables </span><span class="Special">%u</span><span class="Constant"> lexfun lexbuf : </span><span class="Special">%s</span><span class="Constant">)</span><span class="Special">\n</span><span class="Constant">&quot;</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bp-&gt;name, bp-&gt;entry, bp-&gt;tag);<br/></li>
<li>&nbsp; &nbsp; &nbsp; fprintf(<a href="main.c.html#L76" title="ocaml/yacc/main.c:76">interface_file</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">&quot;val </span><span class="Special">%s</span><span class="Constant"> :</span><span class="Special">\n</span><span class="Constant">&nbsp; (Lexing.lexbuf&nbsp; -&gt; token) -&gt; Lexing.lexbuf -&gt; </span><span class="Special">%s\n</span><span class="Constant">&quot;</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bp-&gt;name,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bp-&gt;tag);<br/></li>
<li>&nbsp; &nbsp; &nbsp; fprintf(<a href="main.c.html#L67" title="ocaml/yacc/main.c:67">action_file</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">&quot;(* Entry </span><span class="Special">%s</span><span class="Constant"> *)</span><span class="Special">\n</span><span class="Constant">&quot;</span>, bp-&gt;name);<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="main.c.html#L33" title="ocaml/yacc/main.c:33">sflag</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; fprintf(<a href="main.c.html#L67" title="ocaml/yacc/main.c:67">action_file</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">&quot;yyact.(</span><span class="Special">%d</span><span class="Constant">) &lt;- (fun __caml_parser_env -&gt; raise &quot;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">&quot;(Parsing.YYexit (Parsing.peek_val __caml_parser_env 0)))</span><span class="Special">\n</span><span class="Constant">&quot;</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="main.c.html#L80" title="ocaml/yacc/main.c:80">ntotalrules</a>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; fprintf(<a href="main.c.html#L67" title="ocaml/yacc/main.c:67">action_file</a>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">&quot;; (fun __caml_parser_env -&gt; raise &quot;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">&quot;(Parsing.YYexit (Parsing.peek_val __caml_parser_env 0)))</span><span class="Special">\n</span><span class="Constant">&quot;</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="main.c.html#L80" title="ocaml/yacc/main.c:80">ntotalrules</a>++;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L42" title="ocaml/yacc/reader.c:42">last_was_action</a> = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; <a href="#L1091" title="ocaml/yacc/reader.c:1091">end_rule</a>();<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; }<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">void<br/></li>
<li><a id="L1622">&#x200c;</a></span><span class="linkable">pack_grammar</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> i, j;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> assoc, <a href="#L40" title="ocaml/yacc/reader.c:40">prec</a>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L93" title="ocaml/yacc/main.c:93">ritem</a> = (<span class="Type">short</span> *) <a href="defs.h.html#L124" title="ocaml/yacc/defs.h:124">MALLOC</a>(<a href="main.c.html#L78" title="ocaml/yacc/main.c:78">nitems</a>*<span class="Statement">sizeof</span>(<span class="Type">short</span>));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="main.c.html#L93" title="ocaml/yacc/main.c:93">ritem</a> == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L94" title="ocaml/yacc/main.c:94">rlhs</a> = (<span class="Type">short</span> *) <a href="defs.h.html#L124" title="ocaml/yacc/defs.h:124">MALLOC</a>(<a href="main.c.html#L79" title="ocaml/yacc/main.c:79">nrules</a>*<span class="Statement">sizeof</span>(<span class="Type">short</span>));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="main.c.html#L94" title="ocaml/yacc/main.c:94">rlhs</a> == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L95" title="ocaml/yacc/main.c:95">rrhs</a> = (<span class="Type">short</span> *) <a href="defs.h.html#L124" title="ocaml/yacc/defs.h:124">MALLOC</a>((<a href="main.c.html#L79" title="ocaml/yacc/main.c:79">nrules</a>+<span class="Constant">1</span>)*<span class="Statement">sizeof</span>(<span class="Type">short</span>));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="main.c.html#L95" title="ocaml/yacc/main.c:95">rrhs</a> == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L96" title="ocaml/yacc/main.c:96">rprec</a> = (<span class="Type">short</span> *) <a href="defs.h.html#L127" title="ocaml/yacc/defs.h:127">REALLOC</a>(<a href="main.c.html#L96" title="ocaml/yacc/main.c:96">rprec</a>, <a href="main.c.html#L79" title="ocaml/yacc/main.c:79">nrules</a>*<span class="Statement">sizeof</span>(<span class="Type">short</span>));<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="main.c.html#L96" title="ocaml/yacc/main.c:96">rprec</a> == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L97" title="ocaml/yacc/main.c:97">rassoc</a> = <a href="defs.h.html#L127" title="ocaml/yacc/defs.h:127">REALLOC</a>(<a href="main.c.html#L97" title="ocaml/yacc/main.c:97">rassoc</a>, <a href="main.c.html#L79" title="ocaml/yacc/main.c:79">nrules</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (<a href="main.c.html#L97" title="ocaml/yacc/main.c:97">rassoc</a> == <span class="Constant">0</span>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L93" title="ocaml/yacc/main.c:93">ritem</a>[<span class="Constant">0</span>] = -<span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L93" title="ocaml/yacc/main.c:93">ritem</a>[<span class="Constant">1</span>] = <a href="#L39" title="ocaml/yacc/reader.c:39">goal</a>-&gt;index;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L93" title="ocaml/yacc/main.c:93">ritem</a>[<span class="Constant">2</span>] = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L93" title="ocaml/yacc/main.c:93">ritem</a>[<span class="Constant">3</span>] = -<span class="Constant">2</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L94" title="ocaml/yacc/main.c:94">rlhs</a>[<span class="Constant">0</span>] = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L94" title="ocaml/yacc/main.c:94">rlhs</a>[<span class="Constant">1</span>] = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L94" title="ocaml/yacc/main.c:94">rlhs</a>[<span class="Constant">2</span>] = <a href="main.c.html#L85" title="ocaml/yacc/main.c:85">start_symbol</a>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L95" title="ocaml/yacc/main.c:95">rrhs</a>[<span class="Constant">0</span>] = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L95" title="ocaml/yacc/main.c:95">rrhs</a>[<span class="Constant">1</span>] = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L95" title="ocaml/yacc/main.c:95">rrhs</a>[<span class="Constant">2</span>] = <span class="Constant">1</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; j = <span class="Constant">4</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">3</span>; i &lt; <a href="main.c.html#L79" title="ocaml/yacc/main.c:79">nrules</a>; ++i)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="main.c.html#L94" title="ocaml/yacc/main.c:94">rlhs</a>[i] = <a href="#L48" title="ocaml/yacc/reader.c:48">plhs</a>[i]-&gt;index;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="main.c.html#L95" title="ocaml/yacc/main.c:95">rrhs</a>[i] = j;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; assoc = <a href="defs.h.html#L80" title="ocaml/yacc/defs.h:80">TOKEN</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="#L40" title="ocaml/yacc/reader.c:40">prec</a> = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">while</span> (<a href="#L45" title="ocaml/yacc/reader.c:45">pitem</a>[j])<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="main.c.html#L93" title="ocaml/yacc/main.c:93">ritem</a>[j] = <a href="#L45" title="ocaml/yacc/reader.c:45">pitem</a>[j]-&gt;index;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="#L45" title="ocaml/yacc/reader.c:45">pitem</a>[j]-&gt;class == <a href="defs.h.html#L92" title="ocaml/yacc/defs.h:92">TERM</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="#L40" title="ocaml/yacc/reader.c:40">prec</a> = <a href="#L45" title="ocaml/yacc/reader.c:45">pitem</a>[j]-&gt;<a href="#L40" title="ocaml/yacc/reader.c:40">prec</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; assoc = <a href="#L45" title="ocaml/yacc/reader.c:45">pitem</a>[j]-&gt;assoc;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ++j;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <a href="main.c.html#L93" title="ocaml/yacc/main.c:93">ritem</a>[j] = -i;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; ++j;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="main.c.html#L96" title="ocaml/yacc/main.c:96">rprec</a>[i] == <a href="defs.h.html#L98" title="ocaml/yacc/defs.h:98">UNDEFINED</a>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="main.c.html#L96" title="ocaml/yacc/main.c:96">rprec</a>[i] = <a href="#L40" title="ocaml/yacc/reader.c:40">prec</a>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <a href="main.c.html#L97" title="ocaml/yacc/main.c:97">rassoc</a>[i] = assoc;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L95" title="ocaml/yacc/main.c:95">rrhs</a>[i] = j;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <a href="defs.h.html#L123" title="ocaml/yacc/defs.h:123">FREE</a>(<a href="#L48" title="ocaml/yacc/reader.c:48">plhs</a>);<br/></li>
<li>&nbsp; &nbsp; <a href="defs.h.html#L123" title="ocaml/yacc/defs.h:123">FREE</a>(<a href="#L45" title="ocaml/yacc/reader.c:45">pitem</a>);<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Type">static</span> <span class="Type">void<br/></li>
<li><a id="L1682">&#x200c;</a></span><span class="linkable">print_grammar</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> i, j, k;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">int</span> spacing = <span class="Constant">0</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Type">FILE</span> *f = <a href="main.c.html#L75" title="ocaml/yacc/main.c:75">verbose_file</a>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (!<a href="main.c.html#L30" title="ocaml/yacc/main.c:30">vflag</a>) <span class="Statement">return</span>;<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; k = <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">for</span> (i = <span class="Constant">2</span>; i &lt; <a href="main.c.html#L79" title="ocaml/yacc/main.c:79">nrules</a>; ++i)<br/></li>
<li>&nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (<a href="main.c.html#L94" title="ocaml/yacc/main.c:94">rlhs</a>[i] != <a href="main.c.html#L94" title="ocaml/yacc/main.c:94">rlhs</a>[i-<span class="Constant">1</span>])<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span> (i != <span class="Constant">2</span>) fprintf(f, <span class="Constant">&quot;</span><span class="Special">\n</span><span class="Constant">&quot;</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fprintf(f, <span class="Constant">&quot;</span><span class="Special">%4d</span><span class="Constant">&nbsp; </span><span class="Special">%s</span><span class="Constant"> :&quot;</span>, i - <span class="Constant">2</span>, <a href="main.c.html#L86" title="ocaml/yacc/main.c:86">symbol_name</a>[<a href="main.c.html#L94" title="ocaml/yacc/main.c:94">rlhs</a>[i]]);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; spacing = strlen(<a href="main.c.html#L86" title="ocaml/yacc/main.c:86">symbol_name</a>[<a href="main.c.html#L94" title="ocaml/yacc/main.c:94">rlhs</a>[i]]) + <span class="Constant">1</span>;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fprintf(f, <span class="Constant">&quot;</span><span class="Special">%4d</span><span class="Constant">&nbsp; &quot;</span>, i - <span class="Constant">2</span>);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; j = spacing;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">while</span> (--j &gt;= <span class="Constant">0</span>) putc(<span class="Constant">' '</span>, f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; putc(<span class="Constant">'|'</span>, f);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li><br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">while</span> (<a href="main.c.html#L93" title="ocaml/yacc/main.c:93">ritem</a>[k] &gt;= <span class="Constant">0</span>)<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; {<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fprintf(f, <span class="Constant">&quot; </span><span class="Special">%s</span><span class="Constant">&quot;</span>, <a href="main.c.html#L86" title="ocaml/yacc/main.c:86">symbol_name</a>[<a href="main.c.html#L93" title="ocaml/yacc/main.c:93">ritem</a>[k]]);<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ++k;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; }<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; ++k;<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; putc(<span class="Special">'\n'</span>, f);<br/></li>
<li>&nbsp; &nbsp; }<br/></li>
<li>}<br/></li>
<li><br/></li>
<li><br/></li>
<li><a id="L1718">&#x200c;</a><span class="Type">void</span> <span class="linkable">reader</span>(<span class="Type">void</span>)<br/></li>
<li>{<br/></li>
<li>&nbsp; &nbsp; <a href="main.c.html#L49" title="ocaml/yacc/main.c:49">virtual_input_file_name</a> = caml_stat_strdup_of_os(<a href="main.c.html#L57" title="ocaml/yacc/main.c:57">input_file_name</a>);<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">if</span> (!<a href="main.c.html#L49" title="ocaml/yacc/main.c:49">virtual_input_file_name</a>) <a href="error.c.html#L32" title="ocaml/yacc/error.c:32">no_space</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="symtab.c.html#L94" title="ocaml/yacc/symtab.c:94">create_symbol_table</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="#L890" title="ocaml/yacc/reader.c:890">read_declarations</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="#L931" title="ocaml/yacc/reader.c:931">output_token_type</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="#L1318" title="ocaml/yacc/reader.c:1318">read_grammar</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="#L1571" title="ocaml/yacc/reader.c:1571">make_goal</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="symtab.c.html#L114" title="ocaml/yacc/symtab.c:114">free_symbol_table</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="#L1357" title="ocaml/yacc/reader.c:1357">free_tags</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="#L1373" title="ocaml/yacc/reader.c:1373">pack_names</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="#L1399" title="ocaml/yacc/reader.c:1399">check_symbols</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="#L1418" title="ocaml/yacc/reader.c:1418">pack_symbols</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="#L1622" title="ocaml/yacc/reader.c:1622">pack_grammar</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="symtab.c.html#L121" title="ocaml/yacc/symtab.c:121">free_symbols</a>();<br/></li>
<li>&nbsp; &nbsp; <a href="#L1682" title="ocaml/yacc/reader.c:1682">print_grammar</a>();<br/></li>
<li>}<br/></li>
</ol></code>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="index.html">Top Level</a></span>
 </p>

 </body>
</html>
