<!-- generated by the vscode.pl tool from vscoded.-->

<html>
 <head>
  <title>ocaml/asmcomp/x86_proc.ml - ocaml</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

.nav-bar {
    font-size: 120%;
    margin-top: 5px;
    margin-bottom: 5px;
}

.nav-link {
    padding-left: 5em;
    padding-right: 5em;
}

ul.toc {
    line-height: 200%;
    font-size: 150%;
}

code {
    font-family: consolas, monospace;
    line-height: 130%;
}

span.Constant {
    color: DarkGreen;
}

span.Special {
    color: #c06000;
}

span.Comment {
    color: DarkRed;
    font-style: italic;
}

span.Identifier {
    color: DarkCyan;
}

span.PreProc {
    color: DarkMagenta;
}

span.Statement, span.Type, span.Keyword, span.Repeat, span.Conditional,
    span.Operator, span.Exception
{
    color: DarkBlue;
}

span.Todo {
    color: DarkRed;
    background-color: Gold;
    font-style: italic;
}

span.Underlined {
    text-decoration: underline;
}

span.linkable {
    font-weight: bold;
}

code ol {
    counter-reset: item;
    list-style-type: none;
    margin-left: 0;
    padding-left: 0;
    list-style-position: inside;
}

code li {
    display: block;
}

code li:before {
    content: counter(item) "  ";
    counter-increment: item;
    color: #999;
    padding-right: 0.5em;
    padding-left: 0.4em;
    list-style-position: inside;
    text-align: right
}

  </style>
 </head>
 <body>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="index.html">Top Level</a></span>
 </p>

  <h1>ocaml/asmcomp/x86_proc.ml - ocaml</h1>
 <h2>Global variables defined</h2>
 <ul class="toc">
<li><a href="#L278">asm_code</a></li>
<li><a href="#L273">assemble_file</a></li>
<li><a href="#L260">binary_content</a></li>
<li><a href="#L262">compile</a></li>
<li><a href="#L280">directive</a></li>
<li><a href="#L281">emit</a></li>
<li><a href="#L285">generate_code</a></li>
<li><a href="#L240">internal_assembler</a></li>
<li><a href="#L246">masm</a></li>
<li><a href="#L241">register_internal_assembler</a></li>
<li><a href="#L283">reset_asm_code</a></li>
<li><a href="#L206">string_of_condition</a></li>
<li><a href="#L224">string_of_float_condition</a></li>
<li><a href="#L165">string_of_reg16</a></li>
<li><a href="#L183">string_of_reg32</a></li>
<li><a href="#L123">string_of_reg64</a></li>
<li><a href="#L159">string_of_reg8h</a></li>
<li><a href="#L141">string_of_reg8l</a></li>
<li><a href="#L201">string_of_registerf</a></li>
<li><a href="#L234">string_of_rounding</a></li>
<li><a href="#L67">string_of_string_literal</a></li>
<li><a href="#L86">string_of_symbol</a></li>
<li><a href="#L43">system</a></li>
<li><a href="#L251">use_plt</a></li>
<li><a href="#L62">windows</a></li>
<li><a href="#L242">with_internal_assembler</a></li>
</ul>
 <h2>Data types defined</h2>
 <ul class="toc">
<li><a href="#L18">system</a></li>
</ul>
 <h2>Source code</h2>

  <code><ol><li><span class="Comment">(**************************************************************************)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; OCaml&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Fabrice Le Fessant, projet Gallium, INRIA Rocquencourt&nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; Copyright 2014 Institut National de Recherche en Informatique et&nbsp; &nbsp;&nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp;&nbsp; en Automatique.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; All rights reserved.&nbsp; This <a href="x86_dsl.ml.html#L97" title="ocaml/asmcomp/x86_dsl.ml:97">file</a> is distributed under the terms of&nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; the GNU Lesser General Public License version 2.1, with the&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; special exception on linking described in the <a href="x86_dsl.ml.html#L97" title="ocaml/asmcomp/x86_dsl.ml:97">file</a> LICENSE.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(**************************************************************************)<br/></li>
<li></span><br/></li>
<li><span class="Statement">open</span><span class="ocamlNone"> </span><span class="PreProc">X86_ast<br/></li>
<li></span><br/></li>
<li><a id="L18">&#x200c;</a><span class="Statement">type</span> <span class="ocamlLCIdentifier"><span class="linkable">system</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Comment">(* 32 bits and 64 bits *)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">S_macosx<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">S_gnu<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">S_cygwin<br/></li>
<li></span><br/></li>
<li>&nbsp; <span class="Comment">(* 32 bits only *)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">S_solaris<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">S_win32<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">S_linux_elf<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">S_bsd_elf<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">S_beos<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">S_mingw<br/></li>
<li></span><br/></li>
<li>&nbsp; <span class="Comment">(* 64 bits only *)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">S_win64<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">S_linux<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">S_mingw64<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">S_freebsd<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">S_netbsd<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">S_openbsd<br/></li>
<li></span><br/></li>
<li>&nbsp; <span class="Statement">|</span> <span class="Constant">S_unknown<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a id="L43">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">system</span></span> <span class="Statement">=</span> <span class="Statement">match</span> <span class="PreProc">Config</span>.<span class="ocamlLCIdentifier"><span class="linkable">system</span></span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">&quot;<a href="arm64/arch.mli.html#L21" title="ocaml/asmcomp/arm64/arch.mli:21">macosx</a>&quot;</span> <span class="Statement">-&gt;</span> <span class="Constant">S_macosx<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">&quot;solaris&quot;</span> <span class="Statement">-&gt;</span> <span class="Constant">S_solaris<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">&quot;win32&quot;</span> <span class="Statement">-&gt;</span> <span class="Constant">S_win32<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">&quot;linux_elf&quot;</span> <span class="Statement">-&gt;</span> <span class="Constant">S_linux_elf<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">&quot;bsd_elf&quot;</span> <span class="Statement">-&gt;</span> <span class="Constant">S_bsd_elf<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">&quot;beos&quot;</span> <span class="Statement">-&gt;</span> <span class="Constant">S_beos<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">&quot;gnu&quot;</span> <span class="Statement">-&gt;</span> <span class="Constant">S_gnu<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">&quot;cygwin&quot;</span> <span class="Statement">-&gt;</span> <span class="Constant">S_cygwin<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">&quot;mingw&quot;</span> <span class="Statement">-&gt;</span> <span class="Constant">S_mingw<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">&quot;mingw64&quot;</span> <span class="Statement">-&gt;</span> <span class="Constant">S_mingw64<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">&quot;<a href="amd64/arch.mli.html#L74" title="ocaml/asmcomp/amd64/arch.mli:74">win64</a>&quot;</span> <span class="Statement">-&gt;</span> <span class="Constant">S_win64<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">&quot;linux&quot;</span> <span class="Statement">-&gt;</span> <span class="Constant">S_linux<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">&quot;freebsd&quot;</span> <span class="Statement">-&gt;</span> <span class="Constant">S_freebsd<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">&quot;netbsd&quot;</span> <span class="Statement">-&gt;</span> <span class="Constant">S_netbsd<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">&quot;openbsd&quot;</span> <span class="Statement">-&gt;</span> <span class="Constant">S_openbsd<br/></li>
<li></span><br/></li>
<li>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">S_unknown<br/></li>
<li></span><br/></li>
<li><a id="L62">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">windows</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L18" title="ocaml/asmcomp/x86_proc.ml:18">system</a></span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">S_mingw64</span> <span class="Statement">|</span> <span class="Constant">S_cygwin</span> <span class="Statement">|</span> <span class="Constant">S_win64</span> <span class="Statement">-&gt;</span> <span class="Constant">true<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">false<br/></li>
<li></span><br/></li>
<li><a id="L67">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">string_of_string_literal</span></span> <span class="ocamlLCIdentifier"><a href="deadcode.ml.html#L60" title="ocaml/asmcomp/deadcode.ml:60">s</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="dataflow.ml.html#L71" title="ocaml/asmcomp/dataflow.ml:71">b</a></span> <span class="Statement">=</span> <span class="PreProc">Buffer</span>.<span class="ocamlLCIdentifier"><a href="reg.ml.html#L88" title="ocaml/asmcomp/reg.ml:88">create</a></span> <span class="Statement">(</span><span class="PreProc">String</span>.<span class="ocamlLCIdentifier">length</span> <span class="ocamlLCIdentifier"><a href="deadcode.ml.html#L60" title="ocaml/asmcomp/deadcode.ml:60">s</a></span> + <span class="Constant">2</span><span class="Statement">)</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">last_was_escape</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">ref</span> <span class="Constant">false</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">for</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">i</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">0</span><span class="ocamlNone"> </span><span class="Statement">to</span> <span class="PreProc">String</span>.<span class="ocamlLCIdentifier">length</span> <span class="ocamlLCIdentifier"><a href="deadcode.ml.html#L60" title="ocaml/asmcomp/deadcode.ml:60">s</a></span> - <span class="Constant">1</span> <span class="Statement">do<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">c</span><span class="ocamlDo"> </span><span class="Statement">=</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="deadcode.ml.html#L60" title="ocaml/asmcomp/deadcode.ml:60">s</a></span><span class="ocamlDo">.</span><span class="Statement">[</span><span class="ocamlLCIdentifier">i</span><span class="Statement">]</span><span class="ocamlDo"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">c</span><span class="ocamlNone"> </span><span class="Statement">&gt;=</span><span class="ocamlNone"> </span><span class="Constant">'0'</span><span class="ocamlNone"> </span><span class="Statement">&amp;&amp;</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">c</span><span class="ocamlNone"> </span><span class="Statement">&lt;=</span><span class="ocamlNone"> </span><span class="Constant">'9'</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier">last_was_escape<br/></li>
<li></span><span class="ocamlNone">&nbsp; &nbsp; &nbsp; </span><span class="Statement">then</span><span class="ocamlDo"> </span><span class="PreProc">Printf</span><span class="ocamlDo">.</span><span class="ocamlLCIdentifier"><a href="x86_gas.ml.html#L19" title="ocaml/asmcomp/x86_gas.ml:19">bprintf</a></span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="dataflow.ml.html#L71" title="ocaml/asmcomp/dataflow.ml:71">b</a></span><span class="ocamlDo"> </span><span class="Constant">&quot;\\%o&quot;</span><span class="ocamlDo"> </span><span class="Statement">(</span><span class="PreProc">Char</span><span class="ocamlDo">.</span><span class="ocamlLCIdentifier">code</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">c</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; </span><span class="Statement">else</span><span class="ocamlDo"> </span><span class="PreProc">Buffer</span><span class="ocamlDo">.</span><span class="ocamlLCIdentifier">add_char</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="dataflow.ml.html#L71" title="ocaml/asmcomp/dataflow.ml:71">b</a></span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">c<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; </span><span class="Statement">else</span><span class="ocamlDo"> </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">c</span><span class="ocamlNone"> </span><span class="Statement">&gt;=</span><span class="ocamlNone"> </span><span class="Constant">' '</span><span class="ocamlNone"> </span><span class="Statement">&amp;&amp;</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">c</span><span class="ocamlNone"> </span><span class="Statement">&lt;=</span><span class="ocamlNone"> </span><span class="Constant">'~'</span><span class="ocamlNone"> </span><span class="Statement">&amp;&amp;</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">c</span><span class="ocamlNone"> </span><span class="Statement">&lt;&gt;</span><span class="ocamlNone"> </span><span class="Constant">'&quot;'</span><span class="ocamlNone"> </span><span class="Comment">(* '&quot;' *)</span><span class="ocamlNone"> </span><span class="Statement">&amp;&amp;</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">c</span><span class="ocamlNone"> </span><span class="Statement">&lt;&gt;</span><span class="ocamlNone"> </span><span class="Constant">'\\'</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlDo"> </span><span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="PreProc">Buffer</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">add_char</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="dataflow.ml.html#L71" title="ocaml/asmcomp/dataflow.ml:71">b</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">c</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">last_was_escape</span><span class="ocamlEnd"> </span><span class="Statement">:=</span><span class="ocamlEnd"> </span><span class="Constant">false<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Statement">end</span><span class="ocamlDo"> </span><span class="Statement">else</span><span class="ocamlDo"> </span><span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="PreProc">Printf</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="x86_gas.ml.html#L19" title="ocaml/asmcomp/x86_gas.ml:19">bprintf</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="dataflow.ml.html#L71" title="ocaml/asmcomp/dataflow.ml:71">b</a></span><span class="ocamlEnd"> </span><span class="Constant">&quot;\\%o&quot;</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="PreProc">Char</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">code</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">c</span><span class="Statement">);<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">last_was_escape</span><span class="ocamlEnd"> </span><span class="Statement">:=</span><span class="ocamlEnd"> </span><span class="Constant">true<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span><span class="ocamlDo">&nbsp; </span><span class="Statement">done;<br/></li>
<li></span>&nbsp; <span class="PreProc">Buffer</span>.<span class="ocamlLCIdentifier">contents</span> <span class="ocamlLCIdentifier"><a href="dataflow.ml.html#L71" title="ocaml/asmcomp/dataflow.ml:71">b</a><br/></li>
<li></span><br/></li>
<li><a id="L86">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">string_of_symbol</span></span> <span class="ocamlLCIdentifier">prefix</span> <span class="ocamlLCIdentifier"><a href="deadcode.ml.html#L60" title="ocaml/asmcomp/deadcode.ml:60">s</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">spec</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">ref</span> <span class="Constant">false</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">for</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">i</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">0</span><span class="ocamlNone"> </span><span class="Statement">to</span> <span class="PreProc">String</span>.<span class="ocamlLCIdentifier">length</span> <span class="ocamlLCIdentifier"><a href="deadcode.ml.html#L60" title="ocaml/asmcomp/deadcode.ml:60">s</a></span> - <span class="Constant">1</span> <span class="Statement">do<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; </span><span class="Statement">match</span><span class="ocamlDo"> </span><span class="PreProc">String</span><span class="ocamlDo">.</span><span class="ocamlLCIdentifier">unsafe_get</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="deadcode.ml.html#L60" title="ocaml/asmcomp/deadcode.ml:60">s</a></span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">i</span><span class="ocamlDo"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlDo"> </span><span class="Constant">'A'</span><span class="ocamlDo">..</span><span class="Constant">'Z'</span><span class="ocamlDo"> </span><span class="Statement">|</span><span class="ocamlDo"> </span><span class="Constant">'<a href="amd64/selection.ml.html#L43" title="ocaml/asmcomp/amd64/selection.ml:43">a</a>'</span><span class="ocamlDo">..</span><span class="Constant">'z'</span><span class="ocamlDo"> </span><span class="Statement">|</span><span class="ocamlDo"> </span><span class="Constant">'0'</span><span class="ocamlDo">..</span><span class="Constant">'9'</span><span class="ocamlDo"> </span><span class="Statement">|</span><span class="ocamlDo"> </span><span class="Constant">'_'</span><span class="ocamlDo"> </span><span class="Statement">|</span><span class="ocamlDo"> </span><span class="Constant">'.'</span><span class="ocamlDo"> </span><span class="Statement">-&gt;</span><span class="ocamlDo"> </span><span class="Constant">()<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlDo"> </span><span class="Statement">_</span><span class="ocamlDo"> </span><span class="Statement">-&gt;</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">spec</span><span class="ocamlDo"> </span><span class="Statement">:=</span><span class="ocamlDo"> </span><span class="Constant">true</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlDo">&nbsp; </span><span class="Statement">done;<br/></li>
<li></span>&nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="Statement">not</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier">spec</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">prefix</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">&quot;&quot;</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier"><a href="deadcode.ml.html#L60" title="ocaml/asmcomp/deadcode.ml:60">s</a></span> <span class="Statement">else</span> <span class="ocamlLCIdentifier">prefix</span> <span class="Statement">^</span> <span class="ocamlLCIdentifier"><a href="deadcode.ml.html#L60" title="ocaml/asmcomp/deadcode.ml:60">s</a><br/></li>
<li></span>&nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="dataflow.ml.html#L71" title="ocaml/asmcomp/dataflow.ml:71">b</a></span> <span class="Statement">=</span> <span class="PreProc">Buffer</span>.<span class="ocamlLCIdentifier"><a href="reg.ml.html#L88" title="ocaml/asmcomp/reg.ml:88">create</a></span> <span class="Statement">(</span><span class="PreProc">String</span>.<span class="ocamlLCIdentifier">length</span> <span class="ocamlLCIdentifier"><a href="deadcode.ml.html#L60" title="ocaml/asmcomp/deadcode.ml:60">s</a></span> + <span class="Constant">10</span><span class="Statement">)</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">Buffer</span>.<span class="ocamlLCIdentifier">add_string</span> <span class="ocamlLCIdentifier"><a href="dataflow.ml.html#L71" title="ocaml/asmcomp/dataflow.ml:71">b</a></span> <span class="ocamlLCIdentifier">prefix</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">String</span>.<span class="ocamlLCIdentifier">iter<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(function<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Statement">(</span><span class="Constant">'A'</span>..<span class="Constant">'Z'</span> <span class="Statement">|</span> <span class="Constant">'<a href="amd64/selection.ml.html#L43" title="ocaml/asmcomp/amd64/selection.ml:43">a</a>'</span>..<span class="Constant">'z'</span> <span class="Statement">|</span> <span class="Constant">'0'</span>..<span class="Constant">'9'</span> <span class="Statement">|</span> <span class="Constant">'_'</span> <span class="Statement">|</span> <span class="Constant">'.'</span><span class="Statement">)</span> <span class="Statement">as</span> <span class="ocamlLCIdentifier">c</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">Buffer</span>.<span class="ocamlLCIdentifier">add_char</span> <span class="ocamlLCIdentifier"><a href="dataflow.ml.html#L71" title="ocaml/asmcomp/dataflow.ml:71">b</a></span> <span class="ocamlLCIdentifier">c<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="ocamlLCIdentifier">c</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">Printf</span>.<span class="ocamlLCIdentifier"><a href="x86_gas.ml.html#L19" title="ocaml/asmcomp/x86_gas.ml:19">bprintf</a></span> <span class="ocamlLCIdentifier"><a href="dataflow.ml.html#L71" title="ocaml/asmcomp/dataflow.ml:71">b</a></span> <span class="Constant">&quot;$%02x&quot;</span> <span class="Statement">(</span><span class="PreProc">Char</span>.<span class="ocamlLCIdentifier">code</span> <span class="ocamlLCIdentifier">c</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="deadcode.ml.html#L60" title="ocaml/asmcomp/deadcode.ml:60">s</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">Buffer</span>.<span class="ocamlLCIdentifier">contents</span> <span class="ocamlLCIdentifier"><a href="dataflow.ml.html#L71" title="ocaml/asmcomp/dataflow.ml:71">b</a><br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="x86_proc.mli.html#L34" title="ocaml/asmcomp/x86_proc.mli:34">buf_bytes_directive</a></span> <span class="ocamlLCIdentifier"><a href="dataflow.ml.html#L71" title="ocaml/asmcomp/dataflow.ml:71">b</a></span> <span class="ocamlLCIdentifier"><a href="#L280" title="ocaml/asmcomp/x86_proc.ml:280">directive</a></span> <span class="ocamlLCIdentifier"><a href="deadcode.ml.html#L60" title="ocaml/asmcomp/deadcode.ml:60">s</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">pos</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">ref</span> <span class="Constant">0</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">for</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">i</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">0</span><span class="ocamlNone"> </span><span class="Statement">to</span> <span class="PreProc">String</span>.<span class="ocamlLCIdentifier">length</span> <span class="ocamlLCIdentifier"><a href="deadcode.ml.html#L60" title="ocaml/asmcomp/deadcode.ml:60">s</a></span> - <span class="Constant">1</span> <span class="Statement">do<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier">pos</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">0<br/></li>
<li></span><span class="ocamlNone">&nbsp; &nbsp; </span><span class="Statement">then</span><span class="ocamlDo"> </span><span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">i</span><span class="ocamlNone"> </span><span class="Statement">&gt;</span><span class="ocamlNone"> </span><span class="Constant">0</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlEnd"> </span><span class="PreProc">Buffer</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">add_char</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="dataflow.ml.html#L71" title="ocaml/asmcomp/dataflow.ml:71">b</a></span><span class="ocamlEnd"> </span><span class="Constant">'\n'</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="PreProc">Buffer</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">add_char</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="dataflow.ml.html#L71" title="ocaml/asmcomp/dataflow.ml:71">b</a></span><span class="ocamlEnd"> </span><span class="Constant">'\<a href="CSEgen.ml.html#L40" title="ocaml/asmcomp/CSEgen.ml:40">t</a>'</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="PreProc">Buffer</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">add_string</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="dataflow.ml.html#L71" title="ocaml/asmcomp/dataflow.ml:71">b</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L280" title="ocaml/asmcomp/x86_proc.ml:280">directive</a></span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="PreProc">Buffer</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">add_char</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="dataflow.ml.html#L71" title="ocaml/asmcomp/dataflow.ml:71">b</a></span><span class="ocamlEnd"> </span><span class="Constant">'\<a href="CSEgen.ml.html#L40" title="ocaml/asmcomp/CSEgen.ml:40">t</a>'</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; </span><span class="Statement">else</span><span class="ocamlDo"> </span><span class="PreProc">Buffer</span><span class="ocamlDo">.</span><span class="ocamlLCIdentifier">add_char</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="dataflow.ml.html#L71" title="ocaml/asmcomp/dataflow.ml:71">b</a></span><span class="ocamlDo"> </span><span class="Constant">','</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; </span><span class="PreProc">Printf</span><span class="ocamlDo">.</span><span class="ocamlLCIdentifier"><a href="x86_gas.ml.html#L19" title="ocaml/asmcomp/x86_gas.ml:19">bprintf</a></span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="dataflow.ml.html#L71" title="ocaml/asmcomp/dataflow.ml:71">b</a></span><span class="ocamlDo"> </span><span class="Constant">&quot;%<a href="deadcode.ml.html#L23" title="ocaml/asmcomp/deadcode.ml:23">d</a>&quot;</span><span class="ocamlDo"> </span><span class="Statement">(</span><span class="PreProc">Char</span><span class="ocamlDo">.</span><span class="ocamlLCIdentifier">code</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="deadcode.ml.html#L60" title="ocaml/asmcomp/deadcode.ml:60">s</a></span><span class="ocamlDo">.</span><span class="Statement">[</span><span class="ocamlLCIdentifier">i</span><span class="Statement">]);<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier">incr</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">pos</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier">pos</span><span class="ocamlNone"> </span><span class="Statement">&gt;=</span><span class="ocamlNone"> </span><span class="Constant">16</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlDo"> </span><span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">pos</span><span class="ocamlEnd"> </span><span class="Statement">:=</span><span class="ocamlEnd"> </span><span class="Constant">0</span><span class="ocamlEnd"> </span><span class="Statement">end<br/></li>
<li></span><span class="ocamlDo">&nbsp; </span><span class="Statement">done<br/></li>
<li></span><br/></li>
<li><a id="L123">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">string_of_reg64</span></span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RAX</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="amd64/selection.ml.html#L80" title="ocaml/asmcomp/amd64/selection.ml:80">rax</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RBX</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="x86_dsl.ml.html#L51" title="ocaml/asmcomp/x86_dsl.ml:51">rbx</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RDI</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;rdi&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RSI</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;rsi&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RDX</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="amd64/selection.ml.html#L82" title="ocaml/asmcomp/amd64/selection.ml:82">rdx</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RCX</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="amd64/selection.ml.html#L81" title="ocaml/asmcomp/amd64/selection.ml:81">rcx</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RBP</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="amd64/proc.ml.html#L139" title="ocaml/asmcomp/amd64/proc.ml:139">rbp</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RSP</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="x86_dsl.ml.html#L59" title="ocaml/asmcomp/x86_dsl.ml:59">rsp</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R8</span>&nbsp; <span class="Statement">-&gt;</span> <span class="Constant">&quot;r8&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R9</span>&nbsp; <span class="Statement">-&gt;</span> <span class="Constant">&quot;r9&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R10</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="amd64/proc.ml.html#L137" title="ocaml/asmcomp/amd64/proc.ml:137">r10</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R11</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="amd64/proc.ml.html#L138" title="ocaml/asmcomp/amd64/proc.ml:138">r11</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R12</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="x86_dsl.ml.html#L55" title="ocaml/asmcomp/x86_dsl.ml:55">r12</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R13</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="x86_dsl.ml.html#L56" title="ocaml/asmcomp/x86_dsl.ml:56">r13</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R14</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="x86_dsl.ml.html#L57" title="ocaml/asmcomp/x86_dsl.ml:57">r14</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R15</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="x86_dsl.ml.html#L58" title="ocaml/asmcomp/x86_dsl.ml:58">r15</a>&quot;<br/></li>
<li></span><br/></li>
<li><a id="L141">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">string_of_reg8l</span></span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RAX</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="x86_dsl.ml.html#L46" title="ocaml/asmcomp/x86_dsl.ml:46">al</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RBX</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;bl&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RCX</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="x86_dsl.ml.html#L48" title="ocaml/asmcomp/x86_dsl.ml:48">cl</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RDX</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;dl&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RSP</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;spl&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RBP</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;bpl&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RSI</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;sil&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RDI</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;dil&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R8</span>&nbsp; <span class="Statement">-&gt;</span> <span class="Constant">&quot;r8b&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R9</span>&nbsp; <span class="Statement">-&gt;</span> <span class="Constant">&quot;r9b&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R10</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;r10b&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R11</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;r11b&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R12</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;r12b&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R13</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;r13b&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R14</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;r14b&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R15</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;r15b&quot;<br/></li>
<li></span><br/></li>
<li><a id="L159">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">string_of_reg8h</span></span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">AH</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="x86_dsl.ml.html#L47" title="ocaml/asmcomp/x86_dsl.ml:47">ah</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">BH</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="dataflow.ml.html#L77" title="ocaml/asmcomp/dataflow.ml:77">bh</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">CH</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;ch&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">DH</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;dh&quot;<br/></li>
<li></span><br/></li>
<li><a id="L165">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">string_of_reg16</span></span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RAX</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="x86_dsl.ml.html#L49" title="ocaml/asmcomp/x86_dsl.ml:49">ax</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RBX</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="dataflow.ml.html#L76" title="ocaml/asmcomp/dataflow.ml:76">bx</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RCX</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;cx&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RDX</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;dx&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RSP</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;sp&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RBP</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;bp&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RSI</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;si&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RDI</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;di&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R8</span>&nbsp; <span class="Statement">-&gt;</span> <span class="Constant">&quot;r8w&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R9</span>&nbsp; <span class="Statement">-&gt;</span> <span class="Constant">&quot;r9w&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R10</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;r10w&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R11</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;r11w&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R12</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;r12w&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R13</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;r13w&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R14</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;r14w&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R15</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;r15w&quot;<br/></li>
<li></span><br/></li>
<li><a id="L183">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">string_of_reg32</span></span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RAX</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="x86_dsl.ml.html#L62" title="ocaml/asmcomp/x86_dsl.ml:62">eax</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RBX</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="x86_dsl.ml.html#L63" title="ocaml/asmcomp/x86_dsl.ml:63">ebx</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RCX</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="x86_dsl.ml.html#L64" title="ocaml/asmcomp/x86_dsl.ml:64">ecx</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RDX</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="x86_dsl.ml.html#L65" title="ocaml/asmcomp/x86_dsl.ml:65">edx</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RSP</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="x86_dsl.ml.html#L67" title="ocaml/asmcomp/x86_dsl.ml:67">esp</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RBP</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="x86_dsl.ml.html#L66" title="ocaml/asmcomp/x86_dsl.ml:66">ebp</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RSI</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;esi&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RDI</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;edi&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R8</span>&nbsp; <span class="Statement">-&gt;</span> <span class="Constant">&quot;r8d&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R9</span>&nbsp; <span class="Statement">-&gt;</span> <span class="Constant">&quot;r9d&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R10</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;r10d&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R11</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;r11d&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R12</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;r12d&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R13</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;r13d&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R14</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;r14d&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">R15</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;r15d&quot;<br/></li>
<li></span><br/></li>
<li><a id="L201">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">string_of_registerf</span></span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">XMM</span> <span class="ocamlLCIdentifier">n</span> <span class="Statement">-&gt;</span> <span class="PreProc">Printf</span>.<span class="ocamlLCIdentifier">sprintf</span> <span class="Constant">&quot;xmm%<a href="deadcode.ml.html#L23" title="ocaml/asmcomp/deadcode.ml:23">d</a>&quot;</span> <span class="ocamlLCIdentifier">n<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">TOS</span> <span class="Statement">-&gt;</span> <span class="PreProc">Printf</span>.<span class="ocamlLCIdentifier">sprintf</span> <span class="Constant">&quot;tos&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">ST</span> <span class="ocamlLCIdentifier">n</span> <span class="Statement">-&gt;</span> <span class="PreProc">Printf</span>.<span class="ocamlLCIdentifier">sprintf</span> <span class="Constant">&quot;st(%<a href="deadcode.ml.html#L23" title="ocaml/asmcomp/deadcode.ml:23">d</a>)&quot;</span> <span class="ocamlLCIdentifier">n<br/></li>
<li></span><br/></li>
<li><a id="L206">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">string_of_condition</span></span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">E</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;e&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">AE</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;ae&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">A</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="amd64/selection.ml.html#L43" title="ocaml/asmcomp/amd64/selection.ml:43">a</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">GE</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;ge&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">G</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;g&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">NE</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;ne&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">B</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="dataflow.ml.html#L71" title="ocaml/asmcomp/dataflow.ml:71">b</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">BE</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;be&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">L</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="power/proc.ml.html#L105" title="ocaml/asmcomp/power/proc.ml:105">l</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">LE</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;le&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">NP</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;np&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">P</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;p&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">NS</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;ns&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">S</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;<a href="deadcode.ml.html#L60" title="ocaml/asmcomp/deadcode.ml:60">s</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">NO</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;no&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">O</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;o&quot;<br/></li>
<li></span><br/></li>
<li><a id="L224">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">string_of_float_condition</span></span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">EQf</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;eq&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">LTf</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;lt&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">LEf</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;le&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">UNORDf</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;unord&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">NEQf</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;neq&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">NLTf</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;nlt&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">NLEf</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;nle&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">ORDf</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;ord&quot;<br/></li>
<li></span><br/></li>
<li><a id="L234">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">string_of_rounding</span></span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RoundDown</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;roundsd.down&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RoundUp</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;roundsd.up&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RoundTruncate</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;roundsd.trunc&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">RoundNearest</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;roundsd.near&quot;<br/></li>
<li></span><br/></li>
<li><a id="L240">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">internal_assembler</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">ref</span> <span class="Constant">None<br/></li>
<li><a id="L241">&#x200c;</a></span><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">register_internal_assembler</span></span> <span class="ocamlLCIdentifier">f</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L240" title="ocaml/asmcomp/x86_proc.ml:240">internal_assembler</a></span> <span class="Statement">:=</span> <span class="Constant">Some</span> <span class="ocamlLCIdentifier">f<br/></li>
<li><a id="L242">&#x200c;</a></span><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">with_internal_assembler</span></span> <span class="ocamlLCIdentifier">assemble</span> <span class="ocamlLCIdentifier">k</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="PreProc">Misc</span>.<span class="ocamlLCIdentifier">protect_refs</span> <span class="Statement">[</span> <span class="Constant">R</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L240" title="ocaml/asmcomp/x86_proc.ml:240">internal_assembler</a></span>, <span class="Constant">Some</span> <span class="ocamlLCIdentifier">assemble</span><span class="Statement">)</span> <span class="Statement">]</span> <span class="ocamlLCIdentifier">k<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Which asm conventions to use *)<br/></li>
<li><a id="L246">&#x200c;</a></span><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">masm</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L18" title="ocaml/asmcomp/x86_proc.ml:18">system</a></span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">S_win32</span> <span class="Statement">|</span> <span class="Constant">S_win64</span> <span class="Statement">-&gt;</span> <span class="Constant">true<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">false<br/></li>
<li></span><br/></li>
<li><a id="L251">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">use_plt</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L18" title="ocaml/asmcomp/x86_proc.ml:18">system</a></span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">S_macosx</span> <span class="Statement">|</span> <span class="Constant">S_mingw64</span> <span class="Statement">|</span> <span class="Constant">S_cygwin</span> <span class="Statement">|</span> <span class="Constant">S_win64</span> <span class="Statement">-&gt;</span> <span class="Constant">false<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Statement">!</span><span class="PreProc">Clflags</span>.<span class="ocamlLCIdentifier">dlcode<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Shall we use an external assembler command ?<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; If [<a href="#L260" title="ocaml/asmcomp/x86_proc.ml:260">binary_content</a>] contains some <a href="emit.mli.html#L19" title="ocaml/asmcomp/emit.mli:19">data</a>, we can directly<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; save it. Otherwise, we have to ask an external command.<br/></li>
<li></span><span class="Comment">*)<br/></li>
<li><a id="L260">&#x200c;</a></span><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">binary_content</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">ref</span> <span class="Constant">None<br/></li>
<li></span><br/></li>
<li><a id="L262">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">compile</span></span> <span class="ocamlLCIdentifier">infile</span> <span class="ocamlLCIdentifier">outfile</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L246" title="ocaml/asmcomp/x86_proc.ml:246">masm</a></span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">Ccomp</span>.<span class="ocamlLCIdentifier">command</span> <span class="Statement">(</span><span class="PreProc">Config</span>.<span class="ocamlLCIdentifier">asm</span> <span class="Statement">^<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="PreProc">Filename</span>.<span class="ocamlLCIdentifier">quote</span> <span class="ocamlLCIdentifier">outfile</span> <span class="Statement">^</span> <span class="Constant">&quot; &quot;</span> <span class="Statement">^</span> <span class="PreProc">Filename</span>.<span class="ocamlLCIdentifier">quote</span> <span class="ocamlLCIdentifier">infile</span> <span class="Statement">^<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(if</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="PreProc">Clflags</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">verbose</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="Constant">&quot;&quot;</span> <span class="Statement">else</span> <span class="Constant">&quot;&gt;NUL&quot;</span><span class="Statement">))<br/></li>
<li></span>&nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">Ccomp</span>.<span class="ocamlLCIdentifier">command</span> <span class="Statement">(</span><span class="PreProc">Config</span>.<span class="ocamlLCIdentifier">asm</span> <span class="Statement">^</span> <span class="Constant">&quot; &quot;</span> <span class="Statement">^<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(</span><span class="PreProc">String</span>.<span class="ocamlLCIdentifier">concat</span> <span class="Constant">&quot; &quot;</span> <span class="Statement">(</span><span class="PreProc">Misc</span>.<span class="ocamlLCIdentifier">debug_prefix_map_flags</span> <span class="Constant">()</span><span class="Statement">))</span> <span class="Statement">^<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">&quot; -o &quot;</span> <span class="Statement">^</span> <span class="PreProc">Filename</span>.<span class="ocamlLCIdentifier">quote</span> <span class="ocamlLCIdentifier">outfile</span> <span class="Statement">^</span> <span class="Constant">&quot; &quot;</span> <span class="Statement">^<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="PreProc">Filename</span>.<span class="ocamlLCIdentifier">quote</span> <span class="ocamlLCIdentifier">infile</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><a id="L273">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">assemble_file</span></span> <span class="ocamlLCIdentifier">infile</span> <span class="ocamlLCIdentifier">outfile</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L260" title="ocaml/asmcomp/x86_proc.ml:260">binary_content</a></span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">None</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="strmatch.ml.html#L387" title="ocaml/asmcomp/strmatch.ml:387">compile</a></span> <span class="ocamlLCIdentifier">infile</span> <span class="ocamlLCIdentifier">outfile<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Some</span> <span class="ocamlLCIdentifier">content</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">content</span> <span class="ocamlLCIdentifier">outfile</span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="#L260" title="ocaml/asmcomp/x86_proc.ml:260">binary_content</a></span> <span class="Statement">:=</span> <span class="Constant">None</span><span class="Statement">;</span> <span class="Constant">0<br/></li>
<li></span><br/></li>
<li><a id="L278">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">asm_code</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">ref</span> <span class="Constant">[]<br/></li>
<li></span><br/></li>
<li><a id="L280">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">directive</span></span> <span class="ocamlLCIdentifier">dir</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L278" title="ocaml/asmcomp/x86_proc.ml:278">asm_code</a></span> <span class="Statement">:=</span> <span class="ocamlLCIdentifier">dir</span> <span class="Statement">::</span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L278" title="ocaml/asmcomp/x86_proc.ml:278">asm_code</a><br/></li>
<li><a id="L281">&#x200c;</a></span><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">emit</span></span> <span class="ocamlLCIdentifier">ins</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L280" title="ocaml/asmcomp/x86_proc.ml:280">directive</a></span> <span class="Statement">(</span><span class="Constant">Ins</span> <span class="ocamlLCIdentifier">ins</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><a id="L283">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">reset_asm_code</span></span> <span class="Constant">()</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L278" title="ocaml/asmcomp/x86_proc.ml:278">asm_code</a></span> <span class="Statement">:=</span> <span class="Constant">[]<br/></li>
<li></span><br/></li>
<li><a id="L285">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">generate_code</span></span> <span class="ocamlLCIdentifier">asm</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">instrs</span> <span class="Statement">=</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">rev</span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L278" title="ocaml/asmcomp/x86_proc.ml:278">asm_code</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">asm</span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Some</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">f</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">f</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">instrs<br/></li>
<li></span><span class="ocamlEnd">&nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">None</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="Constant">()<br/></li>
<li></span><span class="ocamlEnd">&nbsp; </span><span class="Statement">end;<br/></li>
<li></span>&nbsp; <span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L240" title="ocaml/asmcomp/x86_proc.ml:240">internal_assembler</a></span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Some</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">f</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L260" title="ocaml/asmcomp/x86_proc.ml:260">binary_content</a></span><span class="ocamlEnd"> </span><span class="Statement">:=</span><span class="ocamlEnd"> </span><span class="Constant">Some</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">f</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">instrs</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">None</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L260" title="ocaml/asmcomp/x86_proc.ml:260">binary_content</a></span><span class="ocamlEnd"> </span><span class="Statement">:=</span><span class="ocamlEnd"> </span><span class="Constant">None<br/></li>
<li></span><span class="ocamlEnd">&nbsp; </span><span class="Statement">end<br/></li>
</ol></span></code>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="index.html">Top Level</a></span>
 </p>

 </body>
</html>
