<!-- generated by the vscode.pl tool from vscoded.-->

<html>
 <head>
  <title>ocaml/asmcomp/riscv/proc.ml - ocaml</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

.nav-bar {
    font-size: 120%;
    margin-top: 5px;
    margin-bottom: 5px;
}

.nav-link {
    padding-left: 5em;
    padding-right: 5em;
}

ul.toc {
    line-height: 200%;
    font-size: 150%;
}

code {
    font-family: consolas, monospace;
    line-height: 130%;
}

span.Constant {
    color: DarkGreen;
}

span.Special {
    color: #c06000;
}

span.Comment {
    color: DarkRed;
    font-style: italic;
}

span.Identifier {
    color: DarkCyan;
}

span.PreProc {
    color: DarkMagenta;
}

span.Statement, span.Type, span.Keyword, span.Repeat, span.Conditional,
    span.Operator, span.Exception
{
    color: DarkBlue;
}

span.Todo {
    color: DarkRed;
    background-color: Gold;
    font-style: italic;
}

span.Underlined {
    text-decoration: underline;
}

span.linkable {
    font-weight: bold;
}

code ol {
    counter-reset: item;
    list-style-type: none;
    margin-left: 0;
    padding-left: 0;
    list-style-position: inside;
}

code li {
    display: block;
}

code li:before {
    content: counter(item) "  ";
    counter-increment: item;
    color: #999;
    padding-right: 0.5em;
    padding-left: 0.4em;
    list-style-position: inside;
    text-align: right
}

  </style>
 </head>
 <body>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="../index.html">Top Level</a></span>
 </p>

  <h1>ocaml/asmcomp/riscv/proc.ml - ocaml</h1>
 <h2>Global variables defined</h2>
 <ul class="toc">
<li><a href="#L114">all_phys_regs</a></li>
<li><a href="#L318">assemble_file</a></li>
<li><a href="#L127">calling_conventions</a></li>
<li><a href="#L247">destroyed_at_alloc</a></li>
<li><a href="#L239">destroyed_at_c_noalloc_call</a></li>
<li><a href="#L252">destroyed_at_oper</a></li>
<li><a href="#L262">destroyed_at_raise</a></li>
<li><a href="#L264">destroyed_at_reloadretaddr</a></li>
<li><a href="#L195">external_calling_conventions</a></li>
<li><a href="#L91">first_available_register</a></li>
<li><a href="#L199">float</a></li>
<li><a href="#L75">float_reg_name</a></li>
<li><a href="#L107">hard_float_reg</a></li>
<li><a href="#L100">hard_int_reg</a></li>
<li><a href="#L154">incoming</a></li>
<li><a href="#L322">init</a></li>
<li><a href="#L198">int</a></li>
<li><a href="#L67">int_reg_name</a></li>
<li><a href="#L172">loc_arguments</a></li>
<li><a href="#L235">loc_exn_bucket</a></li>
<li><a href="#L225">loc_external_arguments</a></li>
<li><a href="#L229">loc_external_results</a></li>
<li><a href="#L175">loc_parameters</a></li>
<li><a href="#L181">loc_results</a></li>
<li><a href="#L164">max_arguments_for_tailcalls</a></li>
<li><a href="#L272">max_register_pressure</a></li>
<li><a href="#L162">not_supported</a></li>
<li><a href="#L89">num_available_registers</a></li>
<li><a href="#L82">num_register_classes</a></li>
<li><a href="#L200">ofs</a></li>
<li><a href="#L158">outgoing</a></li>
<li><a href="#L117">phys_reg</a></li>
<li><a href="#L84">register_class</a></li>
<li><a href="#L93">register_name</a></li>
<li><a href="#L96">rotate_registers</a></li>
<li><a href="#L268">safe_register_pressure</a></li>
<li><a href="#L125">size_domainstate_args</a></li>
<li><a href="#L314">stack_ptr_dwarf_register_number</a></li>
<li><a href="#L120">stack_slot</a></li>
<li><a href="#L27">word_addressed</a></li>
</ul>
 <h2>Source code</h2>

  <code><ol><li><span class="PreProc">#</span> <span class="Constant">2</span> <span class="Constant">&quot;asmcomp/riscv/proc.ml&quot;<br/></li>
<li></span><span class="Comment">(**************************************************************************)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; OCaml&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Nicolas Ojeda Bar &lt;n.oje.bar@gmail.com&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; Copyright 2016 Institut National de Recherche en Informatique et&nbsp; &nbsp;&nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp;&nbsp; en Automatique.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; All rights reserved.&nbsp; This <a href="../x86_dsl.ml.html#L97" title="ocaml/asmcomp/x86_dsl.ml:97">file</a> is distributed under the terms of&nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; the GNU Lesser General Public License version 2.1, with the&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; special exception on linking described in the <a href="../x86_dsl.ml.html#L97" title="ocaml/asmcomp/x86_dsl.ml:97">file</a> LICENSE.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(**************************************************************************)<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Description of the RISC-V *)<br/></li>
<li></span><br/></li>
<li><span class="Statement">open</span><span class="ocamlNone"> </span><span class="PreProc">Misc<br/></li>
<li></span><span class="Statement">open</span><span class="ocamlNone"> </span><span class="PreProc">Cmm<br/></li>
<li></span><span class="Statement">open</span><span class="ocamlNone"> </span><span class="PreProc">Reg<br/></li>
<li></span><span class="Statement">open</span><span class="ocamlNone"> </span><span class="PreProc">Arch<br/></li>
<li></span><span class="Statement">open</span><span class="ocamlNone"> </span><span class="PreProc">Mach<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Instruction selection *)<br/></li>
<li></span><br/></li>
<li><a id="L27">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">word_addressed</span></span> <span class="Statement">=</span> <span class="Constant">false<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Registers available for register allocation *)<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Integer register map<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; --------------------<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp; &nbsp; zero&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; always zero<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; ra&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return address<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; sp, gp, tp&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; stack pointer, <a href="../x86_dsl.ml.html#L98" title="ocaml/asmcomp/x86_dsl.ml:98">global</a> pointer, thread pointer<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; a0-a7&nbsp; &nbsp; &nbsp; &nbsp; 0-7&nbsp; &nbsp; &nbsp;&nbsp; arguments/results<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; <a href="../selectgen.ml.html#L1138" title="ocaml/asmcomp/selectgen.ml:1138">s2</a>-s9&nbsp; &nbsp; &nbsp; &nbsp; 8-15&nbsp; &nbsp; &nbsp; arguments/results (preserved by C)<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; t2-t6&nbsp; &nbsp; &nbsp; &nbsp; 16-20&nbsp; &nbsp;&nbsp; temporary<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; s0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 21&nbsp; &nbsp; &nbsp; &nbsp; general purpose (preserved by C)<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; t0, t1&nbsp; &nbsp; &nbsp;&nbsp; 22-23&nbsp; &nbsp;&nbsp; temporaries (used by <a href="../x86_dsl.ml.html#L121" title="ocaml/asmcomp/x86_dsl.ml:121">call</a> veneers)<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; s1&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 24&nbsp; &nbsp; &nbsp; &nbsp; trap pointer (preserved by C)<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; s10&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 25&nbsp; &nbsp; &nbsp; &nbsp; allocation pointer (preserved by C)<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; s11&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 26&nbsp; &nbsp; &nbsp; &nbsp; domain pointer (preserved by C)<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp; Floating-point register map<br/></li>
<li></span><span class="Comment">&nbsp; ---------------------------<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp; &nbsp; ft0-ft7&nbsp; &nbsp; 100-107&nbsp; &nbsp;&nbsp; temporary<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; fs0-fs1&nbsp; &nbsp; 108-109&nbsp; &nbsp;&nbsp; general purpose (preserved by C)<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; fa0-fa7&nbsp; &nbsp; 110-117&nbsp; &nbsp;&nbsp; arguments/results<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; fs2-fs9&nbsp; &nbsp; 118-125&nbsp; &nbsp;&nbsp; arguments/results (preserved by C)<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; fs10-fs11&nbsp; 126-127&nbsp; &nbsp;&nbsp; general purpose (preserved by C)<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; ft8-ft11&nbsp;&nbsp; 128-131&nbsp; &nbsp;&nbsp; temporary<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp; Additional notes<br/></li>
<li></span><span class="Comment">&nbsp; ----------------<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp; &nbsp; - t1 is used by the code generator, so not available for register<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; allocation.<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp; &nbsp; - t0-t6 may be used by PLT stubs, so should not be used to pass<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; arguments and may be clobbered by [Ialloc] in the presence of dynamic<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; linking.<br/></li>
<li></span><span class="Comment">*)<br/></li>
<li></span><br/></li>
<li><a id="L67">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">int_reg_name</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">[|</span> <span class="Constant">&quot;a0&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;a1&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;a2&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;a3&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;a4&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;a5&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;a6&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;a7&quot;</span><span class="Statement">;</span>&nbsp; <span class="Comment">(* 0 - 7 *)<br/></li>
<li></span>&nbsp; &nbsp;&nbsp; <span class="Constant">&quot;<a href="../selectgen.ml.html#L1138" title="ocaml/asmcomp/selectgen.ml:1138">s2</a>&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;s3&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;s4&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;s5&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;s6&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;s7&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;s8&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;s9&quot;</span><span class="Statement">;</span>&nbsp; <span class="Comment">(* 8 - 15 *)<br/></li>
<li></span>&nbsp; &nbsp;&nbsp; <span class="Constant">&quot;t2&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;t3&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;t4&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;t5&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;t6&quot;</span><span class="Statement">;</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">(* 16 - 20 *)<br/></li>
<li></span>&nbsp; &nbsp;&nbsp; <span class="Constant">&quot;s0&quot;</span><span class="Statement">;</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">(* 21 *)<br/></li>
<li></span>&nbsp; &nbsp;&nbsp; <span class="Constant">&quot;t0&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;t1&quot;</span><span class="Statement">;</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">(* 22 - 23 *)<br/></li>
<li></span>&nbsp; &nbsp;&nbsp; <span class="Constant">&quot;s1&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;s10&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;s11&quot;</span> <span class="Statement">|]</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">(* 24 - 26 *)<br/></li>
<li></span><br/></li>
<li><a id="L75">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">float_reg_name</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">[|</span> <span class="Constant">&quot;ft0&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;ft1&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;ft2&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;ft3&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;ft4&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;ft5&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;ft6&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;ft7&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp;&nbsp; <span class="Constant">&quot;fs0&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;fs1&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp;&nbsp; <span class="Constant">&quot;fa0&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;fa1&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;fa2&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;fa3&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;fa4&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;fa5&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;fa6&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;fa7&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp;&nbsp; <span class="Constant">&quot;fs2&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;fs3&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;fs4&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;fs5&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;fs6&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;fs7&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;fs8&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;fs9&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;fs10&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;fs11&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp;&nbsp; <span class="Constant">&quot;ft8&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;ft9&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;ft10&quot;</span><span class="Statement">;</span> <span class="Constant">&quot;ft11&quot;</span> <span class="Statement">|]<br/></li>
<li></span><br/></li>
<li><a id="L82">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">num_register_classes</span></span> <span class="Statement">=</span> <span class="Constant">2<br/></li>
<li></span><br/></li>
<li><a id="L84">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">register_class</span></span> <span class="ocamlLCIdentifier"><a href="../amd64/reload.ml.html#L90" title="ocaml/asmcomp/amd64/reload.ml:90">r</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="../amd64/reload.ml.html#L90" title="ocaml/asmcomp/amd64/reload.ml:90">r</a></span>.<span class="ocamlLCIdentifier">typ</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Val</span> <span class="Statement">|</span> <span class="Constant">Int</span> <span class="Statement">|</span> <span class="Constant">Addr</span> <span class="Statement">-&gt;</span> <span class="Constant">0<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Float</span> <span class="Statement">-&gt;</span> <span class="Constant">1<br/></li>
<li></span><br/></li>
<li><a id="L89">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">num_available_registers</span></span> <span class="Statement">=</span> <span class="Statement">[|</span> <span class="Constant">22</span><span class="Statement">;</span> <span class="Constant">32</span> <span class="Statement">|]<br/></li>
<li></span><br/></li>
<li><a id="L91">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">first_available_register</span></span> <span class="Statement">=</span> <span class="Statement">[|</span> <span class="Constant">0</span><span class="Statement">;</span> <span class="Constant">100</span> <span class="Statement">|]<br/></li>
<li></span><br/></li>
<li><a id="L93">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">register_name</span></span> <span class="ocamlLCIdentifier"><a href="../amd64/reload.ml.html#L90" title="ocaml/asmcomp/amd64/reload.ml:90">r</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="../amd64/reload.ml.html#L90" title="ocaml/asmcomp/amd64/reload.ml:90">r</a></span><span class="ocamlNone"> </span><span class="Statement">&lt;</span><span class="ocamlNone"> </span><span class="Constant">100</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L48" title="ocaml/asmcomp/power/proc.ml:48">int_reg_name</a></span>.<span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="../amd64/reload.ml.html#L90" title="ocaml/asmcomp/amd64/reload.ml:90">r</a></span><span class="Statement">)</span> <span class="Statement">else</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L53" title="ocaml/asmcomp/power/proc.ml:53">float_reg_name</a></span>.<span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="../amd64/reload.ml.html#L90" title="ocaml/asmcomp/amd64/reload.ml:90">r</a></span> - <span class="Constant">100</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><a id="L96">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">rotate_registers</span></span> <span class="Statement">=</span> <span class="Constant">true<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Representation of hard registers by pseudo-registers *)<br/></li>
<li></span><br/></li>
<li><a id="L100">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">hard_int_reg</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">v</span> <span class="Statement">=</span> <span class="PreProc">Array</span>.<span class="ocamlLCIdentifier">make</span> <span class="Constant">27</span> <span class="PreProc">Reg</span>.<span class="ocamlLCIdentifier"><a href="../reg.ml.html#L63" title="ocaml/asmcomp/reg.ml:63">dummy</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">for</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">i</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">0</span><span class="ocamlNone"> </span><span class="Statement">to</span> <span class="Constant">26</span> <span class="Statement">do<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier">v</span><span class="ocamlDo">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">i</span><span class="Statement">)</span><span class="ocamlDo"> </span><span class="Statement">&lt;-</span><span class="ocamlDo"> </span><span class="PreProc">Reg</span><span class="ocamlDo">.</span><span class="ocamlLCIdentifier"><a href="../reg.ml.html#L113" title="ocaml/asmcomp/reg.ml:113">at_location</a></span><span class="ocamlDo"> </span><span class="Constant">Int</span><span class="ocamlDo"> </span><span class="Statement">(</span><span class="Constant">Reg</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">i</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlDo">&nbsp; </span><span class="Statement">done;<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier">v<br/></li>
<li></span><br/></li>
<li><a id="L107">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">hard_float_reg</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">v</span> <span class="Statement">=</span> <span class="PreProc">Array</span>.<span class="ocamlLCIdentifier">make</span> <span class="Constant">32</span> <span class="PreProc">Reg</span>.<span class="ocamlLCIdentifier"><a href="../reg.ml.html#L63" title="ocaml/asmcomp/reg.ml:63">dummy</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">for</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">i</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">0</span><span class="ocamlNone"> </span><span class="Statement">to</span> <span class="Constant">31</span> <span class="Statement">do<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier">v</span><span class="ocamlDo">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">i</span><span class="Statement">)</span><span class="ocamlDo"> </span><span class="Statement">&lt;-</span><span class="ocamlDo"> </span><span class="PreProc">Reg</span><span class="ocamlDo">.</span><span class="ocamlLCIdentifier"><a href="../reg.ml.html#L113" title="ocaml/asmcomp/reg.ml:113">at_location</a></span><span class="ocamlDo"> </span><span class="Constant">Float</span><span class="ocamlDo"> </span><span class="Statement">(</span><span class="Constant">Reg</span><span class="Statement">(</span><span class="Constant">100</span><span class="ocamlDo"> + </span><span class="ocamlLCIdentifier">i</span><span class="Statement">))<br/></li>
<li></span><span class="ocamlDo">&nbsp; </span><span class="Statement">done;<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier">v<br/></li>
<li></span><br/></li>
<li><a id="L114">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">all_phys_regs</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="PreProc">Array</span>.<span class="ocamlLCIdentifier"><a href="../deadcode.ml.html#L29" title="ocaml/asmcomp/deadcode.ml:29">append</a></span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L77" title="ocaml/asmcomp/power/proc.ml:77">hard_int_reg</a></span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L81" title="ocaml/asmcomp/power/proc.ml:81">hard_float_reg</a><br/></li>
<li></span><br/></li>
<li><a id="L117">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">phys_reg</span></span> <span class="ocamlLCIdentifier">n</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">n</span><span class="ocamlNone"> </span><span class="Statement">&lt;</span><span class="ocamlNone"> </span><span class="Constant">100</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L77" title="ocaml/asmcomp/power/proc.ml:77">hard_int_reg</a></span>.<span class="Statement">(</span><span class="ocamlLCIdentifier">n</span><span class="Statement">)</span> <span class="Statement">else</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L81" title="ocaml/asmcomp/power/proc.ml:81">hard_float_reg</a></span>.<span class="Statement">(</span><span class="ocamlLCIdentifier">n</span> - <span class="Constant">100</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><a id="L120">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">stack_slot</span></span> <span class="ocamlLCIdentifier">slot</span> <span class="ocamlLCIdentifier"><a href="../selectgen.ml.html#L692" title="ocaml/asmcomp/selectgen.ml:692">ty</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="PreProc">Reg</span>.<span class="ocamlLCIdentifier"><a href="../reg.ml.html#L113" title="ocaml/asmcomp/reg.ml:113">at_location</a></span> <span class="ocamlLCIdentifier"><a href="../selectgen.ml.html#L692" title="ocaml/asmcomp/selectgen.ml:692">ty</a></span> <span class="Statement">(</span><span class="Constant">Stack</span> <span class="ocamlLCIdentifier">slot</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Calling conventions *)<br/></li>
<li></span><br/></li>
<li><a id="L125">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">size_domainstate_args</span></span> <span class="Statement">=</span> <span class="Constant">64</span> <span class="Statement">*</span> <span class="ocamlLCIdentifier"><a href="../power/arch.mli.html#L56" title="ocaml/asmcomp/power/arch.mli:56">size_int</a><br/></li>
<li></span><br/></li>
<li><a id="L127">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">calling_conventions</span><br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier">first_int</span> <span class="ocamlLCIdentifier">last_int</span> <span class="ocamlLCIdentifier">first_float</span> <span class="ocamlLCIdentifier">last_float</span> <span class="ocamlLCIdentifier">make_stack</span> <span class="ocamlLCIdentifier">first_stack</span> <span class="ocamlLCIdentifier"><a href="../x86_ast.mli.html#L89" title="ocaml/asmcomp/x86_ast.mli:89">arg</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="../x86_dsl.ml.html#L101" title="ocaml/asmcomp/x86_dsl.ml:101">loc</a></span> <span class="Statement">=</span> <span class="PreProc">Array</span>.<span class="ocamlLCIdentifier">make</span> <span class="Statement">(</span><span class="PreProc">Array</span>.<span class="ocamlLCIdentifier">length</span> <span class="ocamlLCIdentifier"><a href="../x86_ast.mli.html#L89" title="ocaml/asmcomp/x86_ast.mli:89">arg</a></span><span class="Statement">)</span> <span class="PreProc">Reg</span>.<span class="ocamlLCIdentifier"><a href="../reg.ml.html#L63" title="ocaml/asmcomp/reg.ml:63">dummy</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="Type"><a href="../power/proc.ml.html#L211" title="ocaml/asmcomp/power/proc.ml:211">int</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">ref</span> <span class="ocamlLCIdentifier">first_int</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="Type"><a href="../power/proc.ml.html#L212" title="ocaml/asmcomp/power/proc.ml:212">float</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">ref</span> <span class="ocamlLCIdentifier">first_float</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L213" title="ocaml/asmcomp/power/proc.ml:213">ofs</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">ref</span> <span class="ocamlLCIdentifier">first_stack</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">for</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">i</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">0</span><span class="ocamlNone"> </span><span class="Statement">to</span> <span class="PreProc">Array</span>.<span class="ocamlLCIdentifier">length</span> <span class="ocamlLCIdentifier"><a href="../x86_ast.mli.html#L89" title="ocaml/asmcomp/x86_ast.mli:89">arg</a></span> - <span class="Constant">1</span> <span class="Statement">do<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; </span><span class="Statement">match</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="../x86_ast.mli.html#L89" title="ocaml/asmcomp/x86_ast.mli:89">arg</a></span><span class="ocamlDo">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">i</span><span class="Statement">)</span><span class="ocamlDo"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlDo"> </span><span class="Constant">Val</span><span class="ocamlDo"> </span><span class="Statement">|</span><span class="ocamlDo"> </span><span class="Constant">Int</span><span class="ocamlDo"> </span><span class="Statement">|</span><span class="ocamlDo"> </span><span class="Constant">Addr</span><span class="ocamlDo"> </span><span class="Statement">as</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="../selectgen.ml.html#L692" title="ocaml/asmcomp/selectgen.ml:692">ty</a></span><span class="ocamlDo"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="Type"><a href="../power/proc.ml.html#L211" title="ocaml/asmcomp/power/proc.ml:211">int</a></span><span class="ocamlNone"> </span><span class="Statement">&lt;=</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">last_int</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlDo"> </span><span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="../x86_dsl.ml.html#L101" title="ocaml/asmcomp/x86_dsl.ml:101">loc</a></span><span class="ocamlEnd">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">i</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">&lt;-</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L88" title="ocaml/asmcomp/power/proc.ml:88">phys_reg</a></span><span class="ocamlEnd"> </span><span class="Statement">!</span><span class="Type"><a href="../power/proc.ml.html#L211" title="ocaml/asmcomp/power/proc.ml:211">int</a></span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">incr</span><span class="ocamlEnd"> </span><span class="Type"><a href="../power/proc.ml.html#L211" title="ocaml/asmcomp/power/proc.ml:211">int</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end</span><span class="ocamlDo"> </span><span class="Statement">else</span><span class="ocamlDo"> </span><span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="../x86_dsl.ml.html#L101" title="ocaml/asmcomp/x86_dsl.ml:101">loc</a></span><span class="ocamlEnd">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">i</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">&lt;-</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L91" title="ocaml/asmcomp/power/proc.ml:91">stack_slot</a></span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">make_stack</span><span class="ocamlEnd"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L213" title="ocaml/asmcomp/power/proc.ml:213">ofs</a></span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="../selectgen.ml.html#L692" title="ocaml/asmcomp/selectgen.ml:692">ty</a></span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L213" title="ocaml/asmcomp/power/proc.ml:213">ofs</a></span><span class="ocamlEnd"> </span><span class="Statement">:=</span><span class="ocamlEnd"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L213" title="ocaml/asmcomp/power/proc.ml:213">ofs</a></span><span class="ocamlEnd"> + </span><span class="ocamlLCIdentifier"><a href="../power/arch.mli.html#L56" title="ocaml/asmcomp/power/arch.mli:56">size_int</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlDo"> </span><span class="Constant">Float</span><span class="ocamlDo"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="Type"><a href="../power/proc.ml.html#L212" title="ocaml/asmcomp/power/proc.ml:212">float</a></span><span class="ocamlNone"> </span><span class="Statement">&lt;=</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">last_float</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlDo"> </span><span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="../x86_dsl.ml.html#L101" title="ocaml/asmcomp/x86_dsl.ml:101">loc</a></span><span class="ocamlEnd">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">i</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">&lt;-</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L88" title="ocaml/asmcomp/power/proc.ml:88">phys_reg</a></span><span class="ocamlEnd"> </span><span class="Statement">!</span><span class="Type"><a href="../power/proc.ml.html#L212" title="ocaml/asmcomp/power/proc.ml:212">float</a></span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">incr</span><span class="ocamlEnd"> </span><span class="Type"><a href="../power/proc.ml.html#L212" title="ocaml/asmcomp/power/proc.ml:212">float</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end</span><span class="ocamlDo"> </span><span class="Statement">else</span><span class="ocamlDo"> </span><span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="../x86_dsl.ml.html#L101" title="ocaml/asmcomp/x86_dsl.ml:101">loc</a></span><span class="ocamlEnd">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">i</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">&lt;-</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L91" title="ocaml/asmcomp/power/proc.ml:91">stack_slot</a></span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">make_stack</span><span class="ocamlEnd"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L213" title="ocaml/asmcomp/power/proc.ml:213">ofs</a></span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Constant">Float</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L213" title="ocaml/asmcomp/power/proc.ml:213">ofs</a></span><span class="ocamlEnd"> </span><span class="Statement">:=</span><span class="ocamlEnd"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L213" title="ocaml/asmcomp/power/proc.ml:213">ofs</a></span><span class="ocamlEnd"> + </span><span class="ocamlLCIdentifier"><a href="../power/arch.mli.html#L58" title="ocaml/asmcomp/power/arch.mli:58">size_float</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span><span class="ocamlDo">&nbsp; </span><span class="Statement">done;<br/></li>
<li></span>&nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="../x86_dsl.ml.html#L101" title="ocaml/asmcomp/x86_dsl.ml:101">loc</a></span>, <span class="PreProc">Misc</span>.<span class="ocamlLCIdentifier"><a href="../x86_dsl.ml.html#L84" title="ocaml/asmcomp/x86_dsl.ml:84">align</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier">max</span> <span class="Constant">0</span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L213" title="ocaml/asmcomp/power/proc.ml:213">ofs</a></span><span class="Statement">)</span> <span class="Constant">16</span><span class="Statement">)</span> <span class="Comment">(* Keep stack 16-aligned. *)<br/></li>
<li></span><br/></li>
<li><a id="L154">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">incoming</span></span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L213" title="ocaml/asmcomp/power/proc.ml:213">ofs</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L213" title="ocaml/asmcomp/power/proc.ml:213">ofs</a></span><span class="ocamlNone"> </span><span class="Statement">&gt;=</span><span class="ocamlNone"> </span><span class="Constant">0<br/></li>
<li></span><span class="ocamlNone">&nbsp; </span><span class="Statement">then</span> <span class="Constant">Incoming</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L213" title="ocaml/asmcomp/power/proc.ml:213">ofs</a><br/></li>
<li></span>&nbsp; <span class="Statement">else</span> <span class="Constant">Domainstate</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L213" title="ocaml/asmcomp/power/proc.ml:213">ofs</a></span> + <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L96" title="ocaml/asmcomp/power/proc.ml:96">size_domainstate_args</a></span><span class="Statement">)<br/></li>
<li><a id="L158">&#x200c;</a></span><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">outgoing</span></span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L213" title="ocaml/asmcomp/power/proc.ml:213">ofs</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L213" title="ocaml/asmcomp/power/proc.ml:213">ofs</a></span><span class="ocamlNone"> </span><span class="Statement">&gt;=</span><span class="ocamlNone"> </span><span class="Constant">0<br/></li>
<li></span><span class="ocamlNone">&nbsp; </span><span class="Statement">then</span> <span class="Constant">Outgoing</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L213" title="ocaml/asmcomp/power/proc.ml:213">ofs</a><br/></li>
<li></span>&nbsp; <span class="Statement">else</span> <span class="Constant">Domainstate</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L213" title="ocaml/asmcomp/power/proc.ml:213">ofs</a></span> + <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L96" title="ocaml/asmcomp/power/proc.ml:96">size_domainstate_args</a></span><span class="Statement">)<br/></li>
<li><a id="L162">&#x200c;</a></span><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">not_supported</span></span> <span class="Statement">_</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">fatal_error</span> <span class="Constant">&quot;Proc.<a href="../power/proc.ml.html#L177" title="ocaml/asmcomp/power/proc.ml:177">loc_results</a>: cannot <a href="../x86_dsl.ml.html#L121" title="ocaml/asmcomp/x86_dsl.ml:121">call</a>&quot;<br/></li>
<li></span><br/></li>
<li><a id="L164">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">max_arguments_for_tailcalls</span></span> <span class="Statement">=</span> <span class="Constant">16</span> <span class="Comment">(* in <a href="../printmach.mli.html#L21" title="ocaml/asmcomp/printmach.mli:21">regs</a> *)</span> + <span class="Constant">64</span> <span class="Comment">(* in domain <a href="../cmm_invariants.ml.html#L55" title="ocaml/asmcomp/cmm_invariants.ml:55">state</a> *)<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* OCaml calling convention:<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; first integer <a href="../cmmgen.ml.html#L419" title="ocaml/asmcomp/cmmgen.ml:419">args</a> in a0 .. a7, <a href="../selectgen.ml.html#L1138" title="ocaml/asmcomp/selectgen.ml:1138">s2</a> .. s9<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; first <a href="../power/proc.ml.html#L212" title="ocaml/asmcomp/power/proc.ml:212">float</a> <a href="../cmmgen.ml.html#L419" title="ocaml/asmcomp/cmmgen.ml:419">args</a> in fa0 .. fa7, fs2 .. fs9<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; remaining <a href="../cmmgen.ml.html#L419" title="ocaml/asmcomp/cmmgen.ml:419">args</a> in domain <a href="../cmm_invariants.ml.html#L55" title="ocaml/asmcomp/cmm_invariants.ml:55">state</a> area, then on stack.<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; Return values in a0 .. a7, <a href="../selectgen.ml.html#L1138" title="ocaml/asmcomp/selectgen.ml:1138">s2</a> .. s9 or fa0 .. fa7, fs2 .. fs9. *)<br/></li>
<li></span><br/></li>
<li><a id="L172">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">loc_arguments</span></span> <span class="ocamlLCIdentifier"><a href="../x86_ast.mli.html#L89" title="ocaml/asmcomp/x86_ast.mli:89">arg</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L142" title="ocaml/asmcomp/power/proc.ml:142">calling_conventions</a></span> <span class="Constant">0</span> <span class="Constant">15</span> <span class="Constant">110</span> <span class="Constant">125</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L161" title="ocaml/asmcomp/power/proc.ml:161">outgoing</a></span> <span class="Statement">(</span>- <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L96" title="ocaml/asmcomp/power/proc.ml:96">size_domainstate_args</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="../x86_ast.mli.html#L89" title="ocaml/asmcomp/x86_ast.mli:89">arg</a><br/></li>
<li></span><br/></li>
<li><a id="L175">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">loc_parameters</span></span> <span class="ocamlLCIdentifier"><a href="../x86_ast.mli.html#L89" title="ocaml/asmcomp/x86_ast.mli:89">arg</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="../x86_dsl.ml.html#L101" title="ocaml/asmcomp/x86_dsl.ml:101">loc</a></span>, <span class="ocamlLCIdentifier">_ofs</span><span class="Statement">)</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L142" title="ocaml/asmcomp/power/proc.ml:142">calling_conventions</a></span> <span class="Constant">0</span> <span class="Constant">15</span> <span class="Constant">110</span> <span class="Constant">125</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L157" title="ocaml/asmcomp/power/proc.ml:157">incoming</a></span> <span class="Statement">(</span>- <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L96" title="ocaml/asmcomp/power/proc.ml:96">size_domainstate_args</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="../x86_ast.mli.html#L89" title="ocaml/asmcomp/x86_ast.mli:89">arg</a><br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="../x86_dsl.ml.html#L101" title="ocaml/asmcomp/x86_dsl.ml:101">loc</a><br/></li>
<li></span><br/></li>
<li><a id="L181">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">loc_results</span></span> <span class="ocamlLCIdentifier"><a href="../s390x/reload.ml.html#L34" title="ocaml/asmcomp/s390x/reload.ml:34">res</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="../x86_dsl.ml.html#L101" title="ocaml/asmcomp/x86_dsl.ml:101">loc</a></span>, <span class="ocamlLCIdentifier">_ofs</span><span class="Statement">)</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L142" title="ocaml/asmcomp/power/proc.ml:142">calling_conventions</a></span> <span class="Constant">0</span> <span class="Constant">15</span> <span class="Constant">110</span> <span class="Constant">125</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L165" title="ocaml/asmcomp/power/proc.ml:165">not_supported</a></span> <span class="Constant">0</span> <span class="ocamlLCIdentifier"><a href="../s390x/reload.ml.html#L34" title="ocaml/asmcomp/s390x/reload.ml:34">res</a><br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="../x86_dsl.ml.html#L101" title="ocaml/asmcomp/x86_dsl.ml:101">loc</a><br/></li>
<li></span><br/></li>
<li><span class="Comment">(* C calling convention:<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; first integer <a href="../cmmgen.ml.html#L419" title="ocaml/asmcomp/cmmgen.ml:419">args</a> in a0 .. a7<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; first <a href="../power/proc.ml.html#L212" title="ocaml/asmcomp/power/proc.ml:212">float</a> <a href="../cmmgen.ml.html#L419" title="ocaml/asmcomp/cmmgen.ml:419">args</a> in fa0 .. fa7<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; remaining <a href="../cmmgen.ml.html#L419" title="ocaml/asmcomp/cmmgen.ml:419">args</a> on stack.<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; A FP argument can be passed in an integer register if all FP registers<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; are exhausted but integer registers remain.<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; Return values in a0 .. a1 or fa0 .. fa1. *)<br/></li>
<li></span><br/></li>
<li><a id="L195">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">external_calling_conventions</span><br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier">first_int</span> <span class="ocamlLCIdentifier">last_int</span> <span class="ocamlLCIdentifier">first_float</span> <span class="ocamlLCIdentifier">last_float</span> <span class="ocamlLCIdentifier">make_stack</span> <span class="ocamlLCIdentifier"><a href="../x86_ast.mli.html#L89" title="ocaml/asmcomp/x86_ast.mli:89">arg</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="../x86_dsl.ml.html#L101" title="ocaml/asmcomp/x86_dsl.ml:101">loc</a></span> <span class="Statement">=</span> <span class="PreProc">Array</span>.<span class="ocamlLCIdentifier">make</span> <span class="Statement">(</span><span class="PreProc">Array</span>.<span class="ocamlLCIdentifier">length</span> <span class="ocamlLCIdentifier"><a href="../x86_ast.mli.html#L89" title="ocaml/asmcomp/x86_ast.mli:89">arg</a></span><span class="Statement">)</span> <span class="Statement">[|</span> <span class="PreProc">Reg</span>.<span class="ocamlLCIdentifier"><a href="../reg.ml.html#L63" title="ocaml/asmcomp/reg.ml:63">dummy</a></span> <span class="Statement">|]</span> <span class="Statement">in<br/></li>
<li><a id="L198">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="Type"><span class="linkable">int</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">ref</span> <span class="ocamlLCIdentifier">first_int</span> <span class="Statement">in<br/></li>
<li><a id="L199">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="Type"><span class="linkable">float</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">ref</span> <span class="ocamlLCIdentifier">first_float</span> <span class="Statement">in<br/></li>
<li><a id="L200">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">ofs</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">ref</span> <span class="Constant">0</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">for</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">i</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">0</span><span class="ocamlNone"> </span><span class="Statement">to</span> <span class="PreProc">Array</span>.<span class="ocamlLCIdentifier">length</span> <span class="ocamlLCIdentifier"><a href="../x86_ast.mli.html#L89" title="ocaml/asmcomp/x86_ast.mli:89">arg</a></span> - <span class="Constant">1</span> <span class="Statement">do<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; </span><span class="Statement">match</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="../x86_ast.mli.html#L89" title="ocaml/asmcomp/x86_ast.mli:89">arg</a></span><span class="ocamlDo">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">i</span><span class="Statement">)</span><span class="ocamlDo"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlDo"> </span><span class="Constant">Val</span><span class="ocamlDo"> </span><span class="Statement">|</span><span class="ocamlDo"> </span><span class="Constant">Int</span><span class="ocamlDo"> </span><span class="Statement">|</span><span class="ocamlDo"> </span><span class="Constant">Addr</span><span class="ocamlDo"> </span><span class="Statement">as</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="../selectgen.ml.html#L692" title="ocaml/asmcomp/selectgen.ml:692">ty</a></span><span class="ocamlDo"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="Type"><a href="../power/proc.ml.html#L211" title="ocaml/asmcomp/power/proc.ml:211">int</a></span><span class="ocamlNone"> </span><span class="Statement">&lt;=</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">last_int</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlDo"> </span><span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="../x86_dsl.ml.html#L101" title="ocaml/asmcomp/x86_dsl.ml:101">loc</a></span><span class="ocamlEnd">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">i</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">&lt;-</span><span class="ocamlEnd"> </span><span class="Statement">[|</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L88" title="ocaml/asmcomp/power/proc.ml:88">phys_reg</a></span><span class="ocamlEnd"> </span><span class="Statement">!</span><span class="Type"><a href="../power/proc.ml.html#L211" title="ocaml/asmcomp/power/proc.ml:211">int</a></span><span class="ocamlEnd"> </span><span class="Statement">|];<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">incr</span><span class="ocamlEnd"> </span><span class="Type"><a href="../power/proc.ml.html#L211" title="ocaml/asmcomp/power/proc.ml:211">int</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end</span><span class="ocamlDo"> </span><span class="Statement">else</span><span class="ocamlDo"> </span><span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="../x86_dsl.ml.html#L101" title="ocaml/asmcomp/x86_dsl.ml:101">loc</a></span><span class="ocamlEnd">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">i</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">&lt;-</span><span class="ocamlEnd"> </span><span class="Statement">[|</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L91" title="ocaml/asmcomp/power/proc.ml:91">stack_slot</a></span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">make_stack</span><span class="ocamlEnd"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L213" title="ocaml/asmcomp/power/proc.ml:213">ofs</a></span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="../selectgen.ml.html#L692" title="ocaml/asmcomp/selectgen.ml:692">ty</a></span><span class="ocamlEnd"> </span><span class="Statement">|];<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L213" title="ocaml/asmcomp/power/proc.ml:213">ofs</a></span><span class="ocamlEnd"> </span><span class="Statement">:=</span><span class="ocamlEnd"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L213" title="ocaml/asmcomp/power/proc.ml:213">ofs</a></span><span class="ocamlEnd"> + </span><span class="ocamlLCIdentifier"><a href="../power/arch.mli.html#L56" title="ocaml/asmcomp/power/arch.mli:56">size_int</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlDo"> </span><span class="Constant">Float</span><span class="ocamlDo"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="Type"><a href="../power/proc.ml.html#L212" title="ocaml/asmcomp/power/proc.ml:212">float</a></span><span class="ocamlNone"> </span><span class="Statement">&lt;=</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">last_float</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlDo"> </span><span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="../x86_dsl.ml.html#L101" title="ocaml/asmcomp/x86_dsl.ml:101">loc</a></span><span class="ocamlEnd">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">i</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">&lt;-</span><span class="ocamlEnd"> </span><span class="Statement">[|</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L88" title="ocaml/asmcomp/power/proc.ml:88">phys_reg</a></span><span class="ocamlEnd"> </span><span class="Statement">!</span><span class="Type"><a href="../power/proc.ml.html#L212" title="ocaml/asmcomp/power/proc.ml:212">float</a></span><span class="ocamlEnd"> </span><span class="Statement">|];<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">incr</span><span class="ocamlEnd"> </span><span class="Type"><a href="../power/proc.ml.html#L212" title="ocaml/asmcomp/power/proc.ml:212">float</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end</span><span class="ocamlDo"> </span><span class="Statement">else</span><span class="ocamlDo"> </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="Type"><a href="../power/proc.ml.html#L211" title="ocaml/asmcomp/power/proc.ml:211">int</a></span><span class="ocamlNone"> </span><span class="Statement">&lt;=</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">last_int</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlDo"> </span><span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="../x86_dsl.ml.html#L101" title="ocaml/asmcomp/x86_dsl.ml:101">loc</a></span><span class="ocamlEnd">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">i</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">&lt;-</span><span class="ocamlEnd"> </span><span class="Statement">[|</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L88" title="ocaml/asmcomp/power/proc.ml:88">phys_reg</a></span><span class="ocamlEnd"> </span><span class="Statement">!</span><span class="Type"><a href="../power/proc.ml.html#L211" title="ocaml/asmcomp/power/proc.ml:211">int</a></span><span class="ocamlEnd"> </span><span class="Statement">|];<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">incr</span><span class="ocamlEnd"> </span><span class="Type"><a href="../power/proc.ml.html#L211" title="ocaml/asmcomp/power/proc.ml:211">int</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end</span><span class="ocamlDo"> </span><span class="Statement">else</span><span class="ocamlDo"> </span><span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="../x86_dsl.ml.html#L101" title="ocaml/asmcomp/x86_dsl.ml:101">loc</a></span><span class="ocamlEnd">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">i</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">&lt;-</span><span class="ocamlEnd"> </span><span class="Statement">[|</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L91" title="ocaml/asmcomp/power/proc.ml:91">stack_slot</a></span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">make_stack</span><span class="ocamlEnd"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L213" title="ocaml/asmcomp/power/proc.ml:213">ofs</a></span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Constant">Float</span><span class="ocamlEnd"> </span><span class="Statement">|];<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L213" title="ocaml/asmcomp/power/proc.ml:213">ofs</a></span><span class="ocamlEnd"> </span><span class="Statement">:=</span><span class="ocamlEnd"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L213" title="ocaml/asmcomp/power/proc.ml:213">ofs</a></span><span class="ocamlEnd"> + </span><span class="ocamlLCIdentifier"><a href="../power/arch.mli.html#L58" title="ocaml/asmcomp/power/arch.mli:58">size_float</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span><span class="ocamlDo">&nbsp; </span><span class="Statement">done;<br/></li>
<li></span>&nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="../x86_dsl.ml.html#L101" title="ocaml/asmcomp/x86_dsl.ml:101">loc</a></span>, <span class="PreProc">Misc</span>.<span class="ocamlLCIdentifier"><a href="../x86_dsl.ml.html#L84" title="ocaml/asmcomp/x86_dsl.ml:84">align</a></span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L213" title="ocaml/asmcomp/power/proc.ml:213">ofs</a></span> <span class="Constant">16</span><span class="Statement">)</span> <span class="Comment">(* Keep stack 16-aligned. *)<br/></li>
<li></span><br/></li>
<li><a id="L225">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">loc_external_arguments</span></span> <span class="ocamlLCIdentifier"><a href="../selectgen.ml.html#L973" title="ocaml/asmcomp/selectgen.ml:973">ty_args</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="../x86_ast.mli.html#L89" title="ocaml/asmcomp/x86_ast.mli:89">arg</a></span> <span class="Statement">=</span> <span class="PreProc">Cmm</span>.<span class="ocamlLCIdentifier"><a href="../cmm.ml.html#L92" title="ocaml/asmcomp/cmm.ml:92">machtype_of_exttype_list</a></span> <span class="ocamlLCIdentifier"><a href="../selectgen.ml.html#L973" title="ocaml/asmcomp/selectgen.ml:973">ty_args</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L207" title="ocaml/asmcomp/power/proc.ml:207">external_calling_conventions</a></span> <span class="Constant">0</span> <span class="Constant">7</span> <span class="Constant">110</span> <span class="Constant">117</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L161" title="ocaml/asmcomp/power/proc.ml:161">outgoing</a></span> <span class="ocamlLCIdentifier"><a href="../x86_ast.mli.html#L89" title="ocaml/asmcomp/x86_ast.mli:89">arg</a><br/></li>
<li></span><br/></li>
<li><a id="L229">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">loc_external_results</span></span> <span class="ocamlLCIdentifier"><a href="../s390x/reload.ml.html#L34" title="ocaml/asmcomp/s390x/reload.ml:34">res</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="../x86_dsl.ml.html#L101" title="ocaml/asmcomp/x86_dsl.ml:101">loc</a></span>, <span class="ocamlLCIdentifier">_ofs</span><span class="Statement">)</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L142" title="ocaml/asmcomp/power/proc.ml:142">calling_conventions</a></span> <span class="Constant">0</span> <span class="Constant">1</span> <span class="Constant">110</span> <span class="Constant">111</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L165" title="ocaml/asmcomp/power/proc.ml:165">not_supported</a></span> <span class="Constant">0</span> <span class="ocamlLCIdentifier"><a href="../s390x/reload.ml.html#L34" title="ocaml/asmcomp/s390x/reload.ml:34">res</a><br/></li>
<li></span>&nbsp; <span class="Statement">in</span> <span class="ocamlLCIdentifier"><a href="../x86_dsl.ml.html#L101" title="ocaml/asmcomp/x86_dsl.ml:101">loc</a><br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Exceptions are in a0 *)<br/></li>
<li></span><br/></li>
<li><a id="L235">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">loc_exn_bucket</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L88" title="ocaml/asmcomp/power/proc.ml:88">phys_reg</a></span> <span class="Constant">0<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Registers <a href="../spill.ml.html#L344" title="ocaml/asmcomp/spill.ml:344">destroyed</a> by operations *)<br/></li>
<li></span><br/></li>
<li><a id="L239">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">destroyed_at_c_noalloc_call</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Comment">(* s0-s11 and fs0-fs11 are callee-save, but s0 is<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; used to preserve OCaml sp. *)<br/></li>
<li></span>&nbsp; <span class="PreProc">Array</span>.<span class="ocamlLCIdentifier">of_list</span><span class="Statement">(</span><span class="PreProc">List</span>.<span class="ocamlLCIdentifier">map</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L88" title="ocaml/asmcomp/power/proc.ml:88">phys_reg</a><br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">[</span><span class="Constant">0</span><span class="Statement">;</span> <span class="Constant">1</span><span class="Statement">;</span> <span class="Constant">2</span><span class="Statement">;</span> <span class="Constant">3</span><span class="Statement">;</span> <span class="Constant">4</span><span class="Statement">;</span> <span class="Constant">5</span><span class="Statement">;</span> <span class="Constant">6</span><span class="Statement">;</span> <span class="Constant">7</span><span class="Statement">;</span> <span class="Constant">16</span><span class="Statement">;</span> <span class="Constant">17</span><span class="Statement">;</span> <span class="Constant">18</span><span class="Statement">;</span> <span class="Constant">19</span><span class="Statement">;</span> <span class="Constant">20</span><span class="Statement">;</span> <span class="Constant">21</span> <span class="Comment">(* s0 *)</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp;&nbsp; <span class="Constant">100</span><span class="Statement">;</span> <span class="Constant">101</span><span class="Statement">;</span> <span class="Constant">102</span><span class="Statement">;</span> <span class="Constant">103</span><span class="Statement">;</span> <span class="Constant">104</span><span class="Statement">;</span> <span class="Constant">105</span><span class="Statement">;</span> <span class="Constant">106</span><span class="Statement">;</span> <span class="Constant">107</span><span class="Statement">;</span> <span class="Constant">110</span><span class="Statement">;</span> <span class="Constant">111</span><span class="Statement">;</span> <span class="Constant">112</span><span class="Statement">;</span> <span class="Constant">113</span><span class="Statement">;</span> <span class="Constant">114</span><span class="Statement">;</span> <span class="Constant">115</span><span class="Statement">;</span> <span class="Constant">116</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp;&nbsp; <span class="Constant">117</span><span class="Statement">;</span> <span class="Constant">128</span><span class="Statement">;</span> <span class="Constant">129</span><span class="Statement">;</span> <span class="Constant">130</span><span class="Statement">;</span> <span class="Constant">131</span><span class="Statement">])<br/></li>
<li></span><br/></li>
<li><a id="L247">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">destroyed_at_alloc</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Comment">(* t0-t6 are used for PLT stubs *)<br/></li>
<li></span>&nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="PreProc">Clflags</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">dlcode</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="PreProc">Array</span>.<span class="ocamlLCIdentifier">map</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L88" title="ocaml/asmcomp/power/proc.ml:88">phys_reg</a></span> <span class="Statement">[|</span><span class="Constant">16</span><span class="Statement">;</span> <span class="Constant">17</span><span class="Statement">;</span> <span class="Constant">18</span><span class="Statement">;</span> <span class="Constant">19</span><span class="Statement">;</span> <span class="Constant">20</span><span class="Statement">|]<br/></li>
<li></span>&nbsp; <span class="Statement">else</span> <span class="Statement">[|</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L88" title="ocaml/asmcomp/power/proc.ml:88">phys_reg</a></span> <span class="Constant">16</span> <span class="Statement">|]</span> <span class="Comment">(* t2 is used to pass the argument to caml_allocN *)<br/></li>
<li></span><br/></li>
<li><a id="L252">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">destroyed_at_oper</span></span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Iop</span><span class="Statement">(</span><span class="Constant">Icall_ind</span> <span class="Statement">|</span> <span class="Constant">Icall_imm</span> <span class="Statement">_)</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L85" title="ocaml/asmcomp/power/proc.ml:85">all_phys_regs</a><br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Iop</span><span class="Statement">(</span><span class="Constant">Iextcall</span><span class="Statement">{</span><span class="ocamlLCIdentifier">alloc</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">stack_ofs</span><span class="Statement">;</span> <span class="Statement">_})</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">assert</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">stack_ofs</span> <span class="Statement">&gt;=</span> <span class="Constant">0</span><span class="Statement">);<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">alloc</span><span class="ocamlNone"> </span><span class="Statement">||</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">stack_ofs</span><span class="ocamlNone"> </span><span class="Statement">&gt;</span><span class="ocamlNone"> </span><span class="Constant">0</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L85" title="ocaml/asmcomp/power/proc.ml:85">all_phys_regs</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">else</span> <span class="ocamlLCIdentifier"><a href="#L239" title="ocaml/asmcomp/riscv/proc.ml:239">destroyed_at_c_noalloc_call</a><br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Iop</span><span class="Statement">(</span><span class="Constant">Ialloc</span> <span class="Statement">_)</span> <span class="Statement">|</span> <span class="Constant">Iop</span><span class="Statement">(</span><span class="Constant">Ipoll</span> <span class="Statement">_)</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="#L247" title="ocaml/asmcomp/riscv/proc.ml:247">destroyed_at_alloc</a><br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Iop</span><span class="Statement">(</span><span class="Constant">Istore</span><span class="Statement">(</span><span class="Constant">Single</span>, <span class="Statement">_</span>, <span class="Statement">_))</span> <span class="Statement">-&gt;</span> <span class="Statement">[|</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L88" title="ocaml/asmcomp/power/proc.ml:88">phys_reg</a></span> <span class="Constant">100</span> <span class="Statement">|]<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Statement">[||]<br/></li>
<li></span><br/></li>
<li><a id="L262">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">destroyed_at_raise</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L85" title="ocaml/asmcomp/power/proc.ml:85">all_phys_regs</a><br/></li>
<li></span><br/></li>
<li><a id="L264">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">destroyed_at_reloadretaddr</span></span> <span class="Statement">=</span> <span class="Statement">[|</span> <span class="Statement">|]<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Maximal register pressure *)<br/></li>
<li></span><br/></li>
<li><a id="L268">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">safe_register_pressure</span></span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Iextcall</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">9<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">23<br/></li>
<li></span><br/></li>
<li><a id="L272">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">max_register_pressure</span></span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Iextcall</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Statement">[|</span> <span class="Constant">9</span><span class="Statement">;</span> <span class="Constant">12</span> <span class="Statement">|]<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Statement">[|</span> <span class="Constant">23</span><span class="Statement">;</span> <span class="Constant">30</span> <span class="Statement">|]<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Layout of the stack *)<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L336" title="ocaml/asmcomp/power/proc.ml:336">frame_required</a></span> <span class="ocamlLCIdentifier">fd</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier">fd</span>.<span class="ocamlLCIdentifier">fun_contains_calls<br/></li>
<li></span>&nbsp; <span class="Statement">||</span> <span class="ocamlLCIdentifier">fd</span>.<span class="ocamlLCIdentifier">fun_num_stack_slots</span>.<span class="Statement">(</span><span class="Constant">0</span><span class="Statement">)</span> <span class="Statement">&gt;</span> <span class="Constant">0<br/></li>
<li></span>&nbsp; <span class="Statement">||</span> <span class="ocamlLCIdentifier">fd</span>.<span class="ocamlLCIdentifier">fun_num_stack_slots</span>.<span class="Statement">(</span><span class="Constant">1</span><span class="Statement">)</span> <span class="Statement">&gt;</span> <span class="Constant">0<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L347" title="ocaml/asmcomp/power/proc.ml:347">prologue_required</a></span> <span class="ocamlLCIdentifier">fd</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L336" title="ocaml/asmcomp/power/proc.ml:336">frame_required</a></span> <span class="ocamlLCIdentifier">fd<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* See<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; https://github.com/riscv-non-isa/riscv-elf-psabi-doc/blob/master/riscv-elf.adoc<br/></li>
<li></span><span class="Comment">*)<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L280" title="ocaml/asmcomp/power/proc.ml:280">int_dwarf_reg_numbers</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">[|</span> <span class="Constant">10</span><span class="Statement">;</span> <span class="Constant">11</span><span class="Statement">;</span> <span class="Constant">12</span><span class="Statement">;</span> <span class="Constant">13</span><span class="Statement">;</span> <span class="Constant">14</span><span class="Statement">;</span> <span class="Constant">15</span><span class="Statement">;</span> <span class="Constant">16</span><span class="Statement">;</span> <span class="Constant">17</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp;&nbsp; <span class="Constant">18</span><span class="Statement">;</span> <span class="Constant">19</span><span class="Statement">;</span> <span class="Constant">20</span><span class="Statement">;</span> <span class="Constant">21</span><span class="Statement">;</span> <span class="Constant">22</span><span class="Statement">;</span> <span class="Constant">23</span><span class="Statement">;</span> <span class="Constant">24</span><span class="Statement">;</span> <span class="Constant">25</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp;&nbsp; <span class="Constant">7</span><span class="Statement">;</span> <span class="Constant">28</span><span class="Statement">;</span> <span class="Constant">29</span><span class="Statement">;</span> <span class="Constant">30</span><span class="Statement">;</span> <span class="Constant">31</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp;&nbsp; <span class="Constant">8</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp;&nbsp; <span class="Constant">5</span><span class="Statement">;</span> <span class="Constant">6</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp;&nbsp; <span class="Constant">9</span><span class="Statement">;</span> <span class="Constant">26</span><span class="Statement">;</span> <span class="Constant">27</span><span class="Statement">;<br/></li>
<li></span>&nbsp; <span class="Statement">|]<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L286" title="ocaml/asmcomp/power/proc.ml:286">float_dwarf_reg_numbers</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">[|</span> <span class="Constant">32</span><span class="Statement">;</span> <span class="Constant">33</span><span class="Statement">;</span> <span class="Constant">34</span><span class="Statement">;</span> <span class="Constant">35</span><span class="Statement">;</span> <span class="Constant">36</span><span class="Statement">;</span> <span class="Constant">37</span><span class="Statement">;</span> <span class="Constant">38</span><span class="Statement">;</span> <span class="Constant">39</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp;&nbsp; <span class="Constant">40</span><span class="Statement">;</span> <span class="Constant">41</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp;&nbsp; <span class="Constant">42</span><span class="Statement">;</span> <span class="Constant">43</span><span class="Statement">;</span> <span class="Constant">44</span><span class="Statement">;</span> <span class="Constant">45</span><span class="Statement">;</span> <span class="Constant">46</span><span class="Statement">;</span> <span class="Constant">47</span><span class="Statement">;</span> <span class="Constant">48</span><span class="Statement">;</span> <span class="Constant">49</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp;&nbsp; <span class="Constant">50</span><span class="Statement">;</span> <span class="Constant">51</span><span class="Statement">;</span> <span class="Constant">52</span><span class="Statement">;</span> <span class="Constant">53</span><span class="Statement">;</span> <span class="Constant">54</span><span class="Statement">;</span> <span class="Constant">55</span><span class="Statement">;</span> <span class="Constant">56</span><span class="Statement">;</span> <span class="Constant">57</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp;&nbsp; <span class="Constant">58</span><span class="Statement">;</span> <span class="Constant">59</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp;&nbsp; <span class="Constant">60</span><span class="Statement">;</span> <span class="Constant">61</span><span class="Statement">;</span> <span class="Constant">62</span><span class="Statement">;</span> <span class="Constant">63</span><span class="Statement">;<br/></li>
<li></span>&nbsp; <span class="Statement">|]<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L293" title="ocaml/asmcomp/power/proc.ml:293">dwarf_register_numbers</a></span> <span class="Statement">~</span><span class="Identifier">reg_class</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">reg_class</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">0</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L280" title="ocaml/asmcomp/power/proc.ml:280">int_dwarf_reg_numbers</a><br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">1</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="../power/proc.ml.html#L286" title="ocaml/asmcomp/power/proc.ml:286">float_dwarf_reg_numbers</a><br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="PreProc">Misc</span>.<span class="ocamlLCIdentifier">fatal_errorf</span> <span class="Constant">&quot;Bad register class %<a href="../deadcode.ml.html#L23" title="ocaml/asmcomp/deadcode.ml:23">d</a>&quot;</span> <span class="ocamlLCIdentifier">reg_class<br/></li>
<li></span><br/></li>
<li><a id="L314">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">stack_ptr_dwarf_register_number</span></span> <span class="Statement">=</span> <span class="Constant">2<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Calling the assembler *)<br/></li>
<li></span><br/></li>
<li><a id="L318">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">assemble_file</span></span> <span class="ocamlLCIdentifier">infile</span> <span class="ocamlLCIdentifier">outfile</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="PreProc">Ccomp</span>.<span class="ocamlLCIdentifier">command<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(</span><span class="PreProc">Config</span>.<span class="ocamlLCIdentifier">asm</span> <span class="Statement">^</span> <span class="Constant">&quot; -o &quot;</span> <span class="Statement">^</span> <span class="PreProc">Filename</span>.<span class="ocamlLCIdentifier">quote</span> <span class="ocamlLCIdentifier">outfile</span> <span class="Statement">^</span> <span class="Constant">&quot; &quot;</span> <span class="Statement">^</span> <span class="PreProc">Filename</span>.<span class="ocamlLCIdentifier">quote</span> <span class="ocamlLCIdentifier">infile</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><a id="L322">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">init</span></span> <span class="Constant">()</span> <span class="Statement">=</span> <span class="Constant">()<br/></li>
</ol></span></code>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="../index.html">Top Level</a></span>
 </p>

 </body>
</html>
