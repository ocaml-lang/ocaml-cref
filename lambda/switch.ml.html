<!-- generated by the vscode.pl tool from vscoded.-->

<html>
 <head>
  <title>ocaml/lambda/switch.ml - ocaml</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

.nav-bar {
    font-size: 120%;
    margin-top: 5px;
    margin-bottom: 5px;
}

.nav-link {
    padding-left: 5em;
    padding-right: 5em;
}

ul.toc {
    line-height: 200%;
    font-size: 150%;
}

code {
    font-family: consolas, monospace;
    line-height: 130%;
}

span.Constant {
    color: DarkGreen;
}

span.Special {
    color: #c06000;
}

span.Comment {
    color: DarkRed;
    font-style: italic;
}

span.Identifier {
    color: DarkCyan;
}

span.PreProc {
    color: DarkMagenta;
}

span.Statement, span.Type, span.Keyword, span.Repeat, span.Conditional,
    span.Operator, span.Exception
{
    color: DarkBlue;
}

span.Todo {
    color: DarkRed;
    background-color: Gold;
    font-style: italic;
}

span.Underlined {
    text-decoration: underline;
}

span.linkable {
    font-weight: bold;
}

code ol {
    counter-reset: item;
    list-style-type: none;
    margin-left: 0;
    padding-left: 0;
    list-style-position: inside;
}

code li {
    display: block;
}

code li:before {
    content: counter(item) "  ";
    counter-increment: item;
    color: #999;
    padding-right: 0.5em;
    padding-left: 0.4em;
    list-style-position: inside;
    text-align: right
}

  </style>
 </head>
 <body>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="index.html">Top Level</a></span>
 </p>

  <h1>ocaml/lambda/switch.ml - ocaml</h1>
 <h2>Global variables defined</h2>
 <ul class="toc">
<li><a href="#L975">abstract_shared</a></li>
<li><a href="#L954">acts</a></li>
<li><a href="#L304">add_test</a></li>
<li><a href="#L828">approx_count</a></li>
<li><a href="#L130">arg_as_test</a></li>
<li><a href="#L123">bind</a></li>
<li><a href="#L328">case_append</a></li>
<li><a href="#L857">comp_clusters</a></li>
<li><a href="#L41">compare</a></li>
<li><a href="#L29">compare_key</a></li>
<li><a href="#L321">coupe</a></li>
<li><a href="#L384">coupe_inter</a></li>
<li><a href="#L840">dense</a></li>
<li><a href="#L701">do_make_if_out</a></li>
<li><a href="#L959">do_zyva</a></li>
<li><a href="#L547">enum</a></li>
<li><a href="#L296">eq_tests</a></li>
<li><a href="#L111">eqint</a></li>
<li><a href="#L115">geint</a></li>
<li><a href="#L251">get_act</a></li>
<li><a href="#L116">gtint</a></li>
<li><a href="#L574">ilow</a></li>
<li><a href="#L469">inter_limit</a></li>
<li><a href="#L440">l</a></li>
<li><a href="#L787">left</a></li>
<li><a href="#L113">leint</a></li>
<li><a href="#L298">less2tests</a></li>
<li><a href="#L285">less_tests</a></li>
<li><a href="#L784">lim</a></li>
<li><a href="#L881">ll</a></li>
<li><a href="#L749">low</a></li>
<li><a href="#L114">ltint</a></li>
<li><a href="#L135">make_catch</a></li>
<li><a href="#L124">make_const</a></li>
<li><a href="#L136">make_exit</a></li>
<li><a href="#L132">make_if</a></li>
<li><a href="#L698">make_if_bool</a></li>
<li><a href="#L677">make_if_lt</a></li>
<li><a href="#L695">make_if_nonzero</a></li>
<li><a href="#L704">make_if_out</a></li>
<li><a href="#L672">make_if_test</a></li>
<li><a href="#L129">make_is_nonzero</a></li>
<li><a href="#L128">make_isin</a></li>
<li><a href="#L127">make_isout</a></li>
<li><a href="#L30">make_key</a></li>
<li><a href="#L36">make_key</a></li>
<li><a href="#L100">make_key</a></li>
<li><a href="#L409">make_key</a></li>
<li><a href="#L125">make_offset</a></li>
<li><a href="#L126">make_prim</a></li>
<li><a href="#L430">make_rec</a></li>
<li><a href="#L133">make_switch</a></li>
<li><a href="#L879">make_switch</a></li>
<li><a href="#L48">mk_store</a></li>
<li><a href="#L103">mk_store</a></li>
<li><a href="#L112">neint</a></li>
<li><a href="#L471">ok_inter</a></li>
<li><a href="#L474">opt_count</a></li>
<li><a href="#L818">particular_case</a></li>
<li><a href="#L361">r</a></li>
<li><a href="#L371">r</a></li>
<li><a href="#L623">r</a></li>
<li><a href="#L918">r</a></li>
<li><a href="#L600">rlow</a></li>
<li><a href="#L444">same_act</a></li>
<li><a href="#L228">small_size_limit</a></li>
<li><a href="#L815">switch_min</a></li>
<li><a href="#L407">t</a></li>
<li><a href="#L812">theta</a></li>
<li><a href="#L273">too_much</a></li>
<li><a href="#L740">w</a></li>
<li><a href="#L941">zyva</a></li>
<li><a href="#L990">zyva</a></li>
</ul>
 <h2>Data types defined</h2>
 <ul class="toc">
<li><a href="#L121">act</a></li>
<li><a href="#L119">arg</a></li>
<li><a href="#L35">context</a></li>
<li><a href="#L99">context</a></li>
<li><a href="#L268">ctests</a></li>
<li><a href="#L223">inter</a></li>
<li><a href="#L43">intern</a></li>
<li><a href="#L28">key</a></li>
<li><a href="#L392">kind</a></li>
<li><a href="#L118">loc</a></li>
<li><a href="#L110">primitive</a></li>
<li><a href="#L18">shared</a></li>
<li><a href="#L27">t</a></li>
<li><a href="#L41">t</a></li>
<li><a href="#L670">t_ctx</a></li>
<li><a href="#L312">t_ret</a></li>
<li><a href="#L20">t_store</a></li>
<li><a href="#L120">test</a></li>
</ul>
 <h2>Source code</h2>

  <code><ol><li><span class="Comment">(**************************************************************************)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; OCaml&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Luc Maranget, projet Moscova, INRIA Rocquencourt&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; Copyright 2000 Institut National de Recherche en Informatique et&nbsp; &nbsp;&nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp;&nbsp; en Automatique.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; All rights reserved.&nbsp; This file is distributed under the terms of&nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; the GNU Lesser General Public License version 2.1, with the&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; special exception on linking described in the file LICENSE.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(**************************************************************************)<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* see high-level comments in switch.mli *)<br/></li>
<li></span><br/></li>
<li><a id="L18">&#x200c;</a><span class="Statement">type</span> '<span class="ocamlLCIdentifier">a</span> <span class="ocamlLCIdentifier"><span class="linkable">shared</span></span> <span class="Statement">=</span> <span class="Constant">Shared</span> <span class="Statement">of</span> '<span class="ocamlLCIdentifier">a</span> <span class="Statement">|</span> <span class="Constant">Single</span> <span class="Statement">of</span> '<span class="ocamlLCIdentifier">a<br/></li>
<li></span><br/></li>
<li><a id="L20">&#x200c;</a><span class="Statement">type</span> <span class="Statement">(</span>'<span class="ocamlLCIdentifier">a</span>, '<span class="ocamlLCIdentifier">ctx</span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><span class="linkable">t_store</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">{</span><span class="ocamlLCIdentifier">act_get</span> : <span class="Type"><a href="tmc.ml.html#L197" title="ocaml/lambda/tmc.ml:197">unit</a></span> <span class="Statement">-&gt;</span> '<span class="ocamlLCIdentifier">a</span> <span class="Type">array</span> <span class="Statement">;<br/></li>
<li></span>&nbsp;&nbsp; <span class="ocamlLCIdentifier">act_get_shared</span> : <span class="Type"><a href="tmc.ml.html#L197" title="ocaml/lambda/tmc.ml:197">unit</a></span> <span class="Statement">-&gt;</span> '<span class="ocamlLCIdentifier">a</span> <span class="ocamlLCIdentifier"><a href="switch.mli.html#L32" title="ocaml/lambda/switch.mli:32">shared</a></span> <span class="Type">array</span> <span class="Statement">;<br/></li>
<li></span>&nbsp;&nbsp; <span class="ocamlLCIdentifier">act_store</span> : '<span class="ocamlLCIdentifier">ctx</span> <span class="Statement">-&gt;</span> '<span class="ocamlLCIdentifier">a</span> <span class="Statement">-&gt;</span> <span class="Type"><a href="translobj.ml.html#L84" title="ocaml/lambda/translobj.ml:84">int</a></span> <span class="Statement">;<br/></li>
<li></span>&nbsp;&nbsp; <span class="ocamlLCIdentifier">act_store_shared</span> : '<span class="ocamlLCIdentifier">ctx</span> <span class="Statement">-&gt;</span> '<span class="ocamlLCIdentifier">a</span> <span class="Statement">-&gt;</span> <span class="Type"><a href="translobj.ml.html#L84" title="ocaml/lambda/translobj.ml:84">int</a></span> <span class="Statement">;</span> <span class="Statement">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">module type </span><span class="PreProc">Stored</span> = <span class="PreProc">sig<br/></li>
<li><a id="L27">&#x200c;</a></span><span class="ocamlSig">&nbsp; </span><span class="Statement">type</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">t</span><br/></li>
<li><a id="L28">&#x200c;</a></span><span class="ocamlSig">&nbsp; </span><span class="Statement">type</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">key</span><br/></li>
<li><a id="L29">&#x200c;</a></span><span class="ocamlSig">&nbsp; </span><span class="Statement">val</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">compare_key</span></span><span class="ocamlSig"> : </span><span class="ocamlLCIdentifier"><a href="switch.mli.html#L42" title="ocaml/lambda/switch.mli:42">key</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="switch.mli.html#L42" title="ocaml/lambda/switch.mli:42">key</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="Type"><a href="translobj.ml.html#L84" title="ocaml/lambda/translobj.ml:84">int</a><br/></li>
<li><a id="L30">&#x200c;</a></span><span class="ocamlSig">&nbsp; </span><span class="Statement">val</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">make_key</span></span><span class="ocamlSig"> : </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="switch.mli.html#L42" title="ocaml/lambda/switch.mli:42">key</a></span><span class="ocamlSig"> </span><span class="Type"><a href="tmc.ml.html#L473" title="ocaml/lambda/tmc.ml:473">option</a><br/></li>
<li></span><span class="PreProc">end<br/></li>
<li></span><br/></li>
<li><span class="Statement">module type </span><span class="PreProc">CtxStored</span> = <span class="PreProc">sig<br/></li>
<li></span><span class="ocamlSig">&nbsp; </span><span class="Statement">include</span><span class="ocamlSig"> </span><span class="PreProc">Stored<br/></li>
<li><a id="L35">&#x200c;</a></span><span class="ocamlSig">&nbsp; </span><span class="Statement">type</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">context</span><br/></li>
<li><a id="L36">&#x200c;</a></span><span class="ocamlSig">&nbsp; </span><span class="Statement">val</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">make_key</span></span><span class="ocamlSig"> : </span><span class="ocamlLCIdentifier"><a href="tmc.ml.html#L545" title="ocaml/lambda/tmc.ml:545">context</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="switch.mli.html#L42" title="ocaml/lambda/switch.mli:42">key</a></span><span class="ocamlSig"> </span><span class="Type"><a href="tmc.ml.html#L473" title="ocaml/lambda/tmc.ml:473">option</a><br/></li>
<li></span><span class="PreProc">end<br/></li>
<li></span><br/></li>
<li><span class="Statement">module</span><span class="PreProc"> CtxStore</span><span class="ocamlModParam">(</span><span class="PreProc">A</span><span class="ocamlMPRestr">:</span><span class="PreProc">CtxStored</span><span class="ocamlModParam">)</span><span class="ocamlPreDef"> </span><span class="Statement">=</span> <span class="PreProc">struct<br/></li>
<li></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">module</span><span class="PreProc"> AMap</span><span class="ocamlPreDef"> </span><span class="Statement">=<br/></li>
<li><a id="L41">&#x200c;</a><a id="L41">&#x200c;</a></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="PreProc">Map.Make</span><span class="ocamlFuncWith">(</span><span class="PreProc">struct</span><span class="ocamlFuncStruct"> </span><span class="Statement">type</span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">t</span></span><span class="ocamlFuncStruct"> </span><span class="Statement">=</span><span class="ocamlFuncStruct"> </span><span class="PreProc">A</span><span class="ocamlFuncStruct">.</span><span class="ocamlLCIdentifier"><a href="switch.mli.html#L42" title="ocaml/lambda/switch.mli:42">key</a></span><span class="ocamlFuncStruct"> </span><span class="Statement">let</span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">compare</span></span><span class="ocamlFuncStruct"> </span><span class="Statement">=</span><span class="ocamlFuncStruct"> </span><span class="PreProc">A</span><span class="ocamlFuncStruct">.</span><span class="ocamlLCIdentifier"><a href="switch.mli.html#L43" title="ocaml/lambda/switch.mli:43">compare_key</a></span><span class="ocamlFuncStruct"> </span><span class="PreProc">end</span><span class="ocamlFuncWith">)<br/></li>
<li></span><br/></li>
<li><a id="L43">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">type</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">intern</span></span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">{</span><span class="ocamlStruct"> </span><span class="Statement">mutable</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span><span class="ocamlStruct"> : </span><span class="Statement">(</span><span class="Type">bool</span><span class="ocamlStruct"> </span><span class="Statement">*</span><span class="ocamlStruct"> </span><span class="Type"><a href="translobj.ml.html#L84" title="ocaml/lambda/translobj.ml:84">int</a></span><span class="Statement">)</span><span class="ocamlStruct">&nbsp; </span><span class="PreProc">AMap</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">mutable</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L3845" title="ocaml/lambda/matching.ml:3845">next</a></span><span class="ocamlStruct"> : </span><span class="Type"><a href="translobj.ml.html#L84" title="ocaml/lambda/translobj.ml:84">int</a></span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">mutable</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L954" title="ocaml/lambda/switch.ml:954">acts</a></span><span class="ocamlStruct"> : </span><span class="Statement">(</span><span class="Type">bool</span><span class="ocamlStruct"> </span><span class="Statement">*</span><span class="ocamlStruct"> </span><span class="PreProc">A</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Type"><a href="tmc.ml.html#L478" title="ocaml/lambda/tmc.ml:478">list</a></span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="Statement">}<br/></li>
<li></span><br/></li>
<li><a id="L48">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">mk_store</span></span><span class="ocamlStruct"> </span><span class="Constant">()</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">st</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">{</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">AMap</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L533" title="ocaml/lambda/matching.ml:533">empty</a></span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L3845" title="ocaml/lambda/matching.ml:3845">next</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Constant">0</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L954" title="ocaml/lambda/switch.ml:954">acts</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Constant">[]</span><span class="ocamlStruct"> </span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="Statement">}</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L884" title="ocaml/lambda/matching.ml:884">add</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">mustshare</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">st</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L3845" title="ocaml/lambda/matching.ml:3845">next</a></span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">st</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="#L954" title="ocaml/lambda/switch.ml:954">acts</a></span><span class="ocamlStruct"> </span><span class="Statement">&lt;-</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">mustshare</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">::</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">st</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="#L954" title="ocaml/lambda/switch.ml:954">acts</a></span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">st</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L3845" title="ocaml/lambda/matching.ml:3845">next</a></span><span class="ocamlStruct"> </span><span class="Statement">&lt;-</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct">+</span><span class="Constant">1</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">store</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">mustshare</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">match</span><span class="ocamlStruct"> </span><span class="PreProc">A</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="lambda.mli.html#L362" title="ocaml/lambda/lambda.mli:362">make_key</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlStruct"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="switch.mli.html#L42" title="ocaml/lambda/switch.mli:42">key</a></span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">try<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="switch.mli.html#L32" title="ocaml/lambda/switch.mli:32">shared</a></span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="PreProc">AMap</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">find</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="switch.mli.html#L42" title="ocaml/lambda/switch.mli:42">key</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">st</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="Statement">not</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="switch.mli.html#L32" title="ocaml/lambda/switch.mli:32">shared</a></span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">st</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span><span class="ocamlEnd"> </span><span class="Statement">&lt;-</span><span class="ocamlEnd"> </span><span class="PreProc">AMap</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L884" title="ocaml/lambda/matching.ml:884">add</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="switch.mli.html#L42" title="ocaml/lambda/switch.mli:42">key</a></span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="Constant">true</span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">st</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span><span class="ocamlEnd"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">with</span><span class="ocamlEnd"> </span><span class="Constant">Not_found</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L884" title="ocaml/lambda/matching.ml:884">add</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">mustshare</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">st</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span><span class="ocamlEnd"> </span><span class="Statement">&lt;-</span><span class="ocamlEnd"> </span><span class="PreProc">AMap</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L884" title="ocaml/lambda/matching.ml:884">add</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="switch.mli.html#L42" title="ocaml/lambda/switch.mli:42">key</a></span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">mustshare</span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">st</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span><span class="ocamlEnd"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">None</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L884" title="ocaml/lambda/matching.ml:884">add</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">mustshare</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a><br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">get</span><span class="ocamlStruct"> </span><span class="Constant">()</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">of_list</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="PreProc">List</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">rev_map</span><span class="ocamlStruct"> </span><span class="Statement">(fun</span><span class="ocamlStruct"> </span><span class="Statement">(_</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">st</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="#L954" title="ocaml/lambda/switch.ml:954">acts</a></span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">get_shared</span><span class="ocamlStruct"> </span><span class="Constant">()</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L954" title="ocaml/lambda/switch.ml:954">acts</a></span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">of_list<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="PreProc">List</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">rev_map<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">(fun</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="switch.mli.html#L32" title="ocaml/lambda/switch.mli:32">shared</a></span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="switch.mli.html#L32" title="ocaml/lambda/switch.mli:32">shared</a></span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlStruct"> </span><span class="Constant">Shared</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlStruct"> </span><span class="Statement">else</span><span class="ocamlStruct"> </span><span class="Constant">Single</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier">st</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="#L954" title="ocaml/lambda/switch.ml:954">acts</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="PreProc">AMap</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">iter<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(fun</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="switch.mli.html#L32" title="ocaml/lambda/switch.mli:32">shared</a></span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="switch.mli.html#L32" title="ocaml/lambda/switch.mli:32">shared</a></span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlStruct"> </span><span class="Statement">match</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L954" title="ocaml/lambda/switch.ml:954">acts</a></span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Single</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L954" title="ocaml/lambda/switch.ml:954">acts</a></span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">&lt;-</span><span class="ocamlStruct"> </span><span class="Constant">Shared</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Shared</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">()</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">st</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L954" title="ocaml/lambda/switch.ml:954">acts</a></span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">{</span><span class="ocamlLCIdentifier">act_store</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">store</span><span class="ocamlStruct"> </span><span class="Constant">false</span><span class="ocamlStruct"> </span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">act_store_shared</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">store</span><span class="ocamlStruct"> </span><span class="Constant">true</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier">act_get</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">get</span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">act_get_shared</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">get_shared</span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="Statement">}<br/></li>
<li></span><span class="PreProc">end<br/></li>
<li></span><br/></li>
<li><span class="Statement">module</span><span class="PreProc"> Store</span><span class="ocamlModParam">(</span><span class="PreProc">A</span><span class="ocamlMPRestr">:</span><span class="PreProc">Stored</span><span class="ocamlModParam">)</span><span class="ocamlPreDef"> </span><span class="Statement">=</span> <span class="PreProc">struct<br/></li>
<li></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">module</span><span class="PreProc"> Me</span><span class="ocamlPreDef"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="PreProc">CtxStore<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlFuncWith">(</span><span class="PreProc">struct<br/></li>
<li></span><span class="ocamlFuncStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">include</span><span class="ocamlFuncStruct"> </span><span class="PreProc">A<br/></li>
<li><a id="L99">&#x200c;</a></span><span class="ocamlFuncStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">type</span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">context</span></span><span class="ocamlFuncStruct"> </span><span class="Statement">=</span><span class="ocamlFuncStruct"> </span><span class="Type"><a href="tmc.ml.html#L197" title="ocaml/lambda/tmc.ml:197">unit</a><br/></li>
<li><a id="L100">&#x200c;</a></span><span class="ocamlFuncStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">make_key</span></span><span class="ocamlFuncStruct"> </span><span class="Constant">()</span><span class="ocamlFuncStruct"> </span><span class="Statement">=</span><span class="ocamlFuncStruct"> </span><span class="PreProc">A</span><span class="ocamlFuncStruct">.</span><span class="ocamlLCIdentifier"><span class="linkable">make_key</span><br/></li>
<li></span><span class="ocamlFuncStruct">&nbsp; &nbsp; &nbsp; </span><span class="PreProc">end</span><span class="ocamlFuncWith">)<br/></li>
<li></span><br/></li>
<li><a id="L103">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">mk_store</span></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Me</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><span class="linkable">mk_store</span><br/></li>
<li></span><span class="PreProc">end<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><br/></li>
<li><span class="Statement">module type </span><span class="PreProc">S</span> <span class="Statement">=<br/></li>
<li></span><span class="PreProc">sig<br/></li>
<li><a id="L110">&#x200c;</a></span><span class="ocamlSig">&nbsp; </span><span class="Statement">type</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">primitive</span><br/></li>
<li><a id="L111">&#x200c;</a></span><span class="ocamlSig">&nbsp; </span><span class="Statement">val</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">eqint</span></span><span class="ocamlSig"> : </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2324" title="ocaml/lambda/matching.ml:2324">primitive</a><br/></li>
<li><a id="L112">&#x200c;</a></span><span class="ocamlSig">&nbsp; </span><span class="Statement">val</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">neint</span></span><span class="ocamlSig"> : </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2324" title="ocaml/lambda/matching.ml:2324">primitive</a><br/></li>
<li><a id="L113">&#x200c;</a></span><span class="ocamlSig">&nbsp; </span><span class="Statement">val</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">leint</span></span><span class="ocamlSig"> : </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2324" title="ocaml/lambda/matching.ml:2324">primitive</a><br/></li>
<li><a id="L114">&#x200c;</a></span><span class="ocamlSig">&nbsp; </span><span class="Statement">val</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">ltint</span></span><span class="ocamlSig"> : </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2324" title="ocaml/lambda/matching.ml:2324">primitive</a><br/></li>
<li><a id="L115">&#x200c;</a></span><span class="ocamlSig">&nbsp; </span><span class="Statement">val</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">geint</span></span><span class="ocamlSig"> : </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2324" title="ocaml/lambda/matching.ml:2324">primitive</a><br/></li>
<li><a id="L116">&#x200c;</a></span><span class="ocamlSig">&nbsp; </span><span class="Statement">val</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">gtint</span></span><span class="ocamlSig"> : </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2324" title="ocaml/lambda/matching.ml:2324">primitive</a><br/></li>
<li></span><br/></li>
<li><a id="L118">&#x200c;</a><span class="ocamlSig">&nbsp; </span><span class="Statement">type</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">loc</span><br/></li>
<li><a id="L119">&#x200c;</a></span><span class="ocamlSig">&nbsp; </span><span class="Statement">type</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">arg</span><br/></li>
<li><a id="L120">&#x200c;</a></span><span class="ocamlSig">&nbsp; </span><span class="Statement">type</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">test</span><br/></li>
<li><a id="L121">&#x200c;</a></span><span class="ocamlSig">&nbsp; </span><span class="Statement">type</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">act</span><br/></li>
<li></span><br/></li>
<li><a id="L123">&#x200c;</a><span class="ocamlSig">&nbsp; </span><span class="Statement">val</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">bind</span></span><span class="ocamlSig"> : </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="Statement">)</span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a><br/></li>
<li><a id="L124">&#x200c;</a></span><span class="ocamlSig">&nbsp; </span><span class="Statement">val</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">make_const</span></span><span class="ocamlSig"> : </span><span class="Type"><a href="translobj.ml.html#L84" title="ocaml/lambda/translobj.ml:84">int</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a><br/></li>
<li><a id="L125">&#x200c;</a></span><span class="ocamlSig">&nbsp; </span><span class="Statement">val</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">make_offset</span></span><span class="ocamlSig"> : </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="Type"><a href="translobj.ml.html#L84" title="ocaml/lambda/translobj.ml:84">int</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a><br/></li>
<li><a id="L126">&#x200c;</a></span><span class="ocamlSig">&nbsp; </span><span class="Statement">val</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">make_prim</span></span><span class="ocamlSig"> : </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2324" title="ocaml/lambda/matching.ml:2324">primitive</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlSig"> </span><span class="Type"><a href="tmc.ml.html#L478" title="ocaml/lambda/tmc.ml:478">list</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2340" title="ocaml/lambda/matching.ml:2340">test</a><br/></li>
<li><a id="L127">&#x200c;</a></span><span class="ocamlSig">&nbsp; </span><span class="Statement">val</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">make_isout</span></span><span class="ocamlSig"> : </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2340" title="ocaml/lambda/matching.ml:2340">test</a><br/></li>
<li><a id="L128">&#x200c;</a></span><span class="ocamlSig">&nbsp; </span><span class="Statement">val</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">make_isin</span></span><span class="ocamlSig"> : </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2340" title="ocaml/lambda/matching.ml:2340">test</a><br/></li>
<li><a id="L129">&#x200c;</a></span><span class="ocamlSig">&nbsp; </span><span class="Statement">val</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">make_is_nonzero</span></span><span class="ocamlSig"> : </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2340" title="ocaml/lambda/matching.ml:2340">test</a><br/></li>
<li><a id="L130">&#x200c;</a></span><span class="ocamlSig">&nbsp; </span><span class="Statement">val</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">arg_as_test</span></span><span class="ocamlSig"> : </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2340" title="ocaml/lambda/matching.ml:2340">test</a><br/></li>
<li></span><br/></li>
<li><a id="L132">&#x200c;</a><span class="ocamlSig">&nbsp; </span><span class="Statement">val</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">make_if</span></span><span class="ocamlSig"> : </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2340" title="ocaml/lambda/matching.ml:2340">test</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a><br/></li>
<li><a id="L133">&#x200c;</a></span><span class="ocamlSig">&nbsp; </span><span class="Statement">val</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">make_switch</span></span><span class="ocamlSig"> : </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="Type"><a href="translobj.ml.html#L84" title="ocaml/lambda/translobj.ml:84">int</a></span><span class="ocamlSig"> </span><span class="Type">array</span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlSig"> </span><span class="Type">array</span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a><br/></li>
<li></span><br/></li>
<li><a id="L135">&#x200c;</a><span class="ocamlSig">&nbsp; </span><span class="Statement">val</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">make_catch</span></span><span class="ocamlSig"> : </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="Type"><a href="translobj.ml.html#L84" title="ocaml/lambda/translobj.ml:84">int</a></span><span class="ocamlSig"> </span><span class="Statement">*</span><span class="ocamlSig"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="Statement">)<br/></li>
<li><a id="L136">&#x200c;</a></span><span class="ocamlSig">&nbsp; </span><span class="Statement">val</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><span class="linkable">make_exit</span></span><span class="ocamlSig"> : </span><span class="Type"><a href="translobj.ml.html#L84" title="ocaml/lambda/translobj.ml:84">int</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a><br/></li>
<li></span><span class="PreProc">end<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* The module will ``produce good code for the case statement''<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp; Adaptation of<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; Robert L. Berstein<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; ``Producing good code for the case statement''<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; Software Practice and Experience, 15(10) (1985)<br/></li>
<li></span><span class="Comment">&nbsp; and<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; Sampath Kannan and Todd A. Proebsting<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; ``Correction to ``Producing good code for the case statement'' ''<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; Software Practice and Experience, 24(2) (1993)<br/></li>
<li></span><span class="Comment">&nbsp; and<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; David L. Spuler<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; ``Two-Way Comparison Search Trees, a Generalisation of Binary Search Trees<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; and Split Trees''<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; ``Compiler Code Generation for Multiway Branch Statement as<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; a Static Search Problem''<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; Technical Reports, James Cook University<br/></li>
<li></span><br/></li>
<li><span class="Comment"> The article of Bernstein considers how to compile C-style switches:<br/></li>
<li></span><span class="Comment"> arrays of actions indexed over non-negative integers with some &quot;missing&quot;<br/></li>
<li></span><span class="Comment"> cases that are sent to a default action.<br/></li>
<li></span><br/></li>
<li><span class="Comment"> The strategy proposed, which is followed in our implementation below,<br/></li>
<li></span><span class="Comment"> is as follows:<br/></li>
<li></span><span class="Comment"> 1. Compute a &quot;clustering&quot; of the cases as a <a href="matching.ml.html#L1222" title="ocaml/lambda/matching.ml:1222">disjoint</a> <a href="matching.ml.html#L900" title="ocaml/lambda/matching.ml:900">union</a> of smaller intervals<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; with a high enough &quot;density&quot; (few default cases on the interval).<br/></li>
<li></span><span class="Comment"> 2. Generate &quot;<a href="#L840" title="ocaml/lambda/switch.ml:840">dense</a> switch&quot; code for each cluster, typically using a jump <a href="translclass.ml.html#L769" title="ocaml/lambda/translclass.ml:769">table</a>.<br/></li>
<li></span><span class="Comment"> 3. Generate a <a href="printlambda.ml.html#L697" title="ocaml/lambda/printlambda.ml:697">sequence</a> of tests for the whole switch, whose leaves<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; are the <a href="#L840" title="ocaml/lambda/switch.ml:840">dense</a> switches generated for each cluster.<br/></li>
<li></span><br/></li>
<li><span class="Comment"> Berstein believes that computing the optimal clustering<br/></li>
<li></span><span class="Comment"> (smaller number of clusters) is NP-complete, and only proposes<br/></li>
<li></span><span class="Comment"> a suboptimal heuristic method. Kannan and Proebsting remark that it<br/></li>
<li></span><span class="Comment"> can be solved by a quadratic dynamic algorithm, which is also used in<br/></li>
<li></span><span class="Comment"> our implementation.<br/></li>
<li></span><br/></li>
<li><span class="Comment"> The article of Spuler explains how to generate good <a href="matching.ml.html#L2340" title="ocaml/lambda/matching.ml:2340">test</a> sequences<br/></li>
<li></span><span class="Comment"> (optimal in worst-case number of tests) for a two-way tests instead<br/></li>
<li></span><span class="Comment"> of three-way tests: traditional dichotomic search assumes that we<br/></li>
<li></span><span class="Comment"> check at each step whether the <a href="switch.mli.html#L42" title="ocaml/lambda/switch.mli:42">key</a> is (1) <a href="simplif.ml.html#L782" title="ocaml/lambda/simplif.ml:782">equal</a> to the pivot, (2)<br/></li>
<li></span><span class="Comment"> strictly less or (3) strictly more, but the <a href="matching.ml.html#L2340" title="ocaml/lambda/matching.ml:2340">test</a> instructions in our<br/></li>
<li></span><span class="Comment"> intermediate representations typically only let us <a href="matching.ml.html#L2340" title="ocaml/lambda/matching.ml:2340">test</a> for (1)<br/></li>
<li></span><span class="Comment"> lesser or <a href="simplif.ml.html#L782" title="ocaml/lambda/simplif.ml:782">equal</a> or (2) strictly bigger (or: (1) strictly less, (2)<br/></li>
<li></span><span class="Comment"> bigger or <a href="simplif.ml.html#L782" title="ocaml/lambda/simplif.ml:782">equal</a>, which is symmetric.). Spuler proves that, even in<br/></li>
<li></span><span class="Comment"> this two-way setting, dichotomic search generates optimal <a href="matching.ml.html#L2340" title="ocaml/lambda/matching.ml:2340">test</a><br/></li>
<li></span><span class="Comment"> sequences.<br/></li>
<li></span><br/></li>
<li><span class="Comment"> The code below uses two additional ideas from Luc Maranget.<br/></li>
<li></span><br/></li>
<li><span class="Comment"> 1. The code to compute an optimal <a href="printlambda.ml.html#L697" title="ocaml/lambda/printlambda.ml:697">sequence</a> of tests also makes use of<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; an interval check (is the input in the range [m; n]), which<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; (as remarked by Bernstein) can be implemented efficiently as<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; a subtraction and an unsigned <a href="translprim.ml.html#L53" title="ocaml/lambda/translprim.ml:53">comparison</a>. We don'<a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a> know of an<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; efficient algorithm to compute optimal <a href="matching.ml.html#L2340" title="ocaml/lambda/matching.ml:2340">test</a> sequences using both<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; <a href="translprim.ml.html#L53" title="ocaml/lambda/translprim.ml:53">comparison</a> and interval checks, so instead:<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; a. on large input intervals, we use the dichotomy<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; b. on medium-sized input intervals, we use the best of<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp;&nbsp; the dichotomy and an interval check carving out<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp;&nbsp; exactly the lowest and highest cases<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; c. on small input intervals, we use optimal exhaustive search.<br/></li>
<li></span><br/></li>
<li><span class="Comment"> 2. The works of Bernstein and Kannan-Proebsting compute clusters of<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; sufficient density, where density is defined naturally as the<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; proportion of non-default cases. Maranget instead computes density<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; as the height of the <a href="matching.ml.html#L2340" title="ocaml/lambda/matching.ml:2340">test</a> <a href="printlambda.ml.html#L697" title="ocaml/lambda/printlambda.ml:697">sequence</a> divided by interval <a href="matching.ml.html#L3846" title="ocaml/lambda/matching.ml:3846">size</a><br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; (note that the number of non-default cases is an upperbound on the<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; <a href="matching.ml.html#L2340" title="ocaml/lambda/matching.ml:2340">test</a> <a href="printlambda.ml.html#L697" title="ocaml/lambda/printlambda.ml:697">sequence</a> height, as the length of the linear <a href="matching.ml.html#L2340" title="ocaml/lambda/matching.ml:2340">test</a> <a href="printlambda.ml.html#L697" title="ocaml/lambda/printlambda.ml:697">sequence</a>).<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; As a result, sub-intervals that can be efficiently decided by<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; tests get a lower density, so they are more likely to be merged<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; into the toplevel <a href="matching.ml.html#L2340" title="ocaml/lambda/matching.ml:2340">test</a> <a href="printlambda.ml.html#L697" title="ocaml/lambda/printlambda.ml:697">sequence</a> instead of generating a less<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; compact jump <a href="translclass.ml.html#L769" title="ocaml/lambda/translclass.ml:769">table</a>.<br/></li>
<li></span><span class="Comment">*)<br/></li>
<li></span><span class="Statement">module</span><span class="PreProc"> Make</span><span class="ocamlPreDef"> </span><span class="ocamlModParam">(</span><span class="PreProc">Arg</span><span class="ocamlPreMPRestr"> </span><span class="ocamlMPRestr">:</span><span class="ocamlPreMPRestr"> </span><span class="PreProc">S</span><span class="ocamlModParam">)</span><span class="ocamlPreDef"> </span><span class="Statement">=<br/></li>
<li></span><span class="PreProc">struct<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Comment">(* A representation of switches over intervals rather than discrete<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; values the [cases] array stores triples [(<a href="#L749" title="ocaml/lambda/switch.ml:749">low</a>, high, <a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a>)], where<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; [<a href="#L749" title="ocaml/lambda/switch.ml:749">low</a>] is the lowest input value of the interval, [high] is the<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; highest input value, and [<a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a>] is an <a href="translclass.ml.html#L270" title="ocaml/lambda/translclass.ml:270">index</a> into the [actions]<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; array.<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp; &nbsp;&nbsp; (There can be substantially less actions than intervals if many<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; actions are <a href="switch.mli.html#L32" title="ocaml/lambda/switch.mli:32">shared</a>.)<br/></li>
<li></span><span class="Comment">&nbsp; *)<br/></li>
<li><a id="L223">&#x200c;</a></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">type</span><span class="ocamlStruct"> '</span><span class="ocamlLCIdentifier">a</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">inter</span></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">{<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> : </span><span class="Statement">(</span><span class="Type"><a href="translobj.ml.html#L84" title="ocaml/lambda/translobj.ml:84">int</a></span><span class="ocamlStruct"> </span><span class="Statement">*</span><span class="ocamlStruct"> </span><span class="Type"><a href="translobj.ml.html#L84" title="ocaml/lambda/translobj.ml:84">int</a></span><span class="ocamlStruct"> </span><span class="Statement">*</span><span class="ocamlStruct"> </span><span class="Type"><a href="translobj.ml.html#L84" title="ocaml/lambda/translobj.ml:84">int</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Type">array</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier">actions</span><span class="ocamlStruct"> : '</span><span class="ocamlLCIdentifier">a</span><span class="ocamlStruct"> </span><span class="Type">array<br/></li>
<li></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">}<br/></li>
<li></span><br/></li>
<li><a id="L228">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">small_size_limit</span></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Constant">8<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">medium_size_limit</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Constant">16<br/></li>
<li></span><br/></li>
<li><span class="Comment">(*<br/></li>
<li></span><span class="Comment">let pint chan <a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a> =<br/></li>
<li></span><span class="Comment">&nbsp; if <a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a> = min_int then Printf.fprintf chan &quot;-oo&quot;<br/></li>
<li></span><span class="Comment">&nbsp; else if <a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a>=max_int then Printf.fprintf chan &quot;oo&quot;<br/></li>
<li></span><span class="Comment">&nbsp; else Printf.fprintf chan &quot;%d&quot; <a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a><br/></li>
<li></span><br/></li>
<li><span class="Comment">let pcases chan cases =<br/></li>
<li></span><span class="Comment">&nbsp; for <a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a> =0 to Array.length cases-1 do<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; let <a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a>,h,<a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a> = cases.(<a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a>) in<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; if <a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a>=h then<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; Printf.fprintf chan &quot;%d:%d &quot; <a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a> <a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a><br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; else<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; Printf.fprintf chan &quot;%a..%a:%d &quot; pint <a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a> pint h <a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a><br/></li>
<li></span><span class="Comment">&nbsp; done<br/></li>
<li></span><br/></li>
<li><span class="Comment">let prerr_inter <a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a> = Printf.fprintf stderr<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &quot;cases=%a&quot; pcases <a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a>.cases<br/></li>
<li></span><span class="Comment">*)<br/></li>
<li></span><br/></li>
<li><a id="L251">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">get_act</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct">,</span><span class="Statement">_</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">get_low</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a></span><span class="ocamlStruct">,</span><span class="Statement">_</span><span class="ocamlStruct">,</span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">get_high</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a></span><span class="ocamlStruct">,</span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a><br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Comment">(* a &quot;cost&quot; as a number of tests in the worst case;<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; [n] is the total number of tests<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; [ni] is the number of interval tests<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp; &nbsp;&nbsp; If two choices have the same total number of tests, we will prefer<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; the one with less interval tests as they cost slightly more.<br/></li>
<li></span><span class="Comment">&nbsp; *)<br/></li>
<li><a id="L268">&#x200c;</a></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">type</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">ctests</span></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">{<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">mutable</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">n</span><span class="ocamlStruct"> : </span><span class="Type"><a href="translobj.ml.html#L84" title="ocaml/lambda/translobj.ml:84">int</a></span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">mutable</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ni</span><span class="ocamlStruct"> : </span><span class="Type"><a href="translobj.ml.html#L84" title="ocaml/lambda/translobj.ml:84">int</a></span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">}<br/></li>
<li></span><br/></li>
<li><a id="L273">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">too_much</span></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier">n</span><span class="Statement">=</span><span class="ocamlLCIdentifier">max_int</span><span class="ocamlStruct"> </span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ni</span><span class="Statement">=</span><span class="ocamlLCIdentifier">max_int</span><span class="Statement">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">(*<br/></li>
<li></span><span class="Comment">let ptests chan {n=n ; ni=ni} =<br/></li>
<li></span><span class="Comment">&nbsp; Printf.fprintf chan &quot;{n=%d ; ni=%d}&quot; n ni<br/></li>
<li></span><br/></li>
<li><span class="Comment">let pta chan <a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a> =<br/></li>
<li></span><span class="Comment">&nbsp; for <a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a> =0 to Array.length <a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a>-1 do<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; Printf.fprintf chan &quot;%d: %a\n&quot; <a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a> ptests <a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a>.(<a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a>)<br/></li>
<li></span><span class="Comment">&nbsp; done<br/></li>
<li></span><span class="Comment">*)<br/></li>
<li></span><br/></li>
<li><a id="L285">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">less_tests</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">c1</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">c2</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">c1</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">n</span><span class="ocamlNone"> </span><span class="Statement">&lt;</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">c2</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">n</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Constant">true<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">else</span><span class="ocamlStruct"> </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">c1</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">n</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">c2</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">n</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlStruct"> </span><span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">c1</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">ni</span><span class="ocamlNone"> </span><span class="Statement">&lt;</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">c2</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">ni</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">true<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">false<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Statement">end</span><span class="ocamlStruct"> </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Constant">false<br/></li>
<li></span><br/></li>
<li><a id="L296">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">eq_tests</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">c1</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">c2</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">c1</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">n</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">c2</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">n</span><span class="ocamlStruct"> </span><span class="Statement">&amp;&amp;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">c1</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">ni</span><span class="Statement">=</span><span class="ocamlLCIdentifier">c2</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">ni<br/></li>
<li></span><br/></li>
<li><a id="L298">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">less2tests</span></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">c1</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">d1</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">c2</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">d2</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L296" title="ocaml/lambda/switch.ml:296">eq_tests</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">c1</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">c2</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L285" title="ocaml/lambda/switch.ml:285">less_tests</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">d1</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">d2<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L285" title="ocaml/lambda/switch.ml:285">less_tests</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">c1</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">c2<br/></li>
<li></span><br/></li>
<li><a id="L304">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">add_test</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">t1</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">t2</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier">t1</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">n</span><span class="ocamlStruct"> </span><span class="Statement">&lt;-</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">t1</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">n</span><span class="ocamlStruct"> + </span><span class="ocamlLCIdentifier">t2</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">n</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier">t1</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">ni</span><span class="ocamlStruct"> </span><span class="Statement">&lt;-</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">t1</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">ni</span><span class="ocamlStruct"> + </span><span class="ocamlLCIdentifier">t2</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">ni</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Comment">(* Represents tests in a <a href="matching.ml.html#L2340" title="ocaml/lambda/matching.ml:2340">test</a> <a href="printlambda.ml.html#L697" title="ocaml/lambda/printlambda.ml:697">sequence</a><br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; [Inter (<a href="#L749" title="ocaml/lambda/switch.ml:749">low</a>, high)] is an interval <a href="matching.ml.html#L2340" title="ocaml/lambda/matching.ml:2340">test</a><br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; [Sep bound] is [fun x -&gt; x &lt; bound]<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; [No] is when no tests are necessary. *)<br/></li>
<li><a id="L312">&#x200c;</a></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">type</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">t_ret</span></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Constant">Inter</span><span class="ocamlStruct"> </span><span class="Statement">of</span><span class="ocamlStruct"> </span><span class="Type"><a href="translobj.ml.html#L84" title="ocaml/lambda/translobj.ml:84">int</a></span><span class="ocamlStruct"> </span><span class="Statement">*</span><span class="ocamlStruct"> </span><span class="Type"><a href="translobj.ml.html#L84" title="ocaml/lambda/translobj.ml:84">int</a></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Sep</span><span class="ocamlStruct"> </span><span class="Statement">of</span><span class="ocamlStruct"> </span><span class="Type"><a href="translobj.ml.html#L84" title="ocaml/lambda/translobj.ml:84">int</a></span><span class="ocamlStruct"> </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">No<br/></li>
<li></span><br/></li>
<li><span class="Comment">(*<br/></li>
<li></span><span class="Comment">let pret chan = function<br/></li>
<li></span><span class="Comment">&nbsp; | Inter (<a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a>,j)-&gt; Printf.fprintf chan &quot;Inter %d %d&quot; <a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a> j<br/></li>
<li></span><span class="Comment">&nbsp; | Sep <a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a> -&gt; Printf.fprintf chan &quot;Sep %d&quot; <a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a><br/></li>
<li></span><span class="Comment">&nbsp; | No -&gt; Printf.fprintf chan &quot;No&quot;<br/></li>
<li></span><span class="Comment">*)<br/></li>
<li></span><br/></li>
<li><a id="L321">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">coupe</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlStruct">,</span><span class="Statement">_</span><span class="ocamlStruct">,</span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlStruct">,<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">sub</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Constant">0</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct">,<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">sub</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">length</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct">-</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a id="L328">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">case_append</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">c1</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">c2</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">len1</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">length</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">c1<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">len2</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">length</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">c2</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">match</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">len1</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">len2</span><span class="ocamlStruct"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">0</span><span class="ocamlStruct">,</span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">c2<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct">,</span><span class="Constant">0</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">c1<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct">,</span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">l1</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">h1</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">act1</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">c1</span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">length</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">c1</span><span class="ocamlStruct">-</span><span class="Constant">1</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">l2</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">h2</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">act2</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">c2</span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="Constant">0</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">act1</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">act2</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="tmc.ml.html#L190" title="ocaml/lambda/tmc.ml:190">make</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">len1</span><span class="ocamlStruct">+</span><span class="ocamlLCIdentifier">len2</span><span class="ocamlStruct">-</span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">c1</span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="Constant">0</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">for</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">0</span><span class="ocamlNone"> </span><span class="Statement">to</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">len1</span><span class="ocamlStruct">-</span><span class="Constant">2</span><span class="ocamlStruct"> </span><span class="Statement">do<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a></span><span class="ocamlDo">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)</span><span class="ocamlDo"> </span><span class="Statement">&lt;-</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">c1</span><span class="ocamlDo">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">done</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">len1</span><span class="ocamlNone"> </span><span class="Statement">&lt;</span><span class="ocamlNone"> </span><span class="Constant">2</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">l1<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else</span><span class="ocamlStruct"> </span><span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Comment">(* 0 &lt;= len1 - 2 &lt; len1 *)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier">h</span><span class="ocamlEnd">,</span><span class="Statement">_</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a></span><span class="ocamlEnd">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">len1</span><span class="ocamlEnd">-</span><span class="Constant">2</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">min</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">h</span><span class="ocamlEnd"> + </span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">l1<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">h</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">len2</span><span class="ocamlNone"> </span><span class="Statement">&lt;</span><span class="ocamlNone"> </span><span class="Constant">2</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">h2<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else</span><span class="ocamlStruct"> </span><span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Comment">(* 0 &lt;= 1 &lt; len2 *)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlEnd">,</span><span class="Statement">_</span><span class="ocamlEnd">,</span><span class="Statement">_</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">c2</span><span class="ocamlEnd">.</span><span class="Statement">(</span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">max</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">h2</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlEnd"> - </span><span class="Constant">1</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a></span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">len1</span><span class="ocamlStruct">-</span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">&lt;-</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">h</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">act1</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">for</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">=</span><span class="Constant">1</span><span class="ocamlNone"> </span><span class="Statement">to</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">len2</span><span class="ocamlStruct">-</span><span class="Constant">1</span><span class="ocamlStruct">&nbsp; </span><span class="Statement">do<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a></span><span class="ocamlDo">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">len1</span><span class="ocamlDo">-</span><span class="Constant">1</span><span class="ocamlDo">+</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)</span><span class="ocamlDo"> </span><span class="Statement">&lt;-</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">c2</span><span class="ocamlDo">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">done</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else</span><span class="ocamlStruct"> </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">h1</span><span class="ocamlNone"> </span><span class="Statement">&gt;</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">l1</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li><a id="L361">&#x200c;</a></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">r</span></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="tmc.ml.html#L190" title="ocaml/lambda/tmc.ml:190">make</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">len1</span><span class="ocamlStruct">+</span><span class="ocamlLCIdentifier">len2</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">c1</span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="Constant">0</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">for</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">0</span><span class="ocamlNone"> </span><span class="Statement">to</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">len1</span><span class="ocamlStruct">-</span><span class="Constant">2</span><span class="ocamlStruct"> </span><span class="Statement">do<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a></span><span class="ocamlDo">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)</span><span class="ocamlDo"> </span><span class="Statement">&lt;-</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">c1</span><span class="ocamlDo">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">done</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a></span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">len1</span><span class="ocamlStruct">-</span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">&lt;-</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">l1</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">l2</span><span class="ocamlStruct">-</span><span class="Constant">1</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">act1</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">for</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">=</span><span class="Constant">0</span><span class="ocamlNone"> </span><span class="Statement">to</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">len2</span><span class="ocamlStruct">-</span><span class="Constant">1</span><span class="ocamlStruct">&nbsp; </span><span class="Statement">do<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a></span><span class="ocamlDo">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">len1</span><span class="ocamlDo">+</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)</span><span class="ocamlDo"> </span><span class="Statement">&lt;-</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">c2</span><span class="ocamlDo">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">done</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else</span><span class="ocamlStruct"> </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">h2</span><span class="ocamlNone"> </span><span class="Statement">&gt;</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">l2</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li><a id="L371">&#x200c;</a></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">r</span></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="tmc.ml.html#L190" title="ocaml/lambda/tmc.ml:190">make</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">len1</span><span class="ocamlStruct">+</span><span class="ocamlLCIdentifier">len2</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">c1</span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="Constant">0</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">for</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">0</span><span class="ocamlNone"> </span><span class="Statement">to</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">len1</span><span class="ocamlStruct">-</span><span class="Constant">1</span><span class="ocamlStruct"> </span><span class="Statement">do<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a></span><span class="ocamlDo">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)</span><span class="ocamlDo"> </span><span class="Statement">&lt;-</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">c1</span><span class="ocamlDo">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">done</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a></span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">len1</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">&lt;-</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">h1</span><span class="ocamlStruct">+</span><span class="Constant">1</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">h2</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">act2</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">for</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">=</span><span class="Constant">1</span><span class="ocamlNone"> </span><span class="Statement">to</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">len2</span><span class="ocamlStruct">-</span><span class="Constant">1</span><span class="ocamlStruct">&nbsp; </span><span class="Statement">do<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a></span><span class="ocamlDo">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">len1</span><span class="ocamlDo">+</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)</span><span class="ocamlDo"> </span><span class="Statement">&lt;-</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">c2</span><span class="ocamlDo">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">done</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">append</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">c1</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">c2<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a id="L384">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">coupe_inter</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">j</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">lcases</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">length</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L749" title="ocaml/lambda/switch.ml:749">low</a></span><span class="ocamlStruct">,</span><span class="Statement">_</span><span class="ocamlStruct">,</span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">high</span><span class="ocamlStruct">,</span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">j</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L749" title="ocaml/lambda/switch.ml:749">low</a></span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">high</span><span class="ocamlStruct">,<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">sub</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">j</span><span class="ocamlStruct">-</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct">+</span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlStruct">,<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L328" title="ocaml/lambda/switch.ml:328">case_append</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">sub</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Constant">0</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">sub</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">j</span><span class="ocamlStruct">+</span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">lcases</span><span class="ocamlStruct">-</span><span class="Statement">(</span><span class="ocamlLCIdentifier">j</span><span class="ocamlStruct">+</span><span class="Constant">1</span><span class="Statement">)))<br/></li>
<li></span><br/></li>
<li><a id="L392">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">type</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">kind</span></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Constant">Kvalue</span><span class="ocamlStruct"> </span><span class="Statement">of</span><span class="ocamlStruct"> </span><span class="Type"><a href="translobj.ml.html#L84" title="ocaml/lambda/translobj.ml:84">int</a></span><span class="ocamlStruct"> </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Kinter</span><span class="ocamlStruct"> </span><span class="Statement">of</span><span class="ocamlStruct"> </span><span class="Type"><a href="translobj.ml.html#L84" title="ocaml/lambda/translobj.ml:84">int</a></span><span class="ocamlStruct"> </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Kempty<br/></li>
<li></span><br/></li>
<li><span class="Comment">(*<br/></li>
<li></span><span class="Comment">let pkind chan = function<br/></li>
<li></span><span class="Comment">&nbsp; | Kvalue <a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a> -&gt;Printf.fprintf chan &quot;V%d&quot; <a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a><br/></li>
<li></span><span class="Comment">&nbsp; | Kinter <a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a> -&gt; Printf.fprintf chan &quot;I%d&quot; <a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a><br/></li>
<li></span><span class="Comment">&nbsp; | Kempty -&gt; Printf.fprintf chan &quot;E&quot;<br/></li>
<li></span><br/></li>
<li><span class="Comment">let rec pkey chan&nbsp; = function<br/></li>
<li></span><span class="Comment">&nbsp; | [] -&gt; ()<br/></li>
<li></span><span class="Comment">&nbsp; | [<a href="translprim.ml.html#L473" title="ocaml/lambda/translprim.ml:473">k</a>] -&gt; pkind chan <a href="translprim.ml.html#L473" title="ocaml/lambda/translprim.ml:473">k</a><br/></li>
<li></span><span class="Comment">&nbsp; | <a href="translprim.ml.html#L473" title="ocaml/lambda/translprim.ml:473">k</a>::rem -&gt;<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; Printf.fprintf chan &quot;%a %a&quot; pkey rem pkind <a href="translprim.ml.html#L473" title="ocaml/lambda/translprim.ml:473">k</a><br/></li>
<li></span><span class="Comment">*)<br/></li>
<li></span><br/></li>
<li><a id="L407">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">t</span></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Hashtbl</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">create</span><span class="ocamlStruct"> </span><span class="Constant">17<br/></li>
<li></span><br/></li>
<li><a id="L409">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">make_key</span></span><span class="ocamlStruct">&nbsp; </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">seen</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ref</span><span class="ocamlStruct"> </span><span class="Constant">[]<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">count</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ref</span><span class="ocamlStruct"> </span><span class="Constant">0</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="Statement">rec</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">got_it</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">function<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">[]</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">seen</span><span class="ocamlStruct"> </span><span class="Statement">:=</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlStruct">,</span><span class="Statement">!</span><span class="ocamlLCIdentifier">count</span><span class="Statement">)::</span><span class="ocamlStruct"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier">seen</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier">count</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">incr</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">count</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">act0</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L270" title="ocaml/lambda/translclass.ml:270">index</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">::</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">rem</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">act0</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L270" title="ocaml/lambda/translclass.ml:270">index</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">got_it</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">rem</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">make_one</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">h</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="Statement">=</span><span class="ocamlLCIdentifier">h</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Kvalue</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">got_it</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlStruct"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier">seen</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Kinter</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">got_it</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlStruct"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier">seen</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><br/></li>
<li><a id="L430">&#x200c;</a><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="Statement">rec</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">make_rec</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">pl</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlNone"> </span><span class="Statement">&lt;</span><span class="ocamlNone"> </span><span class="Constant">0</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">[]<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">h</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">pl</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">h</span><span class="ocamlNone">+</span><span class="Constant">1</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">make_one</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">h</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="Statement">::</span><span class="ocamlLCIdentifier"><a href="#L430" title="ocaml/lambda/switch.ml:430">make_rec</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct">-</span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Kempty</span><span class="Statement">::</span><span class="ocamlLCIdentifier">make_one</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">h</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="Statement">::</span><span class="ocamlLCIdentifier"><a href="#L430" title="ocaml/lambda/switch.ml:430">make_rec</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct">-</span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><br/></li>
<li><a id="L440">&#x200c;</a><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">l</span></span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">h</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">length</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct">-</span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier">make_one</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">h</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="Statement">::</span><span class="ocamlLCIdentifier"><a href="#L430" title="ocaml/lambda/switch.ml:430">make_rec</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">length</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct">-</span><span class="Constant">2</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a><br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a id="L444">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">same_act</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">len</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">length</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">a</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L251" title="ocaml/lambda/switch.ml:251">get_act</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">len</span><span class="ocamlStruct">-</span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="Statement">rec</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">do_rec</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlNone"> </span><span class="Statement">&lt;</span><span class="ocamlNone"> </span><span class="Constant">0</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlStruct"> </span><span class="Constant">true<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">b</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L251" title="ocaml/lambda/switch.ml:251">get_act</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">b</span><span class="Statement">=</span><span class="ocamlLCIdentifier">a</span><span class="ocamlStruct"> </span><span class="Statement">&amp;&amp;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">do_rec</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct">-</span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier">do_rec</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">len</span><span class="ocamlStruct">-</span><span class="Constant">2</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">(*<br/></li>
<li></span><span class="Comment">&nbsp; Interval <a href="matching.ml.html#L2340" title="ocaml/lambda/matching.ml:2340">test</a> x in [<a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a>,h] works by checking x-<a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a> in [0,h-<a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a>]<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; * This may be false for arithmetic modulo 2^31<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; * Subtracting <a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a> may change the relative ordering of values<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; and invalid the invariant that matched values are given in<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; increasing order<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp;&nbsp; To avoid this, interval check is allowed only when the<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; integers indeed present in the whole case interval are<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; in [-2^16 ; 2^16]<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp;&nbsp; This condition is checked by <a href="#L941" title="ocaml/lambda/switch.ml:941">zyva</a><br/></li>
<li></span><span class="Comment">*)<br/></li>
<li></span><br/></li>
<li><a id="L469">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">inter_limit</span></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Constant">1</span><span class="ocamlStruct"> </span><span class="Statement">lsl</span><span class="ocamlStruct"> </span><span class="Constant">16<br/></li>
<li></span><br/></li>
<li><a id="L471">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">ok_inter</span></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ref</span><span class="ocamlStruct"> </span><span class="Constant">false<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Comment">(* Compute a good <a href="matching.ml.html#L2340" title="ocaml/lambda/matching.ml:2340">test</a> <a href="printlambda.ml.html#L697" title="ocaml/lambda/printlambda.ml:697">sequence</a>. *)<br/></li>
<li><a id="L474">&#x200c;</a></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="Statement">rec</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">opt_count</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="switch.mli.html#L42" title="ocaml/lambda/switch.mli:42">key</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="lambda.mli.html#L362" title="ocaml/lambda/lambda.mli:362">make_key</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">try<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="PreProc">Hashtbl</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">find</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="switch.mli.html#L42" title="ocaml/lambda/switch.mli:42">key</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Not_found</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a></span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">lcases</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">length</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">match</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">lcases</span><span class="ocamlStruct"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">0</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Statement">assert</span><span class="ocamlStruct"> </span><span class="Constant">false<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">when</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L444" title="ocaml/lambda/switch.ml:444">same_act</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">No</span><span class="ocamlStruct">, </span><span class="Statement">({</span><span class="ocamlLCIdentifier">n</span><span class="Statement">=</span><span class="Constant">0</span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ni</span><span class="Statement">=</span><span class="Constant">0</span><span class="Statement">}</span><span class="ocamlStruct">,</span><span class="Statement">{</span><span class="ocamlLCIdentifier">n</span><span class="Statement">=</span><span class="Constant">0</span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ni</span><span class="Statement">=</span><span class="Constant">0</span><span class="Statement">})<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">lcases</span><span class="ocamlNone"> </span><span class="Statement">&lt;</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L228" title="ocaml/lambda/switch.ml:228">small_size_limit</a></span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L634" title="ocaml/lambda/translprim.ml:634">enum</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else</span><span class="ocamlStruct"> </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">lcases</span><span class="ocamlNone"> </span><span class="Statement">&lt;</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">medium_size_limit</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">heuristic</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L1684" title="ocaml/lambda/matching.ml:1684">divide</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">Hashtbl</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L884" title="ocaml/lambda/matching.ml:884">add</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="switch.mli.html#L42" title="ocaml/lambda/switch.mli:42">key</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a></span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a><br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Comment">(* Large inputs: dichotomic <a href="printlambda.ml.html#L697" title="ocaml/lambda/printlambda.ml:697">sequence</a>. *)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L1684" title="ocaml/lambda/matching.ml:1684">divide</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">lcases</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">length</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">m</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">lcases</span><span class="ocamlStruct">/</span><span class="Constant">2</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier"><a href="#L787" title="ocaml/lambda/switch.ml:787">left</a></span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">right</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L321" title="ocaml/lambda/switch.ml:321">coupe</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">m</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ci</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier">n</span><span class="Statement">=</span><span class="Constant">1</span><span class="ocamlStruct"> </span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ni</span><span class="Statement">=</span><span class="Constant">0</span><span class="Statement">}<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cm</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier">n</span><span class="Statement">=</span><span class="Constant">1</span><span class="ocamlStruct"> </span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ni</span><span class="Statement">=</span><span class="Constant">0</span><span class="Statement">}<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct">,</span><span class="Statement">(</span><span class="ocamlLCIdentifier">cml</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">cleft</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L474" title="ocaml/lambda/switch.ml:474">opt_count</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L787" title="ocaml/lambda/switch.ml:787">left</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct">,</span><span class="Statement">(</span><span class="ocamlLCIdentifier">cmr</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">cright</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L474" title="ocaml/lambda/switch.ml:474">opt_count</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">right</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L304" title="ocaml/lambda/switch.ml:304">add_test</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ci</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cleft</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L304" title="ocaml/lambda/switch.ml:304">add_test</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ci</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cright</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Comment">(* To compute a worst-case cost, we <a href="matching.ml.html#L884" title="ocaml/lambda/matching.ml:884">add</a> the more costly of the<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp;&nbsp; <a href="#L787" title="ocaml/lambda/switch.ml:787">left</a>/right branches to the running total. *)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L285" title="ocaml/lambda/switch.ml:285">less_tests</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">cml</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">cmr</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L304" title="ocaml/lambda/switch.ml:304">add_test</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cm</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cmr<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L304" title="ocaml/lambda/switch.ml:304">add_test</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cm</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cml</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Constant">Sep</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">m</span><span class="ocamlStruct">,</span><span class="Statement">(</span><span class="ocamlLCIdentifier">cm</span><span class="ocamlStruct">, </span><span class="ocamlLCIdentifier">ci</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Comment">(* Medium-<a href="matching.ml.html#L3846" title="ocaml/lambda/matching.ml:3846">size</a> inputs: dichotomy or interval tests. *)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">heuristic</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">lcases</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">length</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">sep</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">csep</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L1684" title="ocaml/lambda/matching.ml:1684">divide</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L223" title="ocaml/lambda/switch.ml:223">inter</a></span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">cinter</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L471" title="ocaml/lambda/switch.ml:471">ok_inter</a></span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlStruct"> </span><span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd">,</span><span class="Statement">_</span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier">act0</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlEnd">.</span><span class="Statement">(</span><span class="Constant">0</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd">,</span><span class="Statement">_</span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier">act1</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlEnd">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">lcases</span><span class="ocamlEnd">-</span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">act0</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">act1</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlEnd"> </span><span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L749" title="ocaml/lambda/switch.ml:749">low</a></span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">high</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">inside</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">outside</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L384" title="ocaml/lambda/switch.ml:384">coupe_inter</a></span><span class="ocamlEnd"> </span><span class="Constant">1</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">lcases</span><span class="ocamlEnd">-</span><span class="Constant">2</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd">,</span><span class="Statement">(</span><span class="ocamlLCIdentifier">cmi</span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier">cinside</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L474" title="ocaml/lambda/switch.ml:474">opt_count</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">inside<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd">,</span><span class="Statement">(</span><span class="ocamlLCIdentifier">cmo</span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier">coutside</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L474" title="ocaml/lambda/switch.ml:474">opt_count</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">outside<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cmij</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier">n</span><span class="Statement">=</span><span class="Constant">1</span><span class="ocamlEnd"> </span><span class="Statement">;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ni</span><span class="Statement">=(if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L749" title="ocaml/lambda/switch.ml:749">low</a></span><span class="Statement">=</span><span class="ocamlLCIdentifier">high</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlEnd"> </span><span class="Constant">0</span><span class="ocamlEnd"> </span><span class="Statement">else</span><span class="ocamlEnd"> </span><span class="Constant">1</span><span class="Statement">)}<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cij</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier">n</span><span class="Statement">=</span><span class="Constant">1</span><span class="ocamlEnd"> </span><span class="Statement">;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ni</span><span class="Statement">=(if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L749" title="ocaml/lambda/switch.ml:749">low</a></span><span class="Statement">=</span><span class="ocamlLCIdentifier">high</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlEnd"> </span><span class="Constant">0</span><span class="ocamlEnd"> </span><span class="Statement">else</span><span class="ocamlEnd"> </span><span class="Constant">1</span><span class="Statement">)}</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L304" title="ocaml/lambda/switch.ml:304">add_test</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cij</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cinside</span><span class="ocamlEnd"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L304" title="ocaml/lambda/switch.ml:304">add_test</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cij</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">coutside</span><span class="ocamlEnd"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L285" title="ocaml/lambda/switch.ml:285">less_tests</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">cmi</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">cmo</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L304" title="ocaml/lambda/switch.ml:304">add_test</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cmij</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cmo<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L304" title="ocaml/lambda/switch.ml:304">add_test</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cmij</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cmi</span><span class="ocamlEnd"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Inter</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="Constant">1</span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier">lcases</span><span class="ocamlEnd">-</span><span class="Constant">2</span><span class="Statement">)</span><span class="ocamlEnd">,</span><span class="Statement">(</span><span class="ocamlLCIdentifier">cmij</span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier">cij</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end</span><span class="ocamlEnd"> </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Inter</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlEnd">-</span><span class="Constant">1</span><span class="ocamlEnd">,-</span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlEnd">,</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L273" title="ocaml/lambda/switch.ml:273">too_much</a></span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L273" title="ocaml/lambda/switch.ml:273">too_much</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">end</span><span class="ocamlStruct"> </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Inter</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlStruct">-</span><span class="Constant">1</span><span class="ocamlStruct">,-</span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlStruct">,</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L273" title="ocaml/lambda/switch.ml:273">too_much</a></span><span class="ocamlStruct">, </span><span class="ocamlLCIdentifier"><a href="#L273" title="ocaml/lambda/switch.ml:273">too_much</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L298" title="ocaml/lambda/switch.ml:298">less2tests</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">csep</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">cinter</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">sep</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">csep<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L223" title="ocaml/lambda/switch.ml:223">inter</a></span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">cinter<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Comment">(* Small inputs: exhaustive search for optimal <a href="printlambda.ml.html#L697" title="ocaml/lambda/printlambda.ml:697">sequence</a>. *)<br/></li>
<li><a id="L547">&#x200c;</a></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">enum</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">lcases</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">length</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L784" title="ocaml/lambda/switch.ml:784">lim</a></span><span class="ocamlStruct">, </span><span class="ocamlLCIdentifier">with_sep</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">best</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ref</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlStruct">-</span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">best_cost</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ref</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L273" title="ocaml/lambda/switch.ml:273">too_much</a></span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier"><a href="#L273" title="ocaml/lambda/switch.ml:273">too_much</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">for</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">1</span><span class="ocamlNone"> </span><span class="Statement">to</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">lcases</span><span class="ocamlStruct">-</span><span class="Statement">(</span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">do<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlDo"> </span><span class="Statement">_</span><span class="ocamlDo">,</span><span class="ocamlLCIdentifier"><a href="#L787" title="ocaml/lambda/switch.ml:787">left</a></span><span class="ocamlDo">,</span><span class="ocamlLCIdentifier">right</span><span class="ocamlDo"> </span><span class="Statement">=</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="#L321" title="ocaml/lambda/switch.ml:321">coupe</a></span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlDo"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">ci</span><span class="ocamlDo"> </span><span class="Statement">=</span><span class="ocamlDo"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier">n</span><span class="Statement">=</span><span class="Constant">1</span><span class="ocamlDo"> </span><span class="Statement">;</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">ni</span><span class="Statement">=</span><span class="Constant">0</span><span class="Statement">}<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">cm</span><span class="ocamlDo"> </span><span class="Statement">=</span><span class="ocamlDo"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier">n</span><span class="Statement">=</span><span class="Constant">1</span><span class="ocamlDo"> </span><span class="Statement">;</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">ni</span><span class="Statement">=</span><span class="Constant">0</span><span class="Statement">}<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlDo"> </span><span class="Statement">_</span><span class="ocamlDo">,</span><span class="Statement">(</span><span class="ocamlLCIdentifier">cml</span><span class="ocamlDo">,</span><span class="ocamlLCIdentifier">cleft</span><span class="Statement">)</span><span class="ocamlDo"> </span><span class="Statement">=</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="#L474" title="ocaml/lambda/switch.ml:474">opt_count</a></span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="#L787" title="ocaml/lambda/switch.ml:787">left</a><br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlDo"> </span><span class="Statement">_</span><span class="ocamlDo">,</span><span class="Statement">(</span><span class="ocamlLCIdentifier">cmr</span><span class="ocamlDo">,</span><span class="ocamlLCIdentifier">cright</span><span class="Statement">)</span><span class="ocamlDo"> </span><span class="Statement">=</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="#L474" title="ocaml/lambda/switch.ml:474">opt_count</a></span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">right</span><span class="ocamlDo"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L304" title="ocaml/lambda/switch.ml:304">add_test</a></span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">ci</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">cleft</span><span class="ocamlDo"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L304" title="ocaml/lambda/switch.ml:304">add_test</a></span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">ci</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">cright</span><span class="ocamlDo"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L285" title="ocaml/lambda/switch.ml:285">less_tests</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">cml</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">cmr</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L304" title="ocaml/lambda/switch.ml:304">add_test</a></span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">cm</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">cmr<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L304" title="ocaml/lambda/switch.ml:304">add_test</a></span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">cm</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">cml</span><span class="ocamlDo"> </span><span class="Statement">;<br/></li>
<li></span><br/></li>
<li><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if<br/></li>
<li></span><span class="ocamlNone">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L298" title="ocaml/lambda/switch.ml:298">less2tests</a></span><span class="ocamlNone"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">cm</span><span class="ocamlNone">,</span><span class="ocamlLCIdentifier">ci</span><span class="Statement">)</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier">best_cost<br/></li>
<li></span><span class="ocamlNone">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">then</span><span class="ocamlDo"> </span><span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">best</span><span class="ocamlEnd"> </span><span class="Statement">:=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlEnd"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">best_cost</span><span class="ocamlEnd"> </span><span class="Statement">:=</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">cm</span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier">ci</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; </span><span class="Statement">done</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">!</span><span class="ocamlLCIdentifier">best</span><span class="ocamlStruct">, </span><span class="Statement">!</span><span class="ocamlLCIdentifier">best_cost</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><br/></li>
<li><a id="L574">&#x200c;</a><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">ilow</span></span><span class="ocamlStruct">, </span><span class="ocamlLCIdentifier">ihigh</span><span class="ocamlStruct">, </span><span class="ocamlLCIdentifier">with_inter</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="Statement">not</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L471" title="ocaml/lambda/switch.ml:471">ok_inter</a></span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L600" title="ocaml/lambda/switch.ml:600">rlow</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ref</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlStruct">-</span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">rhigh</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ref</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlStruct">-</span><span class="Constant">1</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">best_cost</span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ref</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L273" title="ocaml/lambda/switch.ml:273">too_much</a></span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier"><a href="#L273" title="ocaml/lambda/switch.ml:273">too_much</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">for</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">=</span><span class="Constant">1</span><span class="ocamlNone"> </span><span class="Statement">to</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">lcases</span><span class="ocamlStruct">-</span><span class="Constant">2</span><span class="ocamlStruct"> </span><span class="Statement">do<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="#L749" title="ocaml/lambda/switch.ml:749">low</a></span><span class="ocamlDo">, </span><span class="ocamlLCIdentifier">high</span><span class="ocamlDo">, </span><span class="ocamlLCIdentifier">inside</span><span class="ocamlDo">, </span><span class="ocamlLCIdentifier">outside</span><span class="ocamlDo"> </span><span class="Statement">=</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="#L384" title="ocaml/lambda/switch.ml:384">coupe_inter</a></span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlDo"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L749" title="ocaml/lambda/switch.ml:749">low</a></span><span class="Statement">=</span><span class="ocamlLCIdentifier">high</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlDo"> </span><span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd">,</span><span class="Statement">(</span><span class="ocamlLCIdentifier">cmi</span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier">cinside</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L474" title="ocaml/lambda/switch.ml:474">opt_count</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">inside<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd">,</span><span class="Statement">(</span><span class="ocamlLCIdentifier">cmo</span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier">coutside</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L474" title="ocaml/lambda/switch.ml:474">opt_count</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">outside<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cmij</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier">n</span><span class="Statement">=</span><span class="Constant">1</span><span class="ocamlEnd"> </span><span class="Statement">;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ni</span><span class="Statement">=</span><span class="Constant">0</span><span class="Statement">}<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cij</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier">n</span><span class="Statement">=</span><span class="Constant">1</span><span class="ocamlEnd"> </span><span class="Statement">;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ni</span><span class="Statement">=</span><span class="Constant">0</span><span class="Statement">}</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L304" title="ocaml/lambda/switch.ml:304">add_test</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cij</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cinside</span><span class="ocamlEnd"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L304" title="ocaml/lambda/switch.ml:304">add_test</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cij</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">coutside</span><span class="ocamlEnd"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L285" title="ocaml/lambda/switch.ml:285">less_tests</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">cmi</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">cmo</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L304" title="ocaml/lambda/switch.ml:304">add_test</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cmij</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cmo<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L304" title="ocaml/lambda/switch.ml:304">add_test</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cmij</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cmi</span><span class="ocamlEnd"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L298" title="ocaml/lambda/switch.ml:298">less2tests</a></span><span class="ocamlNone"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">cmij</span><span class="ocamlNone">,</span><span class="ocamlLCIdentifier">cij</span><span class="Statement">)</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier">best_cost</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlEnd"> </span><span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L600" title="ocaml/lambda/switch.ml:600">rlow</a></span><span class="ocamlEnd"> </span><span class="Statement">:=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlEnd"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">rhigh</span><span class="ocamlEnd"> </span><span class="Statement">:=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlEnd"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">best_cost</span><span class="ocamlEnd"> </span><span class="Statement">:=</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">cmij</span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier">cij</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">done</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L600" title="ocaml/lambda/switch.ml:600">rlow</a></span><span class="ocamlStruct">, </span><span class="Statement">!</span><span class="ocamlLCIdentifier">rhigh</span><span class="ocamlStruct">, </span><span class="Statement">!</span><span class="ocamlLCIdentifier">best_cost<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li><a id="L600">&#x200c;</a></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">rlow</span></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ref</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlStruct">-</span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">rhigh</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ref</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlStruct">-</span><span class="Constant">1</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">best_cost</span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ref</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L273" title="ocaml/lambda/switch.ml:273">too_much</a></span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier"><a href="#L273" title="ocaml/lambda/switch.ml:273">too_much</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">for</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">=</span><span class="Constant">1</span><span class="ocamlNone"> </span><span class="Statement">to</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">lcases</span><span class="ocamlStruct">-</span><span class="Constant">2</span><span class="ocamlStruct"> </span><span class="Statement">do<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">for</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">j</span><span class="Statement">=</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlNone"> </span><span class="Statement">to</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">lcases</span><span class="ocamlDo">-</span><span class="Constant">2</span><span class="ocamlDo"> </span><span class="Statement">do<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="#L749" title="ocaml/lambda/switch.ml:749">low</a></span><span class="ocamlDo">, </span><span class="ocamlLCIdentifier">high</span><span class="ocamlDo">, </span><span class="ocamlLCIdentifier">inside</span><span class="ocamlDo">, </span><span class="ocamlLCIdentifier">outside</span><span class="ocamlDo"> </span><span class="Statement">=</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="#L384" title="ocaml/lambda/switch.ml:384">coupe_inter</a></span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">j</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlDo"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlDo"> </span><span class="Statement">_</span><span class="ocamlDo">,</span><span class="Statement">(</span><span class="ocamlLCIdentifier">cmi</span><span class="ocamlDo">,</span><span class="ocamlLCIdentifier">cinside</span><span class="Statement">)</span><span class="ocamlDo"> </span><span class="Statement">=</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="#L474" title="ocaml/lambda/switch.ml:474">opt_count</a></span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">inside<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlDo"> </span><span class="Statement">_</span><span class="ocamlDo">,</span><span class="Statement">(</span><span class="ocamlLCIdentifier">cmo</span><span class="ocamlDo">,</span><span class="ocamlLCIdentifier">coutside</span><span class="Statement">)</span><span class="ocamlDo"> </span><span class="Statement">=</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="#L474" title="ocaml/lambda/switch.ml:474">opt_count</a></span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">outside<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">cmij</span><span class="ocamlDo"> </span><span class="Statement">=</span><span class="ocamlDo"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier">n</span><span class="Statement">=</span><span class="Constant">1</span><span class="ocamlDo"> </span><span class="Statement">;</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">ni</span><span class="Statement">=(if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L749" title="ocaml/lambda/switch.ml:749">low</a></span><span class="Statement">=</span><span class="ocamlLCIdentifier">high</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlDo"> </span><span class="Constant">0</span><span class="ocamlDo"> </span><span class="Statement">else</span><span class="ocamlDo"> </span><span class="Constant">1</span><span class="Statement">)}<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">cij</span><span class="ocamlDo"> </span><span class="Statement">=</span><span class="ocamlDo"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier">n</span><span class="Statement">=</span><span class="Constant">1</span><span class="ocamlDo"> </span><span class="Statement">;</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">ni</span><span class="Statement">=(if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L749" title="ocaml/lambda/switch.ml:749">low</a></span><span class="Statement">=</span><span class="ocamlLCIdentifier">high</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlDo"> </span><span class="Constant">0</span><span class="ocamlDo"> </span><span class="Statement">else</span><span class="ocamlDo"> </span><span class="Constant">1</span><span class="Statement">)}</span><span class="ocamlDo"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L304" title="ocaml/lambda/switch.ml:304">add_test</a></span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">cij</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">cinside</span><span class="ocamlDo"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L304" title="ocaml/lambda/switch.ml:304">add_test</a></span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">cij</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">coutside</span><span class="ocamlDo"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L285" title="ocaml/lambda/switch.ml:285">less_tests</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">cmi</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">cmo</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L304" title="ocaml/lambda/switch.ml:304">add_test</a></span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">cmij</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">cmo<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L304" title="ocaml/lambda/switch.ml:304">add_test</a></span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">cmij</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">cmi</span><span class="ocamlDo"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L298" title="ocaml/lambda/switch.ml:298">less2tests</a></span><span class="ocamlNone"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">cmij</span><span class="ocamlNone">,</span><span class="ocamlLCIdentifier">cij</span><span class="Statement">)</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier">best_cost</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlDo"> </span><span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L600" title="ocaml/lambda/switch.ml:600">rlow</a></span><span class="ocamlEnd"> </span><span class="Statement">:=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlEnd"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">rhigh</span><span class="ocamlEnd"> </span><span class="Statement">:=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">j</span><span class="ocamlEnd"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">best_cost</span><span class="ocamlEnd"> </span><span class="Statement">:=</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">cmij</span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier">cij</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">done<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">done</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L600" title="ocaml/lambda/switch.ml:600">rlow</a></span><span class="ocamlStruct">, </span><span class="Statement">!</span><span class="ocamlLCIdentifier">rhigh</span><span class="ocamlStruct">, </span><span class="Statement">!</span><span class="ocamlLCIdentifier">best_cost</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li><a id="L623">&#x200c;</a></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">r</span></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ref</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="Constant">Inter</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L574" title="ocaml/lambda/switch.ml:574">ilow</a></span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">ihigh</span><span class="Statement">))</span><span class="ocamlStruct"> </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">rc</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ref</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">with_inter</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L298" title="ocaml/lambda/switch.ml:298">less2tests</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">with_sep</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier">rc</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlStruct"> </span><span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a></span><span class="ocamlEnd"> </span><span class="Statement">:=</span><span class="ocamlEnd"> </span><span class="Constant">Sep</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L784" title="ocaml/lambda/switch.ml:784">lim</a></span><span class="ocamlEnd"> </span><span class="Statement">;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">rc</span><span class="ocamlEnd"> </span><span class="Statement">:=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">with_sep<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Statement">end</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a></span><span class="ocamlStruct">, </span><span class="Statement">!</span><span class="ocamlLCIdentifier">rc<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Comment">(* Consider the following <a href="printlambda.ml.html#L697" title="ocaml/lambda/printlambda.ml:697">sequence</a> of interval tests:<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp; &nbsp; &nbsp;&nbsp; if a in [2; 10] then<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if a in [2; 4] then act24<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else if a in [5; 8] then act58<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else act810<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp;&nbsp; else act_default<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp; &nbsp;&nbsp; Our interval check works by subtracting the interval lower<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; bound, then checking a range [0; n] using an unsigned<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; <a href="translprim.ml.html#L53" title="ocaml/lambda/translprim.ml:53">comparison</a>. Naively we would generate code with one subtraction<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; to [a] before each <a href="translprim.ml.html#L53" title="ocaml/lambda/translprim.ml:53">comparison</a>:<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp; &nbsp; &nbsp;&nbsp; let tmp1 = a - 2 in<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp;&nbsp; if tmp1 &lt;=u 8 then<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; let tmp2 = a - 2 in<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if tmp2 &lt;=u 2 then act24<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; let tmp3 = a - 5 in<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if tmp3 &lt;=u 3 then act58<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else act810<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp;&nbsp; else act_default<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp; &nbsp;&nbsp; but we can avoid some substractions by working with the result<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; of the first subtraction, instead of the original <a href="translclass.ml.html#L270" title="ocaml/lambda/translclass.ml:270">index</a> [a],<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; inside the interval.<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp; &nbsp; &nbsp;&nbsp; let a2 = a - 2 in<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp;&nbsp; if a2 &lt;=u 8 then<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if a2 in &lt;=u 2 then act24<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; let a5 = a2 - 3 in<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if a5 &lt;=u 3 then act58<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; else act810<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp;&nbsp; else act_default<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp; &nbsp;&nbsp; The type [<a href="#L670" title="ocaml/lambda/switch.ml:670">t_ctx</a>] represents an input argument &quot;shifted&quot; by a certain<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; (negative) <a href="tmc.ml.html#L48" title="ocaml/lambda/tmc.ml:48">offset</a> by repeated substractions.<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp; &nbsp;&nbsp; In the example above, [a5] would be represented with [off = -5].<br/></li>
<li></span><span class="Comment">&nbsp; *)<br/></li>
<li><a id="L670">&#x200c;</a></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">type</span><span class="ocamlStruct"> '</span><span class="ocamlLCIdentifier">a</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">t_ctx</span></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct">&nbsp; </span><span class="Statement">{</span><span class="ocamlLCIdentifier">off</span><span class="ocamlStruct"> : </span><span class="Type"><a href="translobj.ml.html#L84" title="ocaml/lambda/translobj.ml:84">int</a></span><span class="ocamlStruct"> </span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> : '</span><span class="ocamlLCIdentifier">a</span><span class="Statement">}<br/></li>
<li></span><br/></li>
<li><a id="L672">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">make_if_test</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2340" title="ocaml/lambda/matching.ml:2340">test</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifso</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifnot</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2376" title="ocaml/lambda/matching.ml:2376">make_if</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2343" title="ocaml/lambda/matching.ml:2343">make_prim</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2340" title="ocaml/lambda/matching.ml:2340">test</a></span><span class="ocamlStruct"> </span><span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2360" title="ocaml/lambda/matching.ml:2360">make_const</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">])<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">ifso</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifnot<br/></li>
<li></span><br/></li>
<li><a id="L677">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">make_if_lt</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct">&nbsp; </span><span class="ocamlLCIdentifier">ifso</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifnot</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">match</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">1</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L672" title="ocaml/lambda/switch.ml:672">make_if_test</a></span><span class="ocamlStruct"> </span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2330" title="ocaml/lambda/matching.ml:2330">leint</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="Constant">0</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifso</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifnot<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L672" title="ocaml/lambda/switch.ml:672">make_if_test</a></span><span class="ocamlStruct"> </span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2332" title="ocaml/lambda/matching.ml:2332">ltint</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifso</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifnot<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">make_if_ge</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct">&nbsp; </span><span class="ocamlLCIdentifier">ifso</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifnot</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">match</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">1</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L672" title="ocaml/lambda/switch.ml:672">make_if_test</a></span><span class="ocamlStruct"> </span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2336" title="ocaml/lambda/matching.ml:2336">gtint</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="Constant">0</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifso</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifnot<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L672" title="ocaml/lambda/switch.ml:672">make_if_test</a></span><span class="ocamlStruct"> </span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2334" title="ocaml/lambda/matching.ml:2334">geint</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifso</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifnot<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">make_if_eq</span><span class="ocamlStruct">&nbsp; </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifso</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifnot</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L672" title="ocaml/lambda/switch.ml:672">make_if_test</a></span><span class="ocamlStruct"> </span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2326" title="ocaml/lambda/matching.ml:2326">eqint</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifso</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifnot<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">make_if_ne</span><span class="ocamlStruct">&nbsp; </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifso</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifnot</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L672" title="ocaml/lambda/switch.ml:672">make_if_test</a></span><span class="ocamlStruct"> </span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2328" title="ocaml/lambda/matching.ml:2328">neint</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifso</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifnot<br/></li>
<li></span><br/></li>
<li><a id="L695">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">make_if_nonzero</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifso</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifnot</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2376" title="ocaml/lambda/matching.ml:2376">make_if</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2366" title="ocaml/lambda/matching.ml:2366">make_is_nonzero</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifso</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifnot<br/></li>
<li></span><br/></li>
<li><a id="L698">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">make_if_bool</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifso</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifnot</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2376" title="ocaml/lambda/matching.ml:2376">make_if</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2374" title="ocaml/lambda/matching.ml:2374">arg_as_test</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifso</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifnot<br/></li>
<li></span><br/></li>
<li><a id="L701">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">do_make_if_out</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">h</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifso</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifno</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2376" title="ocaml/lambda/matching.ml:2376">make_if</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2362" title="ocaml/lambda/matching.ml:2362">make_isout</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">h</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifso</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifno<br/></li>
<li></span><br/></li>
<li><a id="L704">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">make_if_out</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">d</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">mk_ifso</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">mk_ifno</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">match</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlStruct"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">0</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L701" title="ocaml/lambda/switch.ml:701">do_make_if_out</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2360" title="ocaml/lambda/matching.ml:2360">make_const</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">d</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">mk_ifso</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ctx</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">mk_ifno</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ctx</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2350" title="ocaml/lambda/matching.ml:2350">bind</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2345" title="ocaml/lambda/matching.ml:2345">make_offset</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlStruct">-</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="Statement">))<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(fun</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier">off</span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlStruct">-</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlStruct">+</span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">off</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="Statement">=</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="Statement">}</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier"><a href="#L701" title="ocaml/lambda/switch.ml:701">do_make_if_out</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">(</span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2360" title="ocaml/lambda/matching.ml:2360">make_const</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">d</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">mk_ifso</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ctx</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">mk_ifno</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ctx</span><span class="Statement">))<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">do_make_if_in</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">h</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifso</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifno</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2376" title="ocaml/lambda/matching.ml:2376">make_if</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2364" title="ocaml/lambda/matching.ml:2364">make_isin</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">h</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifso</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ifno<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">make_if_in</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">d</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">mk_ifso</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">mk_ifno</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">match</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlStruct"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">0</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">do_make_if_in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2360" title="ocaml/lambda/matching.ml:2360">make_const</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">d</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">mk_ifso</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ctx</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">mk_ifno</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ctx</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2350" title="ocaml/lambda/matching.ml:2350">bind</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2345" title="ocaml/lambda/matching.ml:2345">make_offset</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlStruct">-</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="Statement">))<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(fun</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier">off</span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlStruct">-</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlStruct">+</span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">off</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="Statement">=</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="Statement">}</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier">do_make_if_in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">(</span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2360" title="ocaml/lambda/matching.ml:2360">make_const</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">d</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">mk_ifso</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ctx</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">mk_ifno</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ctx</span><span class="Statement">))<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Comment">(* Generate the code for a good <a href="matching.ml.html#L2340" title="ocaml/lambda/matching.ml:2340">test</a> <a href="printlambda.ml.html#L697" title="ocaml/lambda/printlambda.ml:697">sequence</a>. *)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="Statement">rec</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">c_test</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlStruct"> </span><span class="Statement">({</span><span class="ocamlLCIdentifier">cases</span><span class="Statement">=</span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">actions</span><span class="Statement">=</span><span class="ocamlLCIdentifier">actions</span><span class="Statement">}</span><span class="ocamlStruct"> </span><span class="Statement">as</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L563" title="ocaml/lambda/translclass.ml:563">s</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">lcases</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">length</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">assert(</span><span class="ocamlLCIdentifier">lcases</span><span class="ocamlStruct"> </span><span class="Statement">&gt;</span><span class="ocamlStruct"> </span><span class="Constant">0</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">lcases</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">1</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">actions</span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L251" title="ocaml/lambda/switch.ml:251">get_act</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Constant">0</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ctx<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">else</span><span class="ocamlStruct"> </span><span class="Statement">begin<br/></li>
<li></span><br/></li>
<li><a id="L740">&#x200c;</a><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><span class="linkable">w</span></span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier">_c</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L474" title="ocaml/lambda/switch.ml:474">opt_count</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="Comment">(*<br/></li>
<li></span><span class="Comment">&nbsp; Printf.fprintf stderr<br/></li>
<li></span><span class="Comment">&nbsp; &quot;off=%d tactic=%a for %a\n&quot;<br/></li>
<li></span><span class="Comment">&nbsp; ctx.off pret <a href="#L740" title="ocaml/lambda/switch.ml:740">w</a> pcases cases ;<br/></li>
<li></span><span class="Comment">&nbsp; *)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L740" title="ocaml/lambda/switch.ml:740">w</a></span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">No</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">actions</span><span class="ocamlEnd">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L251" title="ocaml/lambda/switch.ml:251">get_act</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlEnd"> </span><span class="Constant">0</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ctx<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Inter</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier">j</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li><a id="L749">&#x200c;</a></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><span class="linkable">low</span></span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier">high</span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier">inside</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">outside</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L384" title="ocaml/lambda/switch.ml:384">coupe_inter</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">j</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd">,</span><span class="Statement">(</span><span class="ocamlLCIdentifier">cinside</span><span class="ocamlEnd">,</span><span class="Statement">_)</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L474" title="ocaml/lambda/switch.ml:474">opt_count</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">inside<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd">,</span><span class="Statement">(</span><span class="ocamlLCIdentifier">coutside</span><span class="ocamlEnd">,</span><span class="Statement">_)</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L474" title="ocaml/lambda/switch.ml:474">opt_count</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">outside</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">(* Costs are retrieved to put the code with more remaining tests<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; in the privileged (positive) branch of ``if'' *)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L749" title="ocaml/lambda/switch.ml:749">low</a></span><span class="Statement">=</span><span class="ocamlLCIdentifier">high</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlEnd"> </span><span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L285" title="ocaml/lambda/switch.ml:285">less_tests</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">coutside</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">cinside</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">make_if_eq<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L749" title="ocaml/lambda/switch.ml:749">low</a></span><span class="ocamlEnd">+</span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">off</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier">c_test</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L563" title="ocaml/lambda/translclass.ml:563">s</a></span><span class="ocamlEnd"> </span><span class="Statement">with</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cases</span><span class="Statement">=</span><span class="ocamlLCIdentifier">inside</span><span class="Statement">})<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier">c_test</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L563" title="ocaml/lambda/translclass.ml:563">s</a></span><span class="ocamlEnd"> </span><span class="Statement">with</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cases</span><span class="Statement">=</span><span class="ocamlLCIdentifier">outside</span><span class="Statement">})<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">make_if_ne<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L749" title="ocaml/lambda/switch.ml:749">low</a></span><span class="ocamlEnd">+</span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">off</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier">c_test</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L563" title="ocaml/lambda/translclass.ml:563">s</a></span><span class="ocamlEnd"> </span><span class="Statement">with</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cases</span><span class="Statement">=</span><span class="ocamlLCIdentifier">outside</span><span class="Statement">})<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier">c_test</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L563" title="ocaml/lambda/translclass.ml:563">s</a></span><span class="ocamlEnd"> </span><span class="Statement">with</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cases</span><span class="Statement">=</span><span class="ocamlLCIdentifier">inside</span><span class="Statement">})<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end</span><span class="ocamlEnd"> </span><span class="Statement">else</span><span class="ocamlEnd"> </span><span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L285" title="ocaml/lambda/switch.ml:285">less_tests</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">coutside</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">cinside</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">make_if_in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">ctx<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L749" title="ocaml/lambda/switch.ml:749">low</a></span><span class="ocamlEnd">+</span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">off</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier">high</span><span class="ocamlEnd">-</span><span class="ocamlLCIdentifier"><a href="#L749" title="ocaml/lambda/switch.ml:749">low</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(fun</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">c_test</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L563" title="ocaml/lambda/translclass.ml:563">s</a></span><span class="ocamlEnd"> </span><span class="Statement">with</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cases</span><span class="Statement">=</span><span class="ocamlLCIdentifier">inside</span><span class="Statement">})<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(fun</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">c_test</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L563" title="ocaml/lambda/translclass.ml:563">s</a></span><span class="ocamlEnd"> </span><span class="Statement">with</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cases</span><span class="Statement">=</span><span class="ocamlLCIdentifier">outside</span><span class="Statement">})<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L704" title="ocaml/lambda/switch.ml:704">make_if_out</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">ctx<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L749" title="ocaml/lambda/switch.ml:749">low</a></span><span class="ocamlEnd">+</span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">off</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier">high</span><span class="ocamlEnd">-</span><span class="ocamlLCIdentifier"><a href="#L749" title="ocaml/lambda/switch.ml:749">low</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(fun</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">c_test</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L563" title="ocaml/lambda/translclass.ml:563">s</a></span><span class="ocamlEnd"> </span><span class="Statement">with</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cases</span><span class="Statement">=</span><span class="ocamlLCIdentifier">outside</span><span class="Statement">})<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(fun</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">c_test</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L563" title="ocaml/lambda/translclass.ml:563">s</a></span><span class="ocamlEnd"> </span><span class="Statement">with</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cases</span><span class="Statement">=</span><span class="ocamlLCIdentifier">inside</span><span class="Statement">})<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Sep</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li><a id="L784">&#x200c;</a></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><span class="linkable">lim</span></span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier"><a href="#L787" title="ocaml/lambda/switch.ml:787">left</a></span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier">right</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L321" title="ocaml/lambda/switch.ml:321">coupe</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd">,</span><span class="Statement">(</span><span class="ocamlLCIdentifier">cleft</span><span class="ocamlEnd">,</span><span class="Statement">_)</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L474" title="ocaml/lambda/switch.ml:474">opt_count</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L787" title="ocaml/lambda/switch.ml:787">left</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd">,</span><span class="Statement">(</span><span class="ocamlLCIdentifier">cright</span><span class="ocamlEnd">,</span><span class="Statement">_)</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L474" title="ocaml/lambda/switch.ml:474">opt_count</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">right</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li><a id="L787">&#x200c;</a></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><span class="linkable">left</span></span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L563" title="ocaml/lambda/translclass.ml:563">s</a></span><span class="ocamlEnd"> </span><span class="Statement">with</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cases</span><span class="Statement">=</span><span class="ocamlLCIdentifier"><span class="linkable">left</span></span><span class="Statement">}<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">right</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L563" title="ocaml/lambda/translclass.ml:563">s</a></span><span class="ocamlEnd"> </span><span class="Statement">with</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cases</span><span class="Statement">=</span><span class="ocamlLCIdentifier">right</span><span class="Statement">}</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><br/></li>
<li><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">=</span><span class="Constant">1</span><span class="ocamlNone"> </span><span class="Statement">&amp;&amp;</span><span class="ocamlNone"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L784" title="ocaml/lambda/switch.ml:784">lim</a></span><span class="ocamlNone">+</span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">off</span><span class="Statement">)=</span><span class="Constant">1</span><span class="ocamlNone"> </span><span class="Statement">&amp;&amp;</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">get_low</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlNone"> </span><span class="Constant">0</span><span class="ocamlNone">+</span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">off</span><span class="Statement">=</span><span class="Constant">0</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">lcases</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">2</span><span class="ocamlNone"> </span><span class="Statement">&amp;&amp;</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">get_high</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlNone"> </span><span class="Constant">1</span><span class="ocamlNone">+</span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">off</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">1</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L698" title="ocaml/lambda/switch.ml:698">make_if_bool</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier">c_test</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">right</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">c_test</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L787" title="ocaml/lambda/switch.ml:787">left</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L695" title="ocaml/lambda/switch.ml:695">make_if_nonzero</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier">c_test</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">right</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">c_test</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L787" title="ocaml/lambda/switch.ml:787">left</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else</span><span class="ocamlEnd"> </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L285" title="ocaml/lambda/switch.ml:285">less_tests</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">cright</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">cleft</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L677" title="ocaml/lambda/switch.ml:677">make_if_lt</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L784" title="ocaml/lambda/switch.ml:784">lim</a></span><span class="ocamlEnd">+</span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">off</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier">c_test</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L787" title="ocaml/lambda/switch.ml:787">left</a></span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">c_test</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">right</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">make_if_ge<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L784" title="ocaml/lambda/switch.ml:784">lim</a></span><span class="ocamlEnd">+</span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">off</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier">c_test</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">right</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">c_test</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L787" title="ocaml/lambda/switch.ml:787">left</a></span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Comment">(* Minimal density of <a href="#L840" title="ocaml/lambda/switch.ml:840">dense</a> switches. *)<br/></li>
<li><a id="L812">&#x200c;</a></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">theta</span></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Constant">0.33333<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Comment">(* Minimal number of tests to <a href="tmc.ml.html#L190" title="ocaml/lambda/tmc.ml:190">make</a> a <a href="#L840" title="ocaml/lambda/switch.ml:840">dense</a> switch. *)<br/></li>
<li><a id="L815">&#x200c;</a></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">switch_min</span></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Constant">3<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Comment">(* Particular case 0, 1, 2. *)<br/></li>
<li><a id="L818">&#x200c;</a></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">particular_case</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">j</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier">j</span><span class="ocamlStruct">-</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Constant">2</span><span class="ocamlStruct"> </span><span class="Statement">&amp;&amp;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">(let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">l1</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">_h1</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">act1</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp;&nbsp; </span><span class="Statement">and</span><span class="ocamlStruct">&nbsp; </span><span class="ocamlLCIdentifier">l2</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">_h2</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">_act2</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct">+</span><span class="Constant">1</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp;&nbsp; </span><span class="Statement">and</span><span class="ocamlStruct">&nbsp; </span><span class="ocamlLCIdentifier">l3</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">h3</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">act3</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct">+</span><span class="Constant">2</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier">l1</span><span class="ocamlStruct">+</span><span class="Constant">1</span><span class="Statement">=</span><span class="ocamlLCIdentifier">l2</span><span class="ocamlStruct"> </span><span class="Statement">&amp;&amp;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">l2</span><span class="ocamlStruct">+</span><span class="Constant">1</span><span class="Statement">=</span><span class="ocamlLCIdentifier">l3</span><span class="ocamlStruct"> </span><span class="Statement">&amp;&amp;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">l3</span><span class="Statement">=</span><span class="ocamlLCIdentifier">h3</span><span class="ocamlStruct"> </span><span class="Statement">&amp;&amp;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier">act1</span><span class="ocamlStruct"> </span><span class="Statement">&lt;&gt;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">act3</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Comment">(* Approximation of the <a href="matching.ml.html#L2340" title="ocaml/lambda/matching.ml:2340">test</a> <a href="printlambda.ml.html#L697" title="ocaml/lambda/printlambda.ml:697">sequence</a> height,<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; used to determine cluster density. *)<br/></li>
<li><a id="L828">&#x200c;</a></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">approx_count</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">j</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">j</span><span class="ocamlStruct">-</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct">+</span><span class="Constant">1</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlNone"> </span><span class="Statement">&lt;</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L228" title="ocaml/lambda/switch.ml:228">small_size_limit</a></span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Comment">(* on small input intervals, use <a href="matching.ml.html#L2340" title="ocaml/lambda/matching.ml:2340">test</a> <a href="printlambda.ml.html#L697" title="ocaml/lambda/printlambda.ml:697">sequence</a> height *)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct">,</span><span class="Statement">(_</span><span class="ocamlStruct">,</span><span class="Statement">{</span><span class="ocamlLCIdentifier">n</span><span class="Statement">=</span><span class="ocamlLCIdentifier">ntests</span><span class="Statement">})</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L474" title="ocaml/lambda/switch.ml:474">opt_count</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">sub</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">ntests<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Comment">(* otherwise use the standard notion of density<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (number of non-default cases) *)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlStruct">-</span><span class="Constant">1<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Comment">(* Sends back a boolean that says whether it is worth making a jump <a href="translclass.ml.html#L769" title="ocaml/lambda/translclass.ml:769">table</a>. *)<br/></li>
<li><a id="L840">&#x200c;</a></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">dense</span></span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier">cases</span><span class="Statement">}</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">j</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">=</span><span class="ocamlLCIdentifier">j</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlStruct"> </span><span class="Constant">true<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlStruct">,</span><span class="Statement">_</span><span class="ocamlStruct">,</span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">h</span><span class="ocamlStruct">,</span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">j</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ntests</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L828" title="ocaml/lambda/switch.ml:828">approx_count</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">j</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="Comment">(*<br/></li>
<li></span><span class="Comment">&nbsp; (ntests+1) &gt;= <a href="#L812" title="ocaml/lambda/switch.ml:812">theta</a> * (h-<a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a>+1)<br/></li>
<li></span><span class="Comment">*)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L818" title="ocaml/lambda/switch.ml:818">particular_case</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">j</span><span class="ocamlStruct"> </span><span class="Statement">||<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="Comment">(* The <a href="#L815" title="ocaml/lambda/switch.ml:815">switch_min</a> <a href="matching.ml.html#L2340" title="ocaml/lambda/matching.ml:2340">test</a> guarantees that we don'<a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a> use jump tables<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for very small switches. *)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier">ntests</span><span class="ocamlStruct"> </span><span class="Statement">&gt;=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L815" title="ocaml/lambda/switch.ml:815">switch_min</a></span><span class="ocamlStruct"> </span><span class="Statement">&amp;&amp;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier">float_of_int</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ntests</span><span class="ocamlStruct"> +. </span><span class="Constant">1.0</span><span class="ocamlStruct"> </span><span class="Statement">&gt;=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier"><a href="#L812" title="ocaml/lambda/switch.ml:812">theta</a></span><span class="ocamlStruct"> </span><span class="Statement">*</span><span class="ocamlStruct">. </span><span class="Statement">(</span><span class="ocamlLCIdentifier">float_of_int</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">h</span><span class="ocamlStruct"> -. </span><span class="ocamlLCIdentifier">float_of_int</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlStruct"> +. </span><span class="Constant">1.0</span><span class="Statement">))<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Comment">(* Compute an optimal clustering by dynamic programming. *)<br/></li>
<li><a id="L857">&#x200c;</a></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">comp_clusters</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L563" title="ocaml/lambda/translclass.ml:563">s</a></span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">len</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">length</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L563" title="ocaml/lambda/translclass.ml:563">s</a></span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">min_clusters</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="tmc.ml.html#L190" title="ocaml/lambda/tmc.ml:190">make</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">len</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">max_int<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L473" title="ocaml/lambda/translprim.ml:473">k</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="tmc.ml.html#L190" title="ocaml/lambda/tmc.ml:190">make</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">len</span><span class="ocamlStruct"> </span><span class="Constant">0</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">get_min</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlNone"> </span><span class="Statement">&lt;</span><span class="ocamlNone"> </span><span class="Constant">0</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlStruct"> </span><span class="Constant">0</span><span class="ocamlStruct"> </span><span class="Statement">else</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">min_clusters</span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">for</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">0</span><span class="ocamlNone"> </span><span class="Statement">to</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">len</span><span class="ocamlStruct">-</span><span class="Constant">1</span><span class="ocamlStruct"> </span><span class="Statement">do<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; </span><span class="Statement">for</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">j</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">0</span><span class="ocamlNone"> </span><span class="Statement">to</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlDo"> </span><span class="Statement">do<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if<br/></li>
<li></span><span class="ocamlNone">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L840" title="ocaml/lambda/switch.ml:840">dense</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L563" title="ocaml/lambda/translclass.ml:563">s</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">j</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlNone"> </span><span class="Statement">&amp;&amp;<br/></li>
<li></span><span class="ocamlNone">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">get_min</span><span class="ocamlNone"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">j</span><span class="ocamlNone">-</span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlNone"> + </span><span class="Constant">1</span><span class="ocamlNone"> </span><span class="Statement">&lt;</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">min_clusters</span><span class="ocamlNone">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlNone">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">then</span><span class="ocamlDo"> </span><span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L473" title="ocaml/lambda/translprim.ml:473">k</a></span><span class="ocamlEnd">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">&lt;-</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">j</span><span class="ocamlEnd"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">min_clusters</span><span class="ocamlEnd">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">&lt;-</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">get_min</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">j</span><span class="ocamlEnd">-</span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlEnd"> + </span><span class="Constant">1<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; </span><span class="Statement">done</span><span class="ocamlDo"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; </span><span class="Statement">done</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier">min_clusters</span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">len</span><span class="ocamlStruct">-</span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L473" title="ocaml/lambda/translprim.ml:473">k</a><br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Comment">(* The code to generate a <a href="#L840" title="ocaml/lambda/switch.ml:840">dense</a> switch is provided<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; by the functor parameter as Arg.<a href="matching.ml.html#L2378" title="ocaml/lambda/matching.ml:2378">make_switch</a><br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; (which will typically use a jump <a href="translclass.ml.html#L769" title="ocaml/lambda/translclass.ml:769">table</a>) *)<br/></li>
<li><a id="L879">&#x200c;</a></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">make_switch</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier">cases</span><span class="Statement">=</span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">actions</span><span class="Statement">=</span><span class="ocamlLCIdentifier">actions</span><span class="Statement">}</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">j</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Comment">(* Assume j &gt; <a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a> *)<br/></li>
<li><a id="L881">&#x200c;</a></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">ll</span></span><span class="ocamlStruct">,</span><span class="Statement">_</span><span class="ocamlStruct">,</span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">hh</span><span class="ocamlStruct">,</span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">j</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">tbl</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="tmc.ml.html#L190" title="ocaml/lambda/tmc.ml:190">make</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">hh</span><span class="ocamlStruct">-</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L384" title="ocaml/lambda/translcore.ml:384">ll</a></span><span class="ocamlStruct">+</span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Constant">0<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Hashtbl</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">create</span><span class="ocamlStruct"> </span><span class="Constant">17<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L270" title="ocaml/lambda/translclass.ml:270">index</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ref</span><span class="ocamlStruct"> </span><span class="Constant">0</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">get_index</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">try<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">Hashtbl</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">find</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Not_found</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L270" title="ocaml/lambda/translclass.ml:270">index</a></span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">incr</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L270" title="ocaml/lambda/translclass.ml:270">index</a></span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">Hashtbl</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L884" title="ocaml/lambda/matching.ml:884">add</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">for</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L473" title="ocaml/lambda/translprim.ml:473">k</a></span><span class="Statement">=</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlNone"> </span><span class="Statement">to</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">j</span><span class="ocamlStruct"> </span><span class="Statement">do<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlDo">,</span><span class="ocamlLCIdentifier">h</span><span class="ocamlDo">,</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlDo"> </span><span class="Statement">=</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlDo">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L473" title="ocaml/lambda/translprim.ml:473">k</a></span><span class="Statement">)</span><span class="ocamlDo"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L270" title="ocaml/lambda/translclass.ml:270">index</a></span><span class="ocamlDo"> </span><span class="Statement">=</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">get_index</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlDo"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; </span><span class="Statement">for</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">kk</span><span class="Statement">=</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlNone">-</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L384" title="ocaml/lambda/translcore.ml:384">ll</a></span><span class="ocamlNone"> </span><span class="Statement">to</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier">h</span><span class="ocamlDo">-</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L384" title="ocaml/lambda/translcore.ml:384">ll</a></span><span class="ocamlDo"> </span><span class="Statement">do<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">tbl</span><span class="ocamlDo">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">kk</span><span class="Statement">)</span><span class="ocamlDo"> </span><span class="Statement">&lt;-</span><span class="ocamlDo"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L270" title="ocaml/lambda/translclass.ml:270">index</a><br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; &nbsp; </span><span class="Statement">done<br/></li>
<li></span><span class="ocamlDo">&nbsp; &nbsp; </span><span class="Statement">done</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L954" title="ocaml/lambda/switch.ml:954">acts</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="tmc.ml.html#L190" title="ocaml/lambda/tmc.ml:190">make</a></span><span class="ocamlStruct"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L270" title="ocaml/lambda/translclass.ml:270">index</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">actions</span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="Constant">0</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="PreProc">Hashtbl</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">iter<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">(fun</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L954" title="ocaml/lambda/switch.ml:954">acts</a></span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">&lt;-</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">actions</span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="Statement">))<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">(fun</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">match</span><span class="ocamlStruct"> -</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L384" title="ocaml/lambda/translcore.ml:384">ll</a></span><span class="ocamlStruct">-</span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">off</span><span class="ocamlStruct"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">0</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2378" title="ocaml/lambda/matching.ml:2378">make_switch</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">tbl</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L954" title="ocaml/lambda/switch.ml:954">acts</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2350" title="ocaml/lambda/matching.ml:2350">bind</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">(</span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2345" title="ocaml/lambda/matching.ml:2345">make_offset</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlStruct">-</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L384" title="ocaml/lambda/translcore.ml:384">ll</a></span><span class="ocamlStruct">-</span><span class="ocamlLCIdentifier">ctx</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">off</span><span class="Statement">))<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">(fun</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2378" title="ocaml/lambda/matching.ml:2378">make_switch</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">tbl</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L954" title="ocaml/lambda/switch.ml:954">acts</a></span><span class="Statement">))<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Comment">(* Generate code from a clustering <a href="tmc.ml.html#L573" title="ocaml/lambda/tmc.ml:573">choice</a>. *)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">make_clusters</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="ocamlStruct"> </span><span class="Statement">({</span><span class="ocamlLCIdentifier">cases</span><span class="Statement">=</span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">actions</span><span class="Statement">=</span><span class="ocamlLCIdentifier">actions</span><span class="Statement">}</span><span class="ocamlStruct"> </span><span class="Statement">as</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L563" title="ocaml/lambda/translclass.ml:563">s</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">n_clusters</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L473" title="ocaml/lambda/translprim.ml:473">k</a></span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">len</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">length</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li><a id="L918">&#x200c;</a></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">r</span></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="tmc.ml.html#L190" title="ocaml/lambda/tmc.ml:190">make</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">n_clusters</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="Constant">0</span><span class="ocamlStruct">,</span><span class="Constant">0</span><span class="ocamlStruct">,</span><span class="Constant">0</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Hashtbl</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">create</span><span class="ocamlStruct"> </span><span class="Constant">17<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L270" title="ocaml/lambda/translclass.ml:270">index</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ref</span><span class="ocamlStruct"> </span><span class="Constant">0<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">bidon</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ref</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">length</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">actions</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">get_index</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">try<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct">,</span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Hashtbl</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">find</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Not_found</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L270" title="ocaml/lambda/translclass.ml:270">index</a></span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">incr</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L270" title="ocaml/lambda/translclass.ml:270">index</a></span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">Hashtbl</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L884" title="ocaml/lambda/matching.ml:884">add</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct">,</span><span class="Statement">(fun</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">actions</span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="Statement">)))</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">add_index</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L270" title="ocaml/lambda/translclass.ml:270">index</a></span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">incr</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L270" title="ocaml/lambda/translclass.ml:270">index</a></span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">incr</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">bidon</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="PreProc">Hashtbl</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L884" title="ocaml/lambda/matching.ml:884">add</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span><span class="ocamlStruct"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier">bidon</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><br/></li>
<li><a id="L941">&#x200c;</a><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="Statement">rec</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">zyva</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">j</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ir</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L473" title="ocaml/lambda/translprim.ml:473">k</a></span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">j</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">=</span><span class="ocamlLCIdentifier">j</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier">h</span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlEnd">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a></span><span class="ocamlEnd">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">ir</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">&lt;-</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier">h</span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier">get_index</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else</span><span class="ocamlEnd"> </span><span class="Comment">(* assert <a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a> &lt; j *)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlEnd">,</span><span class="Statement">_</span><span class="ocamlEnd">,</span><span class="Statement">_</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlEnd">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier">h</span><span class="ocamlEnd">,</span><span class="Statement">_</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlEnd">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">j</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a></span><span class="ocamlEnd">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier">ir</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">&lt;-</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier">h</span><span class="ocamlEnd">,</span><span class="ocamlLCIdentifier">add_index</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2378" title="ocaml/lambda/matching.ml:2378">make_switch</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L563" title="ocaml/lambda/translclass.ml:563">s</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">j</span><span class="Statement">))<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">end</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlNone"> </span><span class="Statement">&gt;</span><span class="ocamlNone"> </span><span class="Constant">0</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L941" title="ocaml/lambda/switch.ml:941">zyva</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct">-</span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">ir</span><span class="ocamlStruct">-</span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L941" title="ocaml/lambda/switch.ml:941">zyva</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">len</span><span class="ocamlStruct">-</span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">n_clusters</span><span class="ocamlStruct">-</span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li><a id="L954">&#x200c;</a></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">acts</span></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="tmc.ml.html#L190" title="ocaml/lambda/tmc.ml:190">make</a></span><span class="ocamlStruct"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L270" title="ocaml/lambda/translclass.ml:270">index</a></span><span class="ocamlStruct"> </span><span class="Statement">(fun</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Statement">assert</span><span class="ocamlStruct"> </span><span class="Constant">false</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="PreProc">Hashtbl</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">iter</span><span class="ocamlStruct"> </span><span class="Statement">(fun</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L954" title="ocaml/lambda/switch.ml:954">acts</a></span><span class="ocamlStruct">.</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">&lt;-</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">{</span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2555" title="ocaml/lambda/matching.ml:2555">r</a></span><span class="ocamlStruct"> </span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">actions</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L954" title="ocaml/lambda/switch.ml:954">acts</a></span><span class="Statement">}<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a id="L959">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">do_zyva</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L749" title="ocaml/lambda/switch.ml:749">low</a></span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">high</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">actions</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">old_ok</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L471" title="ocaml/lambda/switch.ml:471">ok_inter</a></span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L471" title="ocaml/lambda/switch.ml:471">ok_inter</a></span><span class="ocamlStruct"> </span><span class="Statement">:=</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">abs</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L749" title="ocaml/lambda/switch.ml:749">low</a></span><span class="ocamlStruct"> </span><span class="Statement">&lt;=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L469" title="ocaml/lambda/switch.ml:469">inter_limit</a></span><span class="ocamlStruct"> </span><span class="Statement">&amp;&amp;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">abs</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">high</span><span class="ocamlStruct"> </span><span class="Statement">&lt;=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L469" title="ocaml/lambda/switch.ml:469">inter_limit</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L471" title="ocaml/lambda/switch.ml:471">ok_inter</a></span><span class="ocamlNone"> </span><span class="Statement">&lt;&gt;</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">old_ok</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlStruct"> </span><span class="PreProc">Hashtbl</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">clear</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L563" title="ocaml/lambda/translclass.ml:563">s</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier">cases</span><span class="Statement">=</span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">actions</span><span class="Statement">=</span><span class="ocamlLCIdentifier">actions</span><span class="Statement">}</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><br/></li>
<li><span class="Comment">(*<br/></li>
<li></span><span class="Comment">&nbsp; Printf.<a href="matching.ml.html#L498" title="ocaml/lambda/matching.ml:498">eprintf</a> &quot;ZYVA: %B [<a href="#L749" title="ocaml/lambda/switch.ml:749">low</a>=%<a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a>,high=%<a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a>]\n&quot; !<a href="#L471" title="ocaml/lambda/switch.ml:471">ok_inter</a> <a href="#L749" title="ocaml/lambda/switch.ml:749">low</a> high ;<br/></li>
<li></span><span class="Comment">&nbsp; pcases stderr cases ;<br/></li>
<li></span><span class="Comment">&nbsp; prerr_endline &quot;&quot; ;<br/></li>
<li></span><span class="Comment">*)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">n_clusters</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L473" title="ocaml/lambda/translprim.ml:473">k</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L857" title="ocaml/lambda/switch.ml:857">comp_clusters</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L563" title="ocaml/lambda/translclass.ml:563">s</a></span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">clusters</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">make_clusters</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L563" title="ocaml/lambda/translclass.ml:563">s</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">n_clusters</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L473" title="ocaml/lambda/translprim.ml:473">k</a></span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier">c_test</span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="Statement">=</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">off</span><span class="Statement">=</span><span class="Constant">0</span><span class="Statement">}</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">clusters<br/></li>
<li></span><br/></li>
<li><a id="L975">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">abstract_shared</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">actions</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">handlers</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ref</span><span class="ocamlStruct"> </span><span class="Statement">(fun</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">x</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">x</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">actions</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(fun</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Statement">match</span><span class="ocamlStruct">&nbsp; </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlStruct"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Single</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Shared</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">h</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2411" title="ocaml/lambda/matching.ml:2411">make_catch</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">oh</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier">handlers</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier">handlers</span><span class="ocamlStruct"> </span><span class="Statement">:=</span><span class="ocamlStruct"> </span><span class="Statement">(fun</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">h</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">oh</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="Statement">))</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="PreProc">Arg</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2413" title="ocaml/lambda/matching.ml:2413">make_exit</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">actions</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">!</span><span class="ocamlLCIdentifier">handlers</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">actions<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Comment">(* Standard entry point. *)<br/></li>
<li><a id="L990">&#x200c;</a></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">zyva</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">lh</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">actions</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">assert</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">length</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Statement">&gt;</span><span class="ocamlStruct"> </span><span class="Constant">0</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">actions</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">actions</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">act_get_shared</span><span class="ocamlStruct"> </span><span class="Constant">()</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">hs</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">actions</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L975" title="ocaml/lambda/switch.ml:975">abstract_shared</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">actions</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier">hs</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L959" title="ocaml/lambda/switch.ml:959">do_zyva</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">lh</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">actions</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Comment">(* Generate code using <a href="matching.ml.html#L2340" title="ocaml/lambda/matching.ml:2340">test</a> sequences only, not Arg.<a href="matching.ml.html#L2378" title="ocaml/lambda/matching.ml:2378">make_switch</a> *)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">test_sequence</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">actions</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">assert</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">length</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Statement">&gt;</span><span class="ocamlStruct"> </span><span class="Constant">0</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">actions</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">actions</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">act_get_shared</span><span class="ocamlStruct"> </span><span class="Constant">()</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">hs</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">actions</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L975" title="ocaml/lambda/switch.ml:975">abstract_shared</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">actions</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">old_ok</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L471" title="ocaml/lambda/switch.ml:471">ok_inter</a></span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L471" title="ocaml/lambda/switch.ml:471">ok_inter</a></span><span class="ocamlStruct"> </span><span class="Statement">:=</span><span class="ocamlStruct"> </span><span class="Constant">false</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L471" title="ocaml/lambda/switch.ml:471">ok_inter</a></span><span class="ocamlNone"> </span><span class="Statement">&lt;&gt;</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">old_ok</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlStruct"> </span><span class="PreProc">Hashtbl</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">clear</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L563" title="ocaml/lambda/translclass.ml:563">s</a></span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">{</span><span class="ocamlLCIdentifier">cases</span><span class="Statement">=</span><span class="ocamlLCIdentifier">cases</span><span class="ocamlStruct"> </span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier">actions</span><span class="Statement">=</span><span class="PreProc">Array</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span><span class="ocamlStruct"> </span><span class="Statement">(fun</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Statement">(fun</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2341" title="ocaml/lambda/matching.ml:2341">act</a></span><span class="Statement">))</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">actions</span><span class="Statement">}</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="Comment">(*<br/></li>
<li></span><span class="Comment">&nbsp; Printf.<a href="matching.ml.html#L498" title="ocaml/lambda/matching.ml:498">eprintf</a> &quot;SEQUENCE: %B\n&quot; !<a href="#L471" title="ocaml/lambda/switch.ml:471">ok_inter</a> ;<br/></li>
<li></span><span class="Comment">&nbsp; pcases stderr cases ;<br/></li>
<li></span><span class="Comment">&nbsp; prerr_endline &quot;&quot; ;<br/></li>
<li></span><span class="Comment">*)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier">hs</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">c_test</span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="Statement">=</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlStruct"> </span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">off</span><span class="Statement">=</span><span class="Constant">0</span><span class="Statement">}</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L563" title="ocaml/lambda/translclass.ml:563">s</a></span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="PreProc">end<br/></li>
</ol></span></code>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="index.html">Top Level</a></span>
 </p>

 </body>
</html>
