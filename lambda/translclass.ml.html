<!-- generated by the vscode.pl tool from vscoded.-->

<html>
 <head>
  <title>ocaml/lambda/translclass.ml - ocaml</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

.nav-bar {
    font-size: 120%;
    margin-top: 5px;
    margin-bottom: 5px;
}

.nav-link {
    padding-left: 5em;
    padding-right: 5em;
}

ul.toc {
    line-height: 200%;
    font-size: 150%;
}

code {
    font-family: consolas, monospace;
    line-height: 130%;
}

span.Constant {
    color: DarkGreen;
}

span.Special {
    color: #c06000;
}

span.Comment {
    color: DarkRed;
    font-style: italic;
}

span.Identifier {
    color: DarkCyan;
}

span.PreProc {
    color: DarkMagenta;
}

span.Statement, span.Type, span.Keyword, span.Repeat, span.Conditional,
    span.Operator, span.Exception
{
    color: DarkBlue;
}

span.Todo {
    color: DarkRed;
    background-color: Gold;
    font-style: italic;
}

span.Underlined {
    text-decoration: underline;
}

span.linkable {
    font-weight: bold;
}

code ol {
    counter-reset: item;
    list-style-type: none;
    margin-left: 0;
    padding-left: 0;
    list-style-position: inside;
}

code li {
    display: block;
}

code li:before {
    content: counter(item) "  ";
    counter-increment: item;
    color: #999;
    padding-right: 0.5em;
    padding-left: 0.4em;
    list-style-position: inside;
    text-align: right
}

  </style>
 </head>
 <body>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="index.html">Top Level</a></span>
 </p>

  <h1>ocaml/lambda/translclass.ml - ocaml</h1>
 <h2>Global variables defined</h2>
 <ul class="toc">
<li><a href="#L275">bind_id_as_val</a></li>
<li><a href="#L229">bind_method</a></li>
<li><a href="#L234">bind_methods</a></li>
<li><a href="#L182">build</a></li>
<li><a href="#L446">build</a></li>
<li><a href="#L277">build_class_init</a></li>
<li><a href="#L408">build_class_lets</a></li>
<li><a href="#L130">build_object_init</a></li>
<li><a href="#L211">build_object_init_0</a></li>
<li><a href="#L596">builtin_meths</a></li>
<li><a href="#L472">check_constraint</a></li>
<li><a href="#L366">cl</a></li>
<li><a href="#L341">cl_init</a></li>
<li><a href="#L761">cla</a></li>
<li><a href="#L360">concr_meths</a></li>
<li><a href="#L393">core</a></li>
<li><a href="#L582">enter</a></li>
<li><a href="#L744">env1</a></li>
<li><a href="#L221">envs</a></li>
<li><a href="#L655">free_methods</a></li>
<li><a href="#L710">fv</a></li>
<li><a href="#L417">get_class_meths</a></li>
<li><a href="#L713">i</a></li>
<li><a href="#L264">ignore_cstrs</a></li>
<li><a href="#L270">index</a></li>
<li><a href="#L370">inh</a></li>
<li><a href="#L108">inh_init</a></li>
<li><a href="#L197">inh_init</a></li>
<li><a href="#L202">inh_init</a></li>
<li><a href="#L344">inh_init</a></li>
<li><a href="#L352">inh_init</a></li>
<li><a href="#L398">inh_init</a></li>
<li><a href="#L762">inh_init</a></li>
<li><a href="#L764">inh_init'</a></li>
<li><a href="#L765">inh_init'</a></li>
<li><a href="#L46">lapply</a></li>
<li><a href="#L918">lcheck_cache</a></li>
<li><a href="#L840">lenv</a></li>
<li><a href="#L66">lfield</a></li>
<li><a href="#L30">lfunction</a></li>
<li><a href="#L850">linh_envs</a></li>
<li><a href="#L63">lsequence</a></li>
<li><a href="#L856">make_envs</a></li>
<li><a href="#L53">mkappl</a></li>
<li><a href="#L721">msubst</a></li>
<li><a href="#L124">name_pattern</a></li>
<li><a href="#L361">narrow_args</a></li>
<li><a href="#L743">new_ids_init</a></li>
<li><a href="#L719">new_ids_meths</a></li>
<li><a href="#L720">no_env_update</a></li>
<li><a href="#L224">obj_init</a></li>
<li><a href="#L253">output_methods</a></li>
<li><a href="#L444">path</a></li>
<li><a href="#L461">path</a></li>
<li><a href="#L465">path</a></li>
<li><a href="#L470">path</a></li>
<li><a href="#L563">s</a></li>
<li><a href="#L565">s</a></li>
<li><a href="#L568">s</a></li>
<li><a href="#L571">s</a></li>
<li><a href="#L576">s</a></li>
<li><a href="#L579">s</a></li>
<li><a href="#L592">s</a></li>
<li><a href="#L769">table</a></li>
<li><a href="#L683">transl_class</a></li>
<li><a href="#L950">transl_class</a></li>
<li><a href="#L433">transl_class_rebind</a></li>
<li><a href="#L494">transl_class_rebind</a></li>
<li><a href="#L482">transl_class_rebind_0</a></li>
<li><a href="#L69">transl_label</a></li>
<li><a href="#L71">transl_meth_list</a></li>
<li><a href="#L347">vals</a></li>
<li><a href="#L355">vals</a></li>
<li><a href="#L358">virt_meths</a></li>
</ul>
 <h2>Data types defined</h2>
 <ul class="toc">
<li><a href="#L26">error</a></li>
</ul>
 <h2>Source code</h2>

  <code><ol><li><span class="Comment">(**************************************************************************)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; OCaml&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Jerome Vouillon, projet Cristal, INRIA Rocquencourt&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; Copyright 1996 Institut National de Recherche en Informatique et&nbsp; &nbsp;&nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp;&nbsp; en Automatique.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; All rights reserved.&nbsp; This file is distributed under the terms of&nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; the GNU Lesser General Public License version 2.1, with the&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; special exception on linking described in the file LICENSE.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(**************************************************************************)<br/></li>
<li></span><br/></li>
<li><span class="Statement"><a href="matching.ml.html#L419" title="ocaml/lambda/matching.ml:419">open</a></span><span class="ocamlNone"> </span><span class="PreProc">Asttypes<br/></li>
<li></span><span class="Statement"><a href="matching.ml.html#L419" title="ocaml/lambda/matching.ml:419">open</a></span><span class="ocamlNone"> </span><span class="PreProc">Types<br/></li>
<li></span><span class="Statement"><a href="matching.ml.html#L419" title="ocaml/lambda/matching.ml:419">open</a></span><span class="ocamlNone"> </span><span class="PreProc">Typedtree<br/></li>
<li></span><span class="Statement"><a href="matching.ml.html#L419" title="ocaml/lambda/matching.ml:419">open</a></span><span class="ocamlNone"> </span><span class="PreProc">Lambda<br/></li>
<li></span><span class="Statement"><a href="matching.ml.html#L419" title="ocaml/lambda/matching.ml:419">open</a></span><span class="ocamlNone"> </span><span class="PreProc">Translobj<br/></li>
<li></span><span class="Statement"><a href="matching.ml.html#L419" title="ocaml/lambda/matching.ml:419">open</a></span><span class="ocamlNone"> </span><span class="PreProc">Translcore<br/></li>
<li></span><span class="Statement"><a href="matching.ml.html#L419" title="ocaml/lambda/matching.ml:419">open</a></span><span class="ocamlNone"> </span><span class="PreProc">Debuginfo.Scoped_location<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* </span><span class="Todo">XXX</span><span class="Comment"> Rajouter des evenements... | Add more events... *)<br/></li>
<li></span><br/></li>
<li><a id="L26">&#x200c;</a><span class="Statement">type</span> <span class="ocamlLCIdentifier"><span class="linkable">error</span></span> <span class="Statement">=</span> <span class="Constant">Tags</span> <span class="Statement">of</span> <span class="ocamlLCIdentifier">label</span> <span class="Statement">*</span> <span class="ocamlLCIdentifier">label<br/></li>
<li></span><br/></li>
<li><span class="Statement">exception</span> <span class="Constant">Error</span> <span class="Statement">of</span> <span class="PreProc">Location</span>.<span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span> <span class="Statement">*</span> <span class="ocamlLCIdentifier"><a href="translprim.mli.html#L46" title="ocaml/lambda/translprim.mli:46">error</a><br/></li>
<li></span><br/></li>
<li><a id="L30">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">lfunction</span></span> <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">[]</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span> <span class="Statement">else<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Lfunction</span> <span class="Statement">{</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span> <span class="Statement">=</span> <span class="Constant">Curried</span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span>'<span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span>'<span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L760" title="ocaml/lambda/simplif.ml:760">attr</a></span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">}<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">when</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">length</span> <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span> + <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">length</span> <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span>' <span class="Statement">&lt;=</span> <span class="PreProc">Lambda</span>.<span class="ocamlLCIdentifier"><a href="lambda.mli.html#L458" title="ocaml/lambda/lambda.mli:458">max_arity</a></span><span class="Constant">()</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L30" title="ocaml/lambda/translclass.ml:30">lfunction</a></span> <span class="Statement">~</span><span class="Identifier"><a href="translcore.ml.html#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span>:<span class="Constant">Curried</span> <span class="Statement">~</span><span class="Identifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span>:<span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span> @ <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span>'<span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier">return</span>:<span class="Constant">Pgenval<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span>:<span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span>'<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier"><a href="simplif.ml.html#L760" title="ocaml/lambda/simplif.ml:760">attr</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier"><a href="translcore.ml.html#L62" title="ocaml/lambda/translcore.ml:62">loc</a><br/></li>
<li></span>&nbsp; <span class="Statement">|</span>&nbsp; <span class="Statement">_</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L30" title="ocaml/lambda/translclass.ml:30">lfunction</a></span> <span class="Statement">~</span><span class="Identifier"><a href="translcore.ml.html#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span>:<span class="Constant">Curried</span> <span class="Statement">~</span><span class="Identifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span> <span class="Statement">~</span><span class="Identifier">return</span>:<span class="Constant">Pgenval<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier"><a href="simplif.ml.html#L760" title="ocaml/lambda/simplif.ml:760">attr</a></span>:<span class="ocamlLCIdentifier"><a href="lambda.mli.html#L451" title="ocaml/lambda/lambda.mli:451">default_function_attribute</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier"><a href="translcore.ml.html#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span>:<span class="Constant">Loc_unknown<br/></li>
<li></span><br/></li>
<li><a id="L46">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">lapply</span></span> <span class="ocamlLCIdentifier">ap</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">ap</span>.<span class="ocamlLCIdentifier">ap_func</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Lapply</span> <span class="ocamlLCIdentifier">ap</span>' <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Lapply</span> <span class="Statement">{</span><span class="ocamlLCIdentifier">ap</span> <span class="Statement">with</span> <span class="ocamlLCIdentifier">ap_func</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">ap</span>'.<span class="ocamlLCIdentifier">ap_func</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">ap_args</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">ap</span>'.<span class="ocamlLCIdentifier">ap_args</span> @ <span class="ocamlLCIdentifier">ap</span>.<span class="ocamlLCIdentifier">ap_args</span><span class="Statement">}<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Lapply</span> <span class="ocamlLCIdentifier">ap<br/></li>
<li></span><br/></li>
<li><a id="L53">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">mkappl</span></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L1163" title="ocaml/lambda/translcore.ml:1163">func</a></span>, <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span><span class="Statement">)</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Constant">Lapply</span> <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_loc</span><span class="Statement">=</span><span class="Constant">Loc_unknown</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_func</span><span class="Statement">=</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L1163" title="ocaml/lambda/translcore.ml:1163">func</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_args</span><span class="Statement">=</span><span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_tailcall</span><span class="Statement">=</span><span class="Constant">Default_tailcall</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_inlined</span><span class="Statement">=</span><span class="Constant">Default_inline</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_specialised</span><span class="Statement">=</span><span class="Constant">Default_specialise</span><span class="Statement">;<br/></li>
<li></span>&nbsp; <span class="Statement">}<br/></li>
<li></span><br/></li>
<li><a id="L63">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">lsequence</span></span> <span class="ocamlLCIdentifier">l1</span> <span class="ocamlLCIdentifier">l2</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">l2</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="lambda.mli.html#L366" title="ocaml/lambda/lambda.mli:366">lambda_unit</a></span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier">l1</span> <span class="Statement">else</span> <span class="Constant">Lsequence</span><span class="Statement">(</span><span class="ocamlLCIdentifier">l1</span>, <span class="ocamlLCIdentifier">l2</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><a id="L66">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">lfield</span></span> <span class="ocamlLCIdentifier">v</span> <span class="ocamlLCIdentifier"><a href="#L713" title="ocaml/lambda/translclass.ml:713">i</a></span> <span class="Statement">=</span> <span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pfield</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L713" title="ocaml/lambda/translclass.ml:713">i</a></span>, <span class="Constant">Pointer</span>, <span class="Constant">Mutable</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">v</span><span class="Statement">]</span>, <span class="Constant">Loc_unknown</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><a id="L69">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">transl_label</span></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L27" title="ocaml/lambda/translobj.ml:27">share</a></span> <span class="Statement">(</span><span class="Constant">Const_immstring</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><a id="L71">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">transl_meth_list</span></span> <span class="ocamlLCIdentifier">lst</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">lst</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">[]</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="Constant">Lconst</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="lambda.mli.html#L365" title="ocaml/lambda/lambda.mli:365">const_int</a></span> <span class="Constant">0</span><span class="Statement">)</span> <span class="Statement">else<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L27" title="ocaml/lambda/translobj.ml:27">share</a></span> <span class="Statement">(</span><span class="Constant">Const_block<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">0</span>, <span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="Statement">(fun</span> <span class="ocamlLCIdentifier">lab</span> <span class="Statement">-&gt;</span> <span class="Constant">Const_immstring</span> <span class="ocamlLCIdentifier">lab</span><span class="Statement">)</span> <span class="ocamlLCIdentifier">lst</span><span class="Statement">))<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="ocamlLCIdentifier">set_inst_var</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">obj</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="ocamlLCIdentifier">expr</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Psetfield_computed</span> <span class="Statement">(</span><span class="PreProc">Typeopt</span>.<span class="ocamlLCIdentifier">maybe_pointer</span> <span class="ocamlLCIdentifier">expr</span>, <span class="Constant">Assignment</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">obj</span><span class="Statement">;</span> <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">expr</span><span class="Statement">]</span>, <span class="Constant">Loc_unknown</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="ocamlLCIdentifier">transl_val</span> <span class="ocamlLCIdentifier">tbl</span> <span class="ocamlLCIdentifier">create</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L56" title="ocaml/lambda/translcore.ml:56">name</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L21" title="ocaml/lambda/translobj.ml:21">oo_prim</a></span> <span class="Statement">(if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">create</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="Constant">&quot;new_variable&quot;</span> <span class="Statement">else</span> <span class="Constant">&quot;get_variable&quot;</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">tbl</span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="#L69" title="ocaml/lambda/translclass.ml:69">transl_label</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L56" title="ocaml/lambda/translcore.ml:56">name</a></span><span class="Statement">])<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="ocamlLCIdentifier">transl_vals</span> <span class="ocamlLCIdentifier">tbl</span> <span class="ocamlLCIdentifier">create</span> <span class="ocamlLCIdentifier">strict</span> <span class="ocamlLCIdentifier"><a href="#L347" title="ocaml/lambda/translclass.ml:347">vals</a></span> <span class="ocamlLCIdentifier">rem</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">fold_right<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(fun</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L56" title="ocaml/lambda/translcore.ml:56">name</a></span>, <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier">rem</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Llet</span><span class="Statement">(</span><span class="ocamlLCIdentifier">strict</span>, <span class="Constant">Pgenval</span>, <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="ocamlLCIdentifier">transl_val</span> <span class="ocamlLCIdentifier">tbl</span> <span class="ocamlLCIdentifier">create</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L56" title="ocaml/lambda/translcore.ml:56">name</a></span>, <span class="ocamlLCIdentifier">rem</span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L347" title="ocaml/lambda/translclass.ml:347">vals</a></span> <span class="ocamlLCIdentifier">rem<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="ocamlLCIdentifier">meths_super</span> <span class="ocamlLCIdentifier">tbl</span> <span class="ocamlLCIdentifier">meths</span> <span class="ocamlLCIdentifier">inh_meths</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">fold_right<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(fun</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">nm</span>, <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier">rem</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">try<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier">nm</span>, <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L21" title="ocaml/lambda/translobj.ml:21">oo_prim</a></span> <span class="Constant">&quot;get_method&quot;</span>, <span class="Statement">[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">tbl</span><span class="Statement">;</span> <span class="Constant">Lvar</span> <span class="Statement">(</span><span class="PreProc">Meths</span>.<span class="ocamlLCIdentifier">find</span> <span class="ocamlLCIdentifier">nm</span> <span class="ocamlLCIdentifier">meths</span><span class="Statement">)]))<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">::</span> <span class="ocamlLCIdentifier">rem<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">with</span> <span class="Constant">Not_found</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">rem</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier">inh_meths</span> <span class="Constant">[]<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="ocamlLCIdentifier">bind_super</span> <span class="ocamlLCIdentifier">tbl</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L347" title="ocaml/lambda/translclass.ml:347">vals</a></span>, <span class="ocamlLCIdentifier">meths</span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier">transl_vals</span> <span class="ocamlLCIdentifier">tbl</span> <span class="Constant">false</span> <span class="Constant">StrictOpt</span> <span class="ocamlLCIdentifier"><a href="#L347" title="ocaml/lambda/translclass.ml:347">vals</a><br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(</span><span class="PreProc">List</span>.<span class="ocamlLCIdentifier">fold_right</span> <span class="Statement">(fun</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">_nm</span>, <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="ocamlLCIdentifier">def</span><span class="Statement">)</span> <span class="ocamlLCIdentifier">rem</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">StrictOpt</span>, <span class="Constant">Pgenval</span>, <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="ocamlLCIdentifier">def</span>, <span class="ocamlLCIdentifier">rem</span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">meths</span> <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="ocamlLCIdentifier">create_object</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="ocamlLCIdentifier">obj</span> <span class="ocamlLCIdentifier">init</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">obj</span>' <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;<a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a>&quot;</span> <span class="Statement">in<br/></li>
<li><a id="L108">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><span class="linkable">inh_init</span></span>, <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span>, <span class="ocamlLCIdentifier">has_init</span><span class="Statement">)</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">init</span> <span class="ocamlLCIdentifier">obj</span>' <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="lambda.mli.html#L366" title="ocaml/lambda/lambda.mli:366">lambda_unit</a></span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>,<br/></li>
<li>&nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L21" title="ocaml/lambda/translobj.ml:21">oo_prim</a></span> <span class="Statement">(if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">has_init</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="Constant">&quot;create_object_and_run_initializers&quot;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else</span><span class="Constant">&quot;create_object_opt&quot;</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">[</span><span class="ocamlLCIdentifier">obj</span><span class="Statement">;</span> <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span><span class="Statement">]))<br/></li>
<li></span>&nbsp; <span class="Statement">else</span> <span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp;&nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">Strict</span><span class="ocamlEnd">, </span><span class="Constant">Pgenval</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">obj</span><span class="ocamlEnd">',<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L21" title="ocaml/lambda/translobj.ml:21">oo_prim</a></span><span class="ocamlEnd"> </span><span class="Constant">&quot;create_object_opt&quot;</span><span class="ocamlEnd">, </span><span class="Statement">[</span><span class="ocamlLCIdentifier">obj</span><span class="Statement">;</span><span class="ocamlEnd"> </span><span class="Constant">Lvar</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span><span class="Statement">])</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">Lsequence</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="Statement">not</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">has_init</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlEnd"> </span><span class="Constant">Lvar</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">obj</span><span class="ocamlEnd">' </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L21" title="ocaml/lambda/translobj.ml:21">oo_prim</a></span><span class="ocamlEnd"> </span><span class="Constant">&quot;run_initializers_opt&quot;</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">[</span><span class="ocamlLCIdentifier">obj</span><span class="Statement">;</span><span class="ocamlEnd"> </span><span class="Constant">Lvar</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">obj</span><span class="ocamlEnd">'</span><span class="Statement">;</span><span class="ocamlEnd"> </span><span class="Constant">Lvar</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span><span class="Statement">]))))<br/></li>
<li></span><span class="ocamlEnd">&nbsp; </span><span class="Statement">end<br/></li>
<li></span><br/></li>
<li><a id="L124">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">name_pattern</span></span> <span class="ocamlLCIdentifier">default</span> <span class="ocamlLCIdentifier">p</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">p</span>.<span class="ocamlLCIdentifier">pat_desc</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tpat_var</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="Statement">_)</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a><br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tpat_alias</span><span class="Statement">(_</span>, <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="Statement">_)</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a><br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="ocamlLCIdentifier">default<br/></li>
<li></span><br/></li>
<li><a id="L130">&#x200c;</a><span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier"><span class="linkable">build_object_init</span></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">cl_table</span> <span class="ocamlLCIdentifier">obj</span> <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span> <span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>.<span class="ocamlLCIdentifier">cl_desc</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Tcl_ident</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L444" title="ocaml/lambda/translclass.ml:444">path</a></span>, <span class="Statement">_</span>, <span class="Statement">_)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;<a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a>&quot;</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L221" title="ocaml/lambda/translclass.ml:221">envs</a></span>, <span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">env</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L221" title="ocaml/lambda/translclass.ml:221">envs</a></span> <span class="Statement">with</span> <span class="Constant">None</span> <span class="Statement">-&gt;</span> <span class="Constant">[]<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Some</span> <span class="ocamlLCIdentifier"><a href="#L221" title="ocaml/lambda/translclass.ml:221">envs</a></span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">[</span><span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pfield</span> <span class="Statement">(</span><span class="PreProc">List</span>.<span class="ocamlLCIdentifier">length</span> <span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span> + <span class="Constant">1</span>, <span class="Constant">Pointer</span>, <span class="Constant">Mutable</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L221" title="ocaml/lambda/translclass.ml:221">envs</a></span><span class="Statement">]</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">Loc_unknown</span><span class="Statement">)]<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>.<span class="ocamlLCIdentifier">cl_loc</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">path_lam</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L406" title="ocaml/lambda/lambda.mli:406">transl_class_path</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>.<span class="ocamlLCIdentifier">cl_env</span> <span class="ocamlLCIdentifier"><a href="#L444" title="ocaml/lambda/translclass.ml:444">path</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">((</span><span class="ocamlLCIdentifier"><a href="#L221" title="ocaml/lambda/translclass.ml:221">envs</a></span>, <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L444" title="ocaml/lambda/translclass.ml:444">path</a></span>, <span class="ocamlLCIdentifier">path_lam</span>, <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span><span class="Statement">)</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span><span class="Statement">(</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span>, <span class="ocamlLCIdentifier">env</span> @ <span class="Statement">[</span><span class="ocamlLCIdentifier">obj</span><span class="Statement">]))<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tcl_structure</span> <span class="ocamlLCIdentifier">str</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">create_object</span> <span class="ocamlLCIdentifier">cl_table</span> <span class="ocamlLCIdentifier">obj</span> <span class="Statement">(fun</span> <span class="ocamlLCIdentifier">obj</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>, <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span>, <span class="ocamlLCIdentifier">has_init</span><span class="Statement">)</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">fold_right<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(fun</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L1095" title="ocaml/lambda/translmod.ml:1095">field</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>, <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span>, <span class="ocamlLCIdentifier">has_init</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L1095" title="ocaml/lambda/translmod.ml:1095">field</a></span>.<span class="ocamlLCIdentifier">cf_desc</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">Tcf_inherit</span> <span class="Statement">(_</span>, <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>, <span class="Statement">_</span>, <span class="Statement">_</span>, <span class="Statement">_)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>, <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span>'<span class="Statement">)</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L130" title="ocaml/lambda/translclass.ml:130">build_object_init</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">cl_table</span> <span class="Statement">(</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">obj</span><span class="Statement">)</span> <span class="Constant">[]</span> <span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(fun</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L366" title="ocaml/lambda/lambda.mli:366">lambda_unit</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>, <span class="ocamlLCIdentifier"><a href="#L63" title="ocaml/lambda/translclass.ml:63">lsequence</a></span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span>' <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span>, <span class="Constant">true</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">|</span> <span class="Constant">Tcf_val</span> <span class="Statement">(_</span>, <span class="Statement">_</span>, <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="Constant">Tcfk_concrete</span> <span class="Statement">(_</span>, <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span><span class="Statement">)</span>, <span class="Statement">_)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L63" title="ocaml/lambda/translclass.ml:63">lsequence</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier">set_inst_var</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">obj</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">has_init</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">|</span> <span class="Constant">Tcf_method</span> <span class="Statement">_</span> <span class="Statement">|</span> <span class="Constant">Tcf_val</span> <span class="Statement">_</span> <span class="Statement">|</span> <span class="Constant">Tcf_constraint</span> <span class="Statement">_</span> <span class="Statement">|</span> <span class="Constant">Tcf_attribute</span> <span class="Statement">_-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>, <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span>, <span class="ocamlLCIdentifier">has_init</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">|</span> <span class="Constant">Tcf_initializer</span> <span class="Statement">_</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>, <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span>, <span class="Constant">true</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">str</span>.<span class="ocamlLCIdentifier">cstr_fields<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>, <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="ocamlLCIdentifier">obj</span>, <span class="Constant">false</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">fold_right<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(fun</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="ocamlLCIdentifier">expr</span><span class="Statement">)</span> <span class="ocamlLCIdentifier">rem</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L63" title="ocaml/lambda/translclass.ml:63">lsequence</a></span> <span class="Statement">(</span><span class="Constant">Lifused</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="ocamlLCIdentifier">set_inst_var</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">obj</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="ocamlLCIdentifier">expr</span><span class="Statement">))</span> <span class="ocamlLCIdentifier">rem</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">has_init</span><span class="Statement">))<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tcl_fun</span> <span class="Statement">(_</span>, <span class="ocamlLCIdentifier">pat</span>, <span class="ocamlLCIdentifier"><a href="#L347" title="ocaml/lambda/translclass.ml:347">vals</a></span>, <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>, <span class="ocamlLCIdentifier">partial</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>, <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span><span class="Statement">)</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L130" title="ocaml/lambda/translclass.ml:130">build_object_init</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">cl_table</span> <span class="ocamlLCIdentifier">obj</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L347" title="ocaml/lambda/translclass.ml:347">vals</a></span> @ <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>,<br/></li>
<li><a id="L182">&#x200c;</a>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">build</span></span> <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span> <span class="ocamlLCIdentifier">rem</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">param</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L124" title="ocaml/lambda/translclass.ml:124">name_pattern</a></span> <span class="Constant">&quot;param&quot;</span> <span class="ocamlLCIdentifier">pat</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="PreProc">Lambda</span>.<span class="ocamlLCIdentifier"><a href="#L30" title="ocaml/lambda/translclass.ml:30">lfunction</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">~</span><span class="Identifier"><a href="translcore.ml.html#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span>:<span class="Constant">Curried</span> <span class="Statement">~</span><span class="Identifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span>:<span class="Statement">((</span><span class="ocamlLCIdentifier">param</span>, <span class="Constant">Pgenval</span><span class="Statement">)::</span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">~</span><span class="Identifier">return</span>:<span class="Constant">Pgenval<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">~</span><span class="Identifier"><a href="simplif.ml.html#L760" title="ocaml/lambda/simplif.ml:760">attr</a></span>:<span class="ocamlLCIdentifier"><a href="lambda.mli.html#L451" title="ocaml/lambda/lambda.mli:451">default_function_attribute</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">~</span><span class="Identifier"><a href="translcore.ml.html#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span>:<span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">pat</span>.<span class="ocamlLCIdentifier">pat_loc</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">~</span><span class="Identifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span>:<span class="Statement">(</span><span class="PreProc">Matching</span>.<span class="ocamlLCIdentifier"><a href="matching.mli.html#L23" title="ocaml/lambda/matching.mli:23">for_function</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">pat</span>.<span class="ocamlLCIdentifier">pat_loc<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">None</span> <span class="Statement">(</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">param</span><span class="Statement">)</span> <span class="Statement">[</span><span class="ocamlLCIdentifier">pat</span>, <span class="ocamlLCIdentifier">rem</span><span class="Statement">]</span> <span class="ocamlLCIdentifier">partial</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">Lfunction</span><span class="ocamlEnd"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="Constant">Curried</span><span class="Statement">;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span><span class="Statement">;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">rem</span><span class="Statement">}</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L182" title="ocaml/lambda/translclass.ml:182">build</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">rem<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">rem</span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L182" title="ocaml/lambda/translclass.ml:182">build</a></span><span class="ocamlEnd"> </span><span class="Constant">[]</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">rem<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">end)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tcl_apply</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>, <span class="ocamlLCIdentifier">oexprs</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L197">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><span class="linkable">inh_init</span></span>, <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span><span class="Statement">)</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L130" title="ocaml/lambda/translclass.ml:130">build_object_init</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">cl_table</span> <span class="ocamlLCIdentifier">obj</span> <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span> <span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>, <span class="ocamlLCIdentifier"><a href="translcore.mli.html#L27" title="ocaml/lambda/translcore.mli:27">transl_apply</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="ocamlLCIdentifier">oexprs</span> <span class="Constant">Loc_unknown</span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tcl_let</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">rec_flag</span>, <span class="ocamlLCIdentifier">defs</span>, <span class="ocamlLCIdentifier"><a href="#L347" title="ocaml/lambda/translclass.ml:347">vals</a></span>, <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L202">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><span class="linkable">inh_init</span></span>, <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span><span class="Statement">)</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L130" title="ocaml/lambda/translclass.ml:130">build_object_init</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">cl_table</span> <span class="ocamlLCIdentifier">obj</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L347" title="ocaml/lambda/translclass.ml:347">vals</a></span> @ <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>, <span class="PreProc">Translcore</span>.<span class="ocamlLCIdentifier"><a href="translcore.mli.html#L33" title="ocaml/lambda/translcore.mli:33">transl_let</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">rec_flag</span> <span class="ocamlLCIdentifier">defs</span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tcl_open</span> <span class="Statement">(_</span>, <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tcl_constraint</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>, <span class="Statement">_</span>, <span class="Statement">_</span>, <span class="Statement">_</span>, <span class="Statement">_)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L130" title="ocaml/lambda/translclass.ml:130">build_object_init</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">cl_table</span> <span class="ocamlLCIdentifier">obj</span> <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span> <span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a><br/></li>
<li></span><br/></li>
<li><a id="L211">&#x200c;</a><span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier"><span class="linkable">build_object_init_0</span><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">cl_table</span> <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="ocamlLCIdentifier">copy_env</span> <span class="ocamlLCIdentifier">subst_env</span> <span class="ocamlLCIdentifier">top</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>.<span class="ocamlLCIdentifier">cl_desc</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Tcl_let</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">_rec_flag</span>, <span class="ocamlLCIdentifier">_defs</span>, <span class="ocamlLCIdentifier"><a href="#L347" title="ocaml/lambda/translclass.ml:347">vals</a></span>, <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L211" title="ocaml/lambda/translclass.ml:211">build_object_init_0</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">cl_table</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L347" title="ocaml/lambda/translclass.ml:347">vals</a></span>@<span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="ocamlLCIdentifier">copy_env</span> <span class="ocamlLCIdentifier">subst_env</span> <span class="ocamlLCIdentifier">top</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a><br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;<a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a>&quot;</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">env</span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;env&quot;</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">obj</span> <span class="Statement">=</span> <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a></span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">[]</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L366" title="ocaml/lambda/lambda.mli:366">lambda_unit</a></span> <span class="Statement">else</span> <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span> <span class="Statement">in<br/></li>
<li><a id="L221">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">envs</span></span> <span class="Statement">=</span> <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">top</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="Constant">None</span> <span class="Statement">else</span> <span class="Constant">Some</span> <span class="ocamlLCIdentifier">env</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="Statement">((_</span>,<span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span><span class="Statement">)</span>, <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span><span class="Statement">)</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L130" title="ocaml/lambda/translclass.ml:130">build_object_init</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">cl_table</span> <span class="ocamlLCIdentifier">obj</span> <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L221" title="ocaml/lambda/translclass.ml:221">envs</a></span>,<span class="Constant">[]</span><span class="Statement">)</span> <span class="ocamlLCIdentifier">copy_env</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="Statement">in<br/></li>
<li><a id="L224">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">obj_init</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a></span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">[]</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="Statement">else</span> <span class="ocamlLCIdentifier"><a href="#L30" title="ocaml/lambda/translclass.ml:30">lfunction</a></span> <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span>, <span class="Constant">Pgenval</span><span class="Statement">]</span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>, <span class="ocamlLCIdentifier"><a href="#L30" title="ocaml/lambda/translclass.ml:30">lfunction</a></span> <span class="Statement">[</span><span class="ocamlLCIdentifier">env</span>, <span class="Constant">Pgenval</span><span class="Statement">]</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">subst_env</span> <span class="ocamlLCIdentifier">env</span> <span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span><span class="Statement">))<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a id="L229">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">bind_method</span></span> <span class="ocamlLCIdentifier">tbl</span> <span class="ocamlLCIdentifier">lab</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">Strict</span>, <span class="Constant">Pgenval</span>, <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L21" title="ocaml/lambda/translobj.ml:21">oo_prim</a></span> <span class="Constant">&quot;get_method_label&quot;</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">tbl</span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="#L69" title="ocaml/lambda/translclass.ml:69">transl_label</a></span> <span class="ocamlLCIdentifier">lab</span><span class="Statement">])</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><a id="L234">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">bind_methods</span></span> <span class="ocamlLCIdentifier">tbl</span> <span class="ocamlLCIdentifier">meths</span> <span class="ocamlLCIdentifier"><a href="#L347" title="ocaml/lambda/translclass.ml:347">vals</a></span> <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">methl</span> <span class="Statement">=</span> <span class="PreProc">Meths</span>.<span class="ocamlLCIdentifier">fold</span> <span class="Statement">(fun</span> <span class="ocamlLCIdentifier">lab</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="ocamlLCIdentifier">tl</span> <span class="Statement">-&gt;</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">lab</span>,<span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span><span class="Statement">)</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier">tl</span><span class="Statement">)</span> <span class="ocamlLCIdentifier">meths</span> <span class="Constant">[]</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">len</span> <span class="Statement">=</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">length</span> <span class="ocamlLCIdentifier">methl</span> <span class="Statement">and</span> <span class="ocamlLCIdentifier">nvals</span> <span class="Statement">=</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">length</span> <span class="ocamlLCIdentifier"><a href="#L347" title="ocaml/lambda/translclass.ml:347">vals</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">len</span><span class="ocamlNone"> </span><span class="Statement">&lt;</span><span class="ocamlNone"> </span><span class="Constant">2</span><span class="ocamlNone"> </span><span class="Statement">&amp;&amp;</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">nvals</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">0</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="PreProc">Meths</span>.<span class="ocamlLCIdentifier">fold</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L229" title="ocaml/lambda/translclass.ml:229">bind_method</a></span> <span class="ocamlLCIdentifier">tbl</span><span class="Statement">)</span> <span class="ocamlLCIdentifier">meths</span> <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span> <span class="Statement">else<br/></li>
<li></span>&nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">len</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">0</span><span class="ocamlNone"> </span><span class="Statement">&amp;&amp;</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">nvals</span><span class="ocamlNone"> </span><span class="Statement">&lt;</span><span class="ocamlNone"> </span><span class="Constant">2</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier">transl_vals</span> <span class="ocamlLCIdentifier">tbl</span> <span class="Constant">true</span> <span class="Constant">Strict</span> <span class="ocamlLCIdentifier"><a href="#L347" title="ocaml/lambda/translclass.ml:347">vals</a></span> <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span> <span class="Statement">else<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a></span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;<a href="translcore.ml.html#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a>&quot;</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L713" title="ocaml/lambda/translclass.ml:713">i</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">ref</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">len</span> + <span class="ocamlLCIdentifier">nvals</span><span class="Statement">)</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">getter</span>, <span class="ocamlLCIdentifier">names</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">nvals</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">0</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="Constant">&quot;get_method_labels&quot;</span>, <span class="Constant">[]</span> <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">&quot;new_methods_variables&quot;</span>, <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L71" title="ocaml/lambda/translclass.ml:71">transl_meth_list</a></span> <span class="Statement">(</span><span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="ocamlLCIdentifier">fst</span> <span class="ocamlLCIdentifier"><a href="#L347" title="ocaml/lambda/translclass.ml:347">vals</a></span><span class="Statement">)]<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">Strict</span>, <span class="Constant">Pgenval</span>, <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a></span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L21" title="ocaml/lambda/translobj.ml:21">oo_prim</a></span> <span class="ocamlLCIdentifier">getter</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">tbl</span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="#L71" title="ocaml/lambda/translclass.ml:71">transl_meth_list</a></span> <span class="Statement">(</span><span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="ocamlLCIdentifier">fst</span> <span class="ocamlLCIdentifier">methl</span><span class="Statement">)]</span> @ <span class="ocamlLCIdentifier">names</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">fold_right<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(fun</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">_lab</span>,<span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">decr</span> <span class="ocamlLCIdentifier"><a href="#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">;</span> <span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">StrictOpt</span>, <span class="Constant">Pgenval</span>, <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L66" title="ocaml/lambda/translclass.ml:66">lfield</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a></span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L713" title="ocaml/lambda/translclass.ml:713">i</a></span>, <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier">methl</span> @ <span class="ocamlLCIdentifier"><a href="#L347" title="ocaml/lambda/translclass.ml:347">vals</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><a id="L253">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">output_methods</span></span> <span class="ocamlLCIdentifier">tbl</span> <span class="ocamlLCIdentifier">methods</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">methods</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">[]</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a><br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">[</span><span class="ocamlLCIdentifier">lab</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">code</span><span class="Statement">]</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L63" title="ocaml/lambda/translclass.ml:63">lsequence</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L21" title="ocaml/lambda/translobj.ml:21">oo_prim</a></span> <span class="Constant">&quot;set_method&quot;</span>, <span class="Statement">[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">tbl</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">lab</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">code</span><span class="Statement">]))</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a><br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L63" title="ocaml/lambda/translclass.ml:63">lsequence</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L21" title="ocaml/lambda/translobj.ml:21">oo_prim</a></span> <span class="Constant">&quot;set_methods&quot;</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">tbl</span><span class="Statement">;</span> <span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pmakeblock</span><span class="Statement">(</span><span class="Constant">0</span>,<span class="Constant">Immutable</span>,<span class="Constant">None</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">methods</span>, <span class="Constant">Loc_unknown</span><span class="Statement">)]))<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a><br/></li>
<li></span><br/></li>
<li><a id="L264">&#x200c;</a><span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier"><span class="linkable">ignore_cstrs</span></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>.<span class="ocamlLCIdentifier">cl_desc</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Tcl_constraint</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>, <span class="Statement">_</span>, <span class="Statement">_</span>, <span class="Statement">_</span>, <span class="Statement">_)</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="#L264" title="ocaml/lambda/translclass.ml:264">ignore_cstrs</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a><br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tcl_apply</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>, <span class="Statement">_)</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="#L264" title="ocaml/lambda/translclass.ml:264">ignore_cstrs</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a><br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a><br/></li>
<li></span><br/></li>
<li><a id="L270">&#x200c;</a><span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier"><span class="linkable">index</span></span> <span class="ocamlLCIdentifier">a</span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">[]</span> <span class="Statement">-&gt;</span> <span class="Statement">raise</span> <span class="Constant">Not_found<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="ocamlLCIdentifier">b</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">b</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">a</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="Constant">0</span> <span class="Statement">else</span> <span class="Constant">1</span> + <span class="ocamlLCIdentifier"><a href="#L270" title="ocaml/lambda/translclass.ml:270">index</a></span> <span class="ocamlLCIdentifier">a</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a><br/></li>
<li></span><br/></li>
<li><a id="L275">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">bind_id_as_val</span></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="Statement">_)</span> <span class="Statement">=</span> <span class="Statement">(</span><span class="Constant">&quot;&quot;</span>, <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><a id="L277">&#x200c;</a><span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier"><span class="linkable">build_class_init</span></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span> <span class="ocamlLCIdentifier">cstr</span> <span class="ocamlLCIdentifier">super</span> <span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span> <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span> <span class="ocamlLCIdentifier"><a href="#L721" title="ocaml/lambda/translclass.ml:721">msubst</a></span> <span class="ocamlLCIdentifier">top</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>.<span class="ocamlLCIdentifier">cl_desc</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tcl_ident</span> <span class="Statement">_</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Statement">(_</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">path_lam</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span><span class="Statement">)::</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">Llet</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="Constant">Strict</span><span class="ocamlEnd">, </span><span class="Constant">Pgenval</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span><span class="Statement">(</span><span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pfield</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="Constant">1</span><span class="ocamlEnd">, </span><span class="Constant">Pointer</span><span class="ocamlEnd">, </span><span class="Constant">Mutable</span><span class="Statement">)</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">[</span><span class="ocamlLCIdentifier">path_lam</span><span class="Statement">]</span><span class="ocamlEnd">, </span><span class="Constant">Loc_unknown</span><span class="Statement">)</span><span class="ocamlEnd">, </span><span class="Constant">Lvar</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span><span class="ocamlEnd"> </span><span class="Statement">::<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">top</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlEnd"> </span><span class="Statement">[</span><span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pfield</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="Constant">3</span><span class="ocamlEnd">, </span><span class="Constant">Pointer</span><span class="ocamlEnd">, </span><span class="Constant">Mutable</span><span class="Statement">)</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">[</span><span class="ocamlLCIdentifier">path_lam</span><span class="Statement">]</span><span class="ocamlEnd">, </span><span class="Constant">Loc_unknown</span><span class="Statement">)]<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else</span><span class="ocamlEnd"> </span><span class="Constant">[]</span><span class="Statement">)</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier">bind_super</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">super</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="Statement">))<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">assert</span><span class="ocamlEnd"> </span><span class="Constant">false<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tcl_structure</span> <span class="ocamlLCIdentifier">str</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">bind_super</span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span> <span class="ocamlLCIdentifier">super</span> <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>, <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span>, <span class="ocamlLCIdentifier">methods</span>, <span class="ocamlLCIdentifier">values</span><span class="Statement">)</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">fold_right<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(fun</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L1095" title="ocaml/lambda/translmod.ml:1095">field</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>, <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span>, <span class="ocamlLCIdentifier">methods</span>, <span class="ocamlLCIdentifier">values</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L1095" title="ocaml/lambda/translmod.ml:1095">field</a></span>.<span class="ocamlLCIdentifier">cf_desc</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Tcf_inherit</span> <span class="Statement">(_</span>, <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>, <span class="Statement">_</span>, <span class="ocamlLCIdentifier"><a href="#L347" title="ocaml/lambda/translclass.ml:347">vals</a></span>, <span class="ocamlLCIdentifier">meths</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L253" title="ocaml/lambda/translclass.ml:253">output_methods</a></span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span> <span class="ocamlLCIdentifier">methods</span> <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>, <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L277" title="ocaml/lambda/translclass.ml:277">build_class_init</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span> <span class="Constant">false<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L347" title="ocaml/lambda/translclass.ml:347">vals</a></span>, <span class="ocamlLCIdentifier">meths_super</span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span> <span class="ocamlLCIdentifier">str</span>.<span class="ocamlLCIdentifier">cstr_meths</span> <span class="ocamlLCIdentifier">meths</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span> <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span> <span class="ocamlLCIdentifier"><a href="#L721" title="ocaml/lambda/translclass.ml:721">msubst</a></span> <span class="ocamlLCIdentifier">top</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>, <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span>, <span class="Constant">[]</span>, <span class="ocamlLCIdentifier">values</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Tcf_val</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L56" title="ocaml/lambda/translcore.ml:56">name</a></span>, <span class="Statement">_</span>, <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="Statement">_</span>, <span class="ocamlLCIdentifier">over</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">values</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">over</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier">values</span> <span class="Statement">else</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L56" title="ocaml/lambda/translcore.ml:56">name</a></span>.<span class="ocamlLCIdentifier">txt</span>, <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span><span class="Statement">)</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier">values<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>, <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span>, <span class="ocamlLCIdentifier">methods</span>, <span class="ocamlLCIdentifier">values</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Tcf_method</span> <span class="Statement">(_</span>, <span class="Statement">_</span>, <span class="Constant">Tcfk_virtual</span> <span class="Statement">_)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Tcf_constraint</span> <span class="Statement">_<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>, <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span>, <span class="ocamlLCIdentifier">methods</span>, <span class="ocamlLCIdentifier">values</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Tcf_method</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L56" title="ocaml/lambda/translcore.ml:56">name</a></span>, <span class="Statement">_</span>, <span class="Constant">Tcfk_concrete</span> <span class="Statement">(_</span>, <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span><span class="Statement">))</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">enter_method_definition</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L56" title="ocaml/lambda/translcore.ml:56">name</a></span>.<span class="ocamlLCIdentifier">txt</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">met_code</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L721" title="ocaml/lambda/translclass.ml:721">msubst</a></span> <span class="Constant">true</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translcore.mli.html#L40" title="ocaml/lambda/translcore.mli:40">transl_scoped_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span><span class="Statement">)</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">met_code</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="PreProc">Clflags</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">native_code</span><span class="ocamlNone"> </span><span class="Statement">&amp;&amp;</span><span class="ocamlNone"> </span><span class="PreProc">List</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">length</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">met_code</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">1</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">(* Force correct naming of method for profiles *)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">met</span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Statement">(</span><span class="Constant">&quot;method_&quot;</span> <span class="Statement">^</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L56" title="ocaml/lambda/translcore.ml:56">name</a></span>.<span class="ocamlLCIdentifier">txt</span><span class="Statement">)</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">[</span><span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">Strict</span>, <span class="Constant">Pgenval</span>, <span class="ocamlLCIdentifier">met</span>, <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">hd</span> <span class="ocamlLCIdentifier">met_code</span>, <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">met</span><span class="Statement">)]<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else</span> <span class="ocamlLCIdentifier">met_code<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>, <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">Lvar</span><span class="Statement">(</span><span class="PreProc">Meths</span>.<span class="ocamlLCIdentifier">find</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L56" title="ocaml/lambda/translcore.ml:56">name</a></span>.<span class="ocamlLCIdentifier">txt</span> <span class="ocamlLCIdentifier">str</span>.<span class="ocamlLCIdentifier">cstr_meths</span><span class="Statement">)</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier">met_code</span> @ <span class="ocamlLCIdentifier">methods</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">values</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Tcf_initializer</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">Lsequence</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L21" title="ocaml/lambda/translobj.ml:21">oo_prim</a></span> <span class="Constant">&quot;add_initializer&quot;</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span> <span class="Statement">::</span> <span class="ocamlLCIdentifier"><a href="#L721" title="ocaml/lambda/translclass.ml:721">msubst</a></span> <span class="Constant">false<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span><span class="Statement">))</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">methods</span>, <span class="ocamlLCIdentifier">values</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Tcf_attribute</span> <span class="Statement">_</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>, <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span>, <span class="ocamlLCIdentifier">methods</span>, <span class="ocamlLCIdentifier">values</span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">str</span>.<span class="ocamlLCIdentifier">cstr_fields<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>, <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span>, <span class="Constant">[]</span>, <span class="Constant">[]</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li><a id="L341">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">cl_init</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L253" title="ocaml/lambda/translclass.ml:253">output_methods</a></span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span> <span class="ocamlLCIdentifier">methods</span> <span class="ocamlLCIdentifier"><span class="linkable">cl_init</span></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>, <span class="ocamlLCIdentifier"><a href="#L234" title="ocaml/lambda/translclass.ml:234">bind_methods</a></span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span> <span class="ocamlLCIdentifier">str</span>.<span class="ocamlLCIdentifier">cstr_meths</span> <span class="ocamlLCIdentifier">values</span> <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tcl_fun</span> <span class="Statement">(_</span>, <span class="ocamlLCIdentifier">_pat</span>, <span class="ocamlLCIdentifier"><a href="#L347" title="ocaml/lambda/translclass.ml:347">vals</a></span>, <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>, <span class="Statement">_)</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L344">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><span class="linkable">inh_init</span></span>, <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="Statement">)</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L277" title="ocaml/lambda/translclass.ml:277">build_class_init</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span> <span class="ocamlLCIdentifier">cstr</span> <span class="ocamlLCIdentifier">super</span> <span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span> <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span> <span class="ocamlLCIdentifier"><a href="#L721" title="ocaml/lambda/translclass.ml:721">msubst</a></span> <span class="ocamlLCIdentifier">top</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li><a id="L347">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">vals</span></span> <span class="Statement">=</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="ocamlLCIdentifier"><a href="#L275" title="ocaml/lambda/translclass.ml:275">bind_id_as_val</a></span> <span class="ocamlLCIdentifier"><span class="linkable">vals</span></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>, <span class="ocamlLCIdentifier">transl_vals</span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span> <span class="Constant">true</span> <span class="Constant">StrictOpt</span> <span class="ocamlLCIdentifier"><a href="#L347" title="ocaml/lambda/translclass.ml:347">vals</a></span> <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tcl_apply</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>, <span class="ocamlLCIdentifier">_exprs</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L277" title="ocaml/lambda/translclass.ml:277">build_class_init</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span> <span class="ocamlLCIdentifier">cstr</span> <span class="ocamlLCIdentifier">super</span> <span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span> <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span> <span class="ocamlLCIdentifier"><a href="#L721" title="ocaml/lambda/translclass.ml:721">msubst</a></span> <span class="ocamlLCIdentifier">top</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a><br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tcl_let</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">_rec_flag</span>, <span class="ocamlLCIdentifier">_defs</span>, <span class="ocamlLCIdentifier"><a href="#L347" title="ocaml/lambda/translclass.ml:347">vals</a></span>, <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L352">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><span class="linkable">inh_init</span></span>, <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="Statement">)</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L277" title="ocaml/lambda/translclass.ml:277">build_class_init</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span> <span class="ocamlLCIdentifier">cstr</span> <span class="ocamlLCIdentifier">super</span> <span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span> <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span> <span class="ocamlLCIdentifier"><a href="#L721" title="ocaml/lambda/translclass.ml:721">msubst</a></span> <span class="ocamlLCIdentifier">top</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li><a id="L355">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">vals</span></span> <span class="Statement">=</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="ocamlLCIdentifier"><a href="#L275" title="ocaml/lambda/translclass.ml:275">bind_id_as_val</a></span> <span class="ocamlLCIdentifier"><span class="linkable">vals</span></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>, <span class="ocamlLCIdentifier">transl_vals</span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span> <span class="Constant">true</span> <span class="Constant">StrictOpt</span> <span class="ocamlLCIdentifier"><a href="#L347" title="ocaml/lambda/translclass.ml:347">vals</a></span> <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tcl_constraint</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>, <span class="Statement">_</span>, <span class="ocamlLCIdentifier"><a href="#L347" title="ocaml/lambda/translclass.ml:347">vals</a></span>, <span class="ocamlLCIdentifier">meths</span>, <span class="ocamlLCIdentifier"><a href="#L360" title="ocaml/lambda/translclass.ml:360">concr_meths</a></span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L358">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">virt_meths</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">filter</span> <span class="Statement">(fun</span> <span class="ocamlLCIdentifier">lab</span> <span class="Statement">-&gt;</span> <span class="Statement">not</span> <span class="Statement">(</span><span class="PreProc">MethSet</span>.<span class="ocamlLCIdentifier">mem</span> <span class="ocamlLCIdentifier">lab</span> <span class="ocamlLCIdentifier"><a href="#L360" title="ocaml/lambda/translclass.ml:360">concr_meths</a></span><span class="Statement">))</span> <span class="ocamlLCIdentifier">meths</span> <span class="Statement">in<br/></li>
<li><a id="L360">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">concr_meths</span></span> <span class="Statement">=</span> <span class="PreProc">MethSet</span>.<span class="ocamlLCIdentifier">elements</span> <span class="ocamlLCIdentifier"><span class="linkable">concr_meths</span></span> <span class="Statement">in<br/></li>
<li><a id="L361">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">narrow_args</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L71" title="ocaml/lambda/translclass.ml:71">transl_meth_list</a></span> <span class="ocamlLCIdentifier"><a href="#L347" title="ocaml/lambda/translclass.ml:347">vals</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L71" title="ocaml/lambda/translclass.ml:71">transl_meth_list</a></span> <span class="ocamlLCIdentifier"><a href="#L358" title="ocaml/lambda/translclass.ml:358">virt_meths</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L71" title="ocaml/lambda/translclass.ml:71">transl_meth_list</a></span> <span class="ocamlLCIdentifier"><a href="#L360" title="ocaml/lambda/translclass.ml:360">concr_meths</a></span><span class="Statement">]</span> <span class="Statement">in<br/></li>
<li><a id="L366">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">cl</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L264" title="ocaml/lambda/translclass.ml:264">ignore_cstrs</a></span> <span class="ocamlLCIdentifier"><span class="linkable">cl</span></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">cl_desc</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Tcl_ident</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L444" title="ocaml/lambda/translclass.ml:444">path</a></span><span class="ocamlEnd">, </span><span class="Statement">_</span><span class="ocamlEnd">, </span><span class="Statement">_)</span><span class="ocamlEnd">, </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L444" title="ocaml/lambda/translclass.ml:444">path</a></span><span class="ocamlEnd">', </span><span class="ocamlLCIdentifier">path_lam</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span><span class="Statement">)::</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">assert</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="PreProc">Path</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">same</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L444" title="ocaml/lambda/translclass.ml:444">path</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L444" title="ocaml/lambda/translclass.ml:444">path</a></span><span class="ocamlEnd">'</span><span class="Statement">);<br/></li>
<li><a id="L370">&#x200c;</a></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><span class="linkable">inh</span></span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="PreProc">Ident</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">create_local</span><span class="ocamlEnd"> </span><span class="Constant">&quot;<span class="linkable">inh</span>&quot;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ofs</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="PreProc">List</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">length</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L347" title="ocaml/lambda/translclass.ml:347">vals</a></span><span class="ocamlEnd"> + </span><span class="Constant">1<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">valids</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">methids</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">super</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="ocamlEnd"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">List</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">fold_left<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(fun</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">init</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">nm</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span><span class="ocamlEnd">, </span><span class="Statement">_)</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">StrictOpt</span><span class="ocamlEnd">, </span><span class="Constant">Pgenval</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier"><a href="#L66" title="ocaml/lambda/translclass.ml:66">lfield</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L370" title="ocaml/lambda/translclass.ml:370">inh</a></span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L270" title="ocaml/lambda/translclass.ml:270">index</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">nm</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L360" title="ocaml/lambda/translclass.ml:360">concr_meths</a></span><span class="ocamlEnd"> + </span><span class="ocamlLCIdentifier">ofs</span><span class="Statement">)</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier">init</span><span class="Statement">))<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">methids</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="ocamlEnd"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">List</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">fold_left<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(fun</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">init</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">nm</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">StrictOpt</span><span class="ocamlEnd">, </span><span class="Constant">Pgenval</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier"><a href="#L66" title="ocaml/lambda/translclass.ml:66">lfield</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L370" title="ocaml/lambda/translclass.ml:370">inh</a></span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L270" title="ocaml/lambda/translclass.ml:270">index</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">nm</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L347" title="ocaml/lambda/translclass.ml:347">vals</a></span><span class="ocamlEnd"> + </span><span class="Constant">1</span><span class="Statement">)</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">init</span><span class="Statement">))<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">valids</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">Llet</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="Constant">Strict</span><span class="ocamlEnd">, </span><span class="Constant">Pgenval</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L370" title="ocaml/lambda/translclass.ml:370">inh</a></span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L21" title="ocaml/lambda/translobj.ml:21">oo_prim</a></span><span class="ocamlEnd"> </span><span class="Constant">&quot;inherits&quot;</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L361" title="ocaml/lambda/translclass.ml:361">narrow_args</a></span><span class="ocamlEnd"> @<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">[</span><span class="ocamlLCIdentifier">path_lam</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">Lconst</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="lambda.mli.html#L365" title="ocaml/lambda/lambda.mli:365">const_int</a></span><span class="ocamlEnd"> </span><span class="Statement">(if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">top</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlEnd"> </span><span class="Constant">1</span><span class="ocamlEnd"> </span><span class="Statement">else</span><span class="ocamlEnd"> </span><span class="Constant">0</span><span class="Statement">))])</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">StrictOpt</span><span class="ocamlEnd">, </span><span class="Constant">Pgenval</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L66" title="ocaml/lambda/translclass.ml:66">lfield</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L370" title="ocaml/lambda/translclass.ml:370">inh</a></span><span class="ocamlEnd"> </span><span class="Constant">0</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="Statement">)))<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li><a id="L393">&#x200c;</a></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><span class="linkable">core</span></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="ocamlEnd"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L277" title="ocaml/lambda/translclass.ml:277">build_class_init</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span><span class="ocamlEnd"> </span><span class="Constant">true</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">super</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L721" title="ocaml/lambda/translclass.ml:721">msubst</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">top</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">cstr</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L393" title="ocaml/lambda/translclass.ml:393">core</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="ocamlEnd"> </span><span class="Statement">else<br/></li>
<li><a id="L398">&#x200c;</a></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><span class="linkable">inh_init</span></span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L393" title="ocaml/lambda/translclass.ml:393">core</a></span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="Constant">Lsequence</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L21" title="ocaml/lambda/translobj.ml:21">oo_prim</a></span><span class="ocamlEnd"> </span><span class="Constant">&quot;widen&quot;</span><span class="ocamlEnd">, </span><span class="Statement">[</span><span class="Constant">Lvar</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span><span class="Statement">])</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="Statement">))<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">Lsequence</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L21" title="ocaml/lambda/translobj.ml:21">oo_prim</a></span><span class="ocamlEnd"> </span><span class="Constant">&quot;narrow&quot;</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L361" title="ocaml/lambda/translclass.ml:361">narrow_args</a></span><span class="Statement">)</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="Statement">))<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tcl_open</span> <span class="Statement">(_</span>, <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L277" title="ocaml/lambda/translclass.ml:277">build_class_init</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span> <span class="ocamlLCIdentifier">cstr</span> <span class="ocamlLCIdentifier">super</span> <span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span> <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span> <span class="ocamlLCIdentifier"><a href="#L721" title="ocaml/lambda/translclass.ml:721">msubst</a></span> <span class="ocamlLCIdentifier">top</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a><br/></li>
<li></span><br/></li>
<li><a id="L408">&#x200c;</a><span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier"><span class="linkable">build_class_lets</span></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>.<span class="ocamlLCIdentifier">cl_desc</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Tcl_let</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">rec_flag</span>, <span class="ocamlLCIdentifier">defs</span>, <span class="ocamlLCIdentifier">_vals</span>, <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>'<span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">env</span>, <span class="ocamlLCIdentifier">wrap</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L408" title="ocaml/lambda/translclass.ml:408">build_class_lets</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>' <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier">env</span>, <span class="Statement">fun</span> <span class="ocamlLCIdentifier">x</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">Translcore</span>.<span class="ocamlLCIdentifier"><a href="translcore.mli.html#L33" title="ocaml/lambda/translcore.mli:33">transl_let</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">rec_flag</span> <span class="ocamlLCIdentifier">defs</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">wrap</span> <span class="ocamlLCIdentifier">x</span><span class="Statement">))<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>.<span class="ocamlLCIdentifier">cl_env</span>, <span class="Statement">fun</span> <span class="ocamlLCIdentifier">x</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">x</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><a id="L417">&#x200c;</a><span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier"><span class="linkable">get_class_meths</span></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>.<span class="ocamlLCIdentifier">cl_desc</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Tcl_structure</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="PreProc">Meths</span>.<span class="ocamlLCIdentifier">fold</span> <span class="Statement">(fun</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="PreProc">Ident</span>.<span class="PreProc">Set</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L884" title="ocaml/lambda/matching.ml:884">add</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>.<span class="ocamlLCIdentifier">cstr_meths</span> <span class="PreProc">Ident</span>.<span class="PreProc">Set</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L533" title="ocaml/lambda/matching.ml:533">empty</a><br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tcl_ident</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="PreProc">Ident</span>.<span class="PreProc">Set</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L533" title="ocaml/lambda/matching.ml:533">empty</a><br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tcl_fun</span> <span class="Statement">(_</span>, <span class="Statement">_</span>, <span class="Statement">_</span>, <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>, <span class="Statement">_)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tcl_let</span> <span class="Statement">(_</span>, <span class="Statement">_</span>, <span class="Statement">_</span>, <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tcl_apply</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>, <span class="Statement">_)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tcl_open</span> <span class="Statement">(_</span>, <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tcl_constraint</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>, <span class="Statement">_</span>, <span class="Statement">_</span>, <span class="Statement">_</span>, <span class="Statement">_)</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="#L417" title="ocaml/lambda/translclass.ml:417">get_class_meths</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a><br/></li>
<li></span><br/></li>
<li><span class="Comment">(*<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; </span><span class="Todo">XXX</span><span class="Comment"> Il devrait etre peu couteux d'ecrire des <a href="translobj.ml.html#L158" title="ocaml/lambda/translobj.ml:158">classes</a> :<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; |&nbsp;&nbsp; Writing <a href="translobj.ml.html#L158" title="ocaml/lambda/translobj.ml:158">classes</a> should be cheap<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; class c x y = d e <a href="translmod.ml.html#L1385" title="ocaml/lambda/translmod.ml:1385">f</a><br/></li>
<li></span><span class="Comment">*)<br/></li>
<li><a id="L433">&#x200c;</a></span><span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier"><span class="linkable">transl_class_rebind</span></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="ocamlLCIdentifier">vf</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>.<span class="ocamlLCIdentifier">cl_desc</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Tcl_ident</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L444" title="ocaml/lambda/translclass.ml:444">path</a></span>, <span class="Statement">_</span>, <span class="Statement">_)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">vf</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">Concrete</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">try</span><span class="ocamlEnd"> </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="Statement">(</span><span class="PreProc">Env</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">find_class</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L444" title="ocaml/lambda/translclass.ml:444">path</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">cl_env</span><span class="Statement">)</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">cty_new</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">None</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlEnd"> </span><span class="Statement">raise</span><span class="ocamlEnd"> </span><span class="Constant">Exit<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">with</span><span class="ocamlEnd"> </span><span class="Constant">Not_found</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="Statement">raise</span><span class="ocamlEnd"> </span><span class="Constant">Exit<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">end;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">cl_loc</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>.<span class="ocamlLCIdentifier">cl_loc</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">path_lam</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L406" title="ocaml/lambda/lambda.mli:406">transl_class_path</a></span> <span class="ocamlLCIdentifier">cl_loc</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>.<span class="ocamlLCIdentifier">cl_env</span> <span class="ocamlLCIdentifier"><a href="#L444" title="ocaml/lambda/translclass.ml:444">path</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L444" title="ocaml/lambda/translclass.ml:444">path</a></span>, <span class="ocamlLCIdentifier">path_lam</span>, <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tcl_fun</span> <span class="Statement">(_</span>, <span class="ocamlLCIdentifier">pat</span>, <span class="Statement">_</span>, <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>, <span class="ocamlLCIdentifier">partial</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L444">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">path</span></span>, <span class="ocamlLCIdentifier">path_lam</span>, <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L433" title="ocaml/lambda/translclass.ml:433">transl_class_rebind</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="ocamlLCIdentifier">vf</span> <span class="Statement">in<br/></li>
<li><a id="L446">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">build</span></span> <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span> <span class="ocamlLCIdentifier">rem</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">param</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L124" title="ocaml/lambda/translclass.ml:124">name_pattern</a></span> <span class="Constant">&quot;param&quot;</span> <span class="ocamlLCIdentifier">pat</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">Lambda</span>.<span class="ocamlLCIdentifier"><a href="#L30" title="ocaml/lambda/translclass.ml:30">lfunction</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier"><a href="translcore.ml.html#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span>:<span class="Constant">Curried</span> <span class="Statement">~</span><span class="Identifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span>:<span class="Statement">((</span><span class="ocamlLCIdentifier">param</span>, <span class="Constant">Pgenval</span><span class="Statement">)::</span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier">return</span>:<span class="Constant">Pgenval<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier"><a href="simplif.ml.html#L760" title="ocaml/lambda/simplif.ml:760">attr</a></span>:<span class="ocamlLCIdentifier"><a href="lambda.mli.html#L451" title="ocaml/lambda/lambda.mli:451">default_function_attribute</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier"><a href="translcore.ml.html#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span>:<span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">pat</span>.<span class="ocamlLCIdentifier">pat_loc</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span>:<span class="Statement">(</span><span class="PreProc">Matching</span>.<span class="ocamlLCIdentifier"><a href="matching.mli.html#L23" title="ocaml/lambda/matching.mli:23">for_function</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">pat</span>.<span class="ocamlLCIdentifier">pat_loc<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">None</span> <span class="Statement">(</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">param</span><span class="Statement">)</span> <span class="Statement">[</span><span class="ocamlLCIdentifier">pat</span>, <span class="ocamlLCIdentifier">rem</span><span class="Statement">]</span> <span class="ocamlLCIdentifier">partial</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L444" title="ocaml/lambda/translclass.ml:444">path</a></span>, <span class="ocamlLCIdentifier">path_lam</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">Lfunction</span> <span class="Statement">{</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span> <span class="Statement">=</span> <span class="Constant">Curried</span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">}</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="#L182" title="ocaml/lambda/translclass.ml:182">build</a></span> <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">|</span> <span class="ocamlLCIdentifier">rem</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="#L182" title="ocaml/lambda/translclass.ml:182">build</a></span> <span class="Constant">[]</span> <span class="ocamlLCIdentifier">rem</span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tcl_apply</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>, <span class="ocamlLCIdentifier">oexprs</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L461">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">path</span></span>, <span class="ocamlLCIdentifier">path_lam</span>, <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L433" title="ocaml/lambda/translclass.ml:433">transl_class_rebind</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="ocamlLCIdentifier">vf</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L444" title="ocaml/lambda/translclass.ml:444">path</a></span>, <span class="ocamlLCIdentifier">path_lam</span>, <span class="ocamlLCIdentifier"><a href="translcore.mli.html#L27" title="ocaml/lambda/translcore.mli:27">transl_apply</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="ocamlLCIdentifier">oexprs</span> <span class="Constant">Loc_unknown</span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tcl_let</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">rec_flag</span>, <span class="ocamlLCIdentifier">defs</span>, <span class="ocamlLCIdentifier">_vals</span>, <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L465">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">path</span></span>, <span class="ocamlLCIdentifier">path_lam</span>, <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L433" title="ocaml/lambda/translclass.ml:433">transl_class_rebind</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="ocamlLCIdentifier">vf</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L444" title="ocaml/lambda/translclass.ml:444">path</a></span>, <span class="ocamlLCIdentifier">path_lam</span>, <span class="PreProc">Translcore</span>.<span class="ocamlLCIdentifier"><a href="translcore.mli.html#L33" title="ocaml/lambda/translcore.mli:33">transl_let</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">rec_flag</span> <span class="ocamlLCIdentifier">defs</span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tcl_structure</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Statement">raise</span> <span class="Constant">Exit<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tcl_constraint</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>', <span class="Statement">_</span>, <span class="Statement">_</span>, <span class="Statement">_</span>, <span class="Statement">_)</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L470">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">path</span></span>, <span class="ocamlLCIdentifier">path_lam</span>, <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L433" title="ocaml/lambda/translclass.ml:433">transl_class_rebind</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>' <span class="ocamlLCIdentifier">vf</span> <span class="Statement">in<br/></li>
<li><a id="L472">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier"><span class="linkable">check_constraint</span></span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Cty_constr</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L444" title="ocaml/lambda/translclass.ml:444">path</a></span>', <span class="Statement">_</span>, <span class="Statement">_)</span> <span class="Statement">when</span> <span class="PreProc">Path</span>.<span class="ocamlLCIdentifier">same</span> <span class="ocamlLCIdentifier"><a href="#L444" title="ocaml/lambda/translclass.ml:444">path</a></span> <span class="ocamlLCIdentifier"><a href="#L444" title="ocaml/lambda/translclass.ml:444">path</a></span>' <span class="Statement">-&gt;</span> <span class="Constant">()<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Cty_arrow</span> <span class="Statement">(_</span>, <span class="Statement">_</span>, <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L577" title="ocaml/lambda/translcore.ml:577">cty</a></span><span class="Statement">)</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="#L472" title="ocaml/lambda/translclass.ml:472">check_constraint</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L577" title="ocaml/lambda/translcore.ml:577">cty</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Statement">raise</span> <span class="Constant">Exit<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L472" title="ocaml/lambda/translclass.ml:472">check_constraint</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>.<span class="ocamlLCIdentifier">cl_type</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L444" title="ocaml/lambda/translclass.ml:444">path</a></span>, <span class="ocamlLCIdentifier">path_lam</span>, <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tcl_open</span> <span class="Statement">(_</span>, <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L433" title="ocaml/lambda/translclass.ml:433">transl_class_rebind</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="ocamlLCIdentifier">vf<br/></li>
<li></span><br/></li>
<li><a id="L482">&#x200c;</a><span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier"><span class="linkable">transl_class_rebind_0</span></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span>:<span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="ocamlLCIdentifier">vf</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>.<span class="ocamlLCIdentifier">cl_desc</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Tcl_let</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">rec_flag</span>, <span class="ocamlLCIdentifier">defs</span>, <span class="ocamlLCIdentifier">_vals</span>, <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L444" title="ocaml/lambda/translclass.ml:444">path</a></span>, <span class="ocamlLCIdentifier">path_lam</span>, <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/lambda/translclass.ml:482">transl_class_rebind_0</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="ocamlLCIdentifier">vf<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L444" title="ocaml/lambda/translclass.ml:444">path</a></span>, <span class="ocamlLCIdentifier">path_lam</span>, <span class="PreProc">Translcore</span>.<span class="ocamlLCIdentifier"><a href="translcore.mli.html#L33" title="ocaml/lambda/translcore.mli:33">transl_let</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">rec_flag</span> <span class="ocamlLCIdentifier">defs</span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L444" title="ocaml/lambda/translclass.ml:444">path</a></span>, <span class="ocamlLCIdentifier">path_lam</span>, <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L433" title="ocaml/lambda/translclass.ml:433">transl_class_rebind</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="ocamlLCIdentifier">vf</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L444" title="ocaml/lambda/translclass.ml:444">path</a></span>, <span class="ocamlLCIdentifier">path_lam</span>, <span class="ocamlLCIdentifier"><a href="#L30" title="ocaml/lambda/translclass.ml:30">lfunction</a></span> <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span>, <span class="Constant">Pgenval</span><span class="Statement">]</span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><a id="L494">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">transl_class_rebind</span></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="ocamlLCIdentifier">vf</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">try<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;<a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a>&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">and</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;<a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a>&quot;</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">obj_init0</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L46" title="ocaml/lambda/translclass.ml:46">lapply</a></span> <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_loc</span><span class="Statement">=</span><span class="Constant">Loc_unknown</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_func</span><span class="Statement">=</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_args</span><span class="Statement">=[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span><span class="Statement">];<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_tailcall</span><span class="Statement">=</span><span class="Constant">Default_tailcall</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_inlined</span><span class="Statement">=</span><span class="Constant">Default_inline</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_specialised</span><span class="Statement">=</span><span class="Constant">Default_specialise</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">}<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="Statement">_</span>, <span class="ocamlLCIdentifier">path_lam</span>, <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span>' <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/lambda/translclass.ml:482">transl_class_rebind_0</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span> <span class="ocamlLCIdentifier">obj_init0</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="ocamlLCIdentifier">vf</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="Statement">=</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span>' <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L30" title="ocaml/lambda/translclass.ml:30">lfunction</a></span> <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span>, <span class="Constant">Pgenval</span><span class="Statement">]</span> <span class="ocamlLCIdentifier">obj_init0</span><span class="Statement">)</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier">path_lam</span> <span class="Statement">else<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;class&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">and</span> <span class="ocamlLCIdentifier">new_init</span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;new_init&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">and</span> <span class="ocamlLCIdentifier">env_init</span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;env_init&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">and</span> <span class="ocamlLCIdentifier"><a href="#L769" title="ocaml/lambda/translclass.ml:769">table</a></span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;<a href="#L769" title="ocaml/lambda/translclass.ml:769">table</a>&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">and</span> <span class="ocamlLCIdentifier"><a href="#L221" title="ocaml/lambda/translclass.ml:221">envs</a></span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;<a href="#L221" title="ocaml/lambda/translclass.ml:221">envs</a>&quot;</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Llet</span><span class="Statement">(<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Strict</span>, <span class="Constant">Pgenval</span>, <span class="ocamlLCIdentifier">new_init</span>, <span class="ocamlLCIdentifier"><a href="#L30" title="ocaml/lambda/translclass.ml:30">lfunction</a></span> <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span>, <span class="Constant">Pgenval</span><span class="Statement">]</span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span>',<br/></li>
<li>&nbsp; &nbsp; <span class="Constant">Llet</span><span class="Statement">(<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Alias</span>, <span class="Constant">Pgenval</span>, <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span>, <span class="ocamlLCIdentifier">path_lam</span>,<br/></li>
<li>&nbsp; &nbsp; <span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pmakeblock</span><span class="Statement">(</span><span class="Constant">0</span>, <span class="Constant">Immutable</span>, <span class="Constant">None</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span><span class="Statement">(</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">new_init</span>, <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L66" title="ocaml/lambda/translclass.ml:66">lfield</a></span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span> <span class="Constant">0</span><span class="Statement">]);<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L30" title="ocaml/lambda/translclass.ml:30">lfunction</a></span> <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L769" title="ocaml/lambda/translclass.ml:769">table</a></span>, <span class="Constant">Pgenval</span><span class="Statement">]<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(</span><span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">Strict</span>, <span class="Constant">Pgenval</span>, <span class="ocamlLCIdentifier">env_init</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L66" title="ocaml/lambda/translclass.ml:66">lfield</a></span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span> <span class="Constant">1</span>, <span class="Statement">[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L769" title="ocaml/lambda/translclass.ml:769">table</a></span><span class="Statement">])</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L30" title="ocaml/lambda/translclass.ml:30">lfunction</a></span> <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L221" title="ocaml/lambda/translclass.ml:221">envs</a></span>, <span class="Constant">Pgenval</span><span class="Statement">]<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span><span class="Statement">(</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">new_init</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span><span class="Statement">(</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">env_init</span>, <span class="Statement">[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L221" title="ocaml/lambda/translclass.ml:221">envs</a></span><span class="Statement">])]))));<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L66" title="ocaml/lambda/translclass.ml:66">lfield</a></span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span> <span class="Constant">2</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L66" title="ocaml/lambda/translclass.ml:66">lfield</a></span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span> <span class="Constant">3</span><span class="Statement">]</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Loc_unknown</span><span class="Statement">)))<br/></li>
<li></span>&nbsp; <span class="Statement">with</span> <span class="Constant">Exit</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L366" title="ocaml/lambda/lambda.mli:366">lambda_unit</a><br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Rewrite a closure using builtins. Improves native code <a href="matching.ml.html#L3846" title="ocaml/lambda/matching.ml:3846">size</a>. *)<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="ocamlLCIdentifier">const_path</span> <span class="ocamlLCIdentifier">local</span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="Statement">-&gt;</span> <span class="Statement">not</span> <span class="Statement">(</span><span class="PreProc">List</span>.<span class="ocamlLCIdentifier">mem</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="ocamlLCIdentifier">local</span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Lconst</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">true<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Lfunction</span> <span class="Statement">{</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span> <span class="Statement">=</span> <span class="Constant">Curried</span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">}</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L710" title="ocaml/lambda/translclass.ml:710">fv</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L401" title="ocaml/lambda/lambda.mli:401">free_variables</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">for_all</span> <span class="Statement">(fun</span> <span class="ocamlLCIdentifier">x</span> <span class="Statement">-&gt;</span> <span class="Statement">not</span> <span class="Statement">(</span><span class="PreProc">Ident</span>.<span class="PreProc">Set</span>.<span class="ocamlLCIdentifier">mem</span> <span class="ocamlLCIdentifier">x</span> <span class="ocamlLCIdentifier"><a href="#L710" title="ocaml/lambda/translclass.ml:710">fv</a></span><span class="Statement">))</span> <span class="ocamlLCIdentifier">local<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">false<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier"><a href="#L596" title="ocaml/lambda/translclass.ml:596">builtin_meths</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span> <span class="ocamlLCIdentifier">env</span> <span class="ocamlLCIdentifier">env2</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">const_path</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">const_path</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">env</span><span class="Statement">::</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span><span class="Statement">)</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">conv</span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; &nbsp; <span class="Comment">(* Lvar <a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a> when List.mem <a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a> <a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a> -&gt;&nbsp; &quot;_self&quot;, [] *)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="ocamlLCIdentifier">p</span> <span class="Statement">when</span> <span class="ocamlLCIdentifier">const_path</span> <span class="ocamlLCIdentifier">p</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;const&quot;</span>, <span class="Statement">[</span><span class="ocamlLCIdentifier">p</span><span class="Statement">]<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Parrayrefu</span> <span class="Statement">_</span>, <span class="Statement">[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span><span class="Statement">;</span> <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">n</span><span class="Statement">]</span>, <span class="Statement">_)</span> <span class="Statement">when</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">mem</span> <span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">&quot;<a href="translcore.ml.html#L485" title="ocaml/lambda/translcore.ml:485">var</a>&quot;</span>, <span class="Statement">[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">n</span><span class="Statement">]<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pfield</span><span class="Statement">(</span><span class="ocamlLCIdentifier">n</span>, <span class="Statement">_</span>, <span class="Statement">_)</span>, <span class="Statement">[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">e</span><span class="Statement">]</span>, <span class="Statement">_)</span> <span class="Statement">when</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">same</span> <span class="ocamlLCIdentifier">e</span> <span class="ocamlLCIdentifier">env</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">&quot;env&quot;</span>, <span class="Statement">[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">env2</span><span class="Statement">;</span> <span class="Constant">Lconst</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="lambda.mli.html#L365" title="ocaml/lambda/lambda.mli:365">const_int</a></span> <span class="ocamlLCIdentifier">n</span><span class="Statement">)]<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Lsend</span><span class="Statement">(</span><span class="Constant">Self</span>, <span class="ocamlLCIdentifier">met</span>, <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span>, <span class="Constant">[]</span>, <span class="Statement">_)</span> <span class="Statement">when</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">mem</span> <span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">&quot;<a href="translobj.ml.html#L60" title="ocaml/lambda/translobj.ml:60">meth</a>&quot;</span>, <span class="Statement">[</span><span class="ocamlLCIdentifier">met</span><span class="Statement">]<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Statement">raise</span> <span class="Constant">Not_found<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Llet</span><span class="Statement">(</span><span class="ocamlLCIdentifier">_str</span>, <span class="ocamlLCIdentifier">_k</span>, <span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span>', <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span>, <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">)</span> <span class="Statement">when</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">mem</span> <span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L596" title="ocaml/lambda/translclass.ml:596">builtin_meths</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span>'<span class="Statement">::</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier">env</span> <span class="ocamlLCIdentifier">env2</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a><br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Lapply</span><span class="Statement">{</span><span class="ocamlLCIdentifier">ap_func</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L1385" title="ocaml/lambda/translmod.ml:1385">f</a></span><span class="Statement">;</span> <span class="ocamlLCIdentifier">ap_args</span> <span class="Statement">=</span> <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="Statement">]}</span> <span class="Statement">when</span> <span class="ocamlLCIdentifier">const_path</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L1385" title="ocaml/lambda/translmod.ml:1385">f</a></span> <span class="Statement">-&gt;<br/></li>
<li><a id="L563">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">s</span></span>, <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">conv</span> <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span> <span class="Statement">in</span> <span class="Statement">(</span><span class="Constant">&quot;app_&quot;</span><span class="Statement">^</span><span class="ocamlLCIdentifier"><span class="linkable">s</span></span>, <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L1385" title="ocaml/lambda/translmod.ml:1385">f</a></span> <span class="Statement">::</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Lapply</span><span class="Statement">{</span><span class="ocamlLCIdentifier">ap_func</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L1385" title="ocaml/lambda/translmod.ml:1385">f</a></span><span class="Statement">;</span> <span class="ocamlLCIdentifier">ap_args</span> <span class="Statement">=</span> <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="Statement">;</span> <span class="ocamlLCIdentifier">p</span><span class="Statement">]}</span> <span class="Statement">when</span> <span class="ocamlLCIdentifier">const_path</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L1385" title="ocaml/lambda/translmod.ml:1385">f</a></span> <span class="Statement">&amp;&amp;</span> <span class="ocamlLCIdentifier">const_path</span> <span class="ocamlLCIdentifier">p</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L565">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">s</span></span>, <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">conv</span> <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">&quot;app_&quot;</span><span class="Statement">^</span><span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span><span class="Statement">^</span><span class="Constant">&quot;_const&quot;</span>, <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L1385" title="ocaml/lambda/translmod.ml:1385">f</a></span> <span class="Statement">::</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span> @ <span class="Statement">[</span><span class="ocamlLCIdentifier">p</span><span class="Statement">])<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Lapply</span><span class="Statement">{</span><span class="ocamlLCIdentifier">ap_func</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L1385" title="ocaml/lambda/translmod.ml:1385">f</a></span><span class="Statement">;</span> <span class="ocamlLCIdentifier">ap_args</span> <span class="Statement">=</span> <span class="Statement">[</span><span class="ocamlLCIdentifier">p</span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="Statement">]}</span> <span class="Statement">when</span> <span class="ocamlLCIdentifier">const_path</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L1385" title="ocaml/lambda/translmod.ml:1385">f</a></span> <span class="Statement">&amp;&amp;</span> <span class="ocamlLCIdentifier">const_path</span> <span class="ocamlLCIdentifier">p</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L568">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">s</span></span>, <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">conv</span> <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">&quot;app_const_&quot;</span><span class="Statement">^</span><span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span>, <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L1385" title="ocaml/lambda/translmod.ml:1385">f</a></span> <span class="Statement">::</span> <span class="ocamlLCIdentifier">p</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Lsend</span><span class="Statement">(</span><span class="Constant">Self</span>, <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">n</span>, <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span>, <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="Statement">]</span>, <span class="Statement">_)</span> <span class="Statement">when</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">mem</span> <span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span> <span class="Statement">-&gt;<br/></li>
<li><a id="L571">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">s</span></span>, <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">conv</span> <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">&quot;meth_app_&quot;</span><span class="Statement">^</span><span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span>, <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">n</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Lsend</span><span class="Statement">(</span><span class="Constant">Self</span>, <span class="ocamlLCIdentifier">met</span>, <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span>, <span class="Constant">[]</span>, <span class="Statement">_)</span> <span class="Statement">when</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">mem</span> <span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">&quot;get_meth&quot;</span>, <span class="Statement">[</span><span class="ocamlLCIdentifier">met</span><span class="Statement">])<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Lsend</span><span class="Statement">(</span><span class="Constant">Public</span>, <span class="ocamlLCIdentifier">met</span>, <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span>, <span class="Constant">[]</span>, <span class="Statement">_)</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L576">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">s</span></span>, <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">conv</span> <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">&quot;send_&quot;</span><span class="Statement">^</span><span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span>, <span class="ocamlLCIdentifier">met</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Lsend</span><span class="Statement">(</span><span class="Constant">Cached</span>, <span class="ocamlLCIdentifier">met</span>, <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span>, <span class="Statement">[_;_]</span>, <span class="Statement">_)</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L579">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">s</span></span>, <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">conv</span> <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">&quot;send_&quot;</span><span class="Statement">^</span><span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span>, <span class="ocamlLCIdentifier">met</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Lfunction</span> <span class="Statement">{</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span> <span class="Statement">=</span> <span class="Constant">Curried</span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span> <span class="Statement">=</span> <span class="Statement">[</span><span class="ocamlLCIdentifier">x</span>, <span class="Statement">_];</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">}</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L582">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier"><span class="linkable">enter</span></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Parraysetu</span> <span class="Statement">_</span>, <span class="Statement">[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span><span class="Statement">;</span> <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">n</span><span class="Statement">;</span> <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">x</span>'<span class="Statement">]</span>, <span class="Statement">_)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">when</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">same</span> <span class="ocamlLCIdentifier">x</span> <span class="ocamlLCIdentifier">x</span>' <span class="Statement">&amp;&amp;</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">mem</span> <span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">&quot;set_var&quot;</span>, <span class="Statement">[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">n</span><span class="Statement">])<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Llet</span><span class="Statement">(</span><span class="ocamlLCIdentifier">_str</span>, <span class="ocamlLCIdentifier">_k</span>, <span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span>', <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span>, <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">)</span> <span class="Statement">when</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">mem</span> <span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L582" title="ocaml/lambda/translclass.ml:582">enter</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span>'<span class="Statement">::</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Statement">raise</span> <span class="Constant">Not_found<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">in</span> <span class="ocamlLCIdentifier"><a href="#L582" title="ocaml/lambda/translclass.ml:582">enter</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a><br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Lfunction</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Statement">raise</span> <span class="Constant">Not_found<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L592">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">s</span></span>, <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">conv</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span> <span class="Statement">in</span> <span class="Statement">(</span><span class="Constant">&quot;get_&quot;</span><span class="Statement">^</span><span class="ocamlLCIdentifier"><span class="linkable">s</span></span>, <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="Statement">module</span><span class="PreProc"> M</span><span class="ocamlPreDef"> </span><span class="Statement">=</span> <span class="PreProc">struct<br/></li>
<li></span><span class="ocamlStruct">&nbsp; </span><span class="Statement"><a href="matching.ml.html#L419" title="ocaml/lambda/matching.ml:419">open</a></span><span class="ocamlNone"> </span><span class="PreProc">CamlinternalOO<br/></li>
<li><a id="L596">&#x200c;</a></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">builtin_meths</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">env</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">env2</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">builtin</span><span class="ocamlStruct">, </span><span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L596" title="ocaml/lambda/translclass.ml:596">builtin_meths</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">env</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">env2</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Comment">(* if not arr then [<a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a>(<a href="translobj.ml.html#L21" title="ocaml/lambda/translobj.ml:21">oo_prim</a> builtin, <a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a>)] else *)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L339" title="ocaml/lambda/translcore.ml:339">tag</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">match</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">builtin</span><span class="ocamlStruct"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Constant">&quot;get_const&quot;</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">GetConst<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">&quot;get_var&quot;</span><span class="ocamlStruct">&nbsp;&nbsp; </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">GetVar<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">&quot;get_env&quot;</span><span class="ocamlStruct">&nbsp;&nbsp; </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">GetEnv<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">&quot;get_meth&quot;</span><span class="ocamlStruct">&nbsp; </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">GetMeth<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">&quot;set_var&quot;</span><span class="ocamlStruct">&nbsp;&nbsp; </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">SetVar<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">&quot;app_const&quot;</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">AppConst<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">&quot;app_var&quot;</span><span class="ocamlStruct">&nbsp;&nbsp; </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">AppVar<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">&quot;app_env&quot;</span><span class="ocamlStruct">&nbsp;&nbsp; </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">AppEnv<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">&quot;app_meth&quot;</span><span class="ocamlStruct">&nbsp; </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">AppMeth<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">&quot;app_const_const&quot;</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">AppConstConst<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">&quot;app_const_var&quot;</span><span class="ocamlStruct">&nbsp;&nbsp; </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">AppConstVar<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">&quot;app_const_env&quot;</span><span class="ocamlStruct">&nbsp;&nbsp; </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">AppConstEnv<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">&quot;app_const_meth&quot;</span><span class="ocamlStruct">&nbsp; </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">AppConstMeth<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">&quot;app_var_const&quot;</span><span class="ocamlStruct">&nbsp;&nbsp; </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">AppVarConst<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">&quot;app_env_const&quot;</span><span class="ocamlStruct">&nbsp;&nbsp; </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">AppEnvConst<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">&quot;app_meth_const&quot;</span><span class="ocamlStruct">&nbsp; </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">AppMethConst<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">&quot;meth_app_const&quot;</span><span class="ocamlStruct">&nbsp; </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">MethAppConst<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">&quot;meth_app_var&quot;</span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">MethAppVar<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">&quot;meth_app_env&quot;</span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">MethAppEnv<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">&quot;meth_app_meth&quot;</span><span class="ocamlStruct">&nbsp;&nbsp; </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">MethAppMeth<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">&quot;send_const&quot;</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">SendConst<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">&quot;send_var&quot;</span><span class="ocamlStruct">&nbsp;&nbsp; </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">SendVar<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">&quot;send_env&quot;</span><span class="ocamlStruct">&nbsp;&nbsp; </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">SendEnv<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">&quot;send_meth&quot;</span><span class="ocamlStruct">&nbsp; </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">SendMeth<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Statement">assert</span><span class="ocamlStruct"> </span><span class="Constant">false<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">in</span><span class="ocamlStruct"> </span><span class="Constant">Lconst</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="lambda.mli.html#L365" title="ocaml/lambda/lambda.mli:365">const_int</a></span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="PreProc">Obj</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">magic</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L339" title="ocaml/lambda/translcore.ml:339">tag</a></span><span class="Statement">))</span><span class="ocamlStruct"> </span><span class="Statement">::</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a><br/></li>
<li></span><span class="PreProc">end<br/></li>
<li></span><span class="Statement"><a href="matching.ml.html#L419" title="ocaml/lambda/matching.ml:419">open</a></span><span class="ocamlNone"> </span><span class="PreProc">M<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">(*<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; Class translation.<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; Three subcases:<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; * reapplication of a known class -&gt; <a href="#L433" title="ocaml/lambda/translclass.ml:433">transl_class_rebind</a><br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; * class without local dependencies -&gt; <a href="tmc.ml.html#L439" title="ocaml/lambda/tmc.ml:439">direct</a> translation<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; * with local dependencies -&gt; generate a stubs tree,<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; with a node for every local <a href="translobj.ml.html#L158" title="ocaml/lambda/translobj.ml:158">classes</a> inherited<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; A class is a 4-tuple:<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; (<a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a>, class_init, env_init, env)<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; <a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a>: creation function (<a href="tmc.ml.html#L197" title="ocaml/lambda/tmc.ml:197">unit</a> -&gt; obj)<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; class_init: inheritance function (<a href="#L769" title="ocaml/lambda/translclass.ml:769">table</a> -&gt; env_init)<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; (one by source code)<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; env_init: parameterisation by the local environment<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; (env -&gt; <a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a> -&gt; <a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a>)<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; (one for each combination of inherited class_init )<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; env: local environment<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; If <a href="translcore.ml.html#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a>=0 (immediate object), then only env_init is conserved.<br/></li>
<li></span><span class="Comment">*)<br/></li>
<li></span><br/></li>
<li><span class="Comment">(*<br/></li>
<li></span><span class="Comment">let prerr_ids <a href="translattribute.ml.html#L114" title="ocaml/lambda/translattribute.ml:114">msg</a> <a href="translcore.ml.html#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a> =<br/></li>
<li></span><span class="Comment">&nbsp; let names = List.<a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a> Ident.unique_toplevel_name <a href="translcore.ml.html#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a> in<br/></li>
<li></span><span class="Comment">&nbsp; prerr_endline (String.concat &quot; &quot; (<a href="translattribute.ml.html#L114" title="ocaml/lambda/translattribute.ml:114">msg</a> :: names))<br/></li>
<li></span><span class="Comment">*)<br/></li>
<li></span><br/></li>
<li><a id="L655">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">free_methods</span></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L710" title="ocaml/lambda/translclass.ml:710">fv</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">ref</span> <span class="PreProc">Ident</span>.<span class="PreProc">Set</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L533" title="ocaml/lambda/matching.ml:533">empty</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier">free</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">Lambda</span>.<span class="ocamlLCIdentifier"><a href="lambda.mli.html#L380" title="ocaml/lambda/lambda.mli:380">iter_head_constructor</a></span> <span class="ocamlLCIdentifier">free</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Lsend</span><span class="Statement">(</span><span class="Constant">Self</span>, <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L60" title="ocaml/lambda/translobj.ml:60">meth</a></span>, <span class="Statement">_</span>, <span class="Statement">_</span>, <span class="Statement">_)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L710" title="ocaml/lambda/translclass.ml:710">fv</a></span> <span class="Statement">:=</span> <span class="PreProc">Ident</span>.<span class="PreProc">Set</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L884" title="ocaml/lambda/matching.ml:884">add</a></span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L60" title="ocaml/lambda/translobj.ml:60">meth</a></span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L710" title="ocaml/lambda/translclass.ml:710">fv</a><br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Lsend</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">()<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Lfunction</span><span class="Statement">{</span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span><span class="Statement">}</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">iter</span> <span class="Statement">(fun</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">param</span>, <span class="Statement">_)</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="#L710" title="ocaml/lambda/translclass.ml:710">fv</a></span> <span class="Statement">:=</span> <span class="PreProc">Ident</span>.<span class="PreProc">Set</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L867" title="ocaml/lambda/matching.ml:867">remove</a></span> <span class="ocamlLCIdentifier">param</span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L710" title="ocaml/lambda/translclass.ml:710">fv</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a><br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Llet</span><span class="Statement">(_</span>, <span class="ocamlLCIdentifier">_k</span>, <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="ocamlLCIdentifier">_arg</span>, <span class="ocamlLCIdentifier">_body</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Lmutlet</span><span class="Statement">(</span><span class="ocamlLCIdentifier">_k</span>, <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="ocamlLCIdentifier">_arg</span>, <span class="ocamlLCIdentifier">_body</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L710" title="ocaml/lambda/translclass.ml:710">fv</a></span> <span class="Statement">:=</span> <span class="PreProc">Ident</span>.<span class="PreProc">Set</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L867" title="ocaml/lambda/matching.ml:867">remove</a></span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L710" title="ocaml/lambda/translclass.ml:710">fv</a><br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Lletrec</span><span class="Statement">(</span><span class="ocamlLCIdentifier">decl</span>, <span class="ocamlLCIdentifier">_body</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">iter</span> <span class="Statement">(fun</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="ocamlLCIdentifier">_exp</span><span class="Statement">)</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="#L710" title="ocaml/lambda/translclass.ml:710">fv</a></span> <span class="Statement">:=</span> <span class="PreProc">Ident</span>.<span class="PreProc">Set</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L867" title="ocaml/lambda/matching.ml:867">remove</a></span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L710" title="ocaml/lambda/translclass.ml:710">fv</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier">decl<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Lstaticcatch</span><span class="Statement">(</span><span class="ocamlLCIdentifier">_e1</span>, <span class="Statement">(_</span>,<span class="ocamlLCIdentifier">vars</span><span class="Statement">)</span>, <span class="ocamlLCIdentifier">_e2</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">iter</span> <span class="Statement">(fun</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="Statement">_)</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="#L710" title="ocaml/lambda/translclass.ml:710">fv</a></span> <span class="Statement">:=</span> <span class="PreProc">Ident</span>.<span class="PreProc">Set</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L867" title="ocaml/lambda/matching.ml:867">remove</a></span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L710" title="ocaml/lambda/translclass.ml:710">fv</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier">vars<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Ltrywith</span><span class="Statement">(</span><span class="ocamlLCIdentifier">_e1</span>, <span class="Type">exn</span>, <span class="ocamlLCIdentifier">_e2</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L710" title="ocaml/lambda/translclass.ml:710">fv</a></span> <span class="Statement">:=</span> <span class="PreProc">Ident</span>.<span class="PreProc">Set</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L867" title="ocaml/lambda/matching.ml:867">remove</a></span> <span class="Type">exn</span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L710" title="ocaml/lambda/translclass.ml:710">fv</a><br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Lfor</span><span class="Statement">(</span><span class="ocamlLCIdentifier">v</span>, <span class="ocamlLCIdentifier">_e1</span>, <span class="ocamlLCIdentifier">_e2</span>, <span class="ocamlLCIdentifier">_dir</span>, <span class="ocamlLCIdentifier">_e3</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L710" title="ocaml/lambda/translclass.ml:710">fv</a></span> <span class="Statement">:=</span> <span class="PreProc">Ident</span>.<span class="PreProc">Set</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L867" title="ocaml/lambda/matching.ml:867">remove</a></span> <span class="ocamlLCIdentifier">v</span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L710" title="ocaml/lambda/translclass.ml:710">fv</a><br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Lassign</span> <span class="Statement">_<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Lvar</span> <span class="Statement">_</span> <span class="Statement">|</span> <span class="Constant">Lmutvar</span> <span class="Statement">_</span> <span class="Statement">|</span> <span class="Constant">Lconst</span> <span class="Statement">_</span> <span class="Statement">|</span> <span class="Constant">Lapply</span> <span class="Statement">_<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Lprim</span> <span class="Statement">_</span> <span class="Statement">|</span> <span class="Constant">Lswitch</span> <span class="Statement">_</span> <span class="Statement">|</span> <span class="Constant">Lstringswitch</span> <span class="Statement">_</span> <span class="Statement">|</span> <span class="Constant">Lstaticraise</span> <span class="Statement">_<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Lifthenelse</span> <span class="Statement">_</span> <span class="Statement">|</span> <span class="Constant">Lsequence</span> <span class="Statement">_</span> <span class="Statement">|</span> <span class="Constant">Lwhile</span> <span class="Statement">_<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Levent</span> <span class="Statement">_</span> <span class="Statement">|</span> <span class="Constant">Lifused</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">()<br/></li>
<li></span>&nbsp; <span class="Statement">in</span> <span class="ocamlLCIdentifier">free</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="Statement">;</span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L710" title="ocaml/lambda/translclass.ml:710">fv</a><br/></li>
<li></span><br/></li>
<li><a id="L683">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">transl_class</span></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a></span> <span class="ocamlLCIdentifier">cl_id</span> <span class="ocamlLCIdentifier">pub_meths</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="ocamlLCIdentifier">vflag</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Comment">(* First check if it is not only a rebind *)<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">rebind</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L433" title="ocaml/lambda/translclass.ml:433">transl_class_rebind</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="ocamlLCIdentifier">vflag</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">rebind</span><span class="ocamlNone"> </span><span class="Statement">&lt;&gt;</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="lambda.mli.html#L366" title="ocaml/lambda/lambda.mli:366">lambda_unit</a></span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier">rebind</span> <span class="Statement">else<br/></li>
<li></span><br/></li>
<li>&nbsp; <span class="Comment">(* Prepare for heavy environment handling *)<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">enter_class_definition</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">cl_id</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">tables</span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Statement">(</span><span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier"><a href="translcore.ml.html#L56" title="ocaml/lambda/translcore.ml:56">name</a></span> <span class="ocamlLCIdentifier">cl_id</span> <span class="Statement">^</span> <span class="Constant">&quot;_tables&quot;</span><span class="Statement">)</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L157" title="ocaml/lambda/translobj.ml:157">top_env</a></span>, <span class="ocamlLCIdentifier">req</span><span class="Statement">)</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L161" title="ocaml/lambda/translobj.ml:161">oo_add_class</a></span> <span class="ocamlLCIdentifier">tables</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">top</span> <span class="Statement">=</span> <span class="Statement">not</span> <span class="ocamlLCIdentifier">req</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">cl_env</span>, <span class="ocamlLCIdentifier"><a href="tmc.ml.html#L554" title="ocaml/lambda/tmc.ml:554">llets</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L408" title="ocaml/lambda/translclass.ml:408">build_class_lets</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L744" title="ocaml/lambda/simplif.ml:744">new_ids</a></span> <span class="Statement">=</span> <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">top</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="Constant">[]</span> <span class="Statement">else</span> <span class="PreProc">Env</span>.<span class="ocamlLCIdentifier">diff</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L157" title="ocaml/lambda/translobj.ml:157">top_env</a></span> <span class="ocamlLCIdentifier">cl_env</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">env2</span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;env&quot;</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">meth_ids</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L417" title="ocaml/lambda/translclass.ml:417">get_class_meths</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L475" title="ocaml/lambda/simplif.ml:475">subst</a></span> <span class="ocamlLCIdentifier">env</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="ocamlLCIdentifier">i0</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L744" title="ocaml/lambda/simplif.ml:744">new_ids</a></span>' <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L710" title="ocaml/lambda/translclass.ml:710">fv</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L401" title="ocaml/lambda/lambda.mli:401">free_variables</a></span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="Comment">(* prerr_ids &quot;cl_id =&quot; [cl_id]; prerr_ids &quot;<a href="#L710" title="ocaml/lambda/translclass.ml:710">fv</a> =&quot; (Ident.Set.elements <a href="#L710" title="ocaml/lambda/translclass.ml:710">fv</a>); *)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L710" title="ocaml/lambda/translclass.ml:710">fv</a></span> <span class="Statement">=</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">fold_right</span> <span class="PreProc">Ident</span>.<span class="PreProc">Set</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L867" title="ocaml/lambda/matching.ml:867">remove</a></span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="simplif.ml.html#L744" title="ocaml/lambda/simplif.ml:744">new_ids</a></span>' <span class="ocamlLCIdentifier"><a href="#L710" title="ocaml/lambda/translclass.ml:710">fv</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="Comment">(* We need to <a href="translcore.ml.html#L707" title="ocaml/lambda/translcore.ml:707">handle</a> method <a href="translcore.ml.html#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a> specially, as they do not appear<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp;&nbsp; in the typing environment (PR#3576, PR#4560) *)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Comment">(* very hacky: we <a href="matching.ml.html#L884" title="ocaml/lambda/matching.ml:884">add</a> and <a href="matching.ml.html#L867" title="ocaml/lambda/matching.ml:867">remove</a> free method <a href="translcore.ml.html#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a> on the fly,<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp;&nbsp; depending on the visit order... *)<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L159" title="ocaml/lambda/translobj.ml:159">method_ids</a></span> <span class="Statement">:=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="PreProc">Ident</span>.<span class="PreProc">Set</span>.<span class="ocamlLCIdentifier">diff</span> <span class="Statement">(</span><span class="PreProc">Ident</span>.<span class="PreProc">Set</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L900" title="ocaml/lambda/matching.ml:900">union</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L655" title="ocaml/lambda/translclass.ml:655">free_methods</a></span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span><span class="Statement">)</span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L159" title="ocaml/lambda/translobj.ml:159">method_ids</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier">meth_ids</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Comment">(* prerr_ids &quot;meth_ids =&quot; (Ident.Set.elements meth_ids);<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp;&nbsp; prerr_ids &quot;<a href="translobj.ml.html#L159" title="ocaml/lambda/translobj.ml:159">method_ids</a> =&quot; (Ident.Set.elements !<a href="translobj.ml.html#L159" title="ocaml/lambda/translobj.ml:159">method_ids</a>); *)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L744" title="ocaml/lambda/simplif.ml:744">new_ids</a></span> <span class="Statement">=</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">fold_right</span> <span class="PreProc">Ident</span>.<span class="PreProc">Set</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L884" title="ocaml/lambda/matching.ml:884">add</a></span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L744" title="ocaml/lambda/simplif.ml:744">new_ids</a></span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L159" title="ocaml/lambda/translobj.ml:159">method_ids</a></span> <span class="Statement">in<br/></li>
<li><a id="L710">&#x200c;</a></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">fv</span></span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="PreProc">Set</span>.<span class="ocamlLCIdentifier"><a href="switch.ml.html#L223" title="ocaml/lambda/switch.ml:223">inter</a></span> <span class="ocamlLCIdentifier"><span class="linkable">fv</span></span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L744" title="ocaml/lambda/simplif.ml:744">new_ids</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L744" title="ocaml/lambda/simplif.ml:744">new_ids</a></span>' <span class="Statement">:=</span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="simplif.ml.html#L744" title="ocaml/lambda/simplif.ml:744">new_ids</a></span>' @ <span class="PreProc">Ident</span>.<span class="PreProc">Set</span>.<span class="ocamlLCIdentifier">elements</span> <span class="ocamlLCIdentifier"><a href="#L710" title="ocaml/lambda/translclass.ml:710">fv</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Comment">(* prerr_ids &quot;<a href="simplif.ml.html#L744" title="ocaml/lambda/simplif.ml:744">new_ids</a>' =&quot; !<a href="simplif.ml.html#L744" title="ocaml/lambda/simplif.ml:744">new_ids</a>'; *)<br/></li>
<li><a id="L713">&#x200c;</a></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">i</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">ref</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">i0</span>-<span class="Constant">1</span><span class="Statement">)</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">fold_left<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(fun</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L475" title="ocaml/lambda/simplif.ml:475">subst</a></span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">incr</span> <span class="ocamlLCIdentifier"><a href="#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">;</span> <span class="PreProc">Ident</span>.<span class="PreProc">Map</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L884" title="ocaml/lambda/matching.ml:884">add</a></span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L66" title="ocaml/lambda/translclass.ml:66">lfield</a></span> <span class="ocamlLCIdentifier">env</span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="Statement">)</span>&nbsp; <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L475" title="ocaml/lambda/simplif.ml:475">subst</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="PreProc">Ident</span>.<span class="PreProc">Map</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L533" title="ocaml/lambda/matching.ml:533">empty</a></span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="simplif.ml.html#L744" title="ocaml/lambda/simplif.ml:744">new_ids</a></span>'<br/></li>
<li>&nbsp; <span class="Statement">in<br/></li>
<li><a id="L719">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">new_ids_meths</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">ref</span> <span class="Constant">[]</span> <span class="Statement">in<br/></li>
<li><a id="L720">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">no_env_update</span></span> <span class="Statement">_</span> <span class="Statement">_</span> <span class="ocamlLCIdentifier">env</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">env</span> <span class="Statement">in<br/></li>
<li><a id="L721">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">msubst</span></span> <span class="ocamlLCIdentifier">arr</span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Lfunction</span> <span class="Statement">{</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span> <span class="Statement">=</span> <span class="Constant">Curried</span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span> <span class="Statement">=</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span>, <span class="Constant">Pgenval</span><span class="Statement">)</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">}</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">env</span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;env&quot;</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span>' <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="simplif.ml.html#L744" title="ocaml/lambda/simplif.ml:744">new_ids</a></span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">[]</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span> <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">Lambda</span>.<span class="ocamlLCIdentifier"><a href="simplif.ml.html#L475" title="ocaml/lambda/simplif.ml:475">subst</a></span> <span class="ocamlLCIdentifier"><a href="#L720" title="ocaml/lambda/translclass.ml:720">no_env_update</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="simplif.ml.html#L475" title="ocaml/lambda/simplif.ml:475">subst</a></span> <span class="ocamlLCIdentifier">env</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span> <span class="Constant">0</span> <span class="ocamlLCIdentifier"><a href="#L719" title="ocaml/lambda/translclass.ml:719">new_ids_meths</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">try<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">(* Doesn'<a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a> seem to improve <a href="matching.ml.html#L3846" title="ocaml/lambda/matching.ml:3846">size</a> for bytecode *)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">(* if not !Clflags.native_code then raise Not_found; *)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="Statement">not</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">arr</span><span class="ocamlNone"> </span><span class="Statement">||</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="PreProc">Clflags</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">debug</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlEnd"> </span><span class="Statement">raise</span><span class="ocamlEnd"> </span><span class="Constant">Not_found</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L596" title="ocaml/lambda/translclass.ml:596">builtin_meths</a></span><span class="ocamlEnd"> </span><span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span><span class="Statement">]</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">env</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">env2</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L30" title="ocaml/lambda/translclass.ml:30">lfunction</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="ocamlEnd">'</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">with</span><span class="ocamlEnd"> </span><span class="Constant">Not_found</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L30" title="ocaml/lambda/translclass.ml:30">lfunction</a></span><span class="ocamlEnd"> </span><span class="Statement">((</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span><span class="ocamlEnd">, </span><span class="Constant">Pgenval</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">::</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">(if</span><span class="ocamlNone"> </span><span class="Statement">not</span><span class="ocamlNone"> </span><span class="Statement">(</span><span class="PreProc">Ident</span><span class="ocamlNone">.</span><span class="PreProc">Set</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">mem</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">env</span><span class="ocamlNone"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="lambda.mli.html#L401" title="ocaml/lambda/lambda.mli:401">free_variables</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="ocamlNone">'</span><span class="Statement">))</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="ocamlEnd">' </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">Alias</span><span class="ocamlEnd">, </span><span class="Constant">Pgenval</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">env</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pfield_computed</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">[</span><span class="Constant">Lvar</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span><span class="Statement">;</span><span class="ocamlEnd"> </span><span class="Constant">Lvar</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">env2</span><span class="Statement">]</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">Loc_unknown</span><span class="Statement">)</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="ocamlEnd">'</span><span class="Statement">))]<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Statement">assert</span> <span class="Constant">false<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li><a id="L743">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">new_ids_init</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">ref</span> <span class="Constant">[]</span> <span class="Statement">in<br/></li>
<li><a id="L744">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">env1</span></span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;env&quot;</span> <span class="Statement">and</span> <span class="ocamlLCIdentifier"><span class="linkable">env1</span></span>' <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;env'&quot;</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">copy_env</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">top</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L366" title="ocaml/lambda/lambda.mli:366">lambda_unit</a></span> <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Lifused</span><span class="Statement">(</span><span class="ocamlLCIdentifier">env2</span>, <span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Psetfield_computed</span> <span class="Statement">(</span><span class="Constant">Pointer</span>, <span class="Constant">Assignment</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L461" title="ocaml/lambda/translcore.ml:461">self</a></span><span class="Statement">;</span> <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">env2</span><span class="Statement">;</span> <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L744" title="ocaml/lambda/translclass.ml:744">env1</a></span>'<span class="Statement">]</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Loc_unknown</span><span class="Statement">))<br/></li>
<li></span>&nbsp; <span class="Statement">and</span> <span class="ocamlLCIdentifier">subst_env</span> <span class="ocamlLCIdentifier"><a href="#L221" title="ocaml/lambda/translclass.ml:221">envs</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">top</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; <span class="Comment">(* must be called only once! *)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">=</span> <span class="PreProc">Lambda</span>.<span class="ocamlLCIdentifier"><a href="simplif.ml.html#L475" title="ocaml/lambda/simplif.ml:475">subst</a></span> <span class="ocamlLCIdentifier"><a href="#L720" title="ocaml/lambda/translclass.ml:720">no_env_update</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="simplif.ml.html#L475" title="ocaml/lambda/simplif.ml:475">subst</a></span> <span class="ocamlLCIdentifier"><a href="#L744" title="ocaml/lambda/translclass.ml:744">env1</a></span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Constant">1</span> <span class="ocamlLCIdentifier"><a href="#L743" title="ocaml/lambda/translclass.ml:743">new_ids_init</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">Alias</span>, <span class="Constant">Pgenval</span>, <span class="ocamlLCIdentifier"><a href="#L744" title="ocaml/lambda/translclass.ml:744">env1</a></span>, <span class="Statement">(if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">[]</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L221" title="ocaml/lambda/translclass.ml:221">envs</a></span> <span class="Statement">else</span> <span class="ocamlLCIdentifier"><a href="#L66" title="ocaml/lambda/translclass.ml:66">lfield</a></span> <span class="ocamlLCIdentifier"><a href="#L221" title="ocaml/lambda/translclass.ml:221">envs</a></span> <span class="Constant">0</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; <span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">Alias</span>, <span class="Constant">Pgenval</span>, <span class="ocamlLCIdentifier"><a href="#L744" title="ocaml/lambda/translclass.ml:744">env1</a></span>',<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(if</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L743" title="ocaml/lambda/translclass.ml:743">new_ids_init</a></span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">[]</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L744" title="ocaml/lambda/translclass.ml:744">env1</a></span> <span class="Statement">else</span> <span class="ocamlLCIdentifier"><a href="#L66" title="ocaml/lambda/translclass.ml:66">lfield</a></span> <span class="ocamlLCIdentifier"><a href="#L744" title="ocaml/lambda/translclass.ml:744">env1</a></span> <span class="Constant">0</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span><span class="Statement">))<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span><br/></li>
<li>&nbsp; <span class="Comment">(* Now we <a href="matching.ml.html#L535" title="ocaml/lambda/matching.ml:535">start</a> compiling the class *)<br/></li>
<li><a id="L761">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">cla</span></span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;class&quot;</span> <span class="Statement">in<br/></li>
<li><a id="L762">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><span class="linkable">inh_init</span></span>, <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span><span class="Statement">)</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L211" title="ocaml/lambda/translclass.ml:211">build_object_init_0</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span> <span class="Constant">[]</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="ocamlLCIdentifier">copy_env</span> <span class="ocamlLCIdentifier">subst_env</span> <span class="ocamlLCIdentifier">top</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a></span> <span class="Statement">in<br/></li>
<li><a id="L764">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>' <span class="Statement">=</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">rev</span> <span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span> <span class="Statement">in<br/></li>
<li><a id="L765">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>', <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="Statement">)</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L277" title="ocaml/lambda/translclass.ml:277">build_class_init</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span> <span class="Constant">true</span> <span class="Statement">(</span><span class="Constant">[]</span>,<span class="Constant">[]</span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>' <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="ocamlLCIdentifier"><a href="#L721" title="ocaml/lambda/translclass.ml:721">msubst</a></span> <span class="ocamlLCIdentifier">top</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a><br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">assert</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span>' <span class="Statement">=</span> <span class="Constant">[]</span><span class="Statement">);<br/></li>
<li><a id="L769">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">table</span></span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;<span class="linkable">table</span>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">and</span> <span class="ocamlLCIdentifier">class_init</span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Statement">(</span><span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier"><a href="translcore.ml.html#L56" title="ocaml/lambda/translcore.ml:56">name</a></span> <span class="ocamlLCIdentifier">cl_id</span> <span class="Statement">^</span> <span class="Constant">&quot;_init&quot;</span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">and</span> <span class="ocamlLCIdentifier">env_init</span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;env_init&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">and</span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;<a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a>&quot;</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">pub_meths</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">sort<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(fun</span> <span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span> <span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span>' <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L188" title="ocaml/lambda/debuginfo.ml:188">compare</a></span> <span class="Statement">(</span><span class="PreProc">Btype</span>.<span class="ocamlLCIdentifier">hash_variant</span> <span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span><span class="Statement">)</span> <span class="Statement">(</span><span class="PreProc">Btype</span>.<span class="ocamlLCIdentifier">hash_variant</span> <span class="ocamlLCIdentifier"><a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a></span>'<span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">pub_meths</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">tags</span> <span class="Statement">=</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="PreProc">Btype</span>.<span class="ocamlLCIdentifier">hash_variant</span> <span class="ocamlLCIdentifier">pub_meths</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">rev_map</span> <span class="Statement">=</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L525" title="ocaml/lambda/matching.ml:525">combine</a></span> <span class="ocamlLCIdentifier">tags</span> <span class="ocamlLCIdentifier">pub_meths</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">iter2<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(fun</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L339" title="ocaml/lambda/translcore.ml:339">tag</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L56" title="ocaml/lambda/translcore.ml:56">name</a></span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L56" title="ocaml/lambda/translcore.ml:56">name</a></span>' <span class="Statement">=</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">assoc</span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L339" title="ocaml/lambda/translcore.ml:339">tag</a></span> <span class="ocamlLCIdentifier">rev_map</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L56" title="ocaml/lambda/translcore.ml:56">name</a></span><span class="ocamlNone">' </span><span class="Statement">&lt;&gt;</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L56" title="ocaml/lambda/translcore.ml:56">name</a></span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="Statement">raise(</span><span class="Constant">Error</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>.<span class="ocamlLCIdentifier">cl_loc</span>, <span class="Constant">Tags</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L56" title="ocaml/lambda/translcore.ml:56">name</a></span>, <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L56" title="ocaml/lambda/translcore.ml:56">name</a></span>'<span class="Statement">))))<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier">tags</span> <span class="ocamlLCIdentifier">pub_meths</span><span class="Statement">;<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">ltable</span> <span class="ocamlLCIdentifier"><a href="#L769" title="ocaml/lambda/translclass.ml:769">table</a></span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">Strict</span>, <span class="Constant">Pgenval</span>, <span class="ocamlLCIdentifier"><a href="#L769" title="ocaml/lambda/translclass.ml:769">table</a></span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L21" title="ocaml/lambda/translobj.ml:21">oo_prim</a></span> <span class="Constant">&quot;create_table&quot;</span>, <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L71" title="ocaml/lambda/translclass.ml:71">transl_meth_list</a></span> <span class="ocamlLCIdentifier">pub_meths</span><span class="Statement">])</span>, <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">and</span> <span class="ocamlLCIdentifier">ldirect</span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">Strict</span>, <span class="Constant">Pgenval</span>, <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span>, <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">Lsequence</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L21" title="ocaml/lambda/translobj.ml:21">oo_prim</a></span> <span class="Constant">&quot;init_class&quot;</span>, <span class="Statement">[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span><span class="Statement">])</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span> <span class="Statement">(</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span>, <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="lambda.mli.html#L366" title="ocaml/lambda/lambda.mli:366">lambda_unit</a></span><span class="Statement">])))<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Comment">(* Simplest case: an object defined at toplevel (<a href="translcore.ml.html#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a>=[]) *)<br/></li>
<li></span>&nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">top</span><span class="ocamlNone"> </span><span class="Statement">&amp;&amp;</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a></span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">[]</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier"><a href="tmc.ml.html#L554" title="ocaml/lambda/tmc.ml:554">llets</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier">ltable</span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier">ldirect</span> <span class="ocamlLCIdentifier"><a href="#L224" title="ocaml/lambda/translclass.ml:224">obj_init</a></span><span class="Statement">))</span> <span class="Statement">else<br/></li>
<li></span><br/></li>
<li>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">concrete</span> <span class="Statement">=</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">vflag</span> <span class="Statement">=</span> <span class="Constant">Concrete</span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">and</span> <span class="ocamlLCIdentifier">lclass</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="tmc.ml.html#L554" title="ocaml/lambda/tmc.ml:554">llets</a></span> <span class="Statement">(</span><span class="PreProc">Lambda</span>.<span class="ocamlLCIdentifier"><a href="#L30" title="ocaml/lambda/translclass.ml:30">lfunction</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">~</span><span class="Identifier"><a href="translcore.ml.html#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span>:<span class="Constant">Curried<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">~</span><span class="Identifier"><a href="simplif.ml.html#L760" title="ocaml/lambda/simplif.ml:760">attr</a></span>:<span class="ocamlLCIdentifier"><a href="lambda.mli.html#L451" title="ocaml/lambda/lambda.mli:451">default_function_attribute</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">~</span><span class="Identifier"><a href="translcore.ml.html#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span>:<span class="Constant">Loc_unknown<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">~</span><span class="Identifier">return</span>:<span class="Constant">Pgenval<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">~</span><span class="Identifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span>:<span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span>, <span class="Constant">Pgenval</span><span class="Statement">]</span> <span class="Statement">~</span><span class="Identifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span>:<span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="Statement">)</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">Strict</span>, <span class="Constant">Pgenval</span>, <span class="ocamlLCIdentifier">class_init</span>, <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span>, <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="lambda.mli.html#L401" title="ocaml/lambda/lambda.mli:401">free_variables</a></span> <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="Statement">))<br/></li>
<li></span>&nbsp; <span class="Statement">and</span> <span class="ocamlLCIdentifier">lbody</span> <span class="ocamlLCIdentifier"><a href="#L710" title="ocaml/lambda/translclass.ml:710">fv</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="PreProc">List</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">for_all</span><span class="ocamlNone"> </span><span class="Statement">(fun</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span><span class="ocamlNone"> </span><span class="Statement">-&gt;</span><span class="ocamlNone"> </span><span class="Statement">not</span><span class="ocamlNone"> </span><span class="Statement">(</span><span class="PreProc">Ident</span><span class="ocamlNone">.</span><span class="PreProc">Set</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">mem</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L710" title="ocaml/lambda/translclass.ml:710">fv</a></span><span class="Statement">))</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a></span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L21" title="ocaml/lambda/translobj.ml:21">oo_prim</a></span> <span class="Constant">&quot;make_class&quot;</span>,<span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L71" title="ocaml/lambda/translclass.ml:71">transl_meth_list</a></span> <span class="ocamlLCIdentifier">pub_meths</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">class_init</span><span class="Statement">])<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">ltable</span> <span class="ocamlLCIdentifier"><a href="#L769" title="ocaml/lambda/translclass.ml:769">table</a></span> <span class="Statement">(<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Llet</span><span class="Statement">(<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Strict</span>, <span class="Constant">Pgenval</span>, <span class="ocamlLCIdentifier">env_init</span>, <span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span> <span class="Statement">(</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">class_init</span>, <span class="Statement">[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L769" title="ocaml/lambda/translclass.ml:769">table</a></span><span class="Statement">])</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Constant">Lsequence</span><span class="Statement">(<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L21" title="ocaml/lambda/translobj.ml:21">oo_prim</a></span> <span class="Constant">&quot;init_class&quot;</span>, <span class="Statement">[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L769" title="ocaml/lambda/translclass.ml:769">table</a></span><span class="Statement">])</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pmakeblock</span><span class="Statement">(</span><span class="Constant">0</span>, <span class="Constant">Immutable</span>, <span class="Constant">None</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span> <span class="Statement">(</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">env_init</span>, <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="lambda.mli.html#L366" title="ocaml/lambda/lambda.mli:366">lambda_unit</a></span><span class="Statement">]);<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">class_init</span><span class="Statement">;</span> <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">env_init</span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L366" title="ocaml/lambda/lambda.mli:366">lambda_unit</a></span><span class="Statement">]</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Loc_unknown</span><span class="Statement">))))<br/></li>
<li></span>&nbsp; <span class="Statement">and</span> <span class="ocamlLCIdentifier">lbody_virt</span> <span class="ocamlLCIdentifier">lenvs</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pmakeblock</span><span class="Statement">(</span><span class="Constant">0</span>, <span class="Constant">Immutable</span>, <span class="Constant">None</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="lambda.mli.html#L366" title="ocaml/lambda/lambda.mli:366">lambda_unit</a></span><span class="Statement">;</span> <span class="PreProc">Lambda</span>.<span class="ocamlLCIdentifier"><a href="#L30" title="ocaml/lambda/translclass.ml:30">lfunction</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier"><a href="translcore.ml.html#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span>:<span class="Constant">Curried<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier"><a href="simplif.ml.html#L760" title="ocaml/lambda/simplif.ml:760">attr</a></span>:<span class="ocamlLCIdentifier"><a href="lambda.mli.html#L451" title="ocaml/lambda/lambda.mli:451">default_function_attribute</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier"><a href="translcore.ml.html#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span>:<span class="Constant">Loc_unknown<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier">return</span>:<span class="Constant">Pgenval<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span>:<span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span>, <span class="Constant">Pgenval</span><span class="Statement">]</span> <span class="Statement">~</span><span class="Identifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span>:<span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L366" title="ocaml/lambda/lambda.mli:366">lambda_unit</a></span><span class="Statement">;</span> <span class="ocamlLCIdentifier">lenvs</span><span class="Statement">]</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">Loc_unknown</span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Comment">(* Still easy: a class defined at toplevel *)<br/></li>
<li></span>&nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">top</span><span class="ocamlNone"> </span><span class="Statement">&amp;&amp;</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">concrete</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier">lclass</span> <span class="ocamlLCIdentifier">lbody</span> <span class="Statement">else<br/></li>
<li></span>&nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">top</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier"><a href="tmc.ml.html#L554" title="ocaml/lambda/tmc.ml:554">llets</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier">lbody_virt</span> <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L366" title="ocaml/lambda/lambda.mli:366">lambda_unit</a></span><span class="Statement">)</span> <span class="Statement">else<br/></li>
<li></span><br/></li>
<li>&nbsp; <span class="Comment">(* Now for the hard stuff: prepare for <a href="#L769" title="ocaml/lambda/translclass.ml:769">table</a> caching *)<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L221" title="ocaml/lambda/translclass.ml:221">envs</a></span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;<a href="#L221" title="ocaml/lambda/translclass.ml:221">envs</a>&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">and</span> <span class="ocamlLCIdentifier">cached</span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;cached&quot;</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">lenvs</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L719" title="ocaml/lambda/translclass.ml:719">new_ids_meths</a></span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">[]</span><span class="ocamlNone"> </span><span class="Statement">&amp;&amp;</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L743" title="ocaml/lambda/translclass.ml:743">new_ids_init</a></span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">[]</span><span class="ocamlNone"> </span><span class="Statement">&amp;&amp;</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">[]<br/></li>
<li></span><span class="ocamlNone">&nbsp; &nbsp; </span><span class="Statement">then</span> <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L366" title="ocaml/lambda/lambda.mli:366">lambda_unit</a><br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">else</span> <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L221" title="ocaml/lambda/translclass.ml:221">envs</a></span> <span class="Statement">in<br/></li>
<li><a id="L840">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">lenv</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">menv</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L719" title="ocaml/lambda/translclass.ml:719">new_ids_meths</a></span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">[]</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L366" title="ocaml/lambda/lambda.mli:366">lambda_unit</a></span> <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pmakeblock</span><span class="Statement">(</span><span class="Constant">0</span>, <span class="Constant">Immutable</span>, <span class="Constant">None</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="Statement">(fun</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="Statement">-&gt;</span> <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span><span class="Statement">)</span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L719" title="ocaml/lambda/translclass.ml:719">new_ids_meths</a></span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Loc_unknown</span><span class="Statement">)</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L743" title="ocaml/lambda/translclass.ml:743">new_ids_init</a></span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">[]</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier">menv</span> <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pmakeblock</span><span class="Statement">(</span><span class="Constant">0</span>, <span class="Constant">Immutable</span>, <span class="Constant">None</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">menv</span> <span class="Statement">::</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="Statement">(fun</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="Statement">-&gt;</span> <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span><span class="Statement">)</span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L743" title="ocaml/lambda/translclass.ml:743">new_ids_init</a></span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Loc_unknown</span><span class="Statement">)<br/></li>
<li><a id="L850">&#x200c;</a></span>&nbsp; <span class="Statement">and</span> <span class="ocamlLCIdentifier"><span class="linkable">linh_envs</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(fun</span> <span class="Statement">(_</span>, <span class="ocamlLCIdentifier">path_lam</span>, <span class="Statement">_)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pfield</span> <span class="Statement">(</span><span class="Constant">3</span>, <span class="Constant">Pointer</span>, <span class="Constant">Mutable</span><span class="Statement">)</span>, <span class="Statement">[</span><span class="ocamlLCIdentifier">path_lam</span><span class="Statement">]</span>, <span class="Constant">Loc_unknown</span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="PreProc">List</span>.<span class="ocamlLCIdentifier">rev</span> <span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li><a id="L856">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">make_envs</span></span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">StrictOpt</span>, <span class="Constant">Pgenval</span>, <span class="ocamlLCIdentifier"><a href="#L221" title="ocaml/lambda/translclass.ml:221">envs</a></span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L850" title="ocaml/lambda/translclass.ml:850">linh_envs</a></span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">[]</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier"><a href="#L840" title="ocaml/lambda/translclass.ml:840">lenv</a></span> <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pmakeblock</span><span class="Statement">(</span><span class="Constant">0</span>, <span class="Constant">Immutable</span>, <span class="Constant">None</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L840" title="ocaml/lambda/translclass.ml:840">lenv</a></span> <span class="Statement">::</span> <span class="ocamlLCIdentifier"><a href="#L850" title="ocaml/lambda/translclass.ml:850">linh_envs</a></span>, <span class="Constant">Loc_unknown</span><span class="Statement">))</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">and</span> <span class="ocamlLCIdentifier">def_ids</span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">StrictOpt</span>, <span class="Constant">Pgenval</span>, <span class="ocamlLCIdentifier">env2</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L21" title="ocaml/lambda/translobj.ml:21">oo_prim</a></span> <span class="Constant">&quot;new_variable&quot;</span>, <span class="Statement">[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="#L69" title="ocaml/lambda/translclass.ml:69">transl_label</a></span> <span class="Constant">&quot;&quot;</span><span class="Statement">])</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">inh_paths</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">filter<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(fun</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L444" title="ocaml/lambda/translclass.ml:444">path</a></span>, <span class="Statement">_</span>, <span class="Statement">_)</span> <span class="Statement">-&gt;</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">mem</span> <span class="Statement">(</span><span class="PreProc">Path</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L263" title="ocaml/lambda/matching.ml:263">head</a></span> <span class="ocamlLCIdentifier"><a href="#L444" title="ocaml/lambda/translclass.ml:444">path</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L744" title="ocaml/lambda/simplif.ml:744">new_ids</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="#L108" title="ocaml/lambda/translclass.ml:108">inh_init</a><br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">inh_keys</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(fun</span> <span class="Statement">(_</span>, <span class="ocamlLCIdentifier">path_lam</span>, <span class="Statement">_)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pfield</span> <span class="Statement">(</span><span class="Constant">1</span>, <span class="Constant">Pointer</span>, <span class="Constant">Mutable</span><span class="Statement">)</span>, <span class="Statement">[</span><span class="ocamlLCIdentifier">path_lam</span><span class="Statement">]</span>, <span class="Constant">Loc_unknown</span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">inh_paths<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">lclass</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">Strict</span>, <span class="Constant">Pgenval</span>, <span class="ocamlLCIdentifier">class_init</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="PreProc">Lambda</span>.<span class="ocamlLCIdentifier"><a href="#L30" title="ocaml/lambda/translclass.ml:30">lfunction</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">~</span><span class="Identifier"><a href="translcore.ml.html#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span>:<span class="Constant">Curried</span> <span class="Statement">~</span><span class="Identifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span>:<span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span>, <span class="Constant">Pgenval</span><span class="Statement">]<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">~</span><span class="Identifier">return</span>:<span class="Constant">Pgenval<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">~</span><span class="Identifier"><a href="simplif.ml.html#L760" title="ocaml/lambda/simplif.ml:760">attr</a></span>:<span class="ocamlLCIdentifier"><a href="lambda.mli.html#L451" title="ocaml/lambda/lambda.mli:451">default_function_attribute</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">~</span><span class="Identifier"><a href="translcore.ml.html#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span>:<span class="Constant">Loc_unknown<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">~</span><span class="Identifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span>:<span class="Statement">(</span><span class="ocamlLCIdentifier">def_ids</span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span> <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="Statement">)</span>, <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">and</span> <span class="ocamlLCIdentifier">lcache</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">inh_keys</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">[]</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">Alias</span>, <span class="Constant">Pgenval</span>, <span class="ocamlLCIdentifier">cached</span>, <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">tables</span>, <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span><span class="Statement">)</span> <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">Strict</span>, <span class="Constant">Pgenval</span>, <span class="ocamlLCIdentifier">cached</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L21" title="ocaml/lambda/translobj.ml:21">oo_prim</a></span> <span class="Constant">&quot;lookup_tables&quot;</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">tables</span><span class="Statement">;</span> <span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pmakeblock</span><span class="Statement">(</span><span class="Constant">0</span>, <span class="Constant">Immutable</span>, <span class="Constant">None</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">inh_keys</span>, <span class="Constant">Loc_unknown</span><span class="Statement">)])</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">and</span> <span class="ocamlLCIdentifier">lset</span> <span class="ocamlLCIdentifier">cached</span> <span class="ocamlLCIdentifier"><a href="#L713" title="ocaml/lambda/translclass.ml:713">i</a></span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Psetfield</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L713" title="ocaml/lambda/translclass.ml:713">i</a></span>, <span class="Constant">Pointer</span>, <span class="Constant">Assignment</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">cached</span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span><span class="Statement">]</span>, <span class="Constant">Loc_unknown</span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">ldirect</span> <span class="Constant">()</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier">ltable</span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">Strict</span>, <span class="Constant">Pgenval</span>, <span class="ocamlLCIdentifier">env_init</span>, <span class="ocamlLCIdentifier">def_ids</span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span> <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Lsequence</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L21" title="ocaml/lambda/translobj.ml:21">oo_prim</a></span> <span class="Constant">&quot;init_class&quot;</span>, <span class="Statement">[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span><span class="Statement">])</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">lset</span> <span class="ocamlLCIdentifier">cached</span> <span class="Constant">0</span> <span class="Statement">(</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">env_init</span><span class="Statement">))))<br/></li>
<li></span>&nbsp; <span class="Statement">and</span> <span class="ocamlLCIdentifier">lclass_virt</span> <span class="Constant">()</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier">lset</span> <span class="ocamlLCIdentifier">cached</span> <span class="Constant">0<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="PreProc">Lambda</span>.<span class="ocamlLCIdentifier"><a href="#L30" title="ocaml/lambda/translclass.ml:30">lfunction</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">~</span><span class="Identifier"><a href="translcore.ml.html#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span>:<span class="Constant">Curried<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">~</span><span class="Identifier"><a href="simplif.ml.html#L760" title="ocaml/lambda/simplif.ml:760">attr</a></span>:<span class="ocamlLCIdentifier"><a href="lambda.mli.html#L451" title="ocaml/lambda/lambda.mli:451">default_function_attribute</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">~</span><span class="Identifier"><a href="translcore.ml.html#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span>:<span class="Constant">Loc_unknown<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">~</span><span class="Identifier">return</span>:<span class="Constant">Pgenval<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">~</span><span class="Identifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span>:<span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span>, <span class="Constant">Pgenval</span><span class="Statement">]<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">~</span><span class="Identifier"><a href="translcore.ml.html#L601" title="ocaml/lambda/translcore.ml:601">body</a></span>:<span class="Statement">(</span><span class="ocamlLCIdentifier">def_ids</span> <span class="ocamlLCIdentifier"><a href="#L761" title="ocaml/lambda/translclass.ml:761">cla</a></span> <span class="ocamlLCIdentifier"><a href="#L341" title="ocaml/lambda/translclass.ml:341">cl_init</a></span><span class="Statement">))<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">lupdate_cache</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a></span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">[]</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier">ldirect</span> <span class="Constant">()</span> <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="Statement">not</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">concrete</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier">lclass_virt</span> <span class="Constant">()</span> <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">lclass</span> <span class="Statement">(<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L21" title="ocaml/lambda/translobj.ml:21">oo_prim</a></span> <span class="Constant">&quot;make_class_store&quot;</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L71" title="ocaml/lambda/translclass.ml:71">transl_meth_list</a></span> <span class="ocamlLCIdentifier">pub_meths</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">class_init</span><span class="Statement">;</span> <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">cached</span><span class="Statement">]))</span> <span class="Statement">in<br/></li>
<li><a id="L918">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">lcheck_cache</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="PreProc">Clflags</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">native_code</span><span class="ocamlNone"> </span><span class="Statement">&amp;&amp;</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="PreProc">Clflags</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">afl_instrument</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Comment">(* When afl-fuzz instrumentation is <a href="simplif.ml.html#L803" title="ocaml/lambda/simplif.ml:803">enabled</a>, ignore the cache<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; so that the <a href="printlambda.ml.html#L707" title="ocaml/lambda/printlambda.ml:707">program</a>'<a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a> behaviour does not change between runs *)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">lupdate_cache<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Lifthenelse</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L66" title="ocaml/lambda/translclass.ml:66">lfield</a></span> <span class="ocamlLCIdentifier">cached</span> <span class="Constant">0</span>, <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L366" title="ocaml/lambda/lambda.mli:366">lambda_unit</a></span>, <span class="ocamlLCIdentifier">lupdate_cache</span><span class="Statement">)</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="tmc.ml.html#L554" title="ocaml/lambda/tmc.ml:554">llets</a></span> <span class="Statement">(<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier">lcache</span> <span class="Statement">(<br/></li>
<li></span>&nbsp; <span class="Constant">Lsequence</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L918" title="ocaml/lambda/translclass.ml:918">lcheck_cache</a></span>,<br/></li>
<li>&nbsp; <span class="ocamlLCIdentifier"><a href="#L856" title="ocaml/lambda/translclass.ml:856">make_envs</a></span> <span class="Statement">(<br/></li>
<li></span>&nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a></span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">[]</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L66" title="ocaml/lambda/translclass.ml:66">lfield</a></span> <span class="ocamlLCIdentifier">cached</span> <span class="Constant">0</span>, <span class="Statement">[</span><span class="ocamlLCIdentifier">lenvs</span><span class="Statement">])</span> <span class="Statement">else<br/></li>
<li></span>&nbsp; <span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pmakeblock</span><span class="Statement">(</span><span class="Constant">0</span>, <span class="Constant">Immutable</span>, <span class="Constant">None</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">concrete</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L53" title="ocaml/lambda/translclass.ml:53">mkappl</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L66" title="ocaml/lambda/translclass.ml:66">lfield</a></span> <span class="ocamlLCIdentifier">cached</span> <span class="Constant">0</span>, <span class="Statement">[</span><span class="ocamlLCIdentifier">lenvs</span><span class="Statement">]);<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L66" title="ocaml/lambda/translclass.ml:66">lfield</a></span> <span class="ocamlLCIdentifier">cached</span> <span class="Constant">1</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L66" title="ocaml/lambda/translclass.ml:66">lfield</a></span> <span class="ocamlLCIdentifier">cached</span> <span class="Constant">0</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">lenvs</span><span class="Statement">]<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else</span> <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="lambda.mli.html#L366" title="ocaml/lambda/lambda.mli:366">lambda_unit</a></span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="#L66" title="ocaml/lambda/translclass.ml:66">lfield</a></span> <span class="ocamlLCIdentifier">cached</span> <span class="Constant">0</span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L366" title="ocaml/lambda/lambda.mli:366">lambda_unit</a></span><span class="Statement">;</span> <span class="ocamlLCIdentifier">lenvs</span><span class="Statement">])</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Loc_unknown<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">)))))<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Wrapper for class compilation *)<br/></li>
<li></span><span class="Comment">(*<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; let cl_id = ci.ci_id_class in<br/></li>
<li></span><span class="Comment">(* </span><span class="Todo">TODO</span><span class="Comment">: cl_id is used somewhere else as typesharp ? *)<br/></li>
<li></span><span class="Comment">&nbsp; let _arity = List.length ci.ci_params in<br/></li>
<li></span><span class="Comment">&nbsp; let pub_meths = m in<br/></li>
<li></span><span class="Comment">&nbsp; let <a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a> = ci.ci_expr in<br/></li>
<li></span><span class="Comment">&nbsp; let vflag = vf in<br/></li>
<li></span><span class="Comment">*)<br/></li>
<li></span><br/></li>
<li><a id="L950">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">transl_class</span></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a></span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="ocamlLCIdentifier">pub_meths</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="ocamlLCIdentifier">vf</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L165" title="ocaml/lambda/translobj.ml:165">oo_wrap</a></span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>.<span class="ocamlLCIdentifier">cl_env</span> <span class="Constant">false</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L683" title="ocaml/lambda/translclass.ml:683">transl_class</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="translcore.ml.html#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a></span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="ocamlLCIdentifier">pub_meths</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier">vf<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Constant">()</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="translcore.mli.html#L56" title="ocaml/lambda/translcore.mli:56">transl_object</a></span> <span class="Statement">:=</span> <span class="Statement">(fun</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="ocamlLCIdentifier">meths</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L683" title="ocaml/lambda/translclass.ml:683">transl_class</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="Constant">[]</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="ocamlLCIdentifier">meths</span> <span class="ocamlLCIdentifier"><a href="#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="Constant">Concrete</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Error report *)<br/></li>
<li></span><br/></li>
<li><span class="Statement"><a href="matching.ml.html#L419" title="ocaml/lambda/matching.ml:419">open</a></span><span class="ocamlNone"> </span><span class="PreProc">Format<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="translprim.mli.html#L54" title="ocaml/lambda/translprim.mli:54">report_error</a></span> <span class="ocamlLCIdentifier">ppf</span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tags</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">lab1</span>, <span class="ocamlLCIdentifier">lab2</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">fprintf</span> <span class="ocamlLCIdentifier">ppf</span> <span class="Constant">&quot;Method labels `%<a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a>' and `%<a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a>' are incompatible.@ %<a href="#L563" title="ocaml/lambda/translclass.ml:563">s</a>&quot;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">lab1</span> <span class="ocamlLCIdentifier">lab2</span> <span class="Constant">&quot;Change one of them.&quot;<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Constant">()</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="PreProc">Location</span>.<span class="ocamlLCIdentifier">register_error_of_exn<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(function<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Error</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translcore.ml.html#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span>, <span class="ocamlLCIdentifier">err</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Some</span> <span class="Statement">(</span><span class="PreProc">Location</span>.<span class="ocamlLCIdentifier">error_of_printer</span> <span class="Statement">~</span><span class="Identifier"><a href="translcore.ml.html#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier"><a href="translprim.mli.html#L54" title="ocaml/lambda/translprim.mli:54">report_error</a></span> <span class="ocamlLCIdentifier">err</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">None<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">)<br/></li>
</ol></span></code>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="index.html">Top Level</a></span>
 </p>

 </body>
</html>
