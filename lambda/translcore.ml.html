<!-- generated by the vscode.pl tool from vscoded.-->

<html>
 <head>
  <title>ocaml/lambda/translcore.ml - ocaml</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

.nav-bar {
    font-size: 120%;
    margin-top: 5px;
    margin-bottom: 5px;
}

.nav-link {
    padding-left: 5em;
    padding-right: 5em;
}

ul.toc {
    line-height: 200%;
    font-size: 150%;
}

code {
    font-family: consolas, monospace;
    line-height: 130%;
}

span.Constant {
    color: DarkGreen;
}

span.Special {
    color: #c06000;
}

span.Comment {
    color: DarkRed;
    font-style: italic;
}

span.Identifier {
    color: DarkCyan;
}

span.PreProc {
    color: DarkMagenta;
}

span.Statement, span.Type, span.Keyword, span.Repeat, span.Conditional,
    span.Operator, span.Exception
{
    color: DarkBlue;
}

span.Todo {
    color: DarkRed;
    background-color: Gold;
    font-style: italic;
}

span.Underlined {
    text-decoration: underline;
}

span.linkable {
    font-weight: bold;
}

code ol {
    counter-reset: item;
    list-style-type: none;
    margin-left: 0;
    padding-left: 0;
    list-style-position: inside;
}

code li {
    display: block;
}

code li:before {
    content: counter(item) "  ";
    counter-increment: item;
    color: #999;
    padding-right: 0.5em;
    padding-left: 0.4em;
    list-style-position: inside;
    text-align: right
}

  </style>
 </head>
 <body>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="index.html">Top Level</a></span>
 </p>

  <h1>ocaml/lambda/translcore.ml - ocaml</h1>
 <h2>Global variables defined</h2>
 <ul class="toc">
<li><a href="#L370">access</a></li>
<li><a href="#L601">body</a></li>
<li><a href="#L712">body</a></li>
<li><a href="#L578">cl</a></li>
<li><a href="#L1100">classic</a></li>
<li><a href="#L997">copy_id</a></li>
<li><a href="#L495">cpy</a></li>
<li><a href="#L577">cty</a></li>
<li><a href="#L516">defining_expr</a></li>
<li><a href="#L154">event_before</a></li>
<li><a href="#L1144">exp</a></li>
<li><a href="#L1162">exp</a></li>
<li><a href="#L76">extract_constant</a></li>
<li><a href="#L80">extract_float</a></li>
<li><a href="#L567">fn</a></li>
<li><a href="#L1163">func</a></li>
<li><a href="#L707">handle</a></li>
<li><a href="#L711">id_arg</a></li>
<li><a href="#L906">idlist</a></li>
<li><a href="#L1050">ids</a></li>
<li><a href="#L1049">ids_full</a></li>
<li><a href="#L1051">ids_kinds</a></li>
<li><a href="#L408">imm_array</a></li>
<li><a href="#L415">imm_array</a></li>
<li><a href="#L198">iter_exn_names</a></li>
<li><a href="#L383">kind</a></li>
<li><a href="#L708">l</a></li>
<li><a href="#L343">lam</a></li>
<li><a href="#L449">lam</a></li>
<li><a href="#L512">lam</a></li>
<li><a href="#L914">lam</a></li>
<li><a href="#L915">lam</a></li>
<li><a href="#L1145">lam</a></li>
<li><a href="#L919">lam_bds</a></li>
<li><a href="#L1043">lbl</a></li>
<li><a href="#L384">ll</a></li>
<li><a href="#L62">loc</a></li>
<li><a href="#L471">loc</a></li>
<li><a href="#L483">loc</a></li>
<li><a href="#L488">loc</a></li>
<li><a href="#L493">loc</a></li>
<li><a href="#L56">name</a></li>
<li><a href="#L600">oid</a></li>
<li><a href="#L1140">op</a></li>
<li><a href="#L1158">op</a></li>
<li><a href="#L592">pure</a></li>
<li><a href="#L614">pure_module</a></li>
<li><a href="#L104">push_defaults</a></li>
<li><a href="#L150">push_defaults</a></li>
<li><a href="#L1056">pv</a></li>
<li><a href="#L1201">report_error</a></li>
<li><a href="#L1059">rhs</a></li>
<li><a href="#L1139">right_id</a></li>
<li><a href="#L461">self</a></li>
<li><a href="#L484">self</a></li>
<li><a href="#L489">self</a></li>
<li><a href="#L494">self</a></li>
<li><a href="#L1091">static_catch</a></li>
<li><a href="#L1044">static_raise</a></li>
<li><a href="#L339">tag</a></li>
<li><a href="#L356">targ</a></li>
<li><a href="#L913">transl_case</a></li>
<li><a href="#L741">transl_curried_function</a></li>
<li><a href="#L216">transl_exp</a></li>
<li><a href="#L206">transl_ident</a></li>
<li><a href="#L1134">transl_letop</a></li>
<li><a href="#L1026">transl_match</a></li>
<li><a href="#L37">transl_module</a></li>
<li><a href="#L922">transl_setinstvar</a></li>
<li><a href="#L998">update_field</a></li>
<li><a href="#L34">use_dup_for_constant_arrays_bigger_than</a></li>
<li><a href="#L1070">val_cases</a></li>
<li><a href="#L485">var</a></li>
<li><a href="#L490">var</a></li>
<li><a href="#L1055">vids</a></li>
<li><a href="#L86">wrap_bindings</a></li>
</ul>
 <h2>Data types defined</h2>
 <ul class="toc">
<li><a href="#L28">error</a></li>
</ul>
 <h2>Source code</h2>

  <code><ol><li><span class="Comment">(**************************************************************************)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; OCaml&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Xavier Leroy, projet Cristal, INRIA Rocquencourt&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; Copyright 1996 Institut National de Recherche en Informatique et&nbsp; &nbsp;&nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp;&nbsp; en Automatique.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; All rights reserved.&nbsp; This file is distributed under the terms of&nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; the GNU Lesser General Public License version 2.1, with the&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; special exception on linking described in the file LICENSE.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(**************************************************************************)<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Translation from typed abstract syntax to <a href="printlambda.ml.html#L705" title="ocaml/lambda/printlambda.ml:705">lambda</a> terms,<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; for the <a href="translclass.ml.html#L393" title="ocaml/lambda/translclass.ml:393">core</a> language *)<br/></li>
<li></span><br/></li>
<li><span class="Statement"><a href="matching.ml.html#L419" title="ocaml/lambda/matching.ml:419">open</a></span><span class="ocamlNone"> </span><span class="PreProc">Misc<br/></li>
<li></span><span class="Statement"><a href="matching.ml.html#L419" title="ocaml/lambda/matching.ml:419">open</a></span><span class="ocamlNone"> </span><span class="PreProc">Asttypes<br/></li>
<li></span><span class="Statement"><a href="matching.ml.html#L419" title="ocaml/lambda/matching.ml:419">open</a></span><span class="ocamlNone"> </span><span class="PreProc">Primitive<br/></li>
<li></span><span class="Statement"><a href="matching.ml.html#L419" title="ocaml/lambda/matching.ml:419">open</a></span><span class="ocamlNone"> </span><span class="PreProc">Types<br/></li>
<li></span><span class="Statement"><a href="matching.ml.html#L419" title="ocaml/lambda/matching.ml:419">open</a></span><span class="ocamlNone"> </span><span class="PreProc">Typedtree<br/></li>
<li></span><span class="Statement"><a href="matching.ml.html#L419" title="ocaml/lambda/matching.ml:419">open</a></span><span class="ocamlNone"> </span><span class="PreProc">Typeopt<br/></li>
<li></span><span class="Statement"><a href="matching.ml.html#L419" title="ocaml/lambda/matching.ml:419">open</a></span><span class="ocamlNone"> </span><span class="PreProc">Lambda<br/></li>
<li></span><span class="Statement"><a href="matching.ml.html#L419" title="ocaml/lambda/matching.ml:419">open</a></span><span class="ocamlNone"> </span><span class="PreProc">Debuginfo.Scoped_location<br/></li>
<li></span><br/></li>
<li><a id="L28">&#x200c;</a><span class="Statement">type</span> <span class="ocamlLCIdentifier"><span class="linkable">error</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Free_super_var<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Unreachable_reached<br/></li>
<li></span><br/></li>
<li><span class="Statement">exception</span> <span class="Constant">Error</span> <span class="Statement">of</span> <span class="PreProc">Location</span>.<span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span> <span class="Statement">*</span> <span class="ocamlLCIdentifier"><a href="translprim.mli.html#L46" title="ocaml/lambda/translprim.mli:46">error</a><br/></li>
<li></span><br/></li>
<li><a id="L34">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">use_dup_for_constant_arrays_bigger_than</span></span> <span class="Statement">=</span> <span class="Constant">4<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Forward declaration -- to be filled in by Translmod.<a href="#L37" title="ocaml/lambda/translcore.ml:37">transl_module</a> *)<br/></li>
<li><a id="L37">&#x200c;</a></span><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">transl_module</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier">ref</span><span class="Statement">((fun</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span>:<span class="Statement">_</span> <span class="ocamlLCIdentifier">_cc</span> <span class="ocamlLCIdentifier">_rootpath</span> <span class="ocamlLCIdentifier">_modl</span> <span class="Statement">-&gt;</span> <span class="Statement">assert</span> <span class="Constant">false</span><span class="Statement">)</span> :<br/></li>
<li>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span>:<span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">module_coercion</span> <span class="Statement">-&gt;</span> <span class="PreProc">Path</span>.<span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span> <span class="Type"><a href="tmc.ml.html#L473" title="ocaml/lambda/tmc.ml:473">option</a></span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">module_expr</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="printlambda.ml.html#L705" title="ocaml/lambda/printlambda.ml:705">lambda</a></span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="translcore.mli.html#L56" title="ocaml/lambda/translcore.mli:56">transl_object</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier">ref</span> <span class="Statement">(fun</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span>:<span class="Statement">_</span> <span class="ocamlLCIdentifier">_id</span> <span class="ocamlLCIdentifier">_s</span> <span class="ocamlLCIdentifier">_cl</span> <span class="Statement">-&gt;</span> <span class="Statement">assert</span> <span class="Constant">false</span> :<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span>:<span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="Statement">-&gt;</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span> <span class="Statement">-&gt;</span> <span class="Type">string</span> <span class="Type"><a href="tmc.ml.html#L478" title="ocaml/lambda/tmc.ml:478">list</a></span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">class_expr</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="printlambda.ml.html#L705" title="ocaml/lambda/printlambda.ml:705">lambda</a></span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Compile an exception/extension definition *)<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="ocamlLCIdentifier">prim_fresh_oo_id</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Constant">Pccall</span> <span class="Statement">(</span><span class="PreProc">Primitive</span>.<span class="ocamlLCIdentifier">simple</span> <span class="Statement">~</span><span class="Identifier"><a href="#L56" title="ocaml/lambda/translcore.ml:56">name</a></span>:<span class="Constant">&quot;caml_fresh_oo_id&quot;</span> <span class="Statement">~</span><span class="Identifier">arity</span>:<span class="Constant">1</span> <span class="Statement">~</span><span class="Identifier">alloc</span>:<span class="Constant">false</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="translcore.mli.html#L36" title="ocaml/lambda/translcore.mli:36">transl_extension_constructor</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">env</span> <span class="ocamlLCIdentifier"><a href="translclass.ml.html#L444" title="ocaml/lambda/translclass.ml:444">path</a></span> <span class="ocamlLCIdentifier">ext</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="translclass.ml.html#L444" title="ocaml/lambda/translclass.ml:444">path</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">Printtyp</span>.<span class="ocamlLCIdentifier">wrap_printing_env</span> <span class="ocamlLCIdentifier">env</span> <span class="Statement">~</span><span class="Identifier"><a href="translprim.mli.html#L46" title="ocaml/lambda/translprim.mli:46">error</a></span>:<span class="Constant">true</span> <span class="Statement">(fun</span> <span class="Constant">()</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="PreProc">Option</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="Statement">(</span><span class="PreProc">Printtyp</span>.<span class="ocamlLCIdentifier">rewrite_double_underscore_paths</span> <span class="ocamlLCIdentifier">env</span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="translclass.ml.html#L444" title="ocaml/lambda/translclass.ml:444">path</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li><a id="L56">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">name</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="translclass.ml.html#L444" title="ocaml/lambda/translclass.ml:444">path</a></span>, <span class="Statement">!</span><span class="PreProc">Clflags</span>.<span class="ocamlLCIdentifier">for_package</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">None</span>, <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier"><a href="#L56" title="ocaml/lambda/translcore.ml:56">name</a></span> <span class="ocamlLCIdentifier">ext</span>.<span class="ocamlLCIdentifier">ext_id<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Some</span> <span class="ocamlLCIdentifier">p</span>, <span class="Constant">None</span> <span class="Statement">-&gt;</span> <span class="PreProc">Path</span>.<span class="ocamlLCIdentifier"><a href="#L56" title="ocaml/lambda/translcore.ml:56">name</a></span> <span class="ocamlLCIdentifier">p<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Some</span> <span class="ocamlLCIdentifier">p</span>, <span class="Constant">Some</span> <span class="ocamlLCIdentifier">pack</span> <span class="Statement">-&gt;</span> <span class="PreProc">Printf</span>.<span class="ocamlLCIdentifier">sprintf</span> <span class="Constant">&quot;%<a href="translclass.ml.html#L563" title="ocaml/lambda/translclass.ml:563">s</a>.%<a href="translclass.ml.html#L563" title="ocaml/lambda/translclass.ml:563">s</a>&quot;</span> <span class="ocamlLCIdentifier">pack</span> <span class="Statement">(</span><span class="PreProc">Path</span>.<span class="ocamlLCIdentifier"><a href="#L56" title="ocaml/lambda/translcore.ml:56">name</a></span> <span class="ocamlLCIdentifier">p</span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li><a id="L62">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">loc</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">ext</span>.<span class="ocamlLCIdentifier">ext_loc</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">ext</span>.<span class="ocamlLCIdentifier">ext_kind</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Text_decl</span> <span class="Statement">_</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Lprim</span> <span class="Statement">(</span><span class="Constant">Pmakeblock</span> <span class="Statement">(</span><span class="PreProc">Obj</span>.<span class="ocamlLCIdentifier">object_tag</span>, <span class="Constant">Immutable</span>, <span class="Constant">None</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">[</span><span class="Constant">Lconst</span> <span class="Statement">(</span><span class="Constant">Const_base</span> <span class="Statement">(</span><span class="Constant">Const_string</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L56" title="ocaml/lambda/translcore.ml:56">name</a></span>, <span class="ocamlLCIdentifier">ext</span>.<span class="ocamlLCIdentifier">ext_loc</span>, <span class="Constant">None</span><span class="Statement">)));<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">Lprim</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">prim_fresh_oo_id</span>, <span class="Statement">[</span><span class="Constant">Lconst</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="lambda.mli.html#L365" title="ocaml/lambda/lambda.mli:365">const_int</a></span> <span class="Constant">0</span><span class="Statement">)]</span>, <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">)]</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Text_rebind</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L444" title="ocaml/lambda/translclass.ml:444">path</a></span>, <span class="ocamlLCIdentifier">_lid</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L405" title="ocaml/lambda/lambda.mli:405">transl_extension_path</a></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier">env</span> <span class="ocamlLCIdentifier"><a href="translclass.ml.html#L444" title="ocaml/lambda/translclass.ml:444">path</a><br/></li>
<li></span><br/></li>
<li><span class="Comment">(* To propagate structured constants *)<br/></li>
<li></span><br/></li>
<li><span class="Statement">exception</span> <span class="Constant">Not_constant<br/></li>
<li></span><br/></li>
<li><a id="L76">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">extract_constant</span></span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Lconst</span> <span class="ocamlLCIdentifier">sc</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">sc<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Statement">raise</span> <span class="Constant">Not_constant<br/></li>
<li></span><br/></li>
<li><a id="L80">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">extract_float</span></span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Const_base</span><span class="Statement">(</span><span class="Constant">Const_float</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L1385" title="ocaml/lambda/translmod.ml:1385">f</a></span><span class="Statement">)</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L1385" title="ocaml/lambda/translmod.ml:1385">f</a><br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">fatal_error</span> <span class="Constant">&quot;Translcore.<a href="#L80" title="ocaml/lambda/translcore.ml:80">extract_float</a>&quot;<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Push the default values under the functional abstractions *)<br/></li>
<li></span><br/></li>
<li><a id="L86">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">wrap_bindings</span></span> <span class="ocamlLCIdentifier">bindings</span> <span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">fold_left<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(fun</span> <span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span> <span class="ocamlLCIdentifier">binds</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">{</span><span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span> <span class="Statement">with</span> <span class="ocamlLCIdentifier">exp_desc</span> <span class="Statement">=</span> <span class="Constant">Texp_let</span><span class="Statement">(</span><span class="Constant">Nonrecursive</span>, <span class="ocamlLCIdentifier">binds</span>, <span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span><span class="Statement">)})<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span> <span class="ocamlLCIdentifier">bindings<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier">trivial_pat</span> <span class="ocamlLCIdentifier">pat</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">pat</span>.<span class="ocamlLCIdentifier">pat_desc</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Tpat_var</span> <span class="Statement">_<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tpat_any</span> <span class="Statement">-&gt;</span> <span class="Constant">true<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tpat_alias</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">p</span>, <span class="Statement">_</span>, <span class="Statement">_)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">trivial_pat</span> <span class="ocamlLCIdentifier">p<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tpat_construct</span> <span class="Statement">(_</span>, <span class="ocamlLCIdentifier">cd</span>, <span class="Constant">[]</span>, <span class="Statement">_)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">not</span> <span class="ocamlLCIdentifier">cd</span>.<span class="ocamlLCIdentifier">cstr_generalized</span> <span class="Statement">&amp;&amp;</span> <span class="ocamlLCIdentifier">cd</span>.<span class="ocamlLCIdentifier">cstr_consts</span> <span class="Statement">=</span> <span class="Constant">1</span> <span class="Statement">&amp;&amp;</span> <span class="ocamlLCIdentifier">cd</span>.<span class="ocamlLCIdentifier">cstr_nonconsts</span> <span class="Statement">=</span> <span class="Constant">0<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tpat_tuple</span> <span class="ocamlLCIdentifier">patl</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">for_all</span> <span class="ocamlLCIdentifier">trivial_pat</span> <span class="ocamlLCIdentifier">patl<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">false<br/></li>
<li></span><br/></li>
<li><a id="L104">&#x200c;</a><span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier"><span class="linkable">push_defaults</span></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier">bindings</span> <span class="ocamlLCIdentifier">use_lhs</span> <span class="ocamlLCIdentifier">cases</span> <span class="ocamlLCIdentifier">partial</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">cases</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">[{</span><span class="ocamlLCIdentifier">c_lhs</span><span class="Statement">=</span><span class="ocamlLCIdentifier">pat</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">c_guard</span><span class="Statement">=</span><span class="Constant">None</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">c_rhs</span><span class="Statement">={</span><span class="ocamlLCIdentifier">exp_desc</span> <span class="Statement">=</span> <span class="Constant">Texp_function</span> <span class="Statement">{</span> <span class="ocamlLCIdentifier">arg_label</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">param</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">cases</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">partial</span><span class="Statement">;</span> <span class="Statement">}</span> <span class="Statement">}<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">as</span> <span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span><span class="Statement">}]</span> <span class="Statement">when</span> <span class="ocamlLCIdentifier">bindings</span> <span class="Statement">=</span> <span class="Constant">[]</span> <span class="Statement">||</span> <span class="ocamlLCIdentifier">trivial_pat</span> <span class="ocamlLCIdentifier">pat</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">cases</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L104" title="ocaml/lambda/translcore.ml:104">push_defaults</a></span> <span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span>.<span class="ocamlLCIdentifier">exp_loc</span> <span class="ocamlLCIdentifier">bindings</span> <span class="Constant">false</span> <span class="ocamlLCIdentifier">cases</span> <span class="ocamlLCIdentifier">partial</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">[{</span><span class="ocamlLCIdentifier">c_lhs</span><span class="Statement">=</span><span class="ocamlLCIdentifier">pat</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">c_guard</span><span class="Statement">=</span><span class="Constant">None</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">c_rhs</span><span class="Statement">={</span><span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span> <span class="Statement">with</span> <span class="ocamlLCIdentifier">exp_desc</span> <span class="Statement">=</span> <span class="Constant">Texp_function</span> <span class="Statement">{</span> <span class="ocamlLCIdentifier">arg_label</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">param</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">cases</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">partial</span><span class="Statement">;</span> <span class="Statement">}}}]<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">[{</span><span class="ocamlLCIdentifier">c_lhs</span><span class="Statement">=</span><span class="ocamlLCIdentifier">pat</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">c_guard</span><span class="Statement">=</span><span class="Constant">None</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">c_rhs</span><span class="Statement">={</span><span class="ocamlLCIdentifier">exp_attributes</span><span class="Statement">=[{</span><span class="PreProc">Parsetree</span>.<span class="ocamlLCIdentifier">attr_name</span> <span class="Statement">=</span> <span class="Statement">{</span><span class="ocamlLCIdentifier">txt</span><span class="Statement">=</span><span class="Constant">&quot;#default&quot;</span><span class="Statement">};_}];<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">exp_desc</span> <span class="Statement">=</span> <span class="Constant">Texp_let<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(</span><span class="Constant">Nonrecursive</span>, <span class="ocamlLCIdentifier">binds</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">({</span><span class="ocamlLCIdentifier">exp_desc</span> <span class="Statement">=</span> <span class="Constant">Texp_function</span> <span class="Statement">_}</span> <span class="Statement">as</span> <span class="ocamlLCIdentifier">e2</span><span class="Statement">))}}]</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L104" title="ocaml/lambda/translcore.ml:104">push_defaults</a></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier">binds</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier">bindings</span><span class="Statement">)</span> <span class="Constant">true<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">[{</span><span class="ocamlLCIdentifier">c_lhs</span><span class="Statement">=</span><span class="ocamlLCIdentifier">pat</span><span class="Statement">;</span><span class="ocamlLCIdentifier">c_guard</span><span class="Statement">=</span><span class="Constant">None</span><span class="Statement">;</span><span class="ocamlLCIdentifier">c_rhs</span><span class="Statement">=</span><span class="ocamlLCIdentifier">e2</span><span class="Statement">}]<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">partial<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">[{</span><span class="ocamlLCIdentifier">c_lhs</span><span class="Statement">=</span><span class="ocamlLCIdentifier">pat</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">c_guard</span><span class="Statement">=</span><span class="Constant">None</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">c_rhs</span><span class="Statement">=</span><span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span><span class="Statement">}</span> <span class="Statement">as</span> <span class="ocamlLCIdentifier">case</span><span class="Statement">]<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">when</span> <span class="ocamlLCIdentifier">use_lhs</span> <span class="Statement">||</span> <span class="ocamlLCIdentifier">trivial_pat</span> <span class="ocamlLCIdentifier">pat</span> <span class="Statement">&amp;&amp;</span> <span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span>.<span class="ocamlLCIdentifier">exp_desc</span> <span class="Statement">&lt;&gt;</span> <span class="Constant">Texp_unreachable</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">[{</span><span class="ocamlLCIdentifier">case</span> <span class="Statement">with</span> <span class="ocamlLCIdentifier">c_rhs</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L86" title="ocaml/lambda/translcore.ml:86">wrap_bindings</a></span> <span class="ocamlLCIdentifier">bindings</span> <span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span><span class="Statement">}]<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">{</span><span class="ocamlLCIdentifier">c_lhs</span><span class="Statement">=</span><span class="ocamlLCIdentifier">pat</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">c_rhs</span><span class="Statement">=</span><span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span><span class="Statement">;</span> <span class="ocamlLCIdentifier">c_guard</span><span class="Statement">=_}</span> <span class="Statement">::</span> <span class="Statement">_</span> <span class="Statement">when</span> <span class="ocamlLCIdentifier">bindings</span> <span class="Statement">&lt;&gt;</span> <span class="Constant">[]</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">param</span> <span class="Statement">=</span> <span class="PreProc">Typecore</span>.<span class="ocamlLCIdentifier">name_cases</span> <span class="Constant">&quot;param&quot;</span> <span class="ocamlLCIdentifier">cases</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">desc</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">{</span><span class="ocamlLCIdentifier">val_type</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">pat</span>.<span class="ocamlLCIdentifier">pat_type</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">val_kind</span> <span class="Statement">=</span> <span class="Constant">Val_reg</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">val_attributes</span> <span class="Statement">=</span> <span class="Constant">[]</span><span class="Statement">;</span> <span class="PreProc">Types</span>.<span class="ocamlLCIdentifier">val_loc</span> <span class="Statement">=</span> <span class="PreProc">Location</span>.<span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L118" title="ocaml/lambda/debuginfo.ml:118">none</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">val_uid</span> <span class="Statement">=</span> <span class="PreProc">Types</span>.<span class="PreProc">Uid</span>.<span class="ocamlLCIdentifier">internal_not_actually_unique</span><span class="Statement">;</span> <span class="Statement">}<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">env</span> <span class="Statement">=</span> <span class="PreProc">Env</span>.<span class="ocamlLCIdentifier">add_value</span> <span class="ocamlLCIdentifier">param</span> <span class="ocamlLCIdentifier">desc</span> <span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span>.<span class="ocamlLCIdentifier">exp_env</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L56" title="ocaml/lambda/translcore.ml:56">name</a></span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier"><a href="#L56" title="ocaml/lambda/translcore.ml:56">name</a></span> <span class="ocamlLCIdentifier">param</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">cases</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">pure_case</span> <span class="Statement">({</span><span class="ocamlLCIdentifier">c_lhs</span><span class="Statement">;</span> <span class="Statement">_}</span> <span class="Statement">as</span> <span class="ocamlLCIdentifier">case</span><span class="Statement">)</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">{</span><span class="ocamlLCIdentifier">case</span> <span class="Statement">with</span> <span class="ocamlLCIdentifier">c_lhs</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">as_computation_pattern</span> <span class="ocamlLCIdentifier">c_lhs</span><span class="Statement">}</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="ocamlLCIdentifier">pure_case</span> <span class="ocamlLCIdentifier">cases</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">{</span> <span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span> <span class="Statement">with</span> <span class="ocamlLCIdentifier">exp_loc</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">;</span> <span class="ocamlLCIdentifier">exp_env</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">env</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">exp_desc</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Texp_match<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">({</span><span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span> <span class="Statement">with</span> <span class="ocamlLCIdentifier">exp_type</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">pat</span>.<span class="ocamlLCIdentifier">pat_type</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">exp_env</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">env</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">exp_desc</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Texp_ident<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="PreProc">Path</span>.<span class="Constant">Pident</span> <span class="ocamlLCIdentifier">param</span>, <span class="ocamlLCIdentifier">mknoloc</span> <span class="Statement">(</span><span class="PreProc">Longident</span>.<span class="Constant">Lident</span> <span class="ocamlLCIdentifier"><a href="#L56" title="ocaml/lambda/translcore.ml:56">name</a></span><span class="Statement">)</span>, <span class="ocamlLCIdentifier">desc</span><span class="Statement">)}</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">cases</span>, <span class="ocamlLCIdentifier">partial</span><span class="Statement">)</span> <span class="Statement">}<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">[{</span><span class="ocamlLCIdentifier">c_lhs</span> <span class="Statement">=</span> <span class="Statement">{</span><span class="ocamlLCIdentifier">pat</span> <span class="Statement">with</span> <span class="ocamlLCIdentifier">pat_desc</span> <span class="Statement">=</span> <span class="Constant">Tpat_var</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">param</span>, <span class="ocamlLCIdentifier">mknoloc</span> <span class="ocamlLCIdentifier"><a href="#L56" title="ocaml/lambda/translcore.ml:56">name</a></span><span class="Statement">)};<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">c_guard</span> <span class="Statement">=</span> <span class="Constant">None</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">c_rhs</span><span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L86" title="ocaml/lambda/translcore.ml:86">wrap_bindings</a></span> <span class="ocamlLCIdentifier">bindings</span> <span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span><span class="Statement">}]<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">cases<br/></li>
<li></span><br/></li>
<li><a id="L150">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">push_defaults</span></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><span class="linkable">push_defaults</span></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="Constant">[]</span> <span class="Constant">false<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Insertion of debugging events *)<br/></li>
<li></span><br/></li>
<li><a id="L154">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">event_before</span></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="PreProc">Translprim</span>.<span class="ocamlLCIdentifier"><a href="translprim.mli.html#L18" title="ocaml/lambda/translprim.mli:18">event_before</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span>.<span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a><br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="translprim.mli.html#L21" title="ocaml/lambda/translprim.mli:21">event_after</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="PreProc">Translprim</span>.<span class="ocamlLCIdentifier"><a href="translprim.mli.html#L21" title="ocaml/lambda/translprim.mli:21">event_after</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span>.<span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a><br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="ocamlLCIdentifier">event_function</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="PreProc">Clflags</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">debug</span><span class="ocamlNone"> </span><span class="Statement">&amp;&amp;</span><span class="ocamlNone"> </span><span class="Statement">not</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="PreProc">Clflags</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">native_code</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">repr</span> <span class="Statement">=</span> <span class="Constant">Some</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">ref</span> <span class="Constant">0</span><span class="Statement">)</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">info</span>, <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">)</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="ocamlLCIdentifier">repr</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier">info</span>,<br/></li>
<li>&nbsp; &nbsp;&nbsp; <span class="Constant">Levent</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span>, <span class="Statement">{</span><span class="ocamlLCIdentifier">lev_loc</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span>.<span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">lev_kind</span> <span class="Statement">=</span> <span class="Constant">Lev_function</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">lev_repr</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">repr</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">lev_env</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span>.<span class="ocamlLCIdentifier">exp_env</span><span class="Statement">}))<br/></li>
<li></span>&nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Constant">None<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Assertions *)<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="ocamlLCIdentifier">assert_failed</span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L773" title="ocaml/lambda/simplif.ml:773">slot</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L405" title="ocaml/lambda/lambda.mli:405">transl_extension_path</a></span> <span class="Constant">Loc_unknown<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="PreProc">Env</span>.<span class="ocamlLCIdentifier">initial</span> <span class="PreProc">Predef</span>.<span class="ocamlLCIdentifier">path_assert_failure<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">fname</span>, <span class="ocamlLCIdentifier">line</span>, <span class="Type">char</span><span class="Statement">)</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">Location</span>.<span class="ocamlLCIdentifier">get_pos_info</span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span>.<span class="PreProc">Location</span>.<span class="ocamlLCIdentifier">loc_start<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span>.<span class="ocamlLCIdentifier">exp_loc</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Praise</span> <span class="Constant">Raise_regular</span>, <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="translprim.mli.html#L21" title="ocaml/lambda/translprim.mli:21">event_after</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a><br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pmakeblock</span><span class="Statement">(</span><span class="Constant">0</span>, <span class="Constant">Immutable</span>, <span class="Constant">None</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="simplif.ml.html#L773" title="ocaml/lambda/simplif.ml:773">slot</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">Lconst</span><span class="Statement">(</span><span class="Constant">Const_block</span><span class="Statement">(</span><span class="Constant">0</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">[</span><span class="Constant">Const_base</span><span class="Statement">(</span><span class="Constant">Const_string</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">fname</span>, <span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span>.<span class="ocamlLCIdentifier">exp_loc</span>, <span class="Constant">None</span><span class="Statement">));<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">Const_base</span><span class="Statement">(</span><span class="Constant">Const_int</span> <span class="ocamlLCIdentifier">line</span><span class="Statement">);<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">Const_base</span><span class="Statement">(</span><span class="Constant">Const_int</span> <span class="Type">char</span><span class="Statement">)]))]</span>, <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">))]</span>, <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier">cut</span> <span class="ocamlLCIdentifier">n</span> <span class="ocamlLCIdentifier"><a href="#L708" title="ocaml/lambda/translcore.ml:708">l</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">n</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">0</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="Statement">(</span><span class="Constant">[]</span>,<span class="ocamlLCIdentifier"><a href="#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="Statement">)</span> <span class="Statement">else<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L708" title="ocaml/lambda/translcore.ml:708">l</a></span> <span class="Statement">with</span> <span class="Constant">[]</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">failwith</span> <span class="Constant">&quot;Translcore.cut&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="ocamlLCIdentifier">a</span><span class="Statement">::</span><span class="ocamlLCIdentifier"><a href="#L708" title="ocaml/lambda/translcore.ml:708">l</a></span> <span class="Statement">-&gt;</span> <span class="Statement">let</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">l1</span>,<span class="ocamlLCIdentifier">l2</span><span class="Statement">)</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">cut</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">n</span>-<span class="Constant">1</span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="#L708" title="ocaml/lambda/translcore.ml:708">l</a></span> <span class="Statement">in</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">a</span><span class="Statement">::</span><span class="ocamlLCIdentifier">l1</span>,<span class="ocamlLCIdentifier">l2</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Translation of expressions *)<br/></li>
<li></span><br/></li>
<li><a id="L198">&#x200c;</a><span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier"><span class="linkable">iter_exn_names</span></span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L1385" title="ocaml/lambda/translmod.ml:1385">f</a></span> <span class="ocamlLCIdentifier">pat</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">pat</span>.<span class="ocamlLCIdentifier">pat_desc</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tpat_var</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="Statement">_)</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L1385" title="ocaml/lambda/translmod.ml:1385">f</a></span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a><br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tpat_alias</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">p</span>, <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="Statement">_)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L1385" title="ocaml/lambda/translmod.ml:1385">f</a></span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L198" title="ocaml/lambda/translcore.ml:198">iter_exn_names</a></span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L1385" title="ocaml/lambda/translmod.ml:1385">f</a></span> <span class="ocamlLCIdentifier">p<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">()<br/></li>
<li></span><br/></li>
<li><a id="L206">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">transl_ident</span></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier">env</span> <span class="ocamlLCIdentifier">ty</span> <span class="ocamlLCIdentifier"><a href="translclass.ml.html#L444" title="ocaml/lambda/translclass.ml:444">path</a></span> <span class="ocamlLCIdentifier">desc</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">desc</span>.<span class="ocamlLCIdentifier">val_kind</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Val_prim</span> <span class="ocamlLCIdentifier">p</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="PreProc">Translprim</span>.<span class="ocamlLCIdentifier"><a href="translprim.mli.html#L35" title="ocaml/lambda/translprim.mli:35">transl_primitive</a></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier">p</span> <span class="ocamlLCIdentifier">env</span> <span class="ocamlLCIdentifier">ty</span> <span class="Statement">(</span><span class="Constant">Some</span> <span class="ocamlLCIdentifier"><a href="translclass.ml.html#L444" title="ocaml/lambda/translclass.ml:444">path</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Val_anc</span> <span class="Statement">_</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">raise(</span><span class="Constant">Error</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="debuginfo.mli.html#L34" title="ocaml/lambda/debuginfo.mli:34">to_location</a></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span>, <span class="Constant">Free_super_var</span><span class="Statement">))<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Val_reg</span> <span class="Statement">|</span> <span class="Constant">Val_self</span> <span class="Statement">_</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L404" title="ocaml/lambda/lambda.mli:404">transl_value_path</a></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier">env</span> <span class="ocamlLCIdentifier"><a href="translclass.ml.html#L444" title="ocaml/lambda/translclass.ml:444">path</a><br/></li>
<li></span>&nbsp; <span class="Statement">|</span>&nbsp; <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">fatal_error</span> <span class="Constant">&quot;Translcore.<a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a>: bad Texp_ident&quot;<br/></li>
<li></span><br/></li>
<li><a id="L216">&#x200c;</a><span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier"><span class="linkable">transl_exp</span></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier">transl_exp1</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="Statement">~</span><span class="Identifier">in_new_scope</span>:<span class="Constant">false</span> <span class="ocamlLCIdentifier">e<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* ~in_new_scope tracks whether we just opened a new scope.<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp;&nbsp; We go to some trouble to avoid introducing many new anonymous function<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; <a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a>, as `let <a href="translmod.ml.html#L1385" title="ocaml/lambda/translmod.ml:1385">f</a> a b = ...` is desugared to several Pexp_fun.<br/></li>
<li></span><span class="Comment">*)<br/></li>
<li></span><span class="Statement">and</span> <span class="ocamlLCIdentifier">transl_exp1</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="Statement">~</span><span class="Identifier">in_new_scope</span> <span class="ocamlLCIdentifier">e</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">iter</span> <span class="Statement">(</span><span class="PreProc">Translattribute</span>.<span class="ocamlLCIdentifier"><a href="translattribute.mli.html#L16" title="ocaml/lambda/translattribute.mli:16">check_attribute</a></span> <span class="ocamlLCIdentifier">e</span><span class="Statement">)</span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_attributes</span><span class="Statement">;<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">eval_once</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Comment">(* Whether <a href="translobj.ml.html#L158" title="ocaml/lambda/translobj.ml:158">classes</a> for immediate objects must be cached *)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_desc</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Texp_function</span> <span class="Statement">_</span> <span class="Statement">|</span> <span class="Constant">Texp_for</span> <span class="Statement">_</span> <span class="Statement">|</span> <span class="Constant">Texp_while</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">false<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">true<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">eval_once</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier">transl_exp0</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="Statement">~</span><span class="Identifier">in_new_scope</span>&nbsp; <span class="ocamlLCIdentifier">e</span> <span class="Statement">else<br/></li>
<li></span>&nbsp; <span class="PreProc">Translobj</span>.<span class="ocamlLCIdentifier"><a href="translobj.ml.html#L165" title="ocaml/lambda/translobj.ml:165">oo_wrap</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_env</span> <span class="Constant">true</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">transl_exp0</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="Statement">~</span><span class="Identifier">in_new_scope</span><span class="Statement">)</span> <span class="ocamlLCIdentifier">e<br/></li>
<li></span><br/></li>
<li><span class="Statement">and</span> <span class="ocamlLCIdentifier">transl_exp0</span> <span class="Statement">~</span><span class="Identifier">in_new_scope</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_desc</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_ident</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L444" title="ocaml/lambda/translclass.ml:444">path</a></span>, <span class="Statement">_</span>, <span class="ocamlLCIdentifier">desc</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L206" title="ocaml/lambda/translcore.ml:206">transl_ident</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_env</span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_type</span> <span class="ocamlLCIdentifier"><a href="translclass.ml.html#L444" title="ocaml/lambda/translclass.ml:444">path</a></span> <span class="ocamlLCIdentifier">desc<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_constant</span> <span class="ocamlLCIdentifier">cst</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Lconst</span><span class="Statement">(</span><span class="Constant">Const_base</span> <span class="ocamlLCIdentifier">cst</span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_let</span><span class="Statement">(</span><span class="ocamlLCIdentifier">rec_flag</span>, <span class="ocamlLCIdentifier">pat_expr_list</span>, <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="translcore.mli.html#L33" title="ocaml/lambda/translcore.mli:33">transl_let</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">rec_flag</span> <span class="ocamlLCIdentifier">pat_expr_list<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translprim.mli.html#L18" title="ocaml/lambda/translprim.mli:18">event_before</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">))<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_function</span> <span class="Statement">{</span> <span class="ocamlLCIdentifier">arg_label</span> <span class="Statement">=</span> <span class="Statement">_;</span> <span class="ocamlLCIdentifier">param</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">cases</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">partial</span><span class="Statement">;</span> <span class="Statement">}</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">in_new_scope</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else</span> <span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L54" title="ocaml/lambda/debuginfo.ml:54">enter_anonymous_function</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">transl_function</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span> <span class="ocamlLCIdentifier">param</span> <span class="ocamlLCIdentifier">cases</span> <span class="ocamlLCIdentifier">partial<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_apply</span><span class="Statement">({</span> <span class="ocamlLCIdentifier">exp_desc</span> <span class="Statement">=</span> <span class="Constant">Texp_ident</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L444" title="ocaml/lambda/translclass.ml:444">path</a></span>, <span class="Statement">_</span>, <span class="Statement">{</span><span class="ocamlLCIdentifier">val_kind</span> <span class="Statement">=</span> <span class="Constant">Val_prim</span> <span class="ocamlLCIdentifier">p</span><span class="Statement">});<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">exp_type</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">prim_type</span> <span class="Statement">}</span> <span class="Statement">as</span> <span class="ocamlLCIdentifier">funct</span>, <span class="ocamlLCIdentifier">oargs</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">when</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">length</span> <span class="ocamlLCIdentifier">oargs</span> <span class="Statement">&gt;=</span> <span class="ocamlLCIdentifier">p</span>.<span class="ocamlLCIdentifier">prim_arity<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">&amp;&amp;</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">for_all</span> <span class="Statement">(fun</span> <span class="Statement">(_</span>, <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="Statement">)</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span> <span class="Statement">&lt;&gt;</span> <span class="Constant">None</span><span class="Statement">)</span> <span class="ocamlLCIdentifier">oargs</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">argl</span>, <span class="ocamlLCIdentifier">extra_args</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">cut</span> <span class="ocamlLCIdentifier">p</span>.<span class="ocamlLCIdentifier">prim_arity</span> <span class="ocamlLCIdentifier">oargs</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">arg_exps</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="Statement">(function</span> <span class="Statement">_</span>, <span class="Constant">Some</span> <span class="ocamlLCIdentifier">x</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">x</span> <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Statement">assert</span> <span class="Constant">false</span><span class="Statement">)</span> <span class="ocamlLCIdentifier">argl<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">transl_list</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">arg_exps</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">prim_exp</span> <span class="Statement">=</span> <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">extra_args</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">[]</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="Constant">Some</span> <span class="ocamlLCIdentifier">e</span> <span class="Statement">else</span> <span class="Constant">None</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">Translprim</span>.<span class="ocamlLCIdentifier"><a href="translprim.mli.html#L39" title="ocaml/lambda/translprim.mli:39">transl_primitive_application</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">)</span> <span class="ocamlLCIdentifier">p</span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_env</span> <span class="ocamlLCIdentifier">prim_type</span> <span class="ocamlLCIdentifier"><a href="translclass.ml.html#L444" title="ocaml/lambda/translclass.ml:444">path</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">prim_exp</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span> <span class="ocamlLCIdentifier">arg_exps<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">extra_args</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">[]</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">else</span> <span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">tailcall</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">funct</span><span class="ocamlEnd"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">Translattribute</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="translattribute.mli.html#L68" title="ocaml/lambda/translattribute.mli:68">get_tailcall_attribute</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">funct<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">inlined</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">funct</span><span class="ocamlEnd"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">Translattribute</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="translattribute.mli.html#L56" title="ocaml/lambda/translattribute.mli:56">get_and_remove_inlined_attribute</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">funct<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">specialised</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">funct</span><span class="ocamlEnd"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">Translattribute</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="translattribute.mli.html#L64" title="ocaml/lambda/translattribute.mli:64">get_and_remove_specialised_attribute</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">funct<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="Statement">{</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlEnd"> </span><span class="Statement">with</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">exp_desc</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="Constant">Texp_apply</span><span class="Statement">(</span><span class="ocamlLCIdentifier">funct</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">oargs</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">}</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="translprim.mli.html#L21" title="ocaml/lambda/translprim.mli:21">event_after</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translcore.mli.html#L27" title="ocaml/lambda/translcore.mli:27">transl_apply</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier">tailcall</span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier">inlined</span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier">specialised<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">extra_args</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">))<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_apply</span><span class="Statement">(</span><span class="ocamlLCIdentifier">funct</span>, <span class="ocamlLCIdentifier">oargs</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">tailcall</span>, <span class="ocamlLCIdentifier">funct</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">Translattribute</span>.<span class="ocamlLCIdentifier"><a href="translattribute.mli.html#L68" title="ocaml/lambda/translattribute.mli:68">get_tailcall_attribute</a></span> <span class="ocamlLCIdentifier">funct<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">inlined</span>, <span class="ocamlLCIdentifier">funct</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">Translattribute</span>.<span class="ocamlLCIdentifier"><a href="translattribute.mli.html#L56" title="ocaml/lambda/translattribute.mli:56">get_and_remove_inlined_attribute</a></span> <span class="ocamlLCIdentifier">funct<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">specialised</span>, <span class="ocamlLCIdentifier">funct</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">Translattribute</span>.<span class="ocamlLCIdentifier"><a href="translattribute.mli.html#L64" title="ocaml/lambda/translattribute.mli:64">get_and_remove_specialised_attribute</a></span> <span class="ocamlLCIdentifier">funct<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">e</span> <span class="Statement">=</span> <span class="Statement">{</span> <span class="ocamlLCIdentifier">e</span> <span class="Statement">with</span> <span class="ocamlLCIdentifier">exp_desc</span> <span class="Statement">=</span> <span class="Constant">Texp_apply</span><span class="Statement">(</span><span class="ocamlLCIdentifier">funct</span>, <span class="ocamlLCIdentifier">oargs</span><span class="Statement">)</span> <span class="Statement">}</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="translprim.mli.html#L21" title="ocaml/lambda/translprim.mli:21">event_after</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translcore.mli.html#L27" title="ocaml/lambda/translcore.mli:27">transl_apply</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="Statement">~</span><span class="Identifier">tailcall</span> <span class="Statement">~</span><span class="Identifier">inlined</span> <span class="Statement">~</span><span class="Identifier">specialised<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">funct</span><span class="Statement">)</span> <span class="ocamlLCIdentifier">oargs</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">))<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_match</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span>, <span class="ocamlLCIdentifier">pat_expr_list</span>, <span class="ocamlLCIdentifier">partial</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L1026" title="ocaml/lambda/translcore.ml:1026">transl_match</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span> <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span> <span class="ocamlLCIdentifier">pat_expr_list</span> <span class="ocamlLCIdentifier">partial<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_try</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span>, <span class="ocamlLCIdentifier">pat_expr_list</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="Statement">=</span> <span class="PreProc">Typecore</span>.<span class="ocamlLCIdentifier">name_cases</span> <span class="Constant">&quot;exn&quot;</span> <span class="ocamlLCIdentifier">pat_expr_list</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Ltrywith</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span>, <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="PreProc">Matching</span>.<span class="ocamlLCIdentifier"><a href="matching.mli.html#L27" title="ocaml/lambda/matching.mli:27">for_trywith</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_loc</span> <span class="Statement">(</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier">transl_cases_try</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">pat_expr_list</span><span class="Statement">))<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_tuple</span> <span class="ocamlLCIdentifier">el</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L384" title="ocaml/lambda/translcore.ml:384">ll</a></span>, <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L486" title="ocaml/lambda/translprim.ml:486">shape</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">transl_list_with_shape</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">el</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">try<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Lconst</span><span class="Statement">(</span><span class="Constant">Const_block</span><span class="Statement">(</span><span class="Constant">0</span><span class="ocamlEnd">, </span><span class="PreProc">List</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L76" title="ocaml/lambda/translcore.ml:76">extract_constant</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L384" title="ocaml/lambda/translcore.ml:384">ll</a></span><span class="Statement">))<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">with</span><span class="ocamlEnd"> </span><span class="Constant">Not_constant</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pmakeblock</span><span class="Statement">(</span><span class="Constant">0</span><span class="ocamlEnd">, </span><span class="Constant">Immutable</span><span class="ocamlEnd">, </span><span class="Constant">Some</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L486" title="ocaml/lambda/translprim.ml:486">shape</a></span><span class="Statement">)</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L384" title="ocaml/lambda/translcore.ml:384">ll</a></span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">))<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_construct</span><span class="Statement">(_</span>, <span class="ocamlLCIdentifier">cstr</span>, <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L384" title="ocaml/lambda/translcore.ml:384">ll</a></span>, <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L486" title="ocaml/lambda/translprim.ml:486">shape</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">transl_list_with_shape</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">cstr</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">cstr_inlined</span><span class="ocamlNone"> </span><span class="Statement">&lt;&gt;</span><span class="ocamlNone"> </span><span class="Constant">None</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L384" title="ocaml/lambda/translcore.ml:384">ll</a></span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Statement">[</span><span class="ocamlLCIdentifier">x</span><span class="Statement">]</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">x<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="Statement">assert</span><span class="ocamlEnd"> </span><span class="Constant">false<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">end</span> <span class="Statement">else</span> <span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cstr</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">cstr_tag</span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Cstr_constant</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">n</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Lconst</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="lambda.mli.html#L365" title="ocaml/lambda/lambda.mli:365">const_int</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">n</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Cstr_unboxed</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L384" title="ocaml/lambda/translcore.ml:384">ll</a></span><span class="ocamlEnd"> </span><span class="Statement">with</span><span class="ocamlEnd"> </span><span class="Statement">[</span><span class="ocamlLCIdentifier">v</span><span class="Statement">]</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">v</span><span class="ocamlEnd"> </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="Statement">assert</span><span class="ocamlEnd"> </span><span class="Constant">false</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Cstr_block</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">n</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">try<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Lconst</span><span class="Statement">(</span><span class="Constant">Const_block</span><span class="Statement">(</span><span class="ocamlLCIdentifier">n</span><span class="ocamlEnd">, </span><span class="PreProc">List</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L76" title="ocaml/lambda/translcore.ml:76">extract_constant</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L384" title="ocaml/lambda/translcore.ml:384">ll</a></span><span class="Statement">))<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">with</span><span class="ocamlEnd"> </span><span class="Constant">Not_constant</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pmakeblock</span><span class="Statement">(</span><span class="ocamlLCIdentifier">n</span><span class="ocamlEnd">, </span><span class="Constant">Immutable</span><span class="ocamlEnd">, </span><span class="Constant">Some</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L486" title="ocaml/lambda/translprim.ml:486">shape</a></span><span class="Statement">)</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L384" title="ocaml/lambda/translcore.ml:384">ll</a></span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Cstr_extension</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L444" title="ocaml/lambda/translclass.ml:444">path</a></span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">is_const</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="lambda.mli.html#L405" title="ocaml/lambda/lambda.mli:405">transl_extension_path</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">exp_env</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L444" title="ocaml/lambda/translclass.ml:444">path</a></span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">is_const</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pmakeblock</span><span class="Statement">(</span><span class="Constant">0</span><span class="ocamlEnd">, </span><span class="Constant">Immutable</span><span class="ocamlEnd">, </span><span class="Constant">Some</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="Constant">Pgenval</span><span class="ocamlEnd"> </span><span class="Statement">::</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L486" title="ocaml/lambda/translprim.ml:486">shape</a></span><span class="Statement">))</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span><span class="ocamlEnd"> </span><span class="Statement">::</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L384" title="ocaml/lambda/translcore.ml:384">ll</a></span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_extension_constructor</span> <span class="Statement">(_</span>, <span class="ocamlLCIdentifier"><a href="translclass.ml.html#L444" title="ocaml/lambda/translclass.ml:444">path</a></span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L405" title="ocaml/lambda/lambda.mli:405">transl_extension_path</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">)</span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_env</span> <span class="ocamlLCIdentifier"><a href="translclass.ml.html#L444" title="ocaml/lambda/translclass.ml:444">path</a><br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_variant</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L708" title="ocaml/lambda/translcore.ml:708">l</a></span>, <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L339">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">tag</span></span> <span class="Statement">=</span> <span class="PreProc">Btype</span>.<span class="ocamlLCIdentifier">hash_variant</span> <span class="ocamlLCIdentifier"><a href="#L708" title="ocaml/lambda/translcore.ml:708">l</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">None</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="Constant">Lconst</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="lambda.mli.html#L365" title="ocaml/lambda/lambda.mli:365">const_int</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L339" title="ocaml/lambda/translcore.ml:339">tag</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Some</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li><a id="L343">&#x200c;</a></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><span class="linkable">lam</span></span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">try<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Lconst</span><span class="Statement">(</span><span class="Constant">Const_block</span><span class="Statement">(</span><span class="Constant">0</span><span class="ocamlEnd">, </span><span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="lambda.mli.html#L365" title="ocaml/lambda/lambda.mli:365">const_int</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L339" title="ocaml/lambda/translcore.ml:339">tag</a></span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier"><a href="#L76" title="ocaml/lambda/translcore.ml:76">extract_constant</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span><span class="Statement">]))<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">with</span><span class="ocamlEnd"> </span><span class="Constant">Not_constant</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pmakeblock</span><span class="Statement">(</span><span class="Constant">0</span><span class="ocamlEnd">, </span><span class="Constant">Immutable</span><span class="ocamlEnd">, </span><span class="Constant">None</span><span class="Statement">)</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">[</span><span class="Constant">Lconst</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="lambda.mli.html#L365" title="ocaml/lambda/lambda.mli:365">const_int</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L339" title="ocaml/lambda/translcore.ml:339">tag</a></span><span class="Statement">);</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span><span class="Statement">]</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_record</span> <span class="Statement">{</span><span class="ocamlLCIdentifier">fields</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">representation</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">extended_expression</span><span class="Statement">}</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">transl_record</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_loc</span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_env<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">fields</span> <span class="ocamlLCIdentifier">representation</span> <span class="ocamlLCIdentifier">extended_expression<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_field</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span>, <span class="Statement">_</span>, <span class="ocamlLCIdentifier"><a href="#L1043" title="ocaml/lambda/translcore.ml:1043">lbl</a></span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L356">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">targ</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L1043" title="ocaml/lambda/translcore.ml:1043">lbl</a></span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">lbl_repres</span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Record_regular</span><span class="ocamlEnd"> </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Record_inlined</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Lprim</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="Constant">Pfield</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L1043" title="ocaml/lambda/translcore.ml:1043">lbl</a></span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">lbl_pos</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">maybe_pointer</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L1043" title="ocaml/lambda/translcore.ml:1043">lbl</a></span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">lbl_mut</span><span class="Statement">)</span><span class="ocamlEnd">, </span><span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L356" title="ocaml/lambda/translcore.ml:356">targ</a></span><span class="Statement">]</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Record_unboxed</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L356" title="ocaml/lambda/translcore.ml:356">targ</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Record_float</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Lprim</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="Constant">Pfloatfield</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L1043" title="ocaml/lambda/translcore.ml:1043">lbl</a></span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">lbl_pos</span><span class="ocamlEnd">, </span><span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L356" title="ocaml/lambda/translcore.ml:356">targ</a></span><span class="Statement">]</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Record_extension</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Lprim</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="Constant">Pfield</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L1043" title="ocaml/lambda/translcore.ml:1043">lbl</a></span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">lbl_pos</span><span class="ocamlEnd"> + </span><span class="Constant">1</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">maybe_pointer</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L1043" title="ocaml/lambda/translcore.ml:1043">lbl</a></span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">lbl_mut</span><span class="Statement">)</span><span class="ocamlEnd">, </span><span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L356" title="ocaml/lambda/translcore.ml:356">targ</a></span><span class="Statement">]</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_setfield</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span>, <span class="Statement">_</span>, <span class="ocamlLCIdentifier"><a href="#L1043" title="ocaml/lambda/translcore.ml:1043">lbl</a></span>, <span class="ocamlLCIdentifier">newval</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L370">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">access</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L1043" title="ocaml/lambda/translcore.ml:1043">lbl</a></span>.<span class="ocamlLCIdentifier">lbl_repres</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Record_regular<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Record_inlined</span> <span class="Statement">_</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Psetfield</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L1043" title="ocaml/lambda/translcore.ml:1043">lbl</a></span>.<span class="ocamlLCIdentifier">lbl_pos</span>, <span class="ocamlLCIdentifier">maybe_pointer</span> <span class="ocamlLCIdentifier">newval</span>, <span class="Constant">Assignment</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Record_unboxed</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Statement">assert</span> <span class="Constant">false<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Record_float</span> <span class="Statement">-&gt;</span> <span class="Constant">Psetfloatfield</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L1043" title="ocaml/lambda/translcore.ml:1043">lbl</a></span>.<span class="ocamlLCIdentifier">lbl_pos</span>, <span class="Constant">Assignment</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Record_extension</span> <span class="Statement">_</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Psetfield</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L1043" title="ocaml/lambda/translcore.ml:1043">lbl</a></span>.<span class="ocamlLCIdentifier">lbl_pos</span> + <span class="Constant">1</span>, <span class="ocamlLCIdentifier">maybe_pointer</span> <span class="ocamlLCIdentifier">newval</span>, <span class="Constant">Assignment</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Lprim</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L370" title="ocaml/lambda/translcore.ml:370">access</a></span>, <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">newval</span><span class="Statement">]</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_array</span> <span class="ocamlLCIdentifier">expr_list</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L383">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">kind</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="printlambda.ml.html#L45" title="ocaml/lambda/printlambda.ml:45">array_kind</a></span> <span class="ocamlLCIdentifier">e</span> <span class="Statement">in<br/></li>
<li><a id="L384">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">ll</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">transl_list</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">expr_list</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">try<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">(* For native code the decision as to which compilation strategy to<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; use is made later.&nbsp; This enables the Flambda passes to lift certain<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; kinds of array definitions to symbols. *)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">(* Deactivate constant optimization if array is small enough *)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="PreProc">List</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">length</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L384" title="ocaml/lambda/translcore.ml:384">ll</a></span><span class="ocamlNone"> </span><span class="Statement">&lt;=</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L34" title="ocaml/lambda/translcore.ml:34">use_dup_for_constant_arrays_bigger_than</a><br/></li>
<li></span><span class="ocamlNone">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">then</span><span class="ocamlEnd"> </span><span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">raise</span><span class="ocamlEnd"> </span><span class="Constant">Not_constant<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="PreProc">List</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L76" title="ocaml/lambda/translcore.ml:76">extract_constant</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L384" title="ocaml/lambda/translcore.ml:384">ll</a></span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Statement">exception</span><span class="ocamlEnd"> </span><span class="Constant">Not_constant</span><span class="ocamlEnd"> </span><span class="Statement">when</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="Constant">Pfloatarray</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">(* We cannot currently lift [Pintarray] arrays safely in Flambda<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; because [caml_modify] might be called upon them (e.g. from<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; code operating on polymorphic arrays, or functions such as<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [caml_array_blit].<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; To avoid having different Lambda code for<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; bytecode/Closure vs.&nbsp; Flambda, we always generate<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; [Pduparray] here, and deal with it in [Bytegen] (or in<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; the case of Closure, in [Cmmgen], which already has to<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <a href="#L707" title="ocaml/lambda/translcore.ml:707">handle</a> [Pduparray Pmakearray Pfloatarray] in the case<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; where the array turned out to be inconstant).<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; When not [Pfloatarray], the exception propagates to the handler<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; below. *)<br/></li>
<li><a id="L408">&#x200c;</a></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><span class="linkable">imm_array</span></span><span class="ocamlEnd"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Lprim</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="Constant">Pmakearray</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span><span class="ocamlEnd">, </span><span class="Constant">Immutable</span><span class="Statement">)</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L384" title="ocaml/lambda/translcore.ml:384">ll</a></span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Lprim</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="Constant">Pduparray</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span><span class="ocamlEnd">, </span><span class="Constant">Mutable</span><span class="Statement">)</span><span class="ocamlEnd">, </span><span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L408" title="ocaml/lambda/translcore.ml:408">imm_array</a></span><span class="Statement">]</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li><a id="L415">&#x200c;</a></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><span class="linkable">imm_array</span></span><span class="ocamlEnd"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Paddrarray</span><span class="ocamlEnd"> </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Pintarray</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Lconst</span><span class="Statement">(</span><span class="Constant">Const_block</span><span class="Statement">(</span><span class="Constant">0</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span><span class="Statement">))<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Pfloatarray</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Lconst</span><span class="Statement">(</span><span class="Constant">Const_float_array</span><span class="Statement">(</span><span class="PreProc">List</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L80" title="ocaml/lambda/translcore.ml:80">extract_float</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span><span class="Statement">))<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Pgenarray</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">raise</span><span class="ocamlEnd"> </span><span class="Constant">Not_constant</span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Comment">(* can this really happen? *)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Lprim</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="Constant">Pduparray</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span><span class="ocamlEnd">, </span><span class="Constant">Mutable</span><span class="Statement">)</span><span class="ocamlEnd">, </span><span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L408" title="ocaml/lambda/translcore.ml:408">imm_array</a></span><span class="Statement">]</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">with</span><span class="ocamlEnd"> </span><span class="Constant">Not_constant</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pmakearray</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span><span class="ocamlEnd">, </span><span class="Constant">Mutable</span><span class="Statement">)</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L384" title="ocaml/lambda/translcore.ml:384">ll</a></span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_ifthenelse</span><span class="Statement">(</span><span class="ocamlLCIdentifier">cond</span>, <span class="ocamlLCIdentifier">ifso</span>, <span class="Constant">Some</span> <span class="ocamlLCIdentifier">ifnot</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Lifthenelse</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">cond</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="translprim.mli.html#L18" title="ocaml/lambda/translprim.mli:18">event_before</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">ifso</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">ifso</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="translprim.mli.html#L18" title="ocaml/lambda/translprim.mli:18">event_before</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">ifnot</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">ifnot</span><span class="Statement">))<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_ifthenelse</span><span class="Statement">(</span><span class="ocamlLCIdentifier">cond</span>, <span class="ocamlLCIdentifier">ifso</span>, <span class="Constant">None</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Lifthenelse</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">cond</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="translprim.mli.html#L18" title="ocaml/lambda/translprim.mli:18">event_before</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">ifso</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">ifso</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L366" title="ocaml/lambda/lambda.mli:366">lambda_unit</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_sequence</span><span class="Statement">(</span><span class="ocamlLCIdentifier">expr1</span>, <span class="ocamlLCIdentifier">expr2</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Lsequence</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">expr1</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="translprim.mli.html#L18" title="ocaml/lambda/translprim.mli:18">event_before</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">expr2</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">expr2</span><span class="Statement">))<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_while</span><span class="Statement">(</span><span class="ocamlLCIdentifier">cond</span>, <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Lwhile</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">cond</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="translprim.mli.html#L18" title="ocaml/lambda/translprim.mli:18">event_before</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">))<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_for</span><span class="Statement">(</span><span class="ocamlLCIdentifier">param</span>, <span class="Statement">_</span>, <span class="ocamlLCIdentifier"><a href="switch.ml.html#L749" title="ocaml/lambda/switch.ml:749">low</a></span>, <span class="ocamlLCIdentifier">high</span>, <span class="ocamlLCIdentifier">dir</span>, <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Lfor</span><span class="Statement">(</span><span class="ocamlLCIdentifier">param</span>, <span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="switch.ml.html#L749" title="ocaml/lambda/switch.ml:749">low</a></span>, <span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">high</span>, <span class="ocamlLCIdentifier">dir</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="translprim.mli.html#L18" title="ocaml/lambda/translprim.mli:18">event_before</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">))<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_send</span><span class="Statement">(</span><span class="ocamlLCIdentifier">expr</span>, <span class="ocamlLCIdentifier">met</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L449">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">lam</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_loc</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">met</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Tmeth_val</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">obj</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">expr</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Lsend</span> <span class="Statement">(</span><span class="Constant">Self</span>, <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="ocamlLCIdentifier">obj</span>, <span class="Constant">[]</span>, <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Tmeth_name</span> <span class="ocamlLCIdentifier">nm</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">obj</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">expr</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L339" title="ocaml/lambda/translcore.ml:339">tag</a></span>, <span class="ocamlLCIdentifier">cache</span><span class="Statement">)</span> <span class="Statement">=</span> <span class="PreProc">Translobj</span>.<span class="ocamlLCIdentifier"><a href="translobj.ml.html#L60" title="ocaml/lambda/translobj.ml:60">meth</a></span> <span class="ocamlLCIdentifier">obj</span> <span class="ocamlLCIdentifier">nm</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span> <span class="Statement">=</span> <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">cache</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">[]</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="Constant">Public</span> <span class="Statement">else</span> <span class="Constant">Cached</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Lsend</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span>, <span class="ocamlLCIdentifier"><a href="#L339" title="ocaml/lambda/translcore.ml:339">tag</a></span>, <span class="ocamlLCIdentifier">obj</span>, <span class="ocamlLCIdentifier">cache</span>, <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Tmeth_ancestor</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L60" title="ocaml/lambda/translobj.ml:60">meth</a></span>, <span class="ocamlLCIdentifier">path_self</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L461">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">self</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L404" title="ocaml/lambda/lambda.mli:404">transl_value_path</a></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_env</span> <span class="ocamlLCIdentifier">path_self</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Lapply</span> <span class="Statement">{</span><span class="ocamlLCIdentifier">ap_loc</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_func</span> <span class="Statement">=</span> <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L60" title="ocaml/lambda/translobj.ml:60">meth</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_args</span> <span class="Statement">=</span> <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L461" title="ocaml/lambda/translcore.ml:461">self</a></span><span class="Statement">];<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_tailcall</span> <span class="Statement">=</span> <span class="Constant">Default_tailcall</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_inlined</span> <span class="Statement">=</span> <span class="Constant">Default_inline</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_specialised</span> <span class="Statement">=</span> <span class="Constant">Default_specialise</span><span class="Statement">}<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="translprim.mli.html#L21" title="ocaml/lambda/translprim.mli:21">event_after</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a><br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_new</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span>, <span class="Statement">{</span><span class="PreProc">Location</span>.<span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">=</span><span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">}</span>, <span class="Statement">_)</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L471">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">loc</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><span class="linkable">loc</span></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Lapply</span><span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_loc</span><span class="Statement">=</span><span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_func</span><span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pfield</span> <span class="Statement">(</span><span class="Constant">0</span>, <span class="Constant">Pointer</span>, <span class="Constant">Mutable</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="lambda.mli.html#L406" title="ocaml/lambda/lambda.mli:406">transl_class_path</a></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_env</span> <span class="ocamlLCIdentifier"><a href="translclass.ml.html#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span><span class="Statement">]</span>, <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">);<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_args</span><span class="Statement">=[</span><span class="ocamlLCIdentifier"><a href="lambda.mli.html#L366" title="ocaml/lambda/lambda.mli:366">lambda_unit</a></span><span class="Statement">];<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_tailcall</span><span class="Statement">=</span><span class="Constant">Default_tailcall</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_inlined</span><span class="Statement">=</span><span class="Constant">Default_inline</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_specialised</span><span class="Statement">=</span><span class="Constant">Default_specialise</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">}<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_instvar</span><span class="Statement">(</span><span class="ocamlLCIdentifier">path_self</span>, <span class="ocamlLCIdentifier"><a href="translclass.ml.html#L444" title="ocaml/lambda/translclass.ml:444">path</a></span>, <span class="Statement">_)</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L483">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">loc</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_loc</span> <span class="Statement">in<br/></li>
<li><a id="L484">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">self</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L404" title="ocaml/lambda/lambda.mli:404">transl_value_path</a></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_env</span> <span class="ocamlLCIdentifier">path_self</span> <span class="Statement">in<br/></li>
<li><a id="L485">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">var</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L404" title="ocaml/lambda/lambda.mli:404">transl_value_path</a></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_env</span> <span class="ocamlLCIdentifier"><a href="translclass.ml.html#L444" title="ocaml/lambda/translclass.ml:444">path</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pfield_computed</span>, <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L461" title="ocaml/lambda/translcore.ml:461">self</a></span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="#L485" title="ocaml/lambda/translcore.ml:485">var</a></span><span class="Statement">]</span>, <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_setinstvar</span><span class="Statement">(</span><span class="ocamlLCIdentifier">path_self</span>, <span class="ocamlLCIdentifier"><a href="translclass.ml.html#L444" title="ocaml/lambda/translclass.ml:444">path</a></span>, <span class="Statement">_</span>, <span class="ocamlLCIdentifier">expr</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L488">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">loc</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_loc</span> <span class="Statement">in<br/></li>
<li><a id="L489">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">self</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L404" title="ocaml/lambda/lambda.mli:404">transl_value_path</a></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_env</span> <span class="ocamlLCIdentifier">path_self</span> <span class="Statement">in<br/></li>
<li><a id="L490">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">var</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L404" title="ocaml/lambda/lambda.mli:404">transl_value_path</a></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_env</span> <span class="ocamlLCIdentifier"><a href="translclass.ml.html#L444" title="ocaml/lambda/translclass.ml:444">path</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L922" title="ocaml/lambda/translcore.ml:922">transl_setinstvar</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier"><a href="#L461" title="ocaml/lambda/translcore.ml:461">self</a></span> <span class="ocamlLCIdentifier"><a href="#L485" title="ocaml/lambda/translcore.ml:485">var</a></span> <span class="ocamlLCIdentifier">expr<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_override</span><span class="Statement">(</span><span class="ocamlLCIdentifier">path_self</span>, <span class="ocamlLCIdentifier">modifs</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L493">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">loc</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_loc</span> <span class="Statement">in<br/></li>
<li><a id="L494">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">self</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L404" title="ocaml/lambda/lambda.mli:404">transl_value_path</a></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_env</span> <span class="ocamlLCIdentifier">path_self</span> <span class="Statement">in<br/></li>
<li><a id="L495">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">cpy</span></span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;copy&quot;</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">Strict</span>, <span class="Constant">Pgenval</span>, <span class="ocamlLCIdentifier"><a href="#L495" title="ocaml/lambda/translcore.ml:495">cpy</a></span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">Lapply</span><span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">ap_loc</span><span class="Statement">=</span><span class="Constant">Loc_unknown</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">ap_func</span><span class="Statement">=</span><span class="PreProc">Translobj</span>.<span class="ocamlLCIdentifier"><a href="translobj.ml.html#L21" title="ocaml/lambda/translobj.ml:21">oo_prim</a></span> <span class="Constant">&quot;copy&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">ap_args</span><span class="Statement">=[</span><span class="ocamlLCIdentifier"><a href="#L461" title="ocaml/lambda/translcore.ml:461">self</a></span><span class="Statement">];<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">ap_tailcall</span><span class="Statement">=</span><span class="Constant">Default_tailcall</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">ap_inlined</span><span class="Statement">=</span><span class="Constant">Default_inline</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">ap_specialised</span><span class="Statement">=</span><span class="Constant">Default_specialise</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">}</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">fold_right<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(fun</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="Statement">_</span>, <span class="ocamlLCIdentifier">expr</span><span class="Statement">)</span> <span class="ocamlLCIdentifier">rem</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Lsequence</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L922" title="ocaml/lambda/translcore.ml:922">transl_setinstvar</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="Constant">Loc_unknown<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L495" title="ocaml/lambda/translcore.ml:495">cpy</a></span><span class="Statement">)</span> <span class="Statement">(</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier">expr</span>, <span class="ocamlLCIdentifier">rem</span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">modifs<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L495" title="ocaml/lambda/translcore.ml:495">cpy</a></span><span class="Statement">))<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_letmodule</span><span class="Statement">(</span><span class="Constant">None</span>, <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span>, <span class="Constant">Mp_present</span>, <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L706" title="ocaml/lambda/translmod.ml:706">modl</a></span>, <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L512">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">lam</span></span> <span class="Statement">=</span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L37" title="ocaml/lambda/translcore.ml:37">transl_module</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="Constant">Tcoerce_none</span> <span class="Constant">None</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L706" title="ocaml/lambda/translmod.ml:706">modl</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Lsequence</span><span class="Statement">(</span><span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pignore</span>, <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span><span class="Statement">]</span>, <span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span>.<span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_letmodule</span><span class="Statement">(</span><span class="Constant">Some</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="ocamlLCIdentifier">_loc</span>, <span class="Constant">Mp_present</span>, <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L706" title="ocaml/lambda/translmod.ml:706">modl</a></span>, <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L516">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">defining_expr</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">mod_scopes</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">enter_module_definition</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L37" title="ocaml/lambda/translcore.ml:37">transl_module</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span>:<span class="ocamlLCIdentifier">mod_scopes</span> <span class="Constant">Tcoerce_none</span> <span class="Constant">None</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L706" title="ocaml/lambda/translmod.ml:706">modl</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">Strict</span>, <span class="Constant">Pgenval</span>, <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="ocamlLCIdentifier"><a href="#L516" title="ocaml/lambda/translcore.ml:516">defining_expr</a></span>, <span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_letmodule</span><span class="Statement">(_</span>, <span class="Statement">_</span>, <span class="Constant">Mp_absent</span>, <span class="Statement">_</span>, <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a><br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_letexception</span><span class="Statement">(</span><span class="ocamlLCIdentifier">cd</span>, <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">Strict</span>, <span class="Constant">Pgenval</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">cd</span>.<span class="ocamlLCIdentifier">ext_id</span>, <span class="ocamlLCIdentifier"><a href="translcore.mli.html#L36" title="ocaml/lambda/translcore.mli:36">transl_extension_constructor</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_env</span> <span class="Constant">None</span> <span class="ocamlLCIdentifier">cd</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_pack</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L706" title="ocaml/lambda/translmod.ml:706">modl</a></span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L37" title="ocaml/lambda/translcore.ml:37">transl_module</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="Constant">Tcoerce_none</span> <span class="Constant">None</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L706" title="ocaml/lambda/translmod.ml:706">modl</a><br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_assert</span> <span class="Statement">({</span><span class="ocamlLCIdentifier">exp_desc</span><span class="Statement">=</span><span class="Constant">Texp_construct</span><span class="Statement">(_</span>, <span class="Statement">{</span><span class="ocamlLCIdentifier">cstr_name</span><span class="Statement">=</span><span class="Constant">&quot;false&quot;</span><span class="Statement">}</span>, <span class="Statement">_)}</span>, <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">assert_failed</span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_assert</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">cond</span>, <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="PreProc">Clflags</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">noassert<br/></li>
<li></span><span class="ocamlNone">&nbsp; &nbsp; &nbsp; </span><span class="Statement">then</span> <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L366" title="ocaml/lambda/lambda.mli:366">lambda_unit</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">else</span> <span class="Constant">Lifthenelse</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">cond</span>, <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L366" title="ocaml/lambda/lambda.mli:366">lambda_unit</a></span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">assert_failed</span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_lazy</span> <span class="ocamlLCIdentifier">e</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Comment">(* when e needs no computation (constants, identifiers, ...), we<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; optimize the translation just as Lazy.lazy_from_val would<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; do *)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="PreProc">Typeopt</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">classify_lazy_argument</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">`Constant_or_function</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">(* A constant expr (of type &lt;&gt; float if [Config.flat_float_array] is<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; true) gets compiled as itself. *)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">`Float_that_cannot_be_shortcut</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">(* We don'<a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a> need to wrap with Popaque: this forward<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; block will never be shortcutted since it points to a float<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; and Config.flat_float_array is true. *)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pmakeblock</span><span class="Statement">(</span><span class="PreProc">Obj</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">forward_tag</span><span class="ocamlEnd">, </span><span class="Constant">Immutable</span><span class="ocamlEnd">, </span><span class="Constant">None</span><span class="Statement">)</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="Statement">]</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">`Identifier</span><span class="ocamlEnd"> </span><span class="Constant">`Forward_value</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Comment">(* CR-someday mshinwell: Consider adding a new <a href="matching.ml.html#L2324" title="ocaml/lambda/matching.ml:2324">primitive</a><br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; that expresses the construction of forward_tag blocks.<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; We need to use [Popaque] here to prevent unsound<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; optimisation in Flambda, but the concept of a mutable<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; block doesn'<a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a> really match what is going on here.&nbsp; This<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; value may subsequently turn into an immediate... *)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">Lprim</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="Constant">Popaque</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">[</span><span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pmakeblock</span><span class="Statement">(</span><span class="PreProc">Obj</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">forward_tag</span><span class="ocamlEnd">, </span><span class="Constant">Immutable</span><span class="ocamlEnd">, </span><span class="Constant">None</span><span class="Statement">)</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="Statement">]</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">)]</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">`Identifier</span><span class="ocamlEnd"> </span><span class="Constant">`Other</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">`Other</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Comment">(* other cases compile to a lazy block holding a function *)<br/></li>
<li><a id="L567">&#x200c;</a></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><span class="linkable">fn</span></span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L30" title="ocaml/lambda/translclass.ml:30">lfunction</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span><span class="ocamlEnd">:</span><span class="Constant">Curried<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">~</span><span class="Identifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span><span class="ocamlEnd">:</span><span class="Statement">[</span><span class="PreProc">Ident</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">create_local</span><span class="ocamlEnd"> </span><span class="Constant">&quot;param&quot;</span><span class="ocamlEnd">, </span><span class="Constant">Pgenval</span><span class="Statement">]<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">~</span><span class="Identifier">return</span><span class="ocamlEnd">:</span><span class="Constant">Pgenval<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">~</span><span class="Identifier"><a href="simplif.ml.html#L760" title="ocaml/lambda/simplif.ml:760">attr</a></span><span class="ocamlEnd">:</span><span class="ocamlLCIdentifier"><a href="lambda.mli.html#L451" title="ocaml/lambda/lambda.mli:451">default_function_attribute</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">~</span><span class="Identifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="ocamlEnd">:</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">~</span><span class="Identifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="ocamlEnd">:</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pmakeblock</span><span class="Statement">(</span><span class="PreProc">Config</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">lazy_tag</span><span class="ocamlEnd">, </span><span class="Constant">Mutable</span><span class="ocamlEnd">, </span><span class="Constant">None</span><span class="Statement">)</span><span class="ocamlEnd">, </span><span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L567" title="ocaml/lambda/translcore.ml:567">fn</a></span><span class="Statement">]</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_object</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">cs</span>, <span class="ocamlLCIdentifier">meths</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L577">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">cty</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">cs</span>.<span class="ocamlLCIdentifier">cstr_type</span> <span class="Statement">in<br/></li>
<li><a id="L578">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">cl</span></span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;object&quot;</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="translcore.mli.html#L56" title="ocaml/lambda/translcore.mli:56">transl_object</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="translclass.ml.html#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span> <span class="ocamlLCIdentifier">meths<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">{</span> <span class="ocamlLCIdentifier">cl_desc</span> <span class="Statement">=</span> <span class="Constant">Tcl_structure</span> <span class="ocamlLCIdentifier">cs</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">cl_loc</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">cl_type</span> <span class="Statement">=</span> <span class="Constant">Cty_signature</span> <span class="ocamlLCIdentifier"><a href="#L577" title="ocaml/lambda/translcore.ml:577">cty</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">cl_env</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_env</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">cl_attributes</span> <span class="Statement">=</span> <span class="Constant">[]</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">}<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_letop</span><span class="Statement">{</span><span class="ocamlLCIdentifier">let_</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">ands</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">param</span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">;</span> <span class="ocamlLCIdentifier">partial</span><span class="Statement">}</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="translprim.mli.html#L21" title="ocaml/lambda/translprim.mli:21">event_after</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L1134" title="ocaml/lambda/translcore.ml:1134">transl_letop</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_loc</span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_env</span> <span class="ocamlLCIdentifier">let_</span> <span class="ocamlLCIdentifier">ands</span> <span class="ocamlLCIdentifier">param</span> <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span> <span class="ocamlLCIdentifier">partial</span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_unreachable</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">raise</span> <span class="Statement">(</span><span class="Constant">Error</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_loc</span>, <span class="Constant">Unreachable_reached</span><span class="Statement">))<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_open</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">od</span>, <span class="ocamlLCIdentifier">e</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L592">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">pure</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L614" title="ocaml/lambda/translcore.ml:614">pure_module</a></span> <span class="ocamlLCIdentifier">od</span>.<span class="ocamlLCIdentifier">open_expr</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Comment">(* this optimization shouldn'<a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a> be needed because Simplif would<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; actually <a href="matching.ml.html#L867" title="ocaml/lambda/matching.ml:867">remove</a> the [Llet] when it'<a href="translclass.ml.html#L563" title="ocaml/lambda/translclass.ml:563">s</a> not used.<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; But since [<a href="translmod.ml.html#L765" title="ocaml/lambda/translmod.ml:765">scan_used_globals</a>] runs before Simplif, we need to<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; do it. *)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">od</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">open_bound_items</span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">[]</span><span class="ocamlEnd"> </span><span class="Statement">when</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L592" title="ocaml/lambda/translcore.ml:592">pure</a></span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="Constant">Alias</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li><a id="L600">&#x200c;</a></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><span class="linkable">oid</span></span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="PreProc">Ident</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">create_local</span><span class="ocamlEnd"> </span><span class="Constant">&quot;<a href="matching.ml.html#L419" title="ocaml/lambda/matching.ml:419">open</a>&quot;</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li><a id="L601">&#x200c;</a></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><span class="linkable">body</span></span><span class="ocamlEnd">, </span><span class="Statement">_</span><span class="ocamlEnd"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">List</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">fold_left</span><span class="ocamlEnd"> </span><span class="Statement">(fun</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">pos</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">Alias</span><span class="ocamlEnd">, </span><span class="Constant">Pgenval</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pfield</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">pos</span><span class="ocamlEnd">, </span><span class="Constant">Pointer</span><span class="ocamlEnd">, </span><span class="Constant">Mutable</span><span class="Statement">)</span><span class="ocamlEnd">, </span><span class="Statement">[</span><span class="Constant">Lvar</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L600" title="ocaml/lambda/translcore.ml:600">oid</a></span><span class="Statement">]</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">od</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">open_loc</span><span class="Statement">)</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">)</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">pos</span><span class="ocamlEnd"> + </span><span class="Constant">1<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlEnd">, </span><span class="Constant">0</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier">bound_value_identifiers</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">od</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">open_bound_items</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Llet</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L592" title="ocaml/lambda/translcore.ml:592">pure</a></span><span class="ocamlEnd">, </span><span class="Constant">Pgenval</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L600" title="ocaml/lambda/translcore.ml:600">oid</a></span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L37" title="ocaml/lambda/translcore.ml:37">transl_module</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="Constant">Tcoerce_none</span><span class="ocamlEnd"> </span><span class="Constant">None</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">od</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">open_expr</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span><br/></li>
<li><a id="L614">&#x200c;</a><span class="Statement">and</span> <span class="ocamlLCIdentifier"><span class="linkable">pure_module</span></span> <span class="ocamlLCIdentifier">m</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">m</span>.<span class="ocamlLCIdentifier">mod_desc</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Tmod_ident</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">Alias<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tmod_constraint</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">m</span>,<span class="Statement">_</span>,<span class="Statement">_</span>,<span class="Statement">_)</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="#L614" title="ocaml/lambda/translcore.ml:614">pure_module</a></span> <span class="ocamlLCIdentifier">m<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">Strict<br/></li>
<li></span><br/></li>
<li><span class="Statement">and</span> <span class="ocamlLCIdentifier">transl_list</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">expr_list</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier">expr_list<br/></li>
<li></span><br/></li>
<li><span class="Statement">and</span> <span class="ocamlLCIdentifier">transl_list_with_shape</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">expr_list</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">transl_with_shape</span> <span class="ocamlLCIdentifier">e</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L486" title="ocaml/lambda/translprim.ml:486">shape</a></span> <span class="Statement">=</span> <span class="PreProc">Typeopt</span>.<span class="ocamlLCIdentifier"><a href="printlambda.ml.html#L56" title="ocaml/lambda/printlambda.ml:56">value_kind</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_env</span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_type</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span>, <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L486" title="ocaml/lambda/translprim.ml:486">shape</a><br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">split</span> <span class="Statement">(</span><span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="ocamlLCIdentifier">transl_with_shape</span> <span class="ocamlLCIdentifier">expr_list</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="Statement">and</span> <span class="ocamlLCIdentifier">transl_guard</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">guard</span> <span class="ocamlLCIdentifier"><a href="#L1059" title="ocaml/lambda/translcore.ml:1059">rhs</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">expr</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="translprim.mli.html#L18" title="ocaml/lambda/translprim.mli:18">event_before</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L1059" title="ocaml/lambda/translcore.ml:1059">rhs</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L1059" title="ocaml/lambda/translcore.ml:1059">rhs</a></span><span class="Statement">)</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">guard</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">None</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">expr<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Some</span> <span class="ocamlLCIdentifier">cond</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="translprim.mli.html#L18" title="ocaml/lambda/translprim.mli:18">event_before</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">cond<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">Lifthenelse</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">cond</span>, <span class="ocamlLCIdentifier">expr</span>, <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L471" title="ocaml/lambda/lambda.mli:471">staticfail</a></span><span class="Statement">))<br/></li>
<li></span><br/></li>
<li><span class="Statement">and</span> <span class="ocamlLCIdentifier"><a href="#L913" title="ocaml/lambda/translcore.ml:913">transl_case</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="Statement">{</span><span class="ocamlLCIdentifier">c_lhs</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">c_guard</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">c_rhs</span><span class="Statement">}</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier">c_lhs</span>, <span class="ocamlLCIdentifier">transl_guard</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">c_guard</span> <span class="ocamlLCIdentifier">c_rhs</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="Statement">and</span> <span class="ocamlLCIdentifier">transl_cases</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">cases</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">cases</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">filter</span> <span class="Statement">(fun</span> <span class="ocamlLCIdentifier">c</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">c</span>.<span class="ocamlLCIdentifier">c_rhs</span>.<span class="ocamlLCIdentifier">exp_desc</span> <span class="Statement">&lt;&gt;</span> <span class="Constant">Texp_unreachable</span><span class="Statement">)</span> <span class="ocamlLCIdentifier">cases</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L913" title="ocaml/lambda/translcore.ml:913">transl_case</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier">cases<br/></li>
<li></span><br/></li>
<li><span class="Statement">and</span> <span class="ocamlLCIdentifier">transl_case_try</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="Statement">{</span><span class="ocamlLCIdentifier">c_lhs</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">c_guard</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">c_rhs</span><span class="Statement">}</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="#L198" title="ocaml/lambda/translcore.ml:198">iter_exn_names</a></span> <span class="PreProc">Translprim</span>.<span class="ocamlLCIdentifier"><a href="translprim.mli.html#L26" title="ocaml/lambda/translprim.mli:26">add_exception_ident</a></span> <span class="ocamlLCIdentifier">c_lhs</span><span class="Statement">;<br/></li>
<li></span>&nbsp; <span class="PreProc">Misc</span>.<span class="ocamlLCIdentifier">try_finally<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(fun</span> <span class="Constant">()</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">c_lhs</span>, <span class="ocamlLCIdentifier">transl_guard</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">c_guard</span> <span class="ocamlLCIdentifier">c_rhs</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier">always</span>:<span class="Statement">(fun</span> <span class="Constant">()</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L198" title="ocaml/lambda/translcore.ml:198">iter_exn_names</a></span> <span class="PreProc">Translprim</span>.<span class="ocamlLCIdentifier"><a href="translprim.mli.html#L27" title="ocaml/lambda/translprim.mli:27">remove_exception_ident</a></span> <span class="ocamlLCIdentifier">c_lhs</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="Statement">and</span> <span class="ocamlLCIdentifier">transl_cases_try</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">cases</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">cases</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">filter</span> <span class="Statement">(fun</span> <span class="ocamlLCIdentifier">c</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">c</span>.<span class="ocamlLCIdentifier">c_rhs</span>.<span class="ocamlLCIdentifier">exp_desc</span> <span class="Statement">&lt;&gt;</span> <span class="Constant">Texp_unreachable</span><span class="Statement">)</span> <span class="ocamlLCIdentifier">cases</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier">transl_case_try</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier">cases<br/></li>
<li></span><br/></li>
<li><span class="Statement">and</span> <span class="ocamlLCIdentifier">transl_tupled_cases</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">patl_expr_list</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">patl_expr_list</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">filter</span> <span class="Statement">(fun</span> <span class="Statement">(_</span>,<span class="Statement">_</span>,<span class="ocamlLCIdentifier">e</span><span class="Statement">)</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_desc</span> <span class="Statement">&lt;&gt;</span> <span class="Constant">Texp_unreachable</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">patl_expr_list</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="Statement">(fun</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">patl</span>, <span class="ocamlLCIdentifier">guard</span>, <span class="ocamlLCIdentifier">expr</span><span class="Statement">)</span> <span class="Statement">-&gt;</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">patl</span>, <span class="ocamlLCIdentifier">transl_guard</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">guard</span> <span class="ocamlLCIdentifier">expr</span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier">patl_expr_list<br/></li>
<li></span><br/></li>
<li><span class="Statement">and</span> <span class="ocamlLCIdentifier"><a href="translcore.mli.html#L27" title="ocaml/lambda/translcore.mli:27">transl_apply</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">?(</span><span class="Identifier">tailcall</span><span class="Statement">=</span><span class="Constant">Default_tailcall</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">?(</span><span class="Identifier">inlined</span> <span class="Statement">=</span> <span class="Constant">Default_inline</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">?(</span><span class="Identifier">specialised</span> <span class="Statement">=</span> <span class="Constant">Default_specialise</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="ocamlLCIdentifier">sargs</span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a><br/></li>
<li></span>&nbsp; <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="translclass.ml.html#L46" title="ocaml/lambda/translclass.ml:46">lapply</a></span> <span class="ocamlLCIdentifier">funct</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">funct</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Lsend</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L473" title="ocaml/lambda/translprim.ml:473">k</a></span>, <span class="ocamlLCIdentifier">lmet</span>, <span class="ocamlLCIdentifier">lobj</span>, <span class="ocamlLCIdentifier">largs</span>, <span class="Statement">_)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Lsend</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L473" title="ocaml/lambda/translprim.ml:473">k</a></span>, <span class="ocamlLCIdentifier">lmet</span>, <span class="ocamlLCIdentifier">lobj</span>, <span class="ocamlLCIdentifier">largs</span> @ <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span>, <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Levent</span><span class="Statement">(</span><span class="Constant">Lsend</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L473" title="ocaml/lambda/translprim.ml:473">k</a></span>, <span class="ocamlLCIdentifier">lmet</span>, <span class="ocamlLCIdentifier">lobj</span>, <span class="ocamlLCIdentifier">largs</span>, <span class="Statement">_)</span>, <span class="Statement">_)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Lsend</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L473" title="ocaml/lambda/translprim.ml:473">k</a></span>, <span class="ocamlLCIdentifier">lmet</span>, <span class="ocamlLCIdentifier">lobj</span>, <span class="ocamlLCIdentifier">largs</span> @ <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span>, <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Lapply</span> <span class="ocamlLCIdentifier">ap</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Lapply</span> <span class="Statement">{</span><span class="ocamlLCIdentifier">ap</span> <span class="Statement">with</span> <span class="ocamlLCIdentifier">ap_args</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">ap</span>.<span class="ocamlLCIdentifier">ap_args</span> @ <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span><span class="Statement">;</span> <span class="ocamlLCIdentifier">ap_loc</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">}<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="ocamlLCIdentifier">lexp</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Lapply</span> <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_loc</span><span class="Statement">=</span><span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_func</span><span class="Statement">=</span><span class="ocamlLCIdentifier">lexp</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_args</span><span class="Statement">=</span><span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_tailcall</span><span class="Statement">=</span><span class="ocamlLCIdentifier">tailcall</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_inlined</span><span class="Statement">=</span><span class="ocamlLCIdentifier">inlined</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_specialised</span><span class="Statement">=</span><span class="ocamlLCIdentifier">specialised</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">}<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier">build_apply</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">None</span>, <span class="ocamlLCIdentifier">optional</span><span class="Statement">)</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier"><a href="#L708" title="ocaml/lambda/translcore.ml:708">l</a></span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">defs</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">ref</span> <span class="Constant">[]</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">protect</span> <span class="ocamlLCIdentifier"><a href="#L56" title="ocaml/lambda/translcore.ml:56">name</a></span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Lvar</span> <span class="Statement">_</span> <span class="Statement">|</span> <span class="Constant">Lconst</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="ocamlLCIdentifier"><a href="#L56" title="ocaml/lambda/translcore.ml:56">name</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">defs</span> <span class="Statement">:=</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span><span class="Statement">)</span> <span class="Statement">::</span> <span class="Statement">!</span><span class="ocamlLCIdentifier">defs</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span>, <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span>' <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="PreProc">List</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">for_all</span><span class="ocamlNone"> </span><span class="Statement">(fun</span><span class="ocamlNone"> </span><span class="Statement">(_</span><span class="ocamlNone">,</span><span class="ocamlLCIdentifier">opt</span><span class="Statement">)</span><span class="ocamlNone"> </span><span class="Statement">-&gt;</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">opt</span><span class="Statement">)</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="Constant">[]</span>, <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span>, <span class="Constant">[]<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">[]</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">else</span> <span class="ocamlLCIdentifier"><a href="translclass.ml.html#L46" title="ocaml/lambda/translclass.ml:46">lapply</a></span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">(</span><span class="PreProc">List</span>.<span class="ocamlLCIdentifier">rev_map</span> <span class="ocamlLCIdentifier">fst</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li><a id="L707">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">handle</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">protect</span> <span class="Constant">&quot;<a href="#L1163" title="ocaml/lambda/translcore.ml:1163">func</a>&quot;</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">in<br/></li>
<li><a id="L708">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">l</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="Statement">(fun</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span>, <span class="ocamlLCIdentifier">opt</span><span class="Statement">)</span> <span class="Statement">-&gt;</span> <span class="PreProc">Option</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier">protect</span> <span class="Constant">&quot;<a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a>&quot;</span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span>, <span class="ocamlLCIdentifier">opt</span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="#L708" title="ocaml/lambda/translcore.ml:708">l</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li><a id="L711">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">id_arg</span></span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;param&quot;</span> <span class="Statement">in<br/></li>
<li><a id="L712">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">body</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">build_apply</span> <span class="ocamlLCIdentifier"><a href="#L707" title="ocaml/lambda/translcore.ml:707">handle</a></span> <span class="Statement">((</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L711" title="ocaml/lambda/translcore.ml:711">id_arg</a></span>, <span class="ocamlLCIdentifier">optional</span><span class="Statement">)::</span><span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span>'<span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="#L708" title="ocaml/lambda/translcore.ml:708">l</a></span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Lfunction</span><span class="Statement">{</span><span class="ocamlLCIdentifier"><a href="#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span> <span class="Statement">=</span> <span class="Constant">Curried</span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a></span><span class="Statement">;</span> <span class="ocamlLCIdentifier">return</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L760" title="ocaml/lambda/simplif.ml:760">attr</a></span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">}<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">when</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">length</span> <span class="ocamlLCIdentifier"><a href="#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a></span> <span class="Statement">&lt;</span> <span class="PreProc">Lambda</span>.<span class="ocamlLCIdentifier"><a href="lambda.mli.html#L458" title="ocaml/lambda/lambda.mli:458">max_arity</a></span> <span class="Constant">()</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="translclass.ml.html#L30" title="ocaml/lambda/translclass.ml:30">lfunction</a></span> <span class="Statement">~</span><span class="Identifier"><a href="#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span>:<span class="Constant">Curried<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span>:<span class="Statement">((</span><span class="ocamlLCIdentifier"><a href="#L711" title="ocaml/lambda/translcore.ml:711">id_arg</a></span>, <span class="Constant">Pgenval</span><span class="Statement">)::</span><span class="ocamlLCIdentifier"><a href="#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier">return<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span>:<span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">~</span><span class="Identifier"><a href="simplif.ml.html#L760" title="ocaml/lambda/simplif.ml:760">attr</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="translclass.ml.html#L30" title="ocaml/lambda/translclass.ml:30">lfunction</a></span> <span class="Statement">~</span><span class="Identifier"><a href="#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span>:<span class="Constant">Curried</span> <span class="Statement">~</span><span class="Identifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span>:<span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L711" title="ocaml/lambda/translcore.ml:711">id_arg</a></span>, <span class="Constant">Pgenval</span><span class="Statement">]<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier">return</span>:<span class="Constant">Pgenval</span> <span class="Statement">~</span><span class="Identifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span>:<span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier"><a href="simplif.ml.html#L760" title="ocaml/lambda/simplif.ml:760">attr</a></span>:<span class="ocamlLCIdentifier"><a href="lambda.mli.html#L452" title="ocaml/lambda/lambda.mli:452">default_stub_attribute</a></span> <span class="Statement">~</span><span class="Identifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">fold_left<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(fun</span> <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span><span class="Statement">)</span> <span class="Statement">-&gt;</span> <span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">Strict</span>, <span class="Constant">Pgenval</span>, <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span>, <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span> <span class="Statement">!</span><span class="ocamlLCIdentifier">defs<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Statement">(</span><span class="Constant">Some</span> <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span>, <span class="ocamlLCIdentifier">optional</span><span class="Statement">)</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier"><a href="#L708" title="ocaml/lambda/translcore.ml:708">l</a></span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">build_apply</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">((</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span>, <span class="ocamlLCIdentifier">optional</span><span class="Statement">)</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="#L708" title="ocaml/lambda/translcore.ml:708">l</a><br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">[]</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="translclass.ml.html#L46" title="ocaml/lambda/translclass.ml:46">lapply</a></span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">(</span><span class="PreProc">List</span>.<span class="ocamlLCIdentifier">rev_map</span> <span class="ocamlLCIdentifier">fst</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L732" title="ocaml/lambda/simplif.ml:732">args</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier">build_apply</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Constant">[]</span> <span class="Statement">(</span><span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="Statement">(fun</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L708" title="ocaml/lambda/translcore.ml:708">l</a></span>, <span class="ocamlLCIdentifier">x</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="PreProc">Option</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier">x</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="PreProc">Btype</span>.<span class="ocamlLCIdentifier">is_optional</span> <span class="ocamlLCIdentifier"><a href="#L708" title="ocaml/lambda/translcore.ml:708">l</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">sargs</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp;&nbsp; : <span class="PreProc">Lambda</span>.<span class="ocamlLCIdentifier"><a href="printlambda.ml.html#L705" title="ocaml/lambda/printlambda.ml:705">lambda</a></span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><a id="L741">&#x200c;</a><span class="Statement">and</span> <span class="ocamlLCIdentifier"><span class="linkable">transl_curried_function</span><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier">return<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">repr</span> <span class="ocamlLCIdentifier">partial</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">param</span>:<span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier">cases</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L458" title="ocaml/lambda/lambda.mli:458">max_arity</a></span> <span class="Statement">=</span> <span class="PreProc">Lambda</span>.<span class="ocamlLCIdentifier"><a href="lambda.mli.html#L458" title="ocaml/lambda/lambda.mli:458">max_arity</a></span> <span class="Constant">()</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L1181" title="ocaml/lambda/translmod.ml:1181">loop</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier">return</span> <span class="Statement">~</span><span class="Identifier">arity</span> <span class="ocamlLCIdentifier">partial</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">param</span>:<span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier">cases</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">cases</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">[{</span><span class="ocamlLCIdentifier">c_lhs</span><span class="Statement">=</span><span class="ocamlLCIdentifier">pat</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">c_guard</span><span class="Statement">=</span><span class="Constant">None</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">c_rhs</span><span class="Statement">={</span><span class="ocamlLCIdentifier">exp_desc</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">Texp_function<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">{</span> <span class="ocamlLCIdentifier">arg_label</span> <span class="Statement">=</span> <span class="Statement">_;</span> <span class="ocamlLCIdentifier">param</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">param</span>'<span class="Statement">;</span> <span class="ocamlLCIdentifier">cases</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">cases</span>'<span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">partial</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">partial</span>'<span class="Statement">;</span> <span class="Statement">};</span> <span class="ocamlLCIdentifier">exp_env</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">exp_type</span><span class="Statement">;</span><span class="ocamlLCIdentifier">exp_loc</span><span class="Statement">}}]<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">when</span> <span class="ocamlLCIdentifier">arity</span> <span class="Statement">&lt;</span>&nbsp; <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L458" title="ocaml/lambda/lambda.mli:458">max_arity</a></span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone">&nbsp; </span><span class="PreProc">Parmatch</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">inactive</span><span class="ocamlNone"> </span><span class="Statement">~</span><span class="Identifier">partial</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">pat<br/></li>
<li></span><span class="ocamlNone">&nbsp; &nbsp; &nbsp; </span><span class="Statement">then<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="printlambda.ml.html#L56" title="ocaml/lambda/printlambda.ml:56">value_kind</a></span> <span class="ocamlLCIdentifier">pat</span>.<span class="ocamlLCIdentifier">pat_env</span> <span class="ocamlLCIdentifier">pat</span>.<span class="ocamlLCIdentifier">pat_type</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="printlambda.ml.html#L62" title="ocaml/lambda/printlambda.ml:62">return_kind</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">function_return_value_kind</span> <span class="ocamlLCIdentifier">exp_env</span> <span class="ocamlLCIdentifier">exp_type</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="Statement">((_</span>, <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span>, <span class="ocamlLCIdentifier">return</span><span class="Statement">)</span>, <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">)</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L1181" title="ocaml/lambda/translmod.ml:1181">loop</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">exp_loc</span> <span class="ocamlLCIdentifier"><a href="printlambda.ml.html#L62" title="ocaml/lambda/printlambda.ml:62">return_kind</a></span> <span class="Statement">~</span><span class="Identifier">arity</span>:<span class="Statement">(</span><span class="ocamlLCIdentifier">arity</span> + <span class="Constant">1</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">partial</span>' <span class="ocamlLCIdentifier">param</span>' <span class="ocamlLCIdentifier">cases</span>'<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">((</span><span class="Constant">Curried</span>, <span class="Statement">(</span><span class="ocamlLCIdentifier">param</span>, <span class="ocamlLCIdentifier"><a href="#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span><span class="Statement">)</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span>, <span class="ocamlLCIdentifier">return</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="PreProc">Matching</span>.<span class="ocamlLCIdentifier"><a href="matching.mli.html#L23" title="ocaml/lambda/matching.mli:23">for_function</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="Constant">None</span> <span class="Statement">(</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">param</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">[</span><span class="ocamlLCIdentifier">pat</span>, <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">]</span> <span class="ocamlLCIdentifier">partial</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">else</span> <span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">partial</span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Total</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">Location</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">prerr_warning</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">pat</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">pat_loc<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Match_on_mutable_state_prevent_uncurry<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Partial</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="Constant">()<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">transl_tupled_function</span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier">arity<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">return</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">repr</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">partial</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">param</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cases<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="ocamlLCIdentifier">cases</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">transl_tupled_function</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="Statement">~</span><span class="Identifier">arity<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier">return</span> <span class="ocamlLCIdentifier">repr</span> <span class="ocamlLCIdentifier">partial</span> <span class="ocamlLCIdentifier">param</span> <span class="ocamlLCIdentifier">cases<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L1181" title="ocaml/lambda/translmod.ml:1181">loop</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier">return</span> <span class="Statement">~</span><span class="Identifier">arity</span>:<span class="Constant">1</span> <span class="ocamlLCIdentifier">partial</span> <span class="ocamlLCIdentifier">param</span> <span class="ocamlLCIdentifier">cases<br/></li>
<li></span><br/></li>
<li><span class="Statement">and</span> <span class="ocamlLCIdentifier">transl_tupled_function<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="Statement">~</span><span class="Identifier">arity</span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier">return<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">repr</span> <span class="ocamlLCIdentifier">partial</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">param</span>:<span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier">cases</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">cases</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">{</span><span class="ocamlLCIdentifier">c_lhs</span><span class="Statement">={</span><span class="ocamlLCIdentifier">pat_desc</span> <span class="Statement">=</span> <span class="Constant">Tpat_tuple</span> <span class="ocamlLCIdentifier">pl</span><span class="Statement">}}</span> <span class="Statement">::</span> <span class="Statement">_<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">when</span> <span class="Statement">!</span><span class="PreProc">Clflags</span>.<span class="ocamlLCIdentifier">native_code<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">&amp;&amp;</span> <span class="ocamlLCIdentifier">arity</span> <span class="Statement">=</span> <span class="Constant">1<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">&amp;&amp;</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">length</span> <span class="ocamlLCIdentifier">pl</span> <span class="Statement">&lt;=</span> <span class="Statement">(</span><span class="PreProc">Lambda</span>.<span class="ocamlLCIdentifier"><a href="lambda.mli.html#L458" title="ocaml/lambda/lambda.mli:458">max_arity</a></span> <span class="Constant">()</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">try<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L3846" title="ocaml/lambda/matching.ml:3846">size</a></span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="PreProc">List</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">length</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">pl</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">pats_expr_list</span><span class="ocamlEnd"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">List</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(fun</span><span class="ocamlEnd"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier">c_lhs</span><span class="Statement">;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">c_guard</span><span class="Statement">;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">c_rhs</span><span class="Statement">}</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="PreProc">Matching</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="matching.mli.html#L47" title="ocaml/lambda/matching.mli:47">flatten_pattern</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L3846" title="ocaml/lambda/matching.ml:3846">size</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">c_lhs</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">c_guard</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">c_rhs</span><span class="Statement">))<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">kinds</span><span class="ocamlEnd"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Comment">(* All the patterns might not <a href="translobj.ml.html#L27" title="ocaml/lambda/translobj.ml:27">share</a> the same types. We must take the<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <a href="matching.ml.html#L900" title="ocaml/lambda/matching.ml:900">union</a> of the patterns types *)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">pats_expr_list</span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">[]</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="Statement">assert</span><span class="ocamlEnd"> </span><span class="Constant">false<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">pats</span><span class="ocamlEnd">, </span><span class="Statement">_</span><span class="ocamlEnd">, </span><span class="Statement">_)</span><span class="ocamlEnd"> </span><span class="Statement">::</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cases</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">first_case_kinds</span><span class="ocamlEnd"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">List</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span><span class="ocamlEnd"> </span><span class="Statement">(fun</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">pat</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="printlambda.ml.html#L56" title="ocaml/lambda/printlambda.ml:56">value_kind</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">pat</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">pat_env</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">pat</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">pat_type</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">pats<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">List</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">fold_left<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(fun</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">kinds</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">pats</span><span class="ocamlEnd">, </span><span class="Statement">_</span><span class="ocamlEnd">, </span><span class="Statement">_)</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="PreProc">List</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">map2</span><span class="ocamlEnd"> </span><span class="Statement">(fun</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">pat</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier">value_kind_union</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L383" title="ocaml/lambda/translcore.ml:383">kind</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="printlambda.ml.html#L56" title="ocaml/lambda/printlambda.ml:56">value_kind</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">pat</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">pat_env</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">pat</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">pat_type</span><span class="Statement">))<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier">kinds</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">pats</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">first_case_kinds</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cases<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">tparams</span><span class="ocamlEnd"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">List</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span><span class="ocamlEnd"> </span><span class="Statement">(fun</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="PreProc">Ident</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">create_local</span><span class="ocamlEnd"> </span><span class="Constant">&quot;param&quot;</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">kinds<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="PreProc">List</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">fst</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">tparams</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">((</span><span class="Constant">Tupled</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">tparams</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">return</span><span class="Statement">)</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="PreProc">Matching</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="matching.mli.html#L40" title="ocaml/lambda/matching.mli:40">for_tupled_function</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier">transl_tupled_cases</span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">pats_expr_list</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">partial</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Statement">with</span><span class="ocamlEnd"> </span><span class="PreProc">Matching</span><span class="ocamlEnd">.</span><span class="Constant">Cannot_flatten</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">transl_function0</span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">return</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">repr</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">partial</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">param</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cases<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">transl_function0</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier">return</span> <span class="ocamlLCIdentifier">repr</span> <span class="ocamlLCIdentifier">partial</span> <span class="ocamlLCIdentifier">param</span> <span class="ocamlLCIdentifier">cases<br/></li>
<li></span><br/></li>
<li><span class="Statement">and</span> <span class="ocamlLCIdentifier">transl_function0<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier">return<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">repr</span> <span class="ocamlLCIdentifier">partial</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">param</span>:<span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier">cases</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">cases</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">[]</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">(* With Camlp4, a pattern matching might be <a href="matching.ml.html#L533" title="ocaml/lambda/matching.ml:533">empty</a> *)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Pgenval<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Statement">{</span><span class="ocamlLCIdentifier">c_lhs</span><span class="Statement">=</span><span class="ocamlLCIdentifier">pat</span><span class="Statement">}</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier">other_cases</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">(* All the patterns might not <a href="translobj.ml.html#L27" title="ocaml/lambda/translobj.ml:27">share</a> the same types. We must take the<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <a href="matching.ml.html#L900" title="ocaml/lambda/matching.ml:900">union</a> of the patterns types *)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">fold_left</span> <span class="Statement">(fun</span> <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L473" title="ocaml/lambda/translprim.ml:473">k</a></span> <span class="Statement">{</span><span class="ocamlLCIdentifier">c_lhs</span><span class="Statement">=</span><span class="ocamlLCIdentifier">pat</span><span class="Statement">}</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">Typeopt</span>.<span class="ocamlLCIdentifier">value_kind_union</span> <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L473" title="ocaml/lambda/translprim.ml:473">k</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="printlambda.ml.html#L56" title="ocaml/lambda/printlambda.ml:56">value_kind</a></span> <span class="ocamlLCIdentifier">pat</span>.<span class="ocamlLCIdentifier">pat_env</span> <span class="ocamlLCIdentifier">pat</span>.<span class="ocamlLCIdentifier">pat_type</span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="printlambda.ml.html#L56" title="ocaml/lambda/printlambda.ml:56">value_kind</a></span> <span class="ocamlLCIdentifier">pat</span>.<span class="ocamlLCIdentifier">pat_env</span> <span class="ocamlLCIdentifier">pat</span>.<span class="ocamlLCIdentifier">pat_type</span><span class="Statement">)</span> <span class="ocamlLCIdentifier">other_cases<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">((</span><span class="Constant">Curried</span>, <span class="Statement">[</span><span class="ocamlLCIdentifier">param</span>, <span class="ocamlLCIdentifier"><a href="#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span><span class="Statement">]</span>, <span class="ocamlLCIdentifier">return</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp;&nbsp; <span class="PreProc">Matching</span>.<span class="ocamlLCIdentifier"><a href="matching.mli.html#L23" title="ocaml/lambda/matching.mli:23">for_function</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier">repr</span> <span class="Statement">(</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">param</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier">transl_cases</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">cases</span><span class="Statement">)</span> <span class="ocamlLCIdentifier">partial</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="Statement">and</span> <span class="ocamlLCIdentifier">transl_function</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span> <span class="ocamlLCIdentifier">param</span> <span class="ocamlLCIdentifier">cases</span> <span class="ocamlLCIdentifier">partial</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="Statement">((</span><span class="ocamlLCIdentifier"><a href="#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span>, <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span>, <span class="ocamlLCIdentifier">return</span><span class="Statement">)</span>, <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">)</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier">event_function</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(function</span> <span class="ocamlLCIdentifier">repr</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">pl</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L104" title="ocaml/lambda/translcore.ml:104">push_defaults</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_loc</span> <span class="ocamlLCIdentifier">cases</span> <span class="ocamlLCIdentifier">partial</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="printlambda.ml.html#L62" title="ocaml/lambda/printlambda.ml:62">return_kind</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">function_return_value_kind</span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_env</span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_type</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L741" title="ocaml/lambda/translcore.ml:741">transl_curried_function</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_loc</span> <span class="ocamlLCIdentifier"><a href="printlambda.ml.html#L62" title="ocaml/lambda/printlambda.ml:62">return_kind</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">repr</span> <span class="ocamlLCIdentifier">partial</span> <span class="ocamlLCIdentifier">param</span> <span class="ocamlLCIdentifier">pl</span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L760" title="ocaml/lambda/simplif.ml:760">attr</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L451" title="ocaml/lambda/lambda.mli:451">default_function_attribute</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_loc</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="translclass.ml.html#L30" title="ocaml/lambda/translclass.ml:30">lfunction</a></span> <span class="Statement">~</span><span class="Identifier"><a href="#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span> <span class="Statement">~</span><span class="Identifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span> <span class="Statement">~</span><span class="Identifier">return</span> <span class="Statement">~</span><span class="Identifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span> <span class="Statement">~</span><span class="Identifier"><a href="simplif.ml.html#L760" title="ocaml/lambda/simplif.ml:760">attr</a></span> <span class="Statement">~</span><span class="Identifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">attrs</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Comment">(* Collect attributes from the Pexp_newtype node for locally abstract types.<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp;&nbsp; Otherwise we'd ignore the attribute in, e.g.:<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; fun [@<a href="debuginfo.ml.html#L180" title="ocaml/lambda/debuginfo.ml:180">inline</a>] (type a) x -&gt; ...<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; *)<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">fold_left<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(fun</span> <span class="ocamlLCIdentifier">attrs</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">extra_exp</span>, <span class="Statement">_</span>, <span class="ocamlLCIdentifier">extra_attrs</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">extra_exp</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">|</span> <span class="Constant">Texp_newtype</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">extra_attrs</span> @ <span class="ocamlLCIdentifier">attrs<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">|</span> <span class="Statement">(</span><span class="Constant">Texp_constraint</span> <span class="Statement">_</span> <span class="Statement">|</span> <span class="Constant">Texp_coerce</span> <span class="Statement">_</span> <span class="Statement">|</span> <span class="Constant">Texp_poly</span> <span class="Statement">_)</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">attrs</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_attributes</span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_extra<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="PreProc">Translattribute</span>.<span class="ocamlLCIdentifier"><a href="translattribute.mli.html#L72" title="ocaml/lambda/translattribute.mli:72">add_function_attributes</a></span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_loc</span> <span class="ocamlLCIdentifier">attrs<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Like <a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a>, but used when a new scope was just introduced. *)<br/></li>
<li></span><span class="Statement">and</span> <span class="ocamlLCIdentifier"><a href="translcore.mli.html#L40" title="ocaml/lambda/translcore.mli:40">transl_scoped_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">expr</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier">transl_exp1</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="Statement">~</span><span class="Identifier">in_new_scope</span>:<span class="Constant">true</span> <span class="ocamlLCIdentifier">expr<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Decides whether a pattern binding should introduce a new scope. *)<br/></li>
<li></span><span class="Statement">and</span> <span class="ocamlLCIdentifier">transl_bound_exp</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="Statement">~</span><span class="Identifier">in_structure</span> <span class="ocamlLCIdentifier">pat</span> <span class="ocamlLCIdentifier">expr</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">should_introduce_scope</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">expr</span>.<span class="ocamlLCIdentifier">exp_desc</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Texp_function</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">true<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">when</span> <span class="ocamlLCIdentifier">in_structure</span> <span class="Statement">-&gt;</span> <span class="Constant">true<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">false</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">pat_bound_idents</span> <span class="ocamlLCIdentifier">pat</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="Statement">::</span> <span class="Statement">_)</span> <span class="Statement">when</span> <span class="ocamlLCIdentifier">should_introduce_scope</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="translcore.mli.html#L40" title="ocaml/lambda/translcore.mli:40">transl_scoped_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span>:<span class="Statement">(</span><span class="ocamlLCIdentifier">enter_value_definition</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier">expr<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">expr<br/></li>
<li></span><br/></li>
<li><span class="Comment">(*<br/></li>
<li></span><span class="Comment">&nbsp; Notice: <a href="translcore.mli.html#L33" title="ocaml/lambda/translcore.mli:33">transl_let</a> consumes (ie compiles) its pat_expr_list argument,<br/></li>
<li></span><span class="Comment">&nbsp; and returns a function that will take the <a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a> of the <a href="printlambda.ml.html#L705" title="ocaml/lambda/printlambda.ml:705">lambda</a>-let construct.<br/></li>
<li></span><span class="Comment">&nbsp; This complication allows choosing any compilation order for the<br/></li>
<li></span><span class="Comment">&nbsp; bindings and <a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a> of let constructs.<br/></li>
<li></span><span class="Comment">*)<br/></li>
<li></span><span class="Statement">and</span> <span class="ocamlLCIdentifier"><a href="translcore.mli.html#L33" title="ocaml/lambda/translcore.mli:33">transl_let</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="Statement">?(</span><span class="Identifier">in_structure</span><span class="Statement">=</span><span class="Constant">false</span><span class="Statement">)</span> <span class="ocamlLCIdentifier">rec_flag</span> <span class="ocamlLCIdentifier">pat_expr_list</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">rec_flag</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Nonrecursive</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier">transl</span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">[]</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">fun</span> <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Statement">{</span><span class="ocamlLCIdentifier">vb_pat</span><span class="Statement">=</span><span class="ocamlLCIdentifier">pat</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">vb_expr</span><span class="Statement">=</span><span class="ocamlLCIdentifier">expr</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">vb_attributes</span><span class="Statement">=</span><span class="ocamlLCIdentifier"><a href="simplif.ml.html#L760" title="ocaml/lambda/simplif.ml:760">attr</a></span><span class="Statement">;</span> <span class="ocamlLCIdentifier">vb_loc</span><span class="Statement">}</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier">rem</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">transl_bound_exp</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="Statement">~</span><span class="Identifier">in_structure</span> <span class="ocamlLCIdentifier">pat</span> <span class="ocamlLCIdentifier">expr</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="Statement">=</span> <span class="PreProc">Translattribute</span>.<span class="ocamlLCIdentifier"><a href="translattribute.mli.html#L72" title="ocaml/lambda/translattribute.mli:72">add_function_attributes</a></span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="ocamlLCIdentifier">vb_loc</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L760" title="ocaml/lambda/simplif.ml:760">attr</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">mk_body</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">transl</span> <span class="ocamlLCIdentifier">rem</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">fun</span> <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">Matching</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L3716" title="ocaml/lambda/matching.ml:3716">for_let</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">pat</span>.<span class="ocamlLCIdentifier">pat_loc</span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="ocamlLCIdentifier">pat</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">mk_body</span> <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">in</span> <span class="ocamlLCIdentifier">transl</span> <span class="ocamlLCIdentifier">pat_expr_list<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Recursive</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L906">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">idlist</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(fun</span> <span class="Statement">{</span><span class="ocamlLCIdentifier">vb_pat</span><span class="Statement">=</span><span class="ocamlLCIdentifier">pat</span><span class="Statement">}</span> <span class="Statement">-&gt;</span> <span class="Statement">match</span> <span class="ocamlLCIdentifier">pat</span>.<span class="ocamlLCIdentifier">pat_desc</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Tpat_var</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>,<span class="Statement">_)</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Tpat_alias</span> <span class="Statement">({</span><span class="ocamlLCIdentifier">pat_desc</span><span class="Statement">=</span><span class="Constant">Tpat_any</span><span class="Statement">}</span>, <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>,<span class="Statement">_)</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Statement">assert</span> <span class="Constant">false</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">pat_expr_list</span> <span class="Statement">in<br/></li>
<li><a id="L913">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">transl_case</span></span> <span class="Statement">{</span><span class="ocamlLCIdentifier">vb_expr</span><span class="Statement">=</span><span class="ocamlLCIdentifier">expr</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">vb_attributes</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">vb_loc</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">vb_pat</span><span class="Statement">}</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="Statement">=<br/></li>
<li><a id="L914">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">lam</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">transl_bound_exp</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="Statement">~</span><span class="Identifier">in_structure</span> <span class="ocamlLCIdentifier">vb_pat</span> <span class="ocamlLCIdentifier">expr</span> <span class="Statement">in<br/></li>
<li><a id="L915">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">lam</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">Translattribute</span>.<span class="ocamlLCIdentifier"><a href="translattribute.mli.html#L72" title="ocaml/lambda/translattribute.mli:72">add_function_attributes</a></span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="ocamlLCIdentifier">vb_loc</span> <span class="ocamlLCIdentifier">vb_attributes<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span><span class="Statement">)</span> <span class="Statement">in<br/></li>
<li><a id="L919">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">lam_bds</span></span> <span class="Statement">=</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">map2</span> <span class="ocamlLCIdentifier"><a href="#L913" title="ocaml/lambda/translcore.ml:913">transl_case</a></span> <span class="ocamlLCIdentifier">pat_expr_list</span> <span class="ocamlLCIdentifier"><a href="#L906" title="ocaml/lambda/translcore.ml:906">idlist</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">fun</span> <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span> <span class="Statement">-&gt;</span> <span class="Constant">Lletrec</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L919" title="ocaml/lambda/translcore.ml:919">lam_bds</a></span>, <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><a id="L922">&#x200c;</a><span class="Statement">and</span> <span class="ocamlLCIdentifier"><span class="linkable">transl_setinstvar</span></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier"><a href="#L461" title="ocaml/lambda/translcore.ml:461">self</a></span> <span class="ocamlLCIdentifier"><a href="#L485" title="ocaml/lambda/translcore.ml:485">var</a></span> <span class="ocamlLCIdentifier">expr</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Psetfield_computed</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">maybe_pointer</span> <span class="ocamlLCIdentifier">expr</span>, <span class="Constant">Assignment</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L461" title="ocaml/lambda/translcore.ml:461">self</a></span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="#L485" title="ocaml/lambda/translcore.ml:485">var</a></span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">expr</span><span class="Statement">]</span>, <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="Statement">and</span> <span class="ocamlLCIdentifier">transl_record</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier">env</span> <span class="ocamlLCIdentifier">fields</span> <span class="ocamlLCIdentifier">repres</span> <span class="ocamlLCIdentifier">opt_init_expr</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="matching.ml.html#L3846" title="ocaml/lambda/matching.ml:3846">size</a></span> <span class="Statement">=</span> <span class="PreProc">Array</span>.<span class="ocamlLCIdentifier">length</span> <span class="ocamlLCIdentifier">fields</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Comment">(* Determine if there are &quot;enough&quot; fields (only relevant if this is a<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; functional-style record update *)<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">no_init</span> <span class="Statement">=</span> <span class="Statement">match</span> <span class="ocamlLCIdentifier">opt_init_expr</span> <span class="Statement">with</span> <span class="Constant">None</span> <span class="Statement">-&gt;</span> <span class="Constant">true</span> <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">false</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">no_init</span><span class="ocamlNone"> </span><span class="Statement">||</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L3846" title="ocaml/lambda/matching.ml:3846">size</a></span><span class="ocamlNone"> </span><span class="Statement">&lt;</span><span class="ocamlNone"> </span><span class="PreProc">Config</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">max_young_wosize<br/></li>
<li></span><span class="ocamlNone">&nbsp; </span><span class="Statement">then</span> <span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Comment">(* Allocate new record with given fields (and remaining fields<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp;&nbsp; taken from init_expr if any *)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">init_id</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="PreProc">Ident</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">create_local</span><span class="ocamlEnd"> </span><span class="Constant">&quot;init&quot;</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">lv</span><span class="ocamlEnd"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="PreProc">Array</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">mapi<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(fun</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlEnd"> </span><span class="Statement">(_</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">definition</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">definition</span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Kept</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">typ</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">mut</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="printlambda.ml.html#L68" title="ocaml/lambda/printlambda.ml:68">field_kind</a></span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="printlambda.ml.html#L56" title="ocaml/lambda/printlambda.ml:56">value_kind</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">env</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">typ</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L370" title="ocaml/lambda/translcore.ml:370">access</a></span><span class="ocamlEnd"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">repres</span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">Record_regular</span><span class="ocamlEnd"> </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Record_inlined</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">Pfield</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">maybe_pointer_type</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">env</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">typ</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">mut</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Record_unboxed</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="Statement">assert</span><span class="ocamlEnd"> </span><span class="Constant">false<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Record_extension</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">Pfield</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlEnd"> + </span><span class="Constant">1</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">maybe_pointer_type</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">env</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">typ</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">mut</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Record_float</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="Constant">Pfloatfield</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L713" title="ocaml/lambda/translclass.ml:713">i</a></span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">Lprim</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L370" title="ocaml/lambda/translcore.ml:370">access</a></span><span class="ocamlEnd">, </span><span class="Statement">[</span><span class="Constant">Lvar</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">init_id</span><span class="Statement">]</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">)</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier"><a href="printlambda.ml.html#L68" title="ocaml/lambda/printlambda.ml:68">field_kind</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Overridden</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">_lid</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">expr</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="printlambda.ml.html#L68" title="ocaml/lambda/printlambda.ml:68">field_kind</a></span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="printlambda.ml.html#L56" title="ocaml/lambda/printlambda.ml:56">value_kind</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">expr</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">exp_env</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">expr</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">exp_type</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">expr</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="printlambda.ml.html#L68" title="ocaml/lambda/printlambda.ml:68">field_kind</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">fields<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L384" title="ocaml/lambda/translcore.ml:384">ll</a></span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L486" title="ocaml/lambda/translprim.ml:486">shape</a></span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="PreProc">List</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">split</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="PreProc">Array</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">to_list</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">lv</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">mut</span><span class="ocamlEnd"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="PreProc">Array</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">exists</span><span class="ocamlNone"> </span><span class="Statement">(fun</span><span class="ocamlNone"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L1043" title="ocaml/lambda/translcore.ml:1043">lbl</a></span><span class="ocamlNone">, </span><span class="Statement">_)</span><span class="ocamlNone"> </span><span class="Statement">-&gt;</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L1043" title="ocaml/lambda/translcore.ml:1043">lbl</a></span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">lbl_mut</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">Mutable</span><span class="Statement">)</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">fields<br/></li>
<li></span><span class="ocamlNone">&nbsp; &nbsp; &nbsp; </span><span class="Statement">then</span><span class="ocamlEnd"> </span><span class="Constant">Mutable<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">else</span><span class="ocamlEnd"> </span><span class="Constant">Immutable</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span><span class="ocamlEnd"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">try<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">mut</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">Mutable</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlEnd"> </span><span class="Statement">raise</span><span class="ocamlEnd"> </span><span class="Constant">Not_constant</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="PreProc">List</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L76" title="ocaml/lambda/translcore.ml:76">extract_constant</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L384" title="ocaml/lambda/translcore.ml:384">ll</a></span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">repres</span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Record_regular</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="Constant">Lconst</span><span class="Statement">(</span><span class="Constant">Const_block</span><span class="Statement">(</span><span class="Constant">0</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span><span class="Statement">))<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Record_inlined</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L339" title="ocaml/lambda/translcore.ml:339">tag</a></span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="Constant">Lconst</span><span class="Statement">(</span><span class="Constant">Const_block</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L339" title="ocaml/lambda/translcore.ml:339">tag</a></span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span><span class="Statement">))<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Record_unboxed</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="Constant">Lconst</span><span class="Statement">(match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span><span class="ocamlEnd"> </span><span class="Statement">with</span><span class="ocamlEnd"> </span><span class="Statement">[</span><span class="ocamlLCIdentifier">v</span><span class="Statement">]</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">v</span><span class="ocamlEnd"> </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="Statement">assert</span><span class="ocamlEnd"> </span><span class="Constant">false</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Record_float</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Lconst</span><span class="Statement">(</span><span class="Constant">Const_float_array</span><span class="Statement">(</span><span class="PreProc">List</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L80" title="ocaml/lambda/translcore.ml:80">extract_float</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L366" title="ocaml/lambda/translclass.ml:366">cl</a></span><span class="Statement">))<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Record_extension</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">raise</span><span class="ocamlEnd"> </span><span class="Constant">Not_constant<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">with</span><span class="ocamlEnd"> </span><span class="Constant">Not_constant</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">repres</span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Record_regular</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pmakeblock</span><span class="Statement">(</span><span class="Constant">0</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">mut</span><span class="ocamlEnd">, </span><span class="Constant">Some</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L486" title="ocaml/lambda/translprim.ml:486">shape</a></span><span class="Statement">)</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L384" title="ocaml/lambda/translcore.ml:384">ll</a></span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Record_inlined</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L339" title="ocaml/lambda/translcore.ml:339">tag</a></span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pmakeblock</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L339" title="ocaml/lambda/translcore.ml:339">tag</a></span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">mut</span><span class="ocamlEnd">, </span><span class="Constant">Some</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L486" title="ocaml/lambda/translprim.ml:486">shape</a></span><span class="Statement">)</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L384" title="ocaml/lambda/translcore.ml:384">ll</a></span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Record_unboxed</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="Statement">(match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L384" title="ocaml/lambda/translcore.ml:384">ll</a></span><span class="ocamlEnd"> </span><span class="Statement">with</span><span class="ocamlEnd"> </span><span class="Statement">[</span><span class="ocamlLCIdentifier">v</span><span class="Statement">]</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">v</span><span class="ocamlEnd"> </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="Statement">assert</span><span class="ocamlEnd"> </span><span class="Constant">false</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Record_float</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pmakearray</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="Constant">Pfloatarray</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">mut</span><span class="Statement">)</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L384" title="ocaml/lambda/translcore.ml:384">ll</a></span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Record_extension</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L444" title="ocaml/lambda/translclass.ml:444">path</a></span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="simplif.ml.html#L773" title="ocaml/lambda/simplif.ml:773">slot</a></span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="lambda.mli.html#L405" title="ocaml/lambda/lambda.mli:405">transl_extension_path</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">env</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translclass.ml.html#L444" title="ocaml/lambda/translclass.ml:444">path</a></span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pmakeblock</span><span class="Statement">(</span><span class="Constant">0</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">mut</span><span class="ocamlEnd">, </span><span class="Constant">Some</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="Constant">Pgenval</span><span class="ocamlEnd"> </span><span class="Statement">::</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translprim.ml.html#L486" title="ocaml/lambda/translprim.ml:486">shape</a></span><span class="Statement">))</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="simplif.ml.html#L773" title="ocaml/lambda/simplif.ml:773">slot</a></span><span class="ocamlEnd"> </span><span class="Statement">::</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L384" title="ocaml/lambda/translcore.ml:384">ll</a></span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">opt_init_expr</span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Constant">None</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Some</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">init_expr</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">Strict</span><span class="ocamlEnd">, </span><span class="Constant">Pgenval</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">init_id</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">init_expr</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span><span class="ocamlEnd">&nbsp; </span><span class="Statement">end</span> <span class="Statement">else</span> <span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Comment">(* Take a shallow copy of the init record, then mutate the fields<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp;&nbsp; of the copy *)<br/></li>
<li><a id="L997">&#x200c;</a></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><span class="linkable">copy_id</span></span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="PreProc">Ident</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">create_local</span><span class="ocamlEnd"> </span><span class="Constant">&quot;newrecord&quot;</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li><a id="L998">&#x200c;</a></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><span class="linkable">update_field</span></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cont</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L1043" title="ocaml/lambda/translcore.ml:1043">lbl</a></span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">definition</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">definition</span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Kept</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">cont<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Overridden</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">_lid</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">expr</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">upd</span><span class="ocamlEnd"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">repres</span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Record_regular<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Record_inlined</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Psetfield</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L1043" title="ocaml/lambda/translcore.ml:1043">lbl</a></span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">lbl_pos</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">maybe_pointer</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">expr</span><span class="ocamlEnd">, </span><span class="Constant">Assignment</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Record_unboxed</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="Statement">assert</span><span class="ocamlEnd"> </span><span class="Constant">false<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Record_float</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="Constant">Psetfloatfield</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L1043" title="ocaml/lambda/translcore.ml:1043">lbl</a></span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">lbl_pos</span><span class="ocamlEnd">, </span><span class="Constant">Assignment</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Record_extension</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Psetfield</span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L1043" title="ocaml/lambda/translcore.ml:1043">lbl</a></span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">lbl_pos</span><span class="ocamlEnd"> + </span><span class="Constant">1</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">maybe_pointer</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">expr</span><span class="ocamlEnd">, </span><span class="Constant">Assignment</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Lsequence</span><span class="Statement">(</span><span class="Constant">Lprim</span><span class="Statement">(</span><span class="ocamlLCIdentifier">upd</span><span class="ocamlEnd">, </span><span class="Statement">[</span><span class="Constant">Lvar</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L997" title="ocaml/lambda/translcore.ml:997">copy_id</a></span><span class="Statement">;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">expr</span><span class="Statement">]</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">)</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">cont</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">opt_init_expr</span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Constant">None</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="Statement">assert</span><span class="ocamlEnd"> </span><span class="Constant">false<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Some</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">init_expr</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Llet</span><span class="Statement">(</span><span class="Constant">Strict</span><span class="ocamlEnd">, </span><span class="Constant">Pgenval</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="#L997" title="ocaml/lambda/translcore.ml:997">copy_id</a></span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="Constant">Lprim</span><span class="Statement">(</span><span class="Constant">Pduprecord</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">repres</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier"><a href="matching.ml.html#L3846" title="ocaml/lambda/matching.ml:3846">size</a></span><span class="Statement">)</span><span class="ocamlEnd">, </span><span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">init_expr</span><span class="Statement">]</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span><span class="ocamlEnd"> </span><span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">)</span><span class="ocamlEnd">,<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="PreProc">Array</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">fold_left</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L998" title="ocaml/lambda/translcore.ml:998">update_field</a></span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="Constant">Lvar</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L997" title="ocaml/lambda/translcore.ml:997">copy_id</a></span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">fields</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span><span class="ocamlEnd">&nbsp; </span><span class="Statement">end<br/></li>
<li></span><br/></li>
<li><a id="L1026">&#x200c;</a><span class="Statement">and</span> <span class="ocamlLCIdentifier"><span class="linkable">transl_match</span></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span> <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span> <span class="ocamlLCIdentifier">pat_expr_list</span> <span class="ocamlLCIdentifier">partial</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">rewrite_case</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L1070" title="ocaml/lambda/translcore.ml:1070">val_cases</a></span>, <span class="ocamlLCIdentifier">exn_cases</span>, <span class="ocamlLCIdentifier">static_handlers</span> <span class="Statement">as</span> <span class="ocamlLCIdentifier">acc</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">({</span> <span class="ocamlLCIdentifier">c_lhs</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">c_guard</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">c_rhs</span> <span class="Statement">}</span> <span class="Statement">as</span> <span class="ocamlLCIdentifier">case</span><span class="Statement">)</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">c_rhs</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">exp_desc</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">Texp_unreachable</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier">acc</span> <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">val_pat</span>, <span class="ocamlLCIdentifier">exn_pat</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">split_pattern</span> <span class="ocamlLCIdentifier">c_lhs</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">val_pat</span>, <span class="ocamlLCIdentifier">exn_pat</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">None</span>, <span class="Constant">None</span> <span class="Statement">-&gt;</span> <span class="Statement">assert</span> <span class="Constant">false<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Some</span> <span class="ocamlLCIdentifier"><a href="#L1056" title="ocaml/lambda/translcore.ml:1056">pv</a></span>, <span class="Constant">None</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">val_case</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L913" title="ocaml/lambda/translcore.ml:913">transl_case</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="Statement">{</span> <span class="ocamlLCIdentifier">case</span> <span class="Statement">with</span> <span class="ocamlLCIdentifier">c_lhs</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L1056" title="ocaml/lambda/translcore.ml:1056">pv</a></span> <span class="Statement">}<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">val_case</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier"><a href="#L1070" title="ocaml/lambda/translcore.ml:1070">val_cases</a></span>, <span class="ocamlLCIdentifier">exn_cases</span>, <span class="ocamlLCIdentifier">static_handlers<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">None</span>, <span class="Constant">Some</span> <span class="ocamlLCIdentifier">pe</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">exn_case</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">transl_case_try</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="Statement">{</span> <span class="ocamlLCIdentifier">case</span> <span class="Statement">with</span> <span class="ocamlLCIdentifier">c_lhs</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">pe</span> <span class="Statement">}</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L1070" title="ocaml/lambda/translcore.ml:1070">val_cases</a></span>, <span class="ocamlLCIdentifier">exn_case</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier">exn_cases</span>, <span class="ocamlLCIdentifier">static_handlers<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Some</span> <span class="ocamlLCIdentifier"><a href="#L1056" title="ocaml/lambda/translcore.ml:1056">pv</a></span>, <span class="Constant">Some</span> <span class="ocamlLCIdentifier">pe</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">assert</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">c_guard</span> <span class="Statement">=</span> <span class="Constant">None</span><span class="Statement">);<br/></li>
<li><a id="L1043">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">lbl</span></span>&nbsp; <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L469" title="ocaml/lambda/lambda.mli:469">next_raise_count</a></span> <span class="Constant">()</span> <span class="Statement">in<br/></li>
<li><a id="L1044">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">static_raise</span></span> <span class="ocamlLCIdentifier"><a href="#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Lstaticraise</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L1043" title="ocaml/lambda/translcore.ml:1043">lbl</a></span>, <span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="Statement">(fun</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="Statement">-&gt;</span> <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">(* Simplif doesn'<a href="debuginfo.ml.html#L79" title="ocaml/lambda/debuginfo.ml:79">t</a> like it if binders are not uniq, so we <a href="tmc.ml.html#L190" title="ocaml/lambda/tmc.ml:190">make</a> sure to<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; use different names in the value and the exception branches. *)<br/></li>
<li><a id="L1049">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">ids_full</span></span> <span class="Statement">=</span> <span class="PreProc">Typedtree</span>.<span class="ocamlLCIdentifier">pat_bound_idents_full</span> <span class="ocamlLCIdentifier"><a href="#L1056" title="ocaml/lambda/translcore.ml:1056">pv</a></span> <span class="Statement">in<br/></li>
<li><a id="L1050">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">ids</span></span> <span class="Statement">=</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="Statement">(fun</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="Statement">_</span>, <span class="Statement">_)</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="#L1049" title="ocaml/lambda/translcore.ml:1049">ids_full</a></span> <span class="Statement">in<br/></li>
<li><a id="L1051">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">ids_kinds</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="Statement">(fun</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="Statement">_</span>, <span class="ocamlLCIdentifier">ty</span><span class="Statement">)</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="PreProc">Typeopt</span>.<span class="ocamlLCIdentifier"><a href="printlambda.ml.html#L56" title="ocaml/lambda/printlambda.ml:56">value_kind</a></span> <span class="ocamlLCIdentifier"><a href="#L1056" title="ocaml/lambda/translcore.ml:1056">pv</a></span>.<span class="ocamlLCIdentifier">pat_env</span> <span class="ocamlLCIdentifier">ty</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L1049" title="ocaml/lambda/translcore.ml:1049">ids_full</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li><a id="L1055">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">vids</span></span> <span class="Statement">=</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier"><a href="lambda.mli.html#L427" title="ocaml/lambda/lambda.mli:427">rename</a></span> <span class="ocamlLCIdentifier"><a href="#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a></span> <span class="Statement">in<br/></li>
<li><a id="L1056">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">pv</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">alpha_pat</span> <span class="Statement">(</span><span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L525" title="ocaml/lambda/matching.ml:525">combine</a></span> <span class="ocamlLCIdentifier"><a href="#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a></span> <span class="ocamlLCIdentifier"><a href="#L1055" title="ocaml/lambda/translcore.ml:1055">vids</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><span class="linkable">pv</span></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Comment">(* Also register the names of the exception so Re-raise happens. *)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L198" title="ocaml/lambda/translcore.ml:198">iter_exn_names</a></span> <span class="PreProc">Translprim</span>.<span class="ocamlLCIdentifier"><a href="translprim.mli.html#L26" title="ocaml/lambda/translprim.mli:26">add_exception_ident</a></span> <span class="ocamlLCIdentifier">pe</span><span class="Statement">;<br/></li>
<li><a id="L1059">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">rhs</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">Misc</span>.<span class="ocamlLCIdentifier">try_finally<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(fun</span> <span class="Constant">()</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="translprim.mli.html#L18" title="ocaml/lambda/translprim.mli:18">event_before</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">c_rhs<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">c_rhs</span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">~</span><span class="Identifier">always</span>:<span class="Statement">(fun</span> <span class="Constant">()</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L198" title="ocaml/lambda/translcore.ml:198">iter_exn_names</a></span> <span class="PreProc">Translprim</span>.<span class="ocamlLCIdentifier"><a href="translprim.mli.html#L27" title="ocaml/lambda/translprim.mli:27">remove_exception_ident</a></span> <span class="ocamlLCIdentifier">pe</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L1056" title="ocaml/lambda/translcore.ml:1056">pv</a></span>, <span class="ocamlLCIdentifier"><a href="#L1044" title="ocaml/lambda/translcore.ml:1044">static_raise</a></span> <span class="ocamlLCIdentifier"><a href="#L1055" title="ocaml/lambda/translcore.ml:1055">vids</a></span><span class="Statement">)</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier"><a href="#L1070" title="ocaml/lambda/translcore.ml:1070">val_cases</a></span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier">pe</span>, <span class="ocamlLCIdentifier"><a href="#L1044" title="ocaml/lambda/translcore.ml:1044">static_raise</a></span> <span class="ocamlLCIdentifier"><a href="#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a></span><span class="Statement">)</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier">exn_cases</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L1043" title="ocaml/lambda/translcore.ml:1043">lbl</a></span>, <span class="ocamlLCIdentifier"><a href="#L1051" title="ocaml/lambda/translcore.ml:1051">ids_kinds</a></span>, <span class="ocamlLCIdentifier"><a href="#L1059" title="ocaml/lambda/translcore.ml:1059">rhs</a></span><span class="Statement">)</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier">static_handlers<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li><a id="L1070">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">val_cases</span></span>, <span class="ocamlLCIdentifier">exn_cases</span>, <span class="ocamlLCIdentifier">static_handlers</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">x</span>, <span class="ocamlLCIdentifier">y</span>, <span class="ocamlLCIdentifier">z</span> <span class="Statement">=</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">fold_left</span> <span class="ocamlLCIdentifier">rewrite_case</span> <span class="Statement">(</span><span class="Constant">[]</span>, <span class="Constant">[]</span>, <span class="Constant">[]</span><span class="Statement">)</span> <span class="ocamlLCIdentifier">pat_expr_list</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">rev</span> <span class="ocamlLCIdentifier">x</span>, <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">rev</span> <span class="ocamlLCIdentifier">y</span>, <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">rev</span> <span class="ocamlLCIdentifier">z<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Comment">(* In presence of exception patterns, the code we generate for<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp; &nbsp; &nbsp;&nbsp; match &lt;scrutinees&gt; with<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp;&nbsp; | &lt;val-patterns&gt; -&gt; &lt;val-actions&gt;<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp;&nbsp; | &lt;exn-patterns&gt; -&gt; &lt;exn-actions&gt;<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp; &nbsp;&nbsp; looks like<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp; &nbsp; &nbsp;&nbsp; staticcatch<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (try (<a href="simplif.ml.html#L98" title="ocaml/lambda/simplif.ml:98">exit</a> &lt;val-<a href="simplif.ml.html#L98" title="ocaml/lambda/simplif.ml:98">exit</a>&gt; &lt;scrutinees&gt;)<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; with &lt;exn-patterns&gt; -&gt; &lt;exn-actions&gt;)<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp;&nbsp; with &lt;val-<a href="simplif.ml.html#L98" title="ocaml/lambda/simplif.ml:98">exit</a>&gt; &lt;val-<a href="#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a>&gt; -&gt;<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; match &lt;val-<a href="#L1050" title="ocaml/lambda/translcore.ml:1050">ids</a>&gt; with &lt;val-patterns&gt; -&gt; &lt;val-actions&gt;<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp; &nbsp;&nbsp; In particular, the '<a href="simplif.ml.html#L98" title="ocaml/lambda/simplif.ml:98">exit</a>' in the value case ensures that the<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; value actions <a href="tmc.ml.html#L191" title="ocaml/lambda/tmc.ml:191">run</a> outside the try..with exception handler.<br/></li>
<li></span><span class="Comment">&nbsp; *)<br/></li>
<li><a id="L1091">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">static_catch</span></span> <span class="ocamlLCIdentifier">scrutinees</span> <span class="ocamlLCIdentifier">val_ids</span> <span class="ocamlLCIdentifier">handler</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span> <span class="Statement">=</span> <span class="PreProc">Typecore</span>.<span class="ocamlLCIdentifier"><a href="translclass.ml.html#L124" title="ocaml/lambda/translclass.ml:124">name_pattern</a></span> <span class="Constant">&quot;exn&quot;</span> <span class="Statement">(</span><span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="ocamlLCIdentifier">fst</span> <span class="ocamlLCIdentifier">exn_cases</span><span class="Statement">)</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">static_exception_id</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L469" title="ocaml/lambda/lambda.mli:469">next_raise_count</a></span> <span class="Constant">()</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Lstaticcatch<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">Ltrywith</span> <span class="Statement">(</span><span class="Constant">Lstaticraise</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">static_exception_id</span>, <span class="ocamlLCIdentifier">scrutinees</span><span class="Statement">)</span>, <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="PreProc">Matching</span>.<span class="ocamlLCIdentifier"><a href="matching.mli.html#L27" title="ocaml/lambda/matching.mli:27">for_trywith</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_loc</span> <span class="Statement">(</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier">exn_cases</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier">static_exception_id</span>, <span class="ocamlLCIdentifier">val_ids</span><span class="Statement">)</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">handler</span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li><a id="L1100">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">classic</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span>, <span class="ocamlLCIdentifier">exn_cases</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Statement">{</span><span class="ocamlLCIdentifier">exp_desc</span> <span class="Statement">=</span> <span class="Constant">Texp_tuple</span> <span class="ocamlLCIdentifier">argl</span><span class="Statement">}</span>, <span class="Constant">[]</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">assert</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">static_handlers</span> <span class="Statement">=</span> <span class="Constant">[]</span><span class="Statement">);<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="PreProc">Matching</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L3875" title="ocaml/lambda/matching.ml:3875">for_multiple_match</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_loc<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="ocamlLCIdentifier">transl_list</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">argl</span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="#L1070" title="ocaml/lambda/translcore.ml:1070">val_cases</a></span> <span class="ocamlLCIdentifier">partial<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Statement">{</span><span class="ocamlLCIdentifier">exp_desc</span> <span class="Statement">=</span> <span class="Constant">Texp_tuple</span> <span class="ocamlLCIdentifier">argl</span><span class="Statement">}</span>, <span class="Statement">_</span> <span class="Statement">::</span> <span class="Statement">_</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">val_ids</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(fun</span> <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="PreProc">Typecore</span>.<span class="ocamlLCIdentifier"><a href="translclass.ml.html#L124" title="ocaml/lambda/translclass.ml:124">name_pattern</a></span> <span class="Constant">&quot;val&quot;</span> <span class="Constant">[]</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="PreProc">Typeopt</span>.<span class="ocamlLCIdentifier"><a href="printlambda.ml.html#L56" title="ocaml/lambda/printlambda.ml:56">value_kind</a></span> <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span>.<span class="ocamlLCIdentifier">exp_env</span> <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span>.<span class="ocamlLCIdentifier">exp_type<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">argl<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">lvars</span> <span class="Statement">=</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="Statement">(fun</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span>, <span class="Statement">_)</span> <span class="Statement">-&gt;</span> <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L634" title="ocaml/lambda/translmod.ml:634">id</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier">val_ids</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L1091" title="ocaml/lambda/translcore.ml:1091">static_catch</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier">transl_list</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">argl</span><span class="Statement">)</span> <span class="ocamlLCIdentifier">val_ids<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="PreProc">Matching</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L3875" title="ocaml/lambda/matching.ml:3875">for_multiple_match</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_loc<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">lvars</span> <span class="ocamlLCIdentifier"><a href="#L1070" title="ocaml/lambda/translcore.ml:1070">val_cases</a></span> <span class="ocamlLCIdentifier">partial</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span>, <span class="Constant">[]</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">assert</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">static_handlers</span> <span class="Statement">=</span> <span class="Constant">[]</span><span class="Statement">);<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="PreProc">Matching</span>.<span class="ocamlLCIdentifier"><a href="matching.mli.html#L23" title="ocaml/lambda/matching.mli:23">for_function</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_loc<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">None</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="#L1070" title="ocaml/lambda/translcore.ml:1070">val_cases</a></span> <span class="ocamlLCIdentifier">partial<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span>, <span class="Statement">_</span> <span class="Statement">::</span> <span class="Statement">_</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">val_id</span> <span class="Statement">=</span> <span class="PreProc">Typecore</span>.<span class="ocamlLCIdentifier"><a href="translclass.ml.html#L124" title="ocaml/lambda/translclass.ml:124">name_pattern</a></span> <span class="Constant">&quot;val&quot;</span> <span class="Statement">(</span><span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="matching.ml.html#L922" title="ocaml/lambda/matching.ml:922">map</a></span> <span class="ocamlLCIdentifier">fst</span> <span class="ocamlLCIdentifier"><a href="#L1070" title="ocaml/lambda/translcore.ml:1070">val_cases</a></span><span class="Statement">)</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L473" title="ocaml/lambda/translprim.ml:473">k</a></span> <span class="Statement">=</span> <span class="PreProc">Typeopt</span>.<span class="ocamlLCIdentifier"><a href="printlambda.ml.html#L56" title="ocaml/lambda/printlambda.ml:56">value_kind</a></span> <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span>.<span class="ocamlLCIdentifier">exp_env</span> <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span>.<span class="ocamlLCIdentifier">exp_type</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L1091" title="ocaml/lambda/translcore.ml:1091">static_catch</a></span> <span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2339" title="ocaml/lambda/matching.ml:2339">arg</a></span><span class="Statement">]</span> <span class="Statement">[</span><span class="ocamlLCIdentifier">val_id</span>, <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L473" title="ocaml/lambda/translprim.ml:473">k</a></span><span class="Statement">]<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="PreProc">Matching</span>.<span class="ocamlLCIdentifier"><a href="matching.mli.html#L23" title="ocaml/lambda/matching.mli:23">for_function</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">e</span>.<span class="ocamlLCIdentifier">exp_loc<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">None</span> <span class="Statement">(</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">val_id</span><span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="#L1070" title="ocaml/lambda/translcore.ml:1070">val_cases</a></span> <span class="ocamlLCIdentifier">partial</span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">fold_left</span> <span class="Statement">(fun</span> <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier">static_exception_id</span>, <span class="ocamlLCIdentifier">val_ids</span>, <span class="ocamlLCIdentifier">handler</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Lstaticcatch</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span>, <span class="Statement">(</span><span class="ocamlLCIdentifier">static_exception_id</span>, <span class="ocamlLCIdentifier">val_ids</span><span class="Statement">)</span>, <span class="ocamlLCIdentifier">handler</span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">)</span> <span class="ocamlLCIdentifier"><a href="#L1100" title="ocaml/lambda/translcore.ml:1100">classic</a></span> <span class="ocamlLCIdentifier">static_handlers<br/></li>
<li></span><br/></li>
<li><a id="L1134">&#x200c;</a><span class="Statement">and</span> <span class="ocamlLCIdentifier"><span class="linkable">transl_letop</span></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier">env</span> <span class="ocamlLCIdentifier">let_</span> <span class="ocamlLCIdentifier">ands</span> <span class="ocamlLCIdentifier">param</span> <span class="ocamlLCIdentifier">case</span> <span class="ocamlLCIdentifier">partial</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L1181" title="ocaml/lambda/translmod.ml:1181">loop</a></span> <span class="ocamlLCIdentifier">prev_lam</span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">[]</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">prev_lam<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="ocamlLCIdentifier">and_</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier">rest</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">left_id</span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;<a href="switch.ml.html#L787" title="ocaml/lambda/switch.ml:787">left</a>&quot;</span> <span class="Statement">in<br/></li>
<li><a id="L1139">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">right_id</span></span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_local</span> <span class="Constant">&quot;right&quot;</span> <span class="Statement">in<br/></li>
<li><a id="L1140">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">op</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L206" title="ocaml/lambda/translcore.ml:206">transl_ident</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">and_</span>.<span class="ocamlLCIdentifier">bop_op_name</span>.<span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier">env<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">and_</span>.<span class="ocamlLCIdentifier">bop_op_type</span> <span class="ocamlLCIdentifier">and_</span>.<span class="ocamlLCIdentifier">bop_op_path</span> <span class="ocamlLCIdentifier">and_</span>.<span class="ocamlLCIdentifier">bop_op_val<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li><a id="L1144">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">exp</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">and_</span>.<span class="ocamlLCIdentifier">bop_exp</span> <span class="Statement">in<br/></li>
<li><a id="L1145">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">lam</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2350" title="ocaml/lambda/matching.ml:2350">bind</a></span> <span class="Constant">Strict</span> <span class="ocamlLCIdentifier"><a href="#L1139" title="ocaml/lambda/translcore.ml:1139">right_id</a></span> <span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">Lapply</span><span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">ap_loc</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">and_</span>.<span class="ocamlLCIdentifier">bop_loc</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">ap_func</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L1140" title="ocaml/lambda/translcore.ml:1140">op</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">ap_args</span><span class="Statement">=[</span><span class="Constant">Lvar</span> <span class="ocamlLCIdentifier">left_id</span><span class="Statement">;</span> <span class="Constant">Lvar</span> <span class="ocamlLCIdentifier"><a href="#L1139" title="ocaml/lambda/translcore.ml:1139">right_id</a></span><span class="Statement">];<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">ap_tailcall</span> <span class="Statement">=</span> <span class="Constant">Default_tailcall</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">ap_inlined</span> <span class="Statement">=</span> <span class="Constant">Default_inline</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">ap_specialised</span> <span class="Statement">=</span> <span class="Constant">Default_specialise</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">})<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="matching.ml.html#L2350" title="ocaml/lambda/matching.ml:2350">bind</a></span> <span class="Constant">Strict</span> <span class="ocamlLCIdentifier">left_id</span> <span class="ocamlLCIdentifier">prev_lam</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="translmod.ml.html#L1181" title="ocaml/lambda/translmod.ml:1181">loop</a></span> <span class="ocamlLCIdentifier"><a href="translobj.ml.html#L145" title="ocaml/lambda/translobj.ml:145">lam</a></span> <span class="ocamlLCIdentifier">rest</span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li><a id="L1158">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">op</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L206" title="ocaml/lambda/translcore.ml:206">transl_ident</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">let_</span>.<span class="ocamlLCIdentifier">bop_op_name</span>.<span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier">env<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">let_</span>.<span class="ocamlLCIdentifier">bop_op_type</span> <span class="ocamlLCIdentifier">let_</span>.<span class="ocamlLCIdentifier">bop_op_path</span> <span class="ocamlLCIdentifier">let_</span>.<span class="ocamlLCIdentifier">bop_op_val<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li><a id="L1162">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">exp</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="translmod.ml.html#L1181" title="ocaml/lambda/translmod.ml:1181">loop</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">let_</span>.<span class="ocamlLCIdentifier">bop_exp</span><span class="Statement">)</span> <span class="ocamlLCIdentifier">ands</span> <span class="Statement">in<br/></li>
<li><a id="L1163">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">func</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="printlambda.ml.html#L62" title="ocaml/lambda/printlambda.ml:62">return_kind</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="printlambda.ml.html#L56" title="ocaml/lambda/printlambda.ml:56">value_kind</a></span> <span class="ocamlLCIdentifier">case</span>.<span class="ocamlLCIdentifier">c_rhs</span>.<span class="ocamlLCIdentifier">exp_env</span> <span class="ocamlLCIdentifier">case</span>.<span class="ocamlLCIdentifier">c_rhs</span>.<span class="ocamlLCIdentifier">exp_type</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span>, <span class="ocamlLCIdentifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span>, <span class="ocamlLCIdentifier">return</span><span class="Statement">)</span>, <span class="ocamlLCIdentifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">event_function</span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">case</span>.<span class="ocamlLCIdentifier">c_rhs<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(function</span> <span class="ocamlLCIdentifier">repr</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L741" title="ocaml/lambda/translcore.ml:741">transl_curried_function</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">case</span>.<span class="ocamlLCIdentifier">c_rhs</span>.<span class="ocamlLCIdentifier">exp_loc</span> <span class="ocamlLCIdentifier"><a href="printlambda.ml.html#L62" title="ocaml/lambda/printlambda.ml:62">return_kind</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">repr</span> <span class="ocamlLCIdentifier">partial</span> <span class="ocamlLCIdentifier">param</span> <span class="Statement">[</span><span class="ocamlLCIdentifier">case</span><span class="Statement">])<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="simplif.ml.html#L760" title="ocaml/lambda/simplif.ml:760">attr</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="lambda.mli.html#L451" title="ocaml/lambda/lambda.mli:451">default_function_attribute</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier">case</span>.<span class="ocamlLCIdentifier">c_rhs</span>.<span class="ocamlLCIdentifier">exp_loc</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="translclass.ml.html#L30" title="ocaml/lambda/translclass.ml:30">lfunction</a></span> <span class="Statement">~</span><span class="Identifier"><a href="#L383" title="ocaml/lambda/translcore.ml:383">kind</a></span> <span class="Statement">~</span><span class="Identifier"><a href="translprim.ml.html#L784" title="ocaml/lambda/translprim.ml:784">params</a></span> <span class="Statement">~</span><span class="Identifier">return</span> <span class="Statement">~</span><span class="Identifier"><a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a></span> <span class="Statement">~</span><span class="Identifier"><a href="simplif.ml.html#L760" title="ocaml/lambda/simplif.ml:760">attr</a></span> <span class="Statement">~</span><span class="Identifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a><br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Constant">Lapply</span><span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_loc</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="debuginfo.ml.html#L85" title="ocaml/lambda/debuginfo.ml:85">of_location</a></span> <span class="Statement">~</span><span class="Identifier"><a href="debuginfo.ml.html#L28" title="ocaml/lambda/debuginfo.ml:28">scopes</a></span> <span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_func</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L1140" title="ocaml/lambda/translcore.ml:1140">op</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_args</span><span class="Statement">=[</span><span class="ocamlLCIdentifier"><a href="#L1144" title="ocaml/lambda/translcore.ml:1144">exp</a></span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="#L1163" title="ocaml/lambda/translcore.ml:1163">func</a></span><span class="Statement">];<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_tailcall</span> <span class="Statement">=</span> <span class="Constant">Default_tailcall</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_inlined</span> <span class="Statement">=</span> <span class="Constant">Default_inline</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier">ap_specialised</span> <span class="Statement">=</span> <span class="Constant">Default_specialise</span><span class="Statement">;<br/></li>
<li></span>&nbsp; <span class="Statement">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Wrapper for class compilation *)<br/></li>
<li></span><br/></li>
<li><span class="Comment">(*<br/></li>
<li></span><span class="Comment">let <a href="#L216" title="ocaml/lambda/translcore.ml:216">transl_exp</a> = transl_exp_wrap<br/></li>
<li></span><br/></li>
<li><span class="Comment">let <a href="translcore.mli.html#L33" title="ocaml/lambda/translcore.mli:33">transl_let</a> rec_flag pat_expr_list <a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a> =<br/></li>
<li></span><span class="Comment">&nbsp; match pat_expr_list with<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; [] -&gt; <a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a><br/></li>
<li></span><span class="Comment">&nbsp; | (_, expr) :: _ -&gt;<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; Translobj.<a href="translobj.ml.html#L165" title="ocaml/lambda/translobj.ml:165">oo_wrap</a> expr.exp_env false<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; (<a href="translcore.mli.html#L33" title="ocaml/lambda/translcore.mli:33">transl_let</a> rec_flag pat_expr_list) <a href="#L601" title="ocaml/lambda/translcore.ml:601">body</a><br/></li>
<li></span><span class="Comment">*)<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Error report *)<br/></li>
<li></span><br/></li>
<li><span class="Statement"><a href="matching.ml.html#L419" title="ocaml/lambda/matching.ml:419">open</a></span><span class="ocamlNone"> </span><span class="PreProc">Format<br/></li>
<li></span><br/></li>
<li><a id="L1201">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">report_error</span></span> <span class="ocamlLCIdentifier">ppf</span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Free_super_var</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">fprintf</span> <span class="ocamlLCIdentifier">ppf<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">&quot;Ancestor names can only be used to select inherited methods&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Unreachable_reached</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">fprintf</span> <span class="ocamlLCIdentifier">ppf</span> <span class="Constant">&quot;Unreachable expression was reached&quot;<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Constant">()</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="PreProc">Location</span>.<span class="ocamlLCIdentifier">register_error_of_exn<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(function<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Error</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span>, <span class="ocamlLCIdentifier">err</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Some</span> <span class="Statement">(</span><span class="PreProc">Location</span>.<span class="ocamlLCIdentifier">error_of_printer</span> <span class="Statement">~</span><span class="Identifier"><a href="#L62" title="ocaml/lambda/translcore.ml:62">loc</a></span> <span class="ocamlLCIdentifier"><a href="translprim.mli.html#L54" title="ocaml/lambda/translprim.mli:54">report_error</a></span> <span class="ocamlLCIdentifier">err</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">None<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">)<br/></li>
</ol></span></code>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="index.html">Top Level</a></span>
 </p>

 </body>
</html>
