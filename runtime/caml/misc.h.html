<!-- generated by the vscode.pl tool from vscoded.-->

<html>
 <head>
  <title>ocaml/runtime/caml/misc.h - ocaml</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

.nav-bar {
    font-size: 120%;
    margin-top: 5px;
    margin-bottom: 5px;
}

.nav-link {
    padding-left: 5em;
    padding-right: 5em;
}

ul.toc {
    line-height: 200%;
    font-size: 150%;
}

code {
    font-family: consolas, monospace;
    line-height: 130%;
}

span.Constant {
    color: DarkGreen;
}

span.Special {
    color: #c06000;
}

span.Comment {
    color: DarkRed;
    font-style: italic;
}

span.Identifier {
    color: DarkCyan;
}

span.PreProc {
    color: DarkMagenta;
}

span.Statement, span.Type, span.Keyword, span.Repeat, span.Conditional,
    span.Operator, span.Exception
{
    color: DarkBlue;
}

span.Todo {
    color: DarkRed;
    background-color: Gold;
    font-style: italic;
}

span.Underlined {
    text-decoration: underline;
}

span.linkable {
    font-weight: bold;
}

code ol {
    counter-reset: item;
    list-style-type: none;
    margin-left: 0;
    padding-left: 0;
    list-style-position: inside;
}

code li {
    display: block;
}

code li:before {
    content: counter(item) "  ";
    counter-increment: item;
    color: #999;
    padding-right: 0.5em;
    padding-left: 0.4em;
    list-style-position: inside;
    text-align: right
}

  </style>
 </head>
 <body>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="../index.html">Top Level</a></span>
 </p>

  <h1>ocaml/runtime/caml/misc.h - ocaml</h1>
 <h2>Data types defined</h2>
 <ul class="toc">
<li><a href="#L68">asize_t</a></li>
<li><a href="#L586">backtrace_slot</a></li>
<li><a href="#L190">caml_timing_hook</a></li>
<li><a href="#L227">char_os</a></li>
<li><a href="#L229">char_os</a></li>
<li><a href="#L452">ext_table</a></li>
<li><a href="#L298">fatal_error_hook</a></li>
</ul>
 <h2>Functions defined</h2>
 <ul class="toc">
<li><a href="#L207">call_timing_hook</a></li>
<li><a href="#L324">caml_uadd_overflow</a></li>
<li><a href="#L347">caml_umul_overflow</a></li>
<li><a href="#L335">caml_usub_overflow</a></li>
</ul>
 <h2>Macros defined</h2>
 <ul class="toc">
<li><a href="#L117">CAMLDLLIMPORT</a></li>
<li><a href="#L119">CAMLDLLIMPORT</a></li>
<li><a href="#L56">CAML_DEPRECATED</a></li>
<li><a href="#L62">CAML_DEPRECATED</a></li>
<li><a href="#L50">CAML_MAKEWARNING1</a></li>
<li><a href="#L52">CAML_MAKEWARNING1</a></li>
<li><a href="#L54">CAML_MAKEWARNING2</a></li>
<li><a href="#L19">CAML_MISC_H</a></li>
<li><a href="#L55">CAML_PREPROWARNING</a></li>
<li><a href="#L61">CAML_PREPROWARNING</a></li>
<li><a href="#L222">CAML_STATIC_ASSERT</a></li>
<li><a href="#L221">CAML_STATIC_ASSERT_2</a></li>
<li><a href="#L216">CAML_STATIC_ASSERT_3</a></li>
<li><a href="#L48">CAML_STRINGIFY</a></li>
<li><a href="#L241">CAML_WIDEN_STRING_LITERAL</a></li>
<li><a href="#L240">CAML_WIDEN_STRING_LITERAL2</a></li>
<li><a href="#L140">CAMLalign</a></li>
<li><a href="#L143">CAMLalign</a></li>
<li><a href="#L145">CAMLalign</a></li>
<li><a href="#L147">CAMLalign</a></li>
<li><a href="#L278">CAMLalloc_point_here</a></li>
<li><a href="#L281">CAMLalloc_point_here</a></li>
<li><a href="#L247">CAMLassert</a></li>
<li><a href="#L253">CAMLassert</a></li>
<li><a href="#L36">CAMLdeprecated_typedef</a></li>
<li><a href="#L39">CAMLdeprecated_typedef</a></li>
<li><a href="#L42">CAMLdeprecated_typedef</a></li>
<li><a href="#L123">CAMLexport</a></li>
<li><a href="#L125">CAMLextern</a></li>
<li><a href="#L257">CAMLlikely</a></li>
<li><a href="#L260">CAMLlikely</a></li>
<li><a href="#L564">CAMLno_asan</a></li>
<li><a href="#L571">CAMLno_asan</a></li>
<li><a href="#L572">CAMLno_asan</a></li>
<li><a href="#L563">CAMLno_tsan</a></li>
<li><a href="#L567">CAMLno_tsan</a></li>
<li><a href="#L568">CAMLno_tsan</a></li>
<li><a href="#L274">CAMLnoalloc</a></li>
<li><a href="#L280">CAMLnoalloc</a></li>
<li><a href="#L91">CAMLnoreturn_end</a></li>
<li><a href="#L95">CAMLnoreturn_end</a></li>
<li><a href="#L99">CAMLnoreturn_end</a></li>
<li><a href="#L90">CAMLnoreturn_start</a></li>
<li><a href="#L94">CAMLnoreturn_start</a></li>
<li><a href="#L98">CAMLnoreturn_start</a></li>
<li><a href="#L124">CAMLprim</a></li>
<li><a href="#L258">CAMLunlikely</a></li>
<li><a href="#L261">CAMLunlikely</a></li>
<li><a href="#L173">CAMLunused</a></li>
<li><a href="#L178">CAMLunused</a></li>
<li><a href="#L182">CAMLunused</a></li>
<li><a href="#L172">CAMLunused_end</a></li>
<li><a href="#L177">CAMLunused_end</a></li>
<li><a href="#L181">CAMLunused_end</a></li>
<li><a href="#L171">CAMLunused_start</a></li>
<li><a href="#L175">CAMLunused_start</a></li>
<li><a href="#L180">CAMLunused_start</a></li>
<li><a href="#L130">CAMLweakdef</a></li>
<li><a href="#L132">CAMLweakdef</a></li>
<li><a href="#L312">Caml_has_builtin</a></li>
<li><a href="#L314">Caml_has_builtin</a></li>
<li><a href="#L105">Caml_noinline</a></li>
<li><a href="#L107">Caml_noinline</a></li>
<li><a href="#L109">Caml_noinline</a></li>
<li><a href="#L537">Debug_filler_align</a></li>
<li><a href="#L530">Debug_free_major</a></li>
<li><a href="#L529">Debug_free_minor</a></li>
<li><a href="#L531">Debug_free_shrink</a></li>
<li><a href="#L532">Debug_free_truncate</a></li>
<li><a href="#L533">Debug_free_unused</a></li>
<li><a href="#L538">Debug_pool_magic</a></li>
<li><a href="#L505">Debug_tag</a></li>
<li><a href="#L510">Debug_tag</a></li>
<li><a href="#L536">Debug_uninit_align</a></li>
<li><a href="#L535">Debug_uninit_major</a></li>
<li><a href="#L534">Debug_uninit_minor</a></li>
<li><a href="#L540">Debug_uninit_stat</a></li>
<li><a href="#L508">Is_debug_tag</a></li>
<li><a href="#L511">Is_debug_tag</a></li>
<li><a href="#L284">Is_power_of_2</a></li>
<li><a href="#L71">NULL</a></li>
<li><a href="#L92">Noreturn</a></li>
<li><a href="#L96">Noreturn</a></li>
<li><a href="#L100">Noreturn</a></li>
<li><a href="#L363">T</a></li>
<li><a href="#L403">T</a></li>
<li><a href="#L242">__OSFILE__</a></li>
<li><a href="#L244">__OSFILE__</a></li>
<li><a href="#L368">access_os</a></li>
<li><a href="#L408">access_os</a></li>
<li><a href="#L471">caml_aligned_malloc</a></li>
<li><a href="#L398">caml_copy_string_of_os</a></li>
<li><a href="#L438">caml_copy_string_of_os</a></li>
<li><a href="#L156">caml_prefetch</a></li>
<li><a href="#L159">caml_prefetch</a></li>
<li><a href="#L394">caml_stat_strconcat_os</a></li>
<li><a href="#L434">caml_stat_strconcat_os</a></li>
<li><a href="#L397">caml_stat_strdup_of_os</a></li>
<li><a href="#L437">caml_stat_strdup_of_os</a></li>
<li><a href="#L393">caml_stat_strdup_os</a></li>
<li><a href="#L433">caml_stat_strdup_os</a></li>
<li><a href="#L396">caml_stat_strdup_to_os</a></li>
<li><a href="#L436">caml_stat_strdup_to_os</a></li>
<li><a href="#L477">caml_strconcat</a></li>
<li><a href="#L474">caml_strdup</a></li>
<li><a href="#L444">caml_unlink</a></li>
<li><a href="#L446">caml_unlink</a></li>
<li><a href="#L373">chdir_os</a></li>
<li><a href="#L413">chdir_os</a></li>
<li><a href="#L379">chmod_os</a></li>
<li><a href="#L419">chmod_os</a></li>
<li><a href="#L391">clock_os</a></li>
<li><a href="#L431">clock_os</a></li>
<li><a href="#L380">execv_os</a></li>
<li><a href="#L420">execv_os</a></li>
<li><a href="#L381">execve_os</a></li>
<li><a href="#L421">execve_os</a></li>
<li><a href="#L382">execvp_os</a></li>
<li><a href="#L422">execvp_os</a></li>
<li><a href="#L383">execvpe_os</a></li>
<li><a href="#L423">execvpe_os</a></li>
<li><a href="#L389">fopen_os</a></li>
<li><a href="#L429">fopen_os</a></li>
<li><a href="#L375">getcwd_os</a></li>
<li><a href="#L415">getcwd_os</a></li>
<li><a href="#L365">main_os</a></li>
<li><a href="#L405">main_os</a></li>
<li><a href="#L374">mkdir_os</a></li>
<li><a href="#L414">mkdir_os</a></li>
<li><a href="#L388">mktemp_os</a></li>
<li><a href="#L428">mktemp_os</a></li>
<li><a href="#L369">open_os</a></li>
<li><a href="#L409">open_os</a></li>
<li><a href="#L378">putenv_os</a></li>
<li><a href="#L418">putenv_os</a></li>
<li><a href="#L372">rename_os</a></li>
<li><a href="#L412">rename_os</a></li>
<li><a href="#L377">rmdir_os</a></li>
<li><a href="#L417">rmdir_os</a></li>
<li><a href="#L550">snprintf</a></li>
<li><a href="#L556">snprintf_os</a></li>
<li><a href="#L558">snprintf_os</a></li>
<li><a href="#L386">sscanf_os</a></li>
<li><a href="#L426">sscanf_os</a></li>
<li><a href="#L370">stat_os</a></li>
<li><a href="#L410">stat_os</a></li>
<li><a href="#L384">strcmp_os</a></li>
<li><a href="#L424">strcmp_os</a></li>
<li><a href="#L387">strcpy_os</a></li>
<li><a href="#L427">strcpy_os</a></li>
<li><a href="#L385">strlen_os</a></li>
<li><a href="#L425">strlen_os</a></li>
<li><a href="#L376">system_os</a></li>
<li><a href="#L416">system_os</a></li>
<li><a href="#L371">unlink_os</a></li>
<li><a href="#L411">unlink_os</a></li>
</ul>
 <h2>Source code</h2>

  <code><ol><li><span class="Comment">/**************************************************************************/<br/></li>
<li></span><span class="Comment">/*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */<br/></li>
<li></span><span class="Comment">/*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; OCaml&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */<br/></li>
<li></span><span class="Comment">/*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */<br/></li>
<li></span><span class="Comment">/*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Xavier Leroy <a href="../ints.c.html#L488" title="ocaml/runtime/ints.c:488">and</a> Damien Doligez, INRIA Rocquencourt&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; */<br/></li>
<li></span><span class="Comment">/*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */<br/></li>
<li></span><span class="Comment">/*&nbsp;&nbsp; Copyright 1996 Institut National de Recherche en Informatique et&nbsp; &nbsp;&nbsp; */<br/></li>
<li></span><span class="Comment">/*&nbsp; &nbsp;&nbsp; en Automatique.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */<br/></li>
<li></span><span class="Comment">/*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */<br/></li>
<li></span><span class="Comment">/*&nbsp;&nbsp; All rights reserved.&nbsp; This file is distributed under the terms of&nbsp; &nbsp; */<br/></li>
<li></span><span class="Comment">/*&nbsp;&nbsp; the GNU Lesser General Public License version 2.1, with the&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */<br/></li>
<li></span><span class="Comment">/*&nbsp;&nbsp; special exception on linking described in the file LICENSE.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */<br/></li>
<li></span><span class="Comment">/*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; */<br/></li>
<li></span><span class="Comment">/**************************************************************************/<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Miscellaneous macros <a href="../ints.c.html#L488" title="ocaml/runtime/ints.c:488">and</a> variables. */<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#ifndef <a href="#L19" title="ocaml/runtime/caml/misc.h:19">CAML_MISC_H</a><br/></li>
<li><a id="L19">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAML_MISC_H</span><br/></li>
<li></span><br/></li>
<li><span class="PreProc">#include </span><span class="Constant">&quot;config.h&quot;<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Standard definitions */<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#include </span><span class="Constant">&lt;stddef.h&gt;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&lt;stdlib.h&gt;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&lt;stdarg.h&gt;<br/></li>
<li></span><span class="PreProc">#include </span><span class="Constant">&lt;limits.h&gt;<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#include </span><span class="Constant">&quot;camlatomic.h&quot;<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Deprecation warnings */<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#if defined(__GNUC__) || defined(__clang__)<br/></li>
<li></span>&nbsp; <span class="Comment">/* Supported since at least GCC 3.1 */<br/></li>
<li><a id="L36">&#x200c;</a></span>&nbsp; <span class="PreProc">#define <span class="linkable">CAMLdeprecated_typedef</span>(name, type) \<br/></li>
<li></span><span class="PreProc">&nbsp; &nbsp; </span><span class="Type">typedef</span><span class="PreProc"> type name __attribute ((deprecated))<br/></li>
<li></span><span class="PreProc">#elif defined(_MSC_VER)<br/></li>
<li><a id="L39">&#x200c;</a></span>&nbsp; <span class="PreProc">#define <span class="linkable">CAMLdeprecated_typedef</span>(name, type) \<br/></li>
<li></span><span class="PreProc">&nbsp; &nbsp; </span><span class="Type">typedef</span><span class="PreProc"> __declspec(deprecated) type name<br/></li>
<li></span><span class="PreProc">#else<br/></li>
<li><a id="L42">&#x200c;</a></span>&nbsp; <span class="PreProc">#define <span class="linkable">CAMLdeprecated_typedef</span>(name, type) </span><span class="Type">typedef</span><span class="PreProc"> type name<br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#if defined(__GNUC__) &amp;&amp; __STDC_VERSION__ &gt;= </span><span class="Constant">199901L</span><span class="PreProc"> \<br/></li>
<li></span><span class="PreProc"> || defined(_MSC_VER) &amp;&amp; _MSC_VER &gt;= </span><span class="Constant">1925<br/></li>
<li></span><br/></li>
<li><a id="L48">&#x200c;</a><span class="PreProc">#define <span class="linkable">CAML_STRINGIFY</span>(x) #x<br/></li>
<li></span><span class="PreProc">#ifdef _MSC_VER<br/></li>
<li><a id="L50">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAML_MAKEWARNING1</span>(x) <a href="#L48" title="ocaml/runtime/caml/misc.h:48">CAML_STRINGIFY</a>(message(x))<br/></li>
<li></span><span class="PreProc">#else<br/></li>
<li><a id="L52">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAML_MAKEWARNING1</span>(x) <a href="#L48" title="ocaml/runtime/caml/misc.h:48">CAML_STRINGIFY</a>(GCC warning x)<br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li><a id="L54">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAML_MAKEWARNING2</span>(y) <a href="#L50" title="ocaml/runtime/caml/misc.h:50">CAML_MAKEWARNING1</a>(#y)<br/></li>
<li><a id="L55">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAML_PREPROWARNING</span>(x) _Pragma(<a href="#L54" title="ocaml/runtime/caml/misc.h:54">CAML_MAKEWARNING2</a>(x))<br/></li>
<li><a id="L56">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAML_DEPRECATED</span>(name1,name2) \<br/></li>
<li></span><span class="PreProc">&nbsp; <a href="#L55" title="ocaml/runtime/caml/misc.h:55">CAML_PREPROWARNING</a>(name1 is deprecated: use name2 instead)<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#else<br/></li>
<li></span><br/></li>
<li><a id="L61">&#x200c;</a><span class="PreProc">#define <span class="linkable">CAML_PREPROWARNING</span>(msg)<br/></li>
<li><a id="L62">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAML_DEPRECATED</span>(name1,name2)<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Basic types <a href="../ints.c.html#L488" title="ocaml/runtime/ints.c:488">and</a> constants */<br/></li>
<li></span><br/></li>
<li><a id="L68">&#x200c;</a><span class="Type">typedef</span> <span class="Type">size_t</span> <span class="linkable">asize_t</span>;<br/></li>
<li><br/></li>
<li><span class="PreProc">#ifndef <a href="#L71" title="ocaml/runtime/caml/misc.h:71">NULL</a><br/></li>
<li><a id="L71">&#x200c;</a></span><span class="PreProc">#define </span><span class="Constant"><span class="linkable">NULL</span></span><span class="PreProc"> </span><span class="Constant">0<br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#ifdef <a href="../instrtrace.c.html#L16" title="ocaml/runtime/instrtrace.c:16">CAML_INTERNALS</a><br/></li>
<li></span><a href="#L36" title="ocaml/runtime/caml/misc.h:36">CAMLdeprecated_typedef</a>(addr, <span class="Type">char</span> *);<br/></li>
<li><span class="PreProc">#endif</span> <span class="Comment">/* <a href="../instrtrace.c.html#L16" title="ocaml/runtime/instrtrace.c:16">CAML_INTERNALS</a> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* <a href="#L92" title="ocaml/runtime/caml/misc.h:92">Noreturn</a> is preserved for compatibility reasons.<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; Instead of the legacy GCC/Clang-only<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; foo <a href="#L92" title="ocaml/runtime/caml/misc.h:92">Noreturn</a>;<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; you should prefer<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; <a href="#L90" title="ocaml/runtime/caml/misc.h:90">CAMLnoreturn_start</a> foo <a href="#L91" title="ocaml/runtime/caml/misc.h:91">CAMLnoreturn_end</a>;<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; which supports both GCC/Clang <a href="../ints.c.html#L488" title="ocaml/runtime/ints.c:488">and</a> MSVC.<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp;&nbsp; Note: <a href="memory.h.html#L421" title="ocaml/runtime/caml/memory.h:421">CAMLnoreturn</a> is a different macro defined in memory.h,<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; to be used in function bodies rather than as a prototype attribute.<br/></li>
<li></span><span class="Comment">*/<br/></li>
<li></span><span class="PreProc">#ifdef __GNUC__<br/></li>
<li></span>&nbsp; <span class="Comment">/* Works only in GCC 2.5 <a href="../ints.c.html#L488" title="ocaml/runtime/ints.c:488">and</a> later */<br/></li>
<li><a id="L90">&#x200c;</a></span>&nbsp; <span class="PreProc">#define <span class="linkable">CAMLnoreturn_start</span><br/></li>
<li><a id="L91">&#x200c;</a></span>&nbsp; <span class="PreProc">#define <span class="linkable">CAMLnoreturn_end</span> __attribute__ ((</span><span class="Type">noreturn</span><span class="PreProc">))<br/></li>
<li><a id="L92">&#x200c;</a></span>&nbsp; <span class="PreProc">#define <span class="linkable">Noreturn</span> __attribute__ ((</span><span class="Type">noreturn</span><span class="PreProc">))<br/></li>
<li></span><span class="PreProc">#elif defined(_MSC_VER)<br/></li>
<li><a id="L94">&#x200c;</a></span>&nbsp; <span class="PreProc">#define <span class="linkable">CAMLnoreturn_start</span> __declspec(</span><span class="Type">noreturn</span><span class="PreProc">)<br/></li>
<li><a id="L95">&#x200c;</a></span>&nbsp; <span class="PreProc">#define <span class="linkable">CAMLnoreturn_end</span><br/></li>
<li><a id="L96">&#x200c;</a></span>&nbsp; <span class="PreProc">#define <span class="linkable">Noreturn</span><br/></li>
<li></span><span class="PreProc">#else<br/></li>
<li><a id="L98">&#x200c;</a></span>&nbsp; <span class="PreProc">#define <span class="linkable">CAMLnoreturn_start</span><br/></li>
<li><a id="L99">&#x200c;</a></span>&nbsp; <span class="PreProc">#define <span class="linkable">CAMLnoreturn_end</span><br/></li>
<li><a id="L100">&#x200c;</a></span>&nbsp; <span class="PreProc">#define <span class="linkable">Noreturn</span><br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Manually preventing inlining */<br/></li>
<li></span><span class="PreProc">#if defined(__GNUC__)<br/></li>
<li><a id="L105">&#x200c;</a></span>&nbsp; <span class="PreProc">#define <span class="linkable">Caml_noinline</span> __attribute__ ((noinline))<br/></li>
<li></span><span class="PreProc">#elif defined(_MSC_VER)<br/></li>
<li><a id="L107">&#x200c;</a></span>&nbsp; <span class="PreProc">#define <span class="linkable">Caml_noinline</span> __declspec(noinline)<br/></li>
<li></span><span class="PreProc">#else<br/></li>
<li><a id="L109">&#x200c;</a></span>&nbsp; <span class="PreProc">#define <span class="linkable">Caml_noinline</span><br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Export control (to <a href="../major_gc.c.html#L993" title="ocaml/runtime/major_gc.c:993">mark</a> primitives <a href="../ints.c.html#L488" title="ocaml/runtime/ints.c:488">and</a> to handle Windows DLL) */<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#ifndef <a href="#L117" title="ocaml/runtime/caml/misc.h:117">CAMLDLLIMPORT</a><br/></li>
<li></span>&nbsp; <span class="PreProc">#if defined(SUPPORT_DYNAMIC_LINKING) &amp;&amp; defined(ARCH_SIXTYFOUR) \<br/></li>
<li></span><span class="PreProc">&nbsp; &nbsp; &nbsp; &amp;&amp; (defined(__CYGWIN__) || defined(__MINGW32__))<br/></li>
<li><a id="L117">&#x200c;</a></span>&nbsp; &nbsp; <span class="PreProc">#define <span class="linkable">CAMLDLLIMPORT</span> __declspec(dllimport)<br/></li>
<li></span>&nbsp; <span class="PreProc">#else<br/></li>
<li><a id="L119">&#x200c;</a></span>&nbsp; &nbsp; <span class="PreProc">#define <span class="linkable">CAMLDLLIMPORT</span><br/></li>
<li></span>&nbsp; <span class="PreProc">#endif<br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><a id="L123">&#x200c;</a><span class="PreProc">#define <span class="linkable">CAMLexport</span><br/></li>
<li><a id="L124">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAMLprim</span><br/></li>
<li><a id="L125">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAMLextern</span> <a href="#L117" title="ocaml/runtime/caml/misc.h:117">CAMLDLLIMPORT</a> </span><span class="Type">extern<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Weak function definitions that can be overridden by external libs */<br/></li>
<li></span><span class="Comment">/* Conservatively restricted to ELF <a href="../ints.c.html#L488" title="ocaml/runtime/ints.c:488">and</a> MacOSX platforms */<br/></li>
<li></span><span class="PreProc">#if defined(__GNUC__) &amp;&amp; (defined (__ELF__) || defined(__APPLE__))<br/></li>
<li><a id="L130">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAMLweakdef</span> __attribute__((weak))<br/></li>
<li></span><span class="PreProc">#else<br/></li>
<li><a id="L132">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAMLweakdef</span><br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Alignment is necessary for domain_state.h, since the code generated */<br/></li>
<li></span><span class="Comment">/* by ocamlopt makes direct references into the domain state structure,*/<br/></li>
<li></span><span class="Comment">/* which is stored in a register on many platforms. For this to work, */<br/></li>
<li></span><span class="Comment">/* we need to be able to compute the exact offset of each member. */<br/></li>
<li></span><span class="PreProc">#if defined(</span><span class="Constant">__STDC_VERSION__</span><span class="PreProc">) &amp;&amp; __STDC_VERSION__ &gt;= </span><span class="Constant">201112L<br/></li>
<li><a id="L140">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAMLalign</span>(n) </span><span class="Type">_Alignas</span><span class="PreProc">(n)<br/></li>
<li></span><span class="PreProc">#elif defined(</span><span class="Constant">__cplusplus</span><span class="PreProc">) \<br/></li>
<li></span><span class="PreProc">&nbsp;&nbsp; &amp;&amp; (</span><span class="Constant">__cplusplus</span><span class="PreProc"> &gt;= </span><span class="Constant">201103L</span><span class="PreProc"> || defined(_MSC_VER) &amp;&amp; _MSC_VER &gt;= </span><span class="Constant">1900</span><span class="PreProc">)<br/></li>
<li><a id="L143">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAMLalign</span>(n) </span><span class="Type">alignas</span><span class="PreProc">(n)<br/></li>
<li></span><span class="PreProc">#elif defined(SUPPORTS_ALIGNED_ATTRIBUTE)<br/></li>
<li><a id="L145">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAMLalign</span>(n) __attribute__((aligned(n)))<br/></li>
<li></span><span class="PreProc">#elif defined(_MSC_VER)<br/></li>
<li><a id="L147">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAMLalign</span>(n) __declspec(align(n))<br/></li>
<li></span><span class="PreProc">#else<br/></li>
<li></span><span class="PreProc">#<a href="../startup_byt.c.html#L77" title="ocaml/runtime/startup_byt.c:77">error</a> </span><span class="Constant">&quot;How do I align values on this platform?&quot;<br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Prefetching */<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#ifdef <a href="../instrtrace.c.html#L16" title="ocaml/runtime/instrtrace.c:16">CAML_INTERNALS</a><br/></li>
<li></span><span class="PreProc">#if defined(__GNUC__) &amp;&amp; (defined(__i386__) || defined(__x86_64__))<br/></li>
<li><a id="L156">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">caml_prefetch</span>(p) __builtin_prefetch((p), </span><span class="Constant">1</span><span class="PreProc">, </span><span class="Constant">3</span><span class="PreProc">)<br/></li>
<li></span><span class="Comment">/* 1 = intent to write; 3 = all cache levels */<br/></li>
<li></span><span class="PreProc">#else<br/></li>
<li><a id="L159">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">caml_prefetch</span>(p)<br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span><span class="PreProc">#endif</span> <span class="Comment">/* <a href="../instrtrace.c.html#L16" title="ocaml/runtime/instrtrace.c:16">CAML_INTERNALS</a> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* <a href="#L173" title="ocaml/runtime/caml/misc.h:173">CAMLunused</a> is preserved for compatibility reasons.<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; Instead of the legacy GCC/Clang-only<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; <a href="#L173" title="ocaml/runtime/caml/misc.h:173">CAMLunused</a> foo;<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; you should prefer<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; <a href="#L171" title="ocaml/runtime/caml/misc.h:171">CAMLunused_start</a> foo <a href="#L172" title="ocaml/runtime/caml/misc.h:172">CAMLunused_end</a>;<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; which supports both GCC/Clang <a href="../ints.c.html#L488" title="ocaml/runtime/ints.c:488">and</a> MSVC.<br/></li>
<li></span><span class="Comment">*/<br/></li>
<li></span><span class="PreProc">#if defined(__GNUC__) &amp;&amp; (__GNUC__ &gt; </span><span class="Constant">2</span><span class="PreProc"> || (__GNUC__ == </span><span class="Constant">2</span><span class="PreProc"> &amp;&amp; __GNUC_MINOR__ &gt; </span><span class="Constant">7</span><span class="PreProc">))<br/></li>
<li><a id="L171">&#x200c;</a></span>&nbsp; <span class="PreProc">#define <span class="linkable">CAMLunused_start</span> __attribute__ ((unused))<br/></li>
<li><a id="L172">&#x200c;</a></span>&nbsp; <span class="PreProc">#define <span class="linkable">CAMLunused_end</span><br/></li>
<li><a id="L173">&#x200c;</a></span>&nbsp; <span class="PreProc">#define <span class="linkable">CAMLunused</span> __attribute__ ((unused))<br/></li>
<li></span><span class="PreProc">#elif defined(_MSC_VER)<br/></li>
<li><a id="L175">&#x200c;</a></span>&nbsp; <span class="PreProc">#define <span class="linkable">CAMLunused_start</span>&nbsp; __pragma( warning (push) )&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; \<br/></li>
<li></span><span class="PreProc">&nbsp; &nbsp; __pragma( warning (disable:</span><span class="Constant">4189</span><span class="PreProc"> ) )<br/></li>
<li><a id="L177">&#x200c;</a></span>&nbsp; <span class="PreProc">#define <span class="linkable">CAMLunused_end</span> __pragma( warning (pop))<br/></li>
<li><a id="L178">&#x200c;</a></span>&nbsp; <span class="PreProc">#define <span class="linkable">CAMLunused</span><br/></li>
<li></span><span class="PreProc">#else<br/></li>
<li><a id="L180">&#x200c;</a></span>&nbsp; <span class="PreProc">#define <span class="linkable">CAMLunused_start</span><br/></li>
<li><a id="L181">&#x200c;</a></span>&nbsp; <span class="PreProc">#define <span class="linkable">CAMLunused_end</span><br/></li>
<li><a id="L182">&#x200c;</a></span>&nbsp; <span class="PreProc">#define <span class="linkable">CAMLunused</span><br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* GC timing hooks. These can be assigned by the user. These hooks<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; must not allocate, change any heap <a href="mlvalues.h.html#L57" title="ocaml/runtime/caml/mlvalues.h:57">value</a>, nor call OCaml code. They<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; can obtain the domain id with <a href="domain_state.h.html#L62" title="ocaml/runtime/caml/domain_state.h:62">Caml_state</a>-&gt;id. These functions must<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; be reentrant. */<br/></li>
<li></span><span class="PreProc">#ifndef __cplusplus<br/></li>
<li><a id="L190">&#x200c;</a></span><span class="Type">typedef</span> <span class="Type">void</span> (*<span class="linkable">caml_timing_hook</span>) (<span class="Type">void</span>);<br/></li>
<li><span class="Type">extern</span> <span class="Type">_Atomic</span> <a href="#L190" title="ocaml/runtime/caml/misc.h:190">caml_timing_hook</a> <a href="../misc.c.html#L40" title="ocaml/runtime/misc.c:40">caml_major_slice_begin_hook</a>;<br/></li>
<li><span class="Type">extern</span> <span class="Type">_Atomic</span> <a href="#L190" title="ocaml/runtime/caml/misc.h:190">caml_timing_hook</a> <a href="../misc.c.html#L41" title="ocaml/runtime/misc.c:41">caml_major_slice_end_hook</a>;<br/></li>
<li><span class="Type">extern</span> <span class="Type">_Atomic</span> <a href="#L190" title="ocaml/runtime/caml/misc.h:190">caml_timing_hook</a> <a href="../misc.c.html#L42" title="ocaml/runtime/misc.c:42">caml_minor_gc_begin_hook</a>;<br/></li>
<li><span class="Type">extern</span> <span class="Type">_Atomic</span> <a href="#L190" title="ocaml/runtime/caml/misc.h:190">caml_timing_hook</a> <a href="../misc.c.html#L43" title="ocaml/runtime/misc.c:43">caml_minor_gc_end_hook</a>;<br/></li>
<li><span class="Type">extern</span> <span class="Type">_Atomic</span> <a href="#L190" title="ocaml/runtime/caml/misc.h:190">caml_timing_hook</a> <a href="../misc.c.html#L44" title="ocaml/runtime/misc.c:44">caml_finalise_begin_hook</a>;<br/></li>
<li><span class="Type">extern</span> <span class="Type">_Atomic</span> <a href="#L190" title="ocaml/runtime/caml/misc.h:190">caml_timing_hook</a> <a href="../misc.c.html#L45" title="ocaml/runtime/misc.c:45">caml_finalise_end_hook</a>;<br/></li>
<li><span class="Type">extern</span> <span class="Type">_Atomic</span> <a href="#L190" title="ocaml/runtime/caml/misc.h:190">caml_timing_hook</a> <a href="../domain.c.html#L1055" title="ocaml/runtime/domain.c:1055">caml_domain_terminated_hook</a>;<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#ifdef __cplusplus<br/></li>
<li></span><span class="Type">extern</span> <span class="Constant">&quot;C&quot;</span> {<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#ifdef <a href="../instrtrace.c.html#L16" title="ocaml/runtime/instrtrace.c:16">CAML_INTERNALS</a><br/></li>
<li></span><br/></li>
<li><span class="PreProc">#ifndef __cplusplus<br/></li>
<li><a id="L207">&#x200c;</a></span><a href="config.h.html#L42" title="ocaml/runtime/caml/config.h:42">Caml_inline</a> <span class="Type">void</span> <span class="linkable">call_timing_hook</span>(<span class="Type">_Atomic</span> <a href="#L190" title="ocaml/runtime/caml/misc.h:190">caml_timing_hook</a> * a)<br/></li>
<li>{<br/></li>
<li>&nbsp; <a href="#L190" title="ocaml/runtime/caml/misc.h:190">caml_timing_hook</a> h = <a href="camlatomic.h.html#L64" title="ocaml/runtime/caml/camlatomic.h:64">atomic_load_explicit</a>(a, memory_order_relaxed);<br/></li>
<li>&nbsp; <span class="Statement">if</span> (h != <span class="Constant"><a href="#L71" title="ocaml/runtime/caml/misc.h:71">NULL</a></span>) (*h)();<br/></li>
<li>}<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#endif</span> <span class="Comment">/* <a href="../instrtrace.c.html#L16" title="ocaml/runtime/instrtrace.c:16">CAML_INTERNALS</a> */<br/></li>
<li></span><br/></li>
<li><a id="L216">&#x200c;</a><span class="PreProc">#define <span class="linkable">CAML_STATIC_ASSERT_3</span>(<a href="../bigarray.c.html#L951" title="ocaml/runtime/bigarray.c:951">b</a>, l) \<br/></li>
<li></span><span class="PreProc">&nbsp; <a href="#L171" title="ocaml/runtime/caml/misc.h:171">CAMLunused_start</a> \<br/></li>
<li></span><span class="PreProc">&nbsp; &nbsp; <a href="#L125" title="ocaml/runtime/caml/misc.h:125">CAMLextern</a> </span><span class="Type">char</span><span class="PreProc"> static_assertion_failure_line_##l[(<a href="../bigarray.c.html#L951" title="ocaml/runtime/bigarray.c:951">b</a>) ? </span><span class="Constant">1</span><span class="PreProc"> : -</span><span class="Constant">1</span><span class="PreProc">] \<br/></li>
<li></span><span class="PreProc">&nbsp; <a href="#L172" title="ocaml/runtime/caml/misc.h:172">CAMLunused_end</a><br/></li>
<li></span><br/></li>
<li><a id="L221">&#x200c;</a><span class="PreProc">#define <span class="linkable">CAML_STATIC_ASSERT_2</span>(<a href="../bigarray.c.html#L951" title="ocaml/runtime/bigarray.c:951">b</a>, l) <a href="#L216" title="ocaml/runtime/caml/misc.h:216">CAML_STATIC_ASSERT_3</a>(<a href="../bigarray.c.html#L951" title="ocaml/runtime/bigarray.c:951">b</a>, l)<br/></li>
<li><a id="L222">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAML_STATIC_ASSERT</span>(<a href="../bigarray.c.html#L951" title="ocaml/runtime/bigarray.c:951">b</a>) <a href="#L221" title="ocaml/runtime/caml/misc.h:221">CAML_STATIC_ASSERT_2</a>(<a href="../bigarray.c.html#L951" title="ocaml/runtime/bigarray.c:951">b</a>, </span><span class="Constant">__LINE__</span><span class="PreProc">)<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Windows Unicode support (rest below - <a href="#L227" title="ocaml/runtime/caml/misc.h:227">char_os</a> is needed earlier) */<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#ifdef _WIN32<br/></li>
<li><a id="L227">&#x200c;</a></span><span class="Type">typedef</span> <span class="Type">wchar_t</span> <span class="linkable">char_os</span>;<br/></li>
<li><span class="PreProc">#else<br/></li>
<li><a id="L229">&#x200c;</a></span><span class="Type">typedef</span> <span class="Type">char</span> <span class="linkable">char_os</span>;<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Assertions */<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#ifdef DEBUG<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#ifdef UNICODE<br/></li>
<li></span><span class="Comment">/* See https://msdn.microsoft.com/ja-jp/library/b0084kay(v=vs.71).aspx<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; It's not clear why this isn't so obviously documented, as it doesn't<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; seem to have been superseded by a more sensible mechanism! */<br/></li>
<li><a id="L240">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAML_WIDEN_STRING_LITERAL2</span>(x) L##x<br/></li>
<li><a id="L241">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAML_WIDEN_STRING_LITERAL</span>(x) <a href="#L240" title="ocaml/runtime/caml/misc.h:240">CAML_WIDEN_STRING_LITERAL2</a>(x)<br/></li>
<li><a id="L242">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">__OSFILE__</span> <a href="#L241" title="ocaml/runtime/caml/misc.h:241">CAML_WIDEN_STRING_LITERAL</a>(</span><span class="Constant">__FILE__</span><span class="PreProc">)<br/></li>
<li></span><span class="PreProc">#else<br/></li>
<li><a id="L244">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">__OSFILE__</span> </span><span class="Constant">__FILE__<br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><a id="L247">&#x200c;</a><span class="PreProc">#define <span class="linkable">CAMLassert</span>(x) \<br/></li>
<li></span><span class="PreProc">&nbsp; (<a href="#L257" title="ocaml/runtime/caml/misc.h:257">CAMLlikely</a>(x) ? (</span><span class="Type">void</span><span class="PreProc">) </span><span class="Constant">0</span><span class="PreProc"> : <a href="../misc.c.html#L49" title="ocaml/runtime/misc.c:49">caml_failed_assert</a> ( #x , <a href="#L242" title="ocaml/runtime/caml/misc.h:242">__OSFILE__</a>, </span><span class="Constant">__LINE__</span><span class="PreProc">))<br/></li>
<li></span><a href="#L90" title="ocaml/runtime/caml/misc.h:90">CAMLnoreturn_start</a><br/></li>
<li><a href="#L125" title="ocaml/runtime/caml/misc.h:125">CAMLextern</a> <span class="Type">void</span> <a href="../misc.c.html#L49" title="ocaml/runtime/misc.c:49">caml_failed_assert</a> (<span class="Type">char</span> *, <a href="#L227" title="ocaml/runtime/caml/misc.h:227">char_os</a> *, <span class="Type">int</span>)<br/></li>
<li><a href="#L91" title="ocaml/runtime/caml/misc.h:91">CAMLnoreturn_end</a>;<br/></li>
<li><span class="PreProc">#else<br/></li>
<li><a id="L253">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAMLassert</span>(x) ((</span><span class="Type">void</span><span class="PreProc">) </span><span class="Constant">0</span><span class="PreProc">)<br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#ifdef __GNUC__<br/></li>
<li><a id="L257">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAMLlikely</span>(e)&nbsp;&nbsp; __builtin_expect(!!(e), </span><span class="Constant">1</span><span class="PreProc">)<br/></li>
<li><a id="L258">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAMLunlikely</span>(e) __builtin_expect(!!(e), </span><span class="Constant">0</span><span class="PreProc">)<br/></li>
<li></span><span class="PreProc">#else<br/></li>
<li><a id="L260">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAMLlikely</span>(e) (e)<br/></li>
<li><a id="L261">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAMLunlikely</span>(e) (e)<br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#ifdef <a href="../instrtrace.c.html#L16" title="ocaml/runtime/instrtrace.c:16">CAML_INTERNALS</a><br/></li>
<li></span><br/></li>
<li><span class="Comment">/* GC <a href="shared_heap.h.html#L54" title="ocaml/runtime/caml/shared_heap.h:54">status</a> assertions.<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp;&nbsp; <a href="#L274" title="ocaml/runtime/caml/misc.h:274">CAMLnoalloc</a> at the start of a block means that the GC must not be<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; invoked during the block. */<br/></li>
<li></span><span class="PreProc">#if defined(__GNUC__) &amp;&amp; defined(DEBUG)<br/></li>
<li></span><span class="Type">int</span> <a href="../misc.c.html#L62" title="ocaml/runtime/misc.c:62">caml_noalloc_begin</a>(<span class="Type">void</span>);<br/></li>
<li><span class="Type">void</span> <a href="../misc.c.html#L66" title="ocaml/runtime/misc.c:66">caml_noalloc_end</a>(<span class="Type">int</span>*);<br/></li>
<li><span class="Type">void</span> <a href="../misc.c.html#L71" title="ocaml/runtime/misc.c:71">caml_alloc_point_here</a>(<span class="Type">void</span>);<br/></li>
<li><a id="L274">&#x200c;</a><span class="PreProc">#define <span class="linkable">CAMLnoalloc</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \<br/></li>
<li></span><span class="PreProc">&nbsp; </span><span class="Type">int</span><span class="PreProc"> caml__noalloc&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; \<br/></li>
<li></span><span class="PreProc">&nbsp; __attribute__((cleanup(<a href="../misc.c.html#L66" title="ocaml/runtime/misc.c:66">caml_noalloc_end</a>),unused)) \<br/></li>
<li></span><span class="PreProc">&nbsp; &nbsp; = <a href="../misc.c.html#L62" title="ocaml/runtime/misc.c:62">caml_noalloc_begin</a>()<br/></li>
<li><a id="L278">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAMLalloc_point_here</span> (<a href="../misc.c.html#L71" title="ocaml/runtime/misc.c:71">caml_alloc_point_here</a>())<br/></li>
<li></span><span class="PreProc">#else<br/></li>
<li><a id="L280">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAMLnoalloc</span><br/></li>
<li><a id="L281">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAMLalloc_point_here</span> ((</span><span class="Type">void</span><span class="PreProc">)</span><span class="Constant">0</span><span class="PreProc">)<br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><a id="L284">&#x200c;</a><span class="PreProc">#define <span class="linkable">Is_power_of_2</span>(x) ((x) &gt; </span><span class="Constant">0</span><span class="PreProc"> &amp;&amp; ((x) &amp; ((x) - </span><span class="Constant">1</span><span class="PreProc">)) == </span><span class="Constant">0</span><span class="PreProc">)<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* This hook is called when a fatal <a href="../startup_byt.c.html#L77" title="ocaml/runtime/startup_byt.c:77">error</a> occurs in the OCaml<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; runtime. It is given arguments to be passed to the [vprintf]-like<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; functions in order to synthesize the <a href="../startup_byt.c.html#L77" title="ocaml/runtime/startup_byt.c:77">error</a> message.<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; If it returns, the runtime calls [abort()].<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp;&nbsp; If it is [<a href="#L71" title="ocaml/runtime/caml/misc.h:71">NULL</a>], the <a href="../startup_byt.c.html#L77" title="ocaml/runtime/startup_byt.c:77">error</a> message is printed on stderr <a href="../ints.c.html#L488" title="ocaml/runtime/ints.c:488">and</a> then<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; [abort()] is called.<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp;&nbsp; This function must be reentrant. */<br/></li>
<li></span><span class="PreProc">#ifndef __cplusplus<br/></li>
<li><a id="L298">&#x200c;</a></span><span class="Type">typedef</span> <span class="Type">void</span> (*<span class="linkable">fatal_error_hook</span>) (<span class="Type">char</span> *msg, <span class="Type">va_list</span> args);<br/></li>
<li><span class="Type">extern</span> <span class="Type">_Atomic</span> <a href="#L298" title="ocaml/runtime/caml/misc.h:298">fatal_error_hook</a> <a href="../misc.c.html#L106" title="ocaml/runtime/misc.c:106">caml_fatal_error_hook</a>;<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><a href="#L90" title="ocaml/runtime/caml/misc.h:90">CAMLnoreturn_start</a><br/></li>
<li><a href="#L125" title="ocaml/runtime/caml/misc.h:125">CAMLextern</a> <span class="Type">void</span> <a href="../misc.c.html#L108" title="ocaml/runtime/misc.c:108">caml_fatal_error</a> (<span class="Type">char</span> *, ...)<br/></li>
<li><span class="PreProc">#ifdef __GNUC__<br/></li>
<li></span>&nbsp; __attribute__ ((format (printf, <span class="Constant">1</span>, <span class="Constant">2</span>)))<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><a href="#L91" title="ocaml/runtime/caml/misc.h:91">CAMLnoreturn_end</a>;<br/></li>
<li><br/></li>
<li><span class="Comment">/* Detection of available C built-in functions, the Clang way. */<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#ifdef __has_builtin<br/></li>
<li><a id="L312">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">Caml_has_builtin</span>(x) __has_builtin(x)<br/></li>
<li></span><span class="PreProc">#else<br/></li>
<li><a id="L314">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">Caml_has_builtin</span>(x) </span><span class="Constant">0<br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Integer arithmetic with overflow detection.<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; The functions return 0 if no overflow, 1 if overflow.<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; The result of the operation is always stored at [*res].<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; If no overflow is reported, this is the exact result.<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; If overflow is reported, this is the exact result modulo 2 to the word size.<br/></li>
<li></span><span class="Comment">*/<br/></li>
<li></span><br/></li>
<li><a id="L324">&#x200c;</a><a href="config.h.html#L42" title="ocaml/runtime/caml/config.h:42">Caml_inline</a> <span class="Type">int</span> <span class="linkable">caml_uadd_overflow</span>(<a href="config.h.html#L141" title="ocaml/runtime/caml/config.h:141">uintnat</a> a, <a href="config.h.html#L141" title="ocaml/runtime/caml/config.h:141">uintnat</a> <a href="../bigarray.c.html#L951" title="ocaml/runtime/bigarray.c:951">b</a>, <a href="config.h.html#L141" title="ocaml/runtime/caml/config.h:141">uintnat</a> * res)<br/></li>
<li>{<br/></li>
<li><span class="PreProc">#if __GNUC__ &gt;= </span><span class="Constant">5</span><span class="PreProc"> || <a href="#L312" title="ocaml/runtime/caml/misc.h:312">Caml_has_builtin</a>(__builtin_add_overflow)<br/></li>
<li></span>&nbsp; <span class="Statement">return</span> __builtin_add_overflow(a, <a href="../bigarray.c.html#L951" title="ocaml/runtime/bigarray.c:951">b</a>, res);<br/></li>
<li><span class="PreProc">#else<br/></li>
<li></span>&nbsp; <a href="config.h.html#L141" title="ocaml/runtime/caml/config.h:141">uintnat</a> c = a + <a href="../bigarray.c.html#L951" title="ocaml/runtime/bigarray.c:951">b</a>;<br/></li>
<li>&nbsp; *res = c;<br/></li>
<li>&nbsp; <span class="Statement">return</span> c &lt; a;<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span>}<br/></li>
<li><br/></li>
<li><a id="L335">&#x200c;</a><a href="config.h.html#L42" title="ocaml/runtime/caml/config.h:42">Caml_inline</a> <span class="Type">int</span> <span class="linkable">caml_usub_overflow</span>(<a href="config.h.html#L141" title="ocaml/runtime/caml/config.h:141">uintnat</a> a, <a href="config.h.html#L141" title="ocaml/runtime/caml/config.h:141">uintnat</a> <a href="../bigarray.c.html#L951" title="ocaml/runtime/bigarray.c:951">b</a>, <a href="config.h.html#L141" title="ocaml/runtime/caml/config.h:141">uintnat</a> * res)<br/></li>
<li>{<br/></li>
<li><span class="PreProc">#if __GNUC__ &gt;= </span><span class="Constant">5</span><span class="PreProc"> || <a href="#L312" title="ocaml/runtime/caml/misc.h:312">Caml_has_builtin</a>(__builtin_sub_overflow)<br/></li>
<li></span>&nbsp; <span class="Statement">return</span> __builtin_sub_overflow(a, <a href="../bigarray.c.html#L951" title="ocaml/runtime/bigarray.c:951">b</a>, res);<br/></li>
<li><span class="PreProc">#else<br/></li>
<li></span>&nbsp; <a href="config.h.html#L141" title="ocaml/runtime/caml/config.h:141">uintnat</a> c = a - <a href="../bigarray.c.html#L951" title="ocaml/runtime/bigarray.c:951">b</a>;<br/></li>
<li>&nbsp; *res = c;<br/></li>
<li>&nbsp; <span class="Statement">return</span> a &lt; <a href="../bigarray.c.html#L951" title="ocaml/runtime/bigarray.c:951">b</a>;<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span>}<br/></li>
<li><br/></li>
<li><span class="PreProc">#if __GNUC__ &gt;= </span><span class="Constant">5</span><span class="PreProc"> || <a href="#L312" title="ocaml/runtime/caml/misc.h:312">Caml_has_builtin</a>(__builtin_mul_overflow)<br/></li>
<li><a id="L347">&#x200c;</a></span><a href="config.h.html#L42" title="ocaml/runtime/caml/config.h:42">Caml_inline</a> <span class="Type">int</span> <span class="linkable">caml_umul_overflow</span>(<a href="config.h.html#L141" title="ocaml/runtime/caml/config.h:141">uintnat</a> a, <a href="config.h.html#L141" title="ocaml/runtime/caml/config.h:141">uintnat</a> <a href="../bigarray.c.html#L951" title="ocaml/runtime/bigarray.c:951">b</a>, <a href="config.h.html#L141" title="ocaml/runtime/caml/config.h:141">uintnat</a> * res)<br/></li>
<li>{<br/></li>
<li>&nbsp; <span class="Statement">return</span> __builtin_mul_overflow(a, <a href="../bigarray.c.html#L951" title="ocaml/runtime/bigarray.c:951">b</a>, res);<br/></li>
<li>}<br/></li>
<li><span class="PreProc">#else<br/></li>
<li></span><span class="Type">extern</span> <span class="Type">int</span> <a href="#L347" title="ocaml/runtime/caml/misc.h:347">caml_umul_overflow</a>(<a href="config.h.html#L141" title="ocaml/runtime/caml/config.h:141">uintnat</a> a, <a href="config.h.html#L141" title="ocaml/runtime/caml/config.h:141">uintnat</a> <a href="../bigarray.c.html#L951" title="ocaml/runtime/bigarray.c:951">b</a>, <a href="config.h.html#L141" title="ocaml/runtime/caml/config.h:141">uintnat</a> * res);<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* From floats.c */<br/></li>
<li></span><span class="Type">extern</span> <span class="Type">double</span> <a href="../floats.c.html#L989" title="ocaml/runtime/floats.c:989">caml_log1p</a>(<span class="Type">double</span>);<br/></li>
<li><br/></li>
<li><span class="Comment">/* Windows Unicode support */<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#ifdef _WIN32<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#ifdef <a href="../instrtrace.c.html#L16" title="ocaml/runtime/instrtrace.c:16">CAML_INTERNALS</a><br/></li>
<li><a id="L363">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">T</span>(x) L ## x<br/></li>
<li></span><br/></li>
<li><a id="L365">&#x200c;</a><span class="PreProc">#define <span class="linkable">main_os</span> wmain<br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><a id="L368">&#x200c;</a><span class="PreProc">#define <span class="linkable">access_os</span> _waccess<br/></li>
<li><a id="L369">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">open_os</span> _wopen<br/></li>
<li><a id="L370">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">stat_os</span> _wstati64<br/></li>
<li><a id="L371">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">unlink_os</span> _wunlink<br/></li>
<li><a id="L372">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">rename_os</span> <a href="../win32.c.html#L782" title="ocaml/runtime/win32.c:782">caml_win32_rename</a><br/></li>
<li><a id="L373">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">chdir_os</span> _wchdir<br/></li>
<li><a id="L374">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">mkdir_os</span>(path, perm) _wmkdir(path)<br/></li>
<li><a id="L375">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">getcwd_os</span> _wgetcwd<br/></li>
<li><a id="L376">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">system_os</span> _wsystem<br/></li>
<li><a id="L377">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">rmdir_os</span> _wrmdir<br/></li>
<li><a id="L378">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">putenv_os</span> _wputenv<br/></li>
<li><a id="L379">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">chmod_os</span> _wchmod<br/></li>
<li><a id="L380">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">execv_os</span> _wexecv<br/></li>
<li><a id="L381">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">execve_os</span> _wexecve<br/></li>
<li><a id="L382">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">execvp_os</span> _wexecvp<br/></li>
<li><a id="L383">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">execvpe_os</span> _wexecvpe<br/></li>
<li><a id="L384">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">strcmp_os</span> wcscmp<br/></li>
<li><a id="L385">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">strlen_os</span> wcslen<br/></li>
<li><a id="L386">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">sscanf_os</span> swscanf<br/></li>
<li><a id="L387">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">strcpy_os</span> wcscpy<br/></li>
<li><a id="L388">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">mktemp_os</span> _wmktemp<br/></li>
<li><a id="L389">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">fopen_os</span> _wfopen<br/></li>
<li></span><br/></li>
<li><a id="L391">&#x200c;</a><span class="PreProc">#define <span class="linkable">clock_os</span> <a href="../win32.c.html#L1111" title="ocaml/runtime/win32.c:1111">caml_win32_clock</a><br/></li>
<li></span><br/></li>
<li><a id="L393">&#x200c;</a><span class="PreProc">#define <span class="linkable">caml_stat_strdup_os</span> <a href="../memory.c.html#L642" title="ocaml/runtime/memory.c:642">caml_stat_wcsdup</a><br/></li>
<li><a id="L394">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">caml_stat_strconcat_os</span> <a href="../memory.c.html#L686" title="ocaml/runtime/memory.c:686">caml_stat_wcsconcat</a><br/></li>
<li></span><br/></li>
<li><a id="L396">&#x200c;</a><span class="PreProc">#define <span class="linkable">caml_stat_strdup_to_os</span> <a href="../win32.c.html#L975" title="ocaml/runtime/win32.c:975">caml_stat_strdup_to_utf16</a><br/></li>
<li><a id="L397">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">caml_stat_strdup_of_os</span> <a href="../win32.c.html#L987" title="ocaml/runtime/win32.c:987">caml_stat_strdup_of_utf16</a><br/></li>
<li><a id="L398">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">caml_copy_string_of_os</span> <a href="../win32.c.html#L961" title="ocaml/runtime/win32.c:961">caml_copy_string_of_utf16</a><br/></li>
<li></span><br/></li>
<li><span class="PreProc">#else</span> <span class="Comment">/* _WIN32 */<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#ifdef <a href="../instrtrace.c.html#L16" title="ocaml/runtime/instrtrace.c:16">CAML_INTERNALS</a><br/></li>
<li><a id="L403">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">T</span>(x) x<br/></li>
<li></span><br/></li>
<li><a id="L405">&#x200c;</a><span class="PreProc">#define <span class="linkable">main_os</span> main<br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><a id="L408">&#x200c;</a><span class="PreProc">#define <span class="linkable">access_os</span> access<br/></li>
<li><a id="L409">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">open_os</span> open<br/></li>
<li><a id="L410">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">stat_os</span> stat<br/></li>
<li><a id="L411">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">unlink_os</span> unlink<br/></li>
<li><a id="L412">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">rename_os</span> rename<br/></li>
<li><a id="L413">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">chdir_os</span> chdir<br/></li>
<li><a id="L414">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">mkdir_os</span> mkdir<br/></li>
<li><a id="L415">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">getcwd_os</span> getcwd<br/></li>
<li><a id="L416">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">system_os</span> system<br/></li>
<li><a id="L417">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">rmdir_os</span> rmdir<br/></li>
<li><a id="L418">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">putenv_os</span> putenv<br/></li>
<li><a id="L419">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">chmod_os</span> chmod<br/></li>
<li><a id="L420">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">execv_os</span> execv<br/></li>
<li><a id="L421">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">execve_os</span> execve<br/></li>
<li><a id="L422">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">execvp_os</span> execvp<br/></li>
<li><a id="L423">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">execvpe_os</span> execvpe<br/></li>
<li><a id="L424">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">strcmp_os</span> strcmp<br/></li>
<li><a id="L425">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">strlen_os</span> strlen<br/></li>
<li><a id="L426">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">sscanf_os</span> sscanf<br/></li>
<li><a id="L427">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">strcpy_os</span> strcpy<br/></li>
<li><a id="L428">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">mktemp_os</span> mktemp<br/></li>
<li><a id="L429">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">fopen_os</span> fopen<br/></li>
<li></span><br/></li>
<li><a id="L431">&#x200c;</a><span class="PreProc">#define <span class="linkable">clock_os</span> clock<br/></li>
<li></span><br/></li>
<li><a id="L433">&#x200c;</a><span class="PreProc">#define <span class="linkable">caml_stat_strdup_os</span> <a href="../memory.c.html#L632" title="ocaml/runtime/memory.c:632">caml_stat_strdup</a><br/></li>
<li><a id="L434">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">caml_stat_strconcat_os</span> <a href="../memory.c.html#L654" title="ocaml/runtime/memory.c:654">caml_stat_strconcat</a><br/></li>
<li></span><br/></li>
<li><a id="L436">&#x200c;</a><span class="PreProc">#define <span class="linkable">caml_stat_strdup_to_os</span> <a href="../memory.c.html#L632" title="ocaml/runtime/memory.c:632">caml_stat_strdup</a><br/></li>
<li><a id="L437">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">caml_stat_strdup_of_os</span> <a href="../memory.c.html#L632" title="ocaml/runtime/memory.c:632">caml_stat_strdup</a><br/></li>
<li><a id="L438">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">caml_copy_string_of_os</span> <a href="../alloc.c.html#L214" title="ocaml/runtime/alloc.c:214">caml_copy_string</a><br/></li>
<li></span><br/></li>
<li><span class="PreProc">#endif</span> <span class="Comment">/* _WIN32 */<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Wrapper for Windows unlink */<br/></li>
<li></span><span class="PreProc">#ifdef _WIN32<br/></li>
<li><a id="L444">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">caml_unlink</span> <a href="../win32.c.html#L845" title="ocaml/runtime/win32.c:845">caml_win32_unlink</a><br/></li>
<li></span><span class="PreProc">#else<br/></li>
<li><a id="L446">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">caml_unlink</span> <a href="#L371" title="ocaml/runtime/caml/misc.h:371">unlink_os</a><br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/* Data structures */<br/></li>
<li></span><br/></li>
<li><a id="L452">&#x200c;</a><span class="Type">struct</span> <span class="linkable">ext_table</span> {<br/></li>
<li>&nbsp; <span class="Type">int</span> size;<br/></li>
<li>&nbsp; <span class="Type">int</span> <a href="../frame_descriptors.c.html#L84" title="ocaml/runtime/frame_descriptors.c:84">capacity</a>;<br/></li>
<li>&nbsp; <span class="Type">void</span> ** contents;<br/></li>
<li>};<br/></li>
<li><br/></li>
<li><span class="Type">extern</span> <span class="Type">void</span> <a href="../misc.c.html#L139" title="ocaml/runtime/misc.c:139">caml_ext_table_init</a>(<span class="Type">struct</span> <a href="#L452" title="ocaml/runtime/caml/misc.h:452">ext_table</a> * tbl, <span class="Type">int</span> init_capa);<br/></li>
<li><span class="Type">extern</span> <span class="Type">int</span> <a href="../misc.c.html#L146" title="ocaml/runtime/misc.c:146">caml_ext_table_add</a>(<span class="Type">struct</span> <a href="#L452" title="ocaml/runtime/caml/misc.h:452">ext_table</a> * tbl, <span class="Type">void</span> * data);<br/></li>
<li><span class="Type">extern</span> <span class="Type">void</span> <a href="../misc.c.html#L160" title="ocaml/runtime/misc.c:160">caml_ext_table_remove</a>(<span class="Type">struct</span> <a href="#L452" title="ocaml/runtime/caml/misc.h:452">ext_table</a> * tbl, <span class="Type">void</span> * data);<br/></li>
<li><span class="Type">extern</span> <span class="Type">void</span> <a href="../misc.c.html#L182" title="ocaml/runtime/misc.c:182">caml_ext_table_free</a>(<span class="Type">struct</span> <a href="#L452" title="ocaml/runtime/caml/misc.h:452">ext_table</a> * tbl, <span class="Type">int</span> free_entries);<br/></li>
<li><span class="Type">extern</span> <span class="Type">void</span> <a href="../misc.c.html#L173" title="ocaml/runtime/misc.c:173">caml_ext_table_clear</a>(<span class="Type">struct</span> <a href="#L452" title="ocaml/runtime/caml/misc.h:452">ext_table</a> * tbl, <span class="Type">int</span> free_entries);<br/></li>
<li><br/></li>
<li><span class="Comment">/* Add to [contents] the (short) names of the files contained in<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; the directory named [dirname].&nbsp; No entries are added for [.] <a href="../ints.c.html#L488" title="ocaml/runtime/ints.c:488">and</a> [..].<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; Return 0 on success, -1 on <a href="../startup_byt.c.html#L77" title="ocaml/runtime/startup_byt.c:77">error</a>; set errno in the case of <a href="../startup_byt.c.html#L77" title="ocaml/runtime/startup_byt.c:77">error</a>. */<br/></li>
<li></span><a href="#L125" title="ocaml/runtime/caml/misc.h:125">CAMLextern</a> <span class="Type">int</span> <a href="../unix.c.html#L342" title="ocaml/runtime/unix.c:342">caml_read_directory</a>(<a href="#L227" title="ocaml/runtime/caml/misc.h:227">char_os</a> * dirname,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Type">struct</span> <a href="#L452" title="ocaml/runtime/caml/misc.h:452">ext_table</a> * contents);<br/></li>
<li><br/></li>
<li><span class="Comment">/* Deprecated aliases */<br/></li>
<li><a id="L471">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">caml_aligned_malloc</span> \<br/></li>
<li></span><span class="PreProc">&nbsp;&nbsp; <a href="#L56" title="ocaml/runtime/caml/misc.h:56">CAML_DEPRECATED</a>(</span><span class="Constant">&quot;<a href="#L471" title="ocaml/runtime/caml/misc.h:471">caml_aligned_malloc</a>&quot;</span><span class="PreProc">, </span><span class="Constant">&quot;<a href="../memory.c.html#L512" title="ocaml/runtime/memory.c:512">caml_stat_alloc_aligned_noexc</a>&quot;</span><span class="PreProc">) \<br/></li>
<li></span><span class="PreProc">&nbsp;&nbsp; <a href="../memory.c.html#L512" title="ocaml/runtime/memory.c:512">caml_stat_alloc_aligned_noexc</a><br/></li>
<li><a id="L474">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">caml_strdup</span> \<br/></li>
<li></span><span class="PreProc">&nbsp;&nbsp; <a href="#L56" title="ocaml/runtime/caml/misc.h:56">CAML_DEPRECATED</a>(</span><span class="Constant">&quot;<a href="#L474" title="ocaml/runtime/caml/misc.h:474">caml_strdup</a>&quot;</span><span class="PreProc">, </span><span class="Constant">&quot;<a href="../memory.c.html#L632" title="ocaml/runtime/memory.c:632">caml_stat_strdup</a>&quot;</span><span class="PreProc">) \<br/></li>
<li></span><span class="PreProc">&nbsp;&nbsp; <a href="../memory.c.html#L632" title="ocaml/runtime/memory.c:632">caml_stat_strdup</a><br/></li>
<li><a id="L477">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">caml_strconcat</span> \<br/></li>
<li></span><span class="PreProc">&nbsp;&nbsp; <a href="#L56" title="ocaml/runtime/caml/misc.h:56">CAML_DEPRECATED</a>(</span><span class="Constant">&quot;<a href="#L477" title="ocaml/runtime/caml/misc.h:477">caml_strconcat</a>&quot;</span><span class="PreProc">, </span><span class="Constant">&quot;<a href="../memory.c.html#L654" title="ocaml/runtime/memory.c:654">caml_stat_strconcat</a>&quot;</span><span class="PreProc">) \<br/></li>
<li></span><span class="PreProc">&nbsp;&nbsp; <a href="../memory.c.html#L654" title="ocaml/runtime/memory.c:654">caml_stat_strconcat</a><br/></li>
<li></span><br/></li>
<li><span class="PreProc">#ifdef <a href="../instrtrace.c.html#L16" title="ocaml/runtime/instrtrace.c:16">CAML_INTERNALS</a><br/></li>
<li></span><br/></li>
<li><span class="Comment">/* GC flags <a href="../ints.c.html#L488" title="ocaml/runtime/ints.c:488">and</a> messages */<br/></li>
<li></span><br/></li>
<li><span class="Type">extern</span> <a href="camlatomic.h.html#L32" title="ocaml/runtime/caml/camlatomic.h:32">atomic_uintnat</a> <a href="../misc.c.html#L79" title="ocaml/runtime/misc.c:79">caml_verb_gc</a>;<br/></li>
<li><br/></li>
<li><span class="Type">void</span> <a href="../misc.c.html#L81" title="ocaml/runtime/misc.c:81">caml_gc_log</a> (<span class="Type">char</span> *, ...)<br/></li>
<li><span class="PreProc">#ifdef __GNUC__<br/></li>
<li></span>&nbsp; __attribute__ ((format (printf, <span class="Constant">1</span>, <span class="Constant">2</span>)))<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span>;<br/></li>
<li><br/></li>
<li><span class="Type">void</span> <a href="../misc.c.html#L95" title="ocaml/runtime/misc.c:95">caml_gc_message</a> (<span class="Type">int</span>, <span class="Type">char</span> *, ...)<br/></li>
<li><span class="PreProc">#ifdef __GNUC__<br/></li>
<li></span>&nbsp; __attribute__ ((format (printf, <span class="Constant">2</span>, <span class="Constant">3</span>)))<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span>;<br/></li>
<li><br/></li>
<li><span class="Comment">/* Runtime warnings */<br/></li>
<li></span><span class="Type">extern</span> <a href="config.h.html#L141" title="ocaml/runtime/caml/config.h:141">uintnat</a> <a href="../misc.c.html#L235" title="ocaml/runtime/misc.c:235">caml_runtime_warnings</a>;<br/></li>
<li><span class="Type">int</span> <a href="../misc.c.html#L238" title="ocaml/runtime/misc.c:238">caml_runtime_warnings_active</a>(<span class="Type">void</span>);<br/></li>
<li><br/></li>
<li><span class="PreProc">#ifdef DEBUG<br/></li>
<li></span><span class="PreProc">#ifdef ARCH_SIXTYFOUR<br/></li>
<li><a id="L505">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">Debug_tag</span>(x) (</span><span class="Constant">0xD700D7D7D700D6D7ull</span><span class="PreProc"> \<br/></li>
<li></span><span class="PreProc">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | ((<a href="config.h.html#L141" title="ocaml/runtime/caml/config.h:141">uintnat</a>) (x) &lt;&lt; </span><span class="Constant">16</span><span class="PreProc">) \<br/></li>
<li></span><span class="PreProc">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; | ((<a href="config.h.html#L141" title="ocaml/runtime/caml/config.h:141">uintnat</a>) (x) &lt;&lt; </span><span class="Constant">48</span><span class="PreProc">))<br/></li>
<li><a id="L508">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">Is_debug_tag</span>(x) (((x) &amp; </span><span class="Constant">0xff00ffffff00ffffull</span><span class="PreProc">) == </span><span class="Constant">0xD700D7D7D700D6D7ull</span><span class="PreProc">)<br/></li>
<li></span><span class="PreProc">#else<br/></li>
<li><a id="L510">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">Debug_tag</span>(x) (</span><span class="Constant">0xD700D6D7ul</span><span class="PreProc"> | ((<a href="config.h.html#L141" title="ocaml/runtime/caml/config.h:141">uintnat</a>) (x) &lt;&lt; </span><span class="Constant">16</span><span class="PreProc">))<br/></li>
<li><a id="L511">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">Is_debug_tag</span>(x) (((x) &amp; </span><span class="Constant">0xff00fffful</span><span class="PreProc">) == </span><span class="Constant">0xD700D6D7ul</span><span class="PreProc">)<br/></li>
<li></span><span class="PreProc">#endif</span> <span class="Comment">/* ARCH_SIXTYFOUR */<br/></li>
<li></span><br/></li>
<li><span class="Comment">/*<br/></li>
<li></span><span class="Comment">&nbsp; 00 -&gt; free words in minor heap<br/></li>
<li></span><span class="Comment">&nbsp; 01 -&gt; fields of free list blocks in major heap<br/></li>
<li></span><span class="Comment">&nbsp; 03 -&gt; heap chunks deallocated by heap shrinking<br/></li>
<li></span><span class="Comment">&nbsp; 04 -&gt; fields deallocated by caml_obj_truncate: obsolete<br/></li>
<li></span><span class="Comment">&nbsp; 05 -&gt; unused child pointers in large free blocks<br/></li>
<li></span><span class="Comment">&nbsp; 10 -&gt; uninitialised fields of minor objects<br/></li>
<li></span><span class="Comment">&nbsp; 11 -&gt; uninitialised fields of major objects<br/></li>
<li></span><span class="Comment">&nbsp; 15 -&gt; uninitialised words of [<a href="../memory.c.html#L539" title="ocaml/runtime/memory.c:539">caml_stat_alloc_aligned</a>] blocks<br/></li>
<li></span><span class="Comment">&nbsp; 85 -&gt; filler bytes of [<a href="../memory.c.html#L539" title="ocaml/runtime/memory.c:539">caml_stat_alloc_aligned</a>]<br/></li>
<li></span><span class="Comment">&nbsp; 99 -&gt; the magic prefix of a memory block allocated by [<a href="../memory.c.html#L550" title="ocaml/runtime/memory.c:550">caml_stat_alloc</a>]<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp; special case (byte by byte):<br/></li>
<li></span><span class="Comment">&nbsp; D7 -&gt; uninitialised words of [<a href="../memory.c.html#L550" title="ocaml/runtime/memory.c:550">caml_stat_alloc</a>] blocks<br/></li>
<li></span><span class="Comment">*/<br/></li>
<li><a id="L529">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">Debug_free_minor</span>&nbsp; &nbsp;&nbsp; <a href="#L505" title="ocaml/runtime/caml/misc.h:505">Debug_tag</a> (</span><span class="Constant">0x00</span><span class="PreProc">)<br/></li>
<li><a id="L530">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">Debug_free_major</span>&nbsp; &nbsp;&nbsp; <a href="#L505" title="ocaml/runtime/caml/misc.h:505">Debug_tag</a> (</span><span class="Constant">0x01</span><span class="PreProc">)<br/></li>
<li><a id="L531">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">Debug_free_shrink</span>&nbsp; &nbsp; <a href="#L505" title="ocaml/runtime/caml/misc.h:505">Debug_tag</a> (</span><span class="Constant">0x03</span><span class="PreProc">)<br/></li>
<li><a id="L532">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">Debug_free_truncate</span>&nbsp; <a href="#L505" title="ocaml/runtime/caml/misc.h:505">Debug_tag</a> (</span><span class="Constant">0x04</span><span class="PreProc">) </span><span class="Comment">/* obsolete */<br/></li>
<li><a id="L533">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">Debug_free_unused</span>&nbsp; &nbsp; <a href="#L505" title="ocaml/runtime/caml/misc.h:505">Debug_tag</a> (</span><span class="Constant">0x05</span><span class="PreProc">)<br/></li>
<li><a id="L534">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">Debug_uninit_minor</span>&nbsp;&nbsp; <a href="#L505" title="ocaml/runtime/caml/misc.h:505">Debug_tag</a> (</span><span class="Constant">0x10</span><span class="PreProc">)<br/></li>
<li><a id="L535">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">Debug_uninit_major</span>&nbsp;&nbsp; <a href="#L505" title="ocaml/runtime/caml/misc.h:505">Debug_tag</a> (</span><span class="Constant">0x11</span><span class="PreProc">)<br/></li>
<li><a id="L536">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">Debug_uninit_align</span>&nbsp;&nbsp; <a href="#L505" title="ocaml/runtime/caml/misc.h:505">Debug_tag</a> (</span><span class="Constant">0x15</span><span class="PreProc">)<br/></li>
<li><a id="L537">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">Debug_filler_align</span>&nbsp;&nbsp; <a href="#L505" title="ocaml/runtime/caml/misc.h:505">Debug_tag</a> (</span><span class="Constant">0x85</span><span class="PreProc">)<br/></li>
<li><a id="L538">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">Debug_pool_magic</span>&nbsp; &nbsp;&nbsp; <a href="#L505" title="ocaml/runtime/caml/misc.h:505">Debug_tag</a> (</span><span class="Constant">0x99</span><span class="PreProc">)<br/></li>
<li></span><br/></li>
<li><a id="L540">&#x200c;</a><span class="PreProc">#define <span class="linkable">Debug_uninit_stat</span>&nbsp; &nbsp; </span><span class="Constant">0xD7<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#endif</span> <span class="Comment">/* DEBUG */<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><span class="Comment">/* <a href="#L550" title="ocaml/runtime/caml/misc.h:550">snprintf</a> emulation for Win32 */<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#ifdef _WIN32<br/></li>
<li></span><span class="PreProc">#ifndef _UCRT<br/></li>
<li></span><span class="Type">extern</span> <span class="Type">int</span> caml_snprintf(<span class="Type">char</span> * buf, <span class="Type">size_t</span> size, <span class="Type">const</span> <span class="Type">char</span> * format, ...);<br/></li>
<li><a id="L550">&#x200c;</a><span class="PreProc">#define <span class="linkable">snprintf</span> caml_snprintf<br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><a href="#L125" title="ocaml/runtime/caml/misc.h:125">CAMLextern</a> <span class="Type">int</span> caml_snwprintf(<span class="Type">wchar_t</span> * buf,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">size_t</span> size,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Type">const</span> <span class="Type">wchar_t</span> * format, ...);<br/></li>
<li><a id="L556">&#x200c;</a><span class="PreProc">#define <span class="linkable">snprintf_os</span> caml_snwprintf<br/></li>
<li></span><span class="PreProc">#else<br/></li>
<li><a id="L558">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">snprintf_os</span> <a href="#L550" title="ocaml/runtime/caml/misc.h:550">snprintf</a><br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* Macro used to deactivate thread <a href="../ints.c.html#L488" title="ocaml/runtime/ints.c:488">and</a> address sanitizers on some<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; functions. */<br/></li>
<li><a id="L563">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAMLno_tsan</span><br/></li>
<li><a id="L564">&#x200c;</a></span><span class="PreProc">#define <span class="linkable">CAMLno_asan</span><br/></li>
<li></span><span class="PreProc">#if defined(__has_feature)<br/></li>
<li></span><span class="PreProc">#&nbsp; if __has_feature(thread_sanitizer)<br/></li>
<li><a id="L567">&#x200c;</a></span><span class="PreProc">#&nbsp; &nbsp; undef <span class="linkable">CAMLno_tsan</span><br/></li>
<li><a id="L568">&#x200c;</a></span><span class="PreProc">#&nbsp; &nbsp; define <span class="linkable">CAMLno_tsan</span> __attribute__((no_sanitize(</span><span class="Constant">&quot;thread&quot;</span><span class="PreProc">)))<br/></li>
<li></span><span class="PreProc">#&nbsp; endif<br/></li>
<li></span><span class="PreProc">#&nbsp; if __has_feature(address_sanitizer)<br/></li>
<li><a id="L571">&#x200c;</a></span><span class="PreProc">#&nbsp; &nbsp; undef <span class="linkable">CAMLno_asan</span><br/></li>
<li><a id="L572">&#x200c;</a></span><span class="PreProc">#&nbsp; &nbsp; define <span class="linkable">CAMLno_asan</span> __attribute__((no_sanitize(</span><span class="Constant">&quot;address&quot;</span><span class="PreProc">)))<br/></li>
<li></span><span class="PreProc">#&nbsp; endif<br/></li>
<li></span><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#endif</span> <span class="Comment">/* <a href="../instrtrace.c.html#L16" title="ocaml/runtime/instrtrace.c:16">CAML_INTERNALS</a> */<br/></li>
<li></span><br/></li>
<li><span class="Comment">/* The [<a href="#L586" title="ocaml/runtime/caml/misc.h:586">backtrace_slot</a>] type represents values stored in<br/></li>
<li></span><span class="Comment"> * [<a href="domain_state.h.html#L62" title="ocaml/runtime/caml/domain_state.h:62">Caml_state</a>-&gt;backtrace_buffer].&nbsp; In <a href="../meta.c.html#L53" title="ocaml/runtime/meta.c:53">bytecode</a>, it is the same as a<br/></li>
<li></span><span class="Comment"> * [<a href="mlvalues.h.html#L67" title="ocaml/runtime/caml/mlvalues.h:67">code_t</a>], in native code it is either a [<a href="frame_descriptors.h.html#L77" title="ocaml/runtime/caml/frame_descriptors.h:77">frame_descr</a> *] <a href="../ints.c.html#L491" title="ocaml/runtime/ints.c:491">or</a> a [<a href="backtrace_prim.h.html#L49" title="ocaml/runtime/caml/backtrace_prim.h:49">debuginfo</a>],<br/></li>
<li></span><span class="Comment"> * depending on the second-lowest bit.&nbsp; In any case, the lowest bit must<br/></li>
<li></span><span class="Comment"> * be 0.<br/></li>
<li></span><span class="Comment"> * The representation doesn't matter for code outside [backtrace_{byt,nat}.c],<br/></li>
<li></span><span class="Comment"> * so it is just exposed as a [void *].<br/></li>
<li></span><span class="Comment"> */<br/></li>
<li><a id="L586">&#x200c;</a></span><span class="Type">typedef</span> <span class="Type">void</span> * <span class="linkable">backtrace_slot</span>;<br/></li>
<li><br/></li>
<li><span class="PreProc">#ifdef __cplusplus<br/></li>
<li></span>}<br/></li>
<li><span class="PreProc">#endif<br/></li>
<li></span><br/></li>
<li><span class="PreProc">#endif</span> <span class="Comment">/* <a href="#L19" title="ocaml/runtime/caml/misc.h:19">CAML_MISC_H</a> */<br/></li>
</ol></span></code>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="../index.html">Top Level</a></span>
 </p>

 </body>
</html>
