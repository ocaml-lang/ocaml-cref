<!-- generated by the vscode.pl tool from vscoded.-->

<html>
 <head>
  <title>ocaml/toplevel/topdirs.ml - ocaml</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

.nav-bar {
    font-size: 120%;
    margin-top: 5px;
    margin-bottom: 5px;
}

.nav-link {
    padding-left: 5em;
    padding-right: 5em;
}

ul.toc {
    line-height: 200%;
    font-size: 150%;
}

code {
    font-family: consolas, monospace;
    line-height: 130%;
}

span.Constant {
    color: DarkGreen;
}

span.Special {
    color: #c06000;
}

span.Comment {
    color: DarkRed;
    font-style: italic;
}

span.Identifier {
    color: DarkCyan;
}

span.PreProc {
    color: DarkMagenta;
}

span.Statement, span.Type, span.Keyword, span.Repeat, span.Conditional,
    span.Operator, span.Exception
{
    color: DarkBlue;
}

span.Todo {
    color: DarkRed;
    background-color: Gold;
    font-style: italic;
}

span.Underlined {
    text-decoration: underline;
}

span.linkable {
    font-weight: bold;
}

code ol {
    counter-reset: item;
    list-style-type: none;
    margin-left: 0;
    padding-left: 0;
    list-style-position: inside;
}

code li {
    display: block;
}

code li:before {
    content: counter(item) "  ";
    counter-increment: item;
    color: #999;
    padding-right: 0.5em;
    padding-left: 0.4em;
    list-style-position: inside;
    text-align: right
}

  </style>
 </head>
 <body>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="index.html">Top Level</a></span>
 </p>

  <h1>ocaml/toplevel/topdirs.ml - ocaml</h1>
 <h2>Global variables defined</h2>
 <ul class="toc">
<li><a href="#L565">accum_aliases</a></li>
<li><a href="#L592">accum_defs</a></li>
<li><a href="#L29">action_on_suberror</a></li>
<li><a href="#L408">all_show_funs</a></li>
<li><a href="#L748">before</a></li>
<li><a href="#L482">desc</a></li>
<li><a href="#L516">desc</a></li>
<li><a href="#L123">dir_cd</a></li>
<li><a href="#L75">dir_directory</a></li>
<li><a href="#L331">dir_install_printer</a></li>
<li><a href="#L134">dir_load</a></li>
<li><a href="#L143">dir_load_rec</a></li>
<li><a href="#L160">dir_mod_use</a></li>
<li><a href="#L65">dir_quit</a></li>
<li><a href="#L338">dir_remove_printer</a></li>
<li><a href="#L112">dir_show_dirs</a></li>
<li><a href="#L157">dir_use</a></li>
<li><a href="#L159">dir_use_output</a></li>
<li><a href="#L720">directive_sections</a></li>
<li><a href="#L23">error_fmt</a></li>
<li><a href="#L492">ext</a></li>
<li><a href="#L523">ext</a></li>
<li><a href="#L207">extract_last_arrow</a></li>
<li><a href="#L217">extract_target_parameters</a></li>
<li><a href="#L214">extract_target_type</a></li>
<li><a href="#L201">filter_arrow</a></li>
<li><a href="#L287">find_printer</a></li>
<li><a href="#L457">id</a></li>
<li><a href="#L561">id</a></li>
<li><a href="#L588">id</a></li>
<li><a href="#L303">install_printer_by_kind</a></li>
<li><a href="#L470">is_exception_constructor</a></li>
<li><a href="#L473">is_extension_constructor</a></li>
<li><a href="#L428">is_nonrec_type</a></li>
<li><a href="#L538">is_rec_module</a></li>
<li><a href="#L545">it</a></li>
<li><a href="#L540">it_path</a></li>
<li><a href="#L97">keep</a></li>
<li><a href="#L153">load_file</a></li>
<li><a href="#L249">match_generic_printer_type</a></li>
<li><a href="#L272">match_printer_type</a></li>
<li><a href="#L228">match_simple_printer_type</a></li>
<li><a href="#L48">order_of_sections</a></li>
<li><a href="#L361">parse_warnings</a></li>
<li><a href="#L456">path</a></li>
<li><a href="#L485">path</a></li>
<li><a href="#L560">path</a></li>
<li><a href="#L587">path</a></li>
<li><a href="#L757">print_directive</a></li>
<li><a href="#L771">print_section</a></li>
<li><a href="#L410">reg_show_prim</a></li>
<li><a href="#L322">remove_installed_printer</a></li>
<li><a href="#L488">ret_type</a></li>
<li><a href="#L519">ret_type</a></li>
<li><a href="#L546">rs</a></li>
<li><a href="#L553">secretly_the_same_path</a></li>
<li><a href="#L36">section_env</a></li>
<li><a href="#L34">section_general</a></li>
<li><a href="#L40">section_options</a></li>
<li><a href="#L38">section_print</a></li>
<li><a href="#L35">section_run</a></li>
<li><a href="#L39">section_trace</a></li>
<li><a href="#L42">section_undocumented</a></li>
<li><a href="#L750">sections_after</a></li>
<li><a href="#L749">sections_before</a></li>
<li><a href="#L751">sections_user</a></li>
<li><a href="#L634">show</a></li>
<li><a href="#L387">show_prim</a></li>
<li><a href="#L367">trim_signature</a></li>
<li><a href="#L236">ty_arg</a></li>
<li><a href="#L486">type_decl</a></li>
<li><a href="#L508">type_id</a></li>
<li><a href="#L132">with_error_fmt</a></li>
</ul>
 <h2>Data types defined</h2>
 <ul class="toc">
<li><a href="#L786">if</a></li>
<li><a href="#L187">kind</a></li>
</ul>
 <h2>Source code</h2>

  <code><ol><li><span class="Comment">(**************************************************************************)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; OCaml&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Xavier Leroy, projet Cristal, INRIA Rocquencourt&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; Copyright 1996 Institut National de Recherche en Informatique et&nbsp; &nbsp;&nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp;&nbsp; en Automatique.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; All rights reserved.&nbsp; This <a href="byte/topeval.ml.html#L269" title="ocaml/toplevel/byte/topeval.ml:269">file</a> is distributed under the terms of&nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; the GNU Lesser General Public License version 2.1, with the&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; special exception on linking described in the <a href="byte/topeval.ml.html#L269" title="ocaml/toplevel/byte/topeval.ml:269">file</a> LICENSE.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(**************************************************************************)<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Toplevel directives *)<br/></li>
<li></span><br/></li>
<li><span class="Statement">open</span><span class="ocamlNone"> </span><span class="PreProc">Format<br/></li>
<li></span><span class="Statement">open</span><span class="ocamlNone"> </span><span class="PreProc">Misc<br/></li>
<li></span><span class="Statement">open</span><span class="ocamlNone"> </span><span class="PreProc">Types<br/></li>
<li></span><span class="Statement">open</span><span class="ocamlNone"> </span><span class="PreProc">Toploop<br/></li>
<li></span><br/></li>
<li><a id="L23">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">error_fmt</span></span> <span class="Constant">()</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement"><a href="#L786" title="ocaml/toplevel/topdirs.ml:786">if</a></span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="PreProc">Sys</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">interactive</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">Format</span>.<span class="ocamlLCIdentifier">std_formatter<br/></li>
<li></span>&nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">Format</span>.<span class="ocamlLCIdentifier">err_formatter<br/></li>
<li></span><br/></li>
<li><a id="L29">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">action_on_suberror</span></span> <span class="ocamlLCIdentifier">b</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement"><a href="#L786" title="ocaml/toplevel/topdirs.ml:786">if</a></span><span class="ocamlNone"> </span><span class="Statement">not</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">b</span><span class="ocamlNone"> </span><span class="Statement">&amp;&amp;</span><span class="ocamlNone"> </span><span class="Statement">not</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="PreProc">Sys</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">interactive</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">raise</span> <span class="Statement">(</span><span class="PreProc">Compenv</span>.<span class="Constant">Exit_with_status</span> <span class="Constant">125</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Directive sections (used in #help) *)<br/></li>
<li><a id="L34">&#x200c;</a></span><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">section_general</span></span> <span class="Statement">=</span> <span class="Constant">&quot;General&quot;<br/></li>
<li><a id="L35">&#x200c;</a></span><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">section_run</span></span> <span class="Statement">=</span> <span class="Constant">&quot;Loading <a href="byte/topeval.ml.html#L218" title="ocaml/toplevel/byte/topeval.ml:218">code</a>&quot;<br/></li>
<li><a id="L36">&#x200c;</a></span><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">section_env</span></span> <span class="Statement">=</span> <span class="Constant">&quot;Environment queries&quot;<br/></li>
<li></span><br/></li>
<li><a id="L38">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">section_print</span></span> <span class="Statement">=</span> <span class="Constant">&quot;Pretty-printing&quot;<br/></li>
<li><a id="L39">&#x200c;</a></span><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">section_trace</span></span> <span class="Statement">=</span> <span class="Constant">&quot;Tracing&quot;<br/></li>
<li><a id="L40">&#x200c;</a></span><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">section_options</span></span> <span class="Statement">=</span> <span class="Constant">&quot;Compiler options&quot;<br/></li>
<li></span><br/></li>
<li><a id="L42">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">section_undocumented</span></span> <span class="Statement">=</span> <span class="Constant">&quot;Undocumented&quot;<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* we will print the sections in the first list,<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; then all user-defined sections,<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; then the sections in the second list,<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; then all undocumented directives *)<br/></li>
<li><a id="L48">&#x200c;</a></span><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">order_of_sections</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">([<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L34" title="ocaml/toplevel/topdirs.ml:34">section_general</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L35" title="ocaml/toplevel/topdirs.ml:35">section_run</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L36" title="ocaml/toplevel/topdirs.ml:36">section_env</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; <span class="Statement">]</span>, <span class="Statement">[<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L38" title="ocaml/toplevel/topdirs.ml:38">section_print</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L39" title="ocaml/toplevel/topdirs.ml:39">section_trace</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L40" title="ocaml/toplevel/topdirs.ml:40">section_options</a></span><span class="Statement">;<br/></li>
<li></span><br/></li>
<li>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L42" title="ocaml/toplevel/topdirs.ml:42">section_undocumented</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; <span class="Statement">])<br/></li>
<li></span><span class="Comment">(* Do not forget to <a href="#L97" title="ocaml/toplevel/topdirs.ml:97">keep</a> the directives synchronized with the manual in<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; manual/src/cmds/top.etex *)<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* To quit *)<br/></li>
<li></span><br/></li>
<li><a id="L65">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">dir_quit</span></span> <span class="Constant">()</span> <span class="Statement">=</span> <span class="Statement">raise</span> <span class="Statement">(</span><span class="PreProc">Compenv</span>.<span class="Constant">Exit_with_status</span> <span class="Constant">0</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Statement">_</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L147" title="ocaml/toplevel/topcommon.mli:147">add_directive</a></span> <span class="Constant">&quot;quit&quot;</span> <span class="Statement">(</span><span class="Constant">Directive_none</span> <span class="ocamlLCIdentifier"><a href="#L65" title="ocaml/toplevel/topdirs.ml:65">dir_quit</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">section</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L34" title="ocaml/toplevel/topdirs.ml:34">section_general</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">doc</span> <span class="Statement">=</span> <span class="Constant">&quot;Exit the toplevel.&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* To add a directory to the <a href="native/tophooks.mli.html#L28" title="ocaml/toplevel/native/tophooks.mli:28">load</a> <a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a> *)<br/></li>
<li></span><br/></li>
<li><a id="L75">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">dir_directory</span></span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">d</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">expand_directory</span> <span class="PreProc">Config</span>.<span class="ocamlLCIdentifier">standard_library</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="PreProc">Dll</span>.<span class="ocamlLCIdentifier">add_path</span> <span class="Statement">[</span><span class="ocamlLCIdentifier">d</span><span class="Statement">];<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">dir</span> <span class="Statement">=</span> <span class="PreProc">Load_path</span>.<span class="PreProc">Dir</span>.<span class="ocamlLCIdentifier">create</span> <span class="ocamlLCIdentifier">d</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="PreProc">Load_path</span>.<span class="ocamlLCIdentifier">prepend_dir</span> <span class="ocamlLCIdentifier">dir</span><span class="Statement">;<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L41" title="ocaml/toplevel/topcommon.mli:41">toplevel_env</a></span> <span class="Statement">:=<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">Stdlib</span>.<span class="PreProc">String</span>.<span class="PreProc">Set</span>.<span class="ocamlLCIdentifier">fold<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(fun</span> <span class="ocamlLCIdentifier"><a href="byte/topeval.ml.html#L287" title="ocaml/toplevel/byte/topeval.ml:287">name</a></span> <span class="ocamlLCIdentifier">env</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="PreProc">Env</span>.<span class="ocamlLCIdentifier">add_persistent_structure</span> <span class="Statement">(</span><span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_persistent</span> <span class="ocamlLCIdentifier"><a href="byte/topeval.ml.html#L287" title="ocaml/toplevel/byte/topeval.ml:287">name</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier">env</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="PreProc">Env</span>.<span class="ocamlLCIdentifier">persistent_structures_of_dir</span> <span class="ocamlLCIdentifier">dir</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L41" title="ocaml/toplevel/topcommon.mli:41">toplevel_env</a><br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Statement">_</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L147" title="ocaml/toplevel/topcommon.mli:147">add_directive</a></span> <span class="Constant">&quot;directory&quot;</span> <span class="Statement">(</span><span class="Constant">Directive_string</span> <span class="ocamlLCIdentifier"><a href="#L75" title="ocaml/toplevel/topdirs.ml:75">dir_directory</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">section</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L35" title="ocaml/toplevel/topdirs.ml:35">section_run</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">doc</span> <span class="Statement">=</span> <span class="Constant">&quot;Add the given directory to search <a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a> for source and compiled \<br/></li>
<li></span><span class="Constant">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; files.&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* To remove a directory from the <a href="native/tophooks.mli.html#L28" title="ocaml/toplevel/native/tophooks.mli:28">load</a> <a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a> *)<br/></li>
<li></span><span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="topdirs.mli.html#L22" title="ocaml/toplevel/topdirs.mli:22">dir_remove_directory</a></span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">d</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">expand_directory</span> <span class="PreProc">Config</span>.<span class="ocamlLCIdentifier">standard_library</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a></span> <span class="Statement">in<br/></li>
<li><a id="L97">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">keep</span></span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">match</span> <span class="PreProc">Load_path</span>.<span class="ocamlLCIdentifier">find_uncap</span> <span class="Statement">(</span><span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier"><a href="byte/topeval.ml.html#L287" title="ocaml/toplevel/byte/topeval.ml:287">name</a></span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span> <span class="Statement">^</span> <span class="Constant">&quot;.cmi&quot;</span><span class="Statement">)</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Statement">exception</span> <span class="Constant">Not_found</span> <span class="Statement">-&gt;</span> <span class="Constant">true<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="ocamlLCIdentifier">fn</span> <span class="Statement">-&gt;</span> <span class="PreProc">Filename</span>.<span class="ocamlLCIdentifier">dirname</span> <span class="ocamlLCIdentifier">fn</span> <span class="Statement">&lt;&gt;</span> <span class="ocamlLCIdentifier">d<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L41" title="ocaml/toplevel/topcommon.mli:41">toplevel_env</a></span> <span class="Statement">:=</span> <span class="PreProc">Env</span>.<span class="ocamlLCIdentifier">filter_non_loaded_persistent</span> <span class="ocamlLCIdentifier"><a href="#L97" title="ocaml/toplevel/topdirs.ml:97">keep</a></span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L41" title="ocaml/toplevel/topcommon.mli:41">toplevel_env</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; <span class="PreProc">Load_path</span>.<span class="ocamlLCIdentifier">remove_dir</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; <span class="PreProc">Dll</span>.<span class="ocamlLCIdentifier">remove_path</span> <span class="Statement">[</span><span class="ocamlLCIdentifier">d</span><span class="Statement">]<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Statement">_</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L147" title="ocaml/toplevel/topcommon.mli:147">add_directive</a></span> <span class="Constant">&quot;remove_directory&quot;</span> <span class="Statement">(</span><span class="Constant">Directive_string</span> <span class="ocamlLCIdentifier"><a href="topdirs.mli.html#L22" title="ocaml/toplevel/topdirs.mli:22">dir_remove_directory</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">section</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L35" title="ocaml/toplevel/topdirs.ml:35">section_run</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">doc</span> <span class="Statement">=</span> <span class="Constant">&quot;Remove the given directory from the search <a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a>.&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">}<br/></li>
<li></span><br/></li>
<li><a id="L112">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">dir_show_dirs</span></span> <span class="Constant">()</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">iter</span> <span class="ocamlLCIdentifier">print_endline</span> <span class="Statement">(</span><span class="PreProc">Load_path</span>.<span class="ocamlLCIdentifier">get_paths</span> <span class="Constant">()</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Statement">_</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L147" title="ocaml/toplevel/topcommon.mli:147">add_directive</a></span> <span class="Constant">&quot;show_dirs&quot;</span> <span class="Statement">(</span><span class="Constant">Directive_none</span> <span class="ocamlLCIdentifier"><a href="#L112" title="ocaml/toplevel/topdirs.ml:112">dir_show_dirs</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">section</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L35" title="ocaml/toplevel/topdirs.ml:35">section_run</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">doc</span> <span class="Statement">=</span> <span class="Constant">&quot;List directories currently in the search <a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a>.&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* To change the <a href="native/topmain.ml.html#L21" title="ocaml/toplevel/native/topmain.ml:21">current</a> directory *)<br/></li>
<li></span><br/></li>
<li><a id="L123">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">dir_cd</span></span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a></span> <span class="Statement">=</span> <span class="PreProc">Sys</span>.<span class="ocamlLCIdentifier">chdir</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a><br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Statement">_</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L147" title="ocaml/toplevel/topcommon.mli:147">add_directive</a></span> <span class="Constant">&quot;cd&quot;</span> <span class="Statement">(</span><span class="Constant">Directive_string</span> <span class="ocamlLCIdentifier"><a href="#L123" title="ocaml/toplevel/topdirs.ml:123">dir_cd</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">section</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L35" title="ocaml/toplevel/topdirs.ml:35">section_run</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">doc</span> <span class="Statement">=</span> <span class="Constant">&quot;Change the <a href="native/topmain.ml.html#L21" title="ocaml/toplevel/native/topmain.ml:21">current</a> working directory.&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">}<br/></li>
<li></span><br/></li>
<li><br/></li>
<li><a id="L132">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">with_error_fmt</span></span> <span class="ocamlLCIdentifier">f</span> <span class="ocamlLCIdentifier">x</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">f</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L23" title="ocaml/toplevel/topdirs.ml:23">error_fmt</a></span> <span class="Constant">()</span><span class="Statement">)</span> <span class="ocamlLCIdentifier">x<br/></li>
<li></span><br/></li>
<li><a id="L134">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">dir_load</span></span> <span class="ocamlLCIdentifier">ppf</span> <span class="ocamlLCIdentifier"><a href="byte/topeval.ml.html#L287" title="ocaml/toplevel/byte/topeval.ml:287">name</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="#L29" title="ocaml/toplevel/topdirs.ml:29">action_on_suberror</a></span> <span class="Statement">(</span><span class="PreProc">Topeval</span>.<span class="ocamlLCIdentifier"><a href="native/topeval.ml.html#L272" title="ocaml/toplevel/native/topeval.ml:272">load_file</a></span> <span class="Constant">false</span> <span class="ocamlLCIdentifier">ppf</span> <span class="ocamlLCIdentifier"><a href="byte/topeval.ml.html#L287" title="ocaml/toplevel/byte/topeval.ml:287">name</a></span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Statement">_</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L147" title="ocaml/toplevel/topcommon.mli:147">add_directive</a></span> <span class="Constant">&quot;<a href="native/tophooks.mli.html#L28" title="ocaml/toplevel/native/tophooks.mli:28">load</a>&quot;</span> <span class="Statement">(</span><span class="Constant">Directive_string</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L132" title="ocaml/toplevel/topdirs.ml:132">with_error_fmt</a></span> <span class="ocamlLCIdentifier"><a href="#L134" title="ocaml/toplevel/topdirs.ml:134">dir_load</a></span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">section</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L35" title="ocaml/toplevel/topdirs.ml:35">section_run</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">doc</span> <span class="Statement">=</span> <span class="Constant">&quot;Load in memory a bytecode object, produced by ocamlc.&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">}<br/></li>
<li></span><br/></li>
<li><a id="L143">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">dir_load_rec</span></span> <span class="ocamlLCIdentifier">ppf</span> <span class="ocamlLCIdentifier"><a href="byte/topeval.ml.html#L287" title="ocaml/toplevel/byte/topeval.ml:287">name</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="#L29" title="ocaml/toplevel/topdirs.ml:29">action_on_suberror</a></span> <span class="Statement">(</span><span class="PreProc">Topeval</span>.<span class="ocamlLCIdentifier"><a href="native/topeval.ml.html#L272" title="ocaml/toplevel/native/topeval.ml:272">load_file</a></span> <span class="Constant">true</span> <span class="ocamlLCIdentifier">ppf</span> <span class="ocamlLCIdentifier"><a href="byte/topeval.ml.html#L287" title="ocaml/toplevel/byte/topeval.ml:287">name</a></span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Statement">_</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L147" title="ocaml/toplevel/topcommon.mli:147">add_directive</a></span> <span class="Constant">&quot;load_rec&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">Directive_string</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L132" title="ocaml/toplevel/topdirs.ml:132">with_error_fmt</a></span> <span class="ocamlLCIdentifier"><a href="#L143" title="ocaml/toplevel/topdirs.ml:143">dir_load_rec</a></span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">section</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L35" title="ocaml/toplevel/topdirs.ml:35">section_run</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">doc</span> <span class="Statement">=</span> <span class="Constant">&quot;As #<a href="native/tophooks.mli.html#L28" title="ocaml/toplevel/native/tophooks.mli:28">load</a>, but loads dependencies recursively.&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">}<br/></li>
<li></span><br/></li>
<li><a id="L153">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">load_file</span></span> <span class="Statement">=</span> <span class="PreProc">Topeval</span>.<span class="ocamlLCIdentifier"><span class="linkable">load_file</span></span> <span class="Constant">false<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Load commands from a <a href="byte/topeval.ml.html#L269" title="ocaml/toplevel/byte/topeval.ml:269">file</a> *)<br/></li>
<li></span><br/></li>
<li><a id="L157">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">dir_use</span></span> <span class="ocamlLCIdentifier">ppf</span> <span class="ocamlLCIdentifier"><a href="byte/topeval.ml.html#L287" title="ocaml/toplevel/byte/topeval.ml:287">name</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="#L29" title="ocaml/toplevel/topdirs.ml:29">action_on_suberror</a></span> <span class="Statement">(</span><span class="PreProc">Toploop</span>.<span class="ocamlLCIdentifier"><a href="toploop.mli.html#L94" title="ocaml/toplevel/toploop.mli:94">use_input</a></span> <span class="ocamlLCIdentifier">ppf</span> <span class="Statement">(</span><span class="PreProc">Toploop</span>.<span class="Constant">File</span> <span class="ocamlLCIdentifier"><a href="byte/topeval.ml.html#L287" title="ocaml/toplevel/byte/topeval.ml:287">name</a></span><span class="Statement">))<br/></li>
<li><a id="L159">&#x200c;</a></span><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">dir_use_output</span></span> <span class="ocamlLCIdentifier">ppf</span> <span class="ocamlLCIdentifier"><a href="byte/topeval.ml.html#L287" title="ocaml/toplevel/byte/topeval.ml:287">name</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L29" title="ocaml/toplevel/topdirs.ml:29">action_on_suberror</a></span> <span class="Statement">(</span><span class="PreProc">Toploop</span>.<span class="ocamlLCIdentifier"><a href="toploop.mli.html#L95" title="ocaml/toplevel/toploop.mli:95">use_output</a></span> <span class="ocamlLCIdentifier">ppf</span> <span class="ocamlLCIdentifier"><a href="byte/topeval.ml.html#L287" title="ocaml/toplevel/byte/topeval.ml:287">name</a></span><span class="Statement">)<br/></li>
<li><a id="L160">&#x200c;</a></span><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">dir_mod_use</span></span> <span class="ocamlLCIdentifier">ppf</span> <span class="ocamlLCIdentifier"><a href="byte/topeval.ml.html#L287" title="ocaml/toplevel/byte/topeval.ml:287">name</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="#L29" title="ocaml/toplevel/topdirs.ml:29">action_on_suberror</a></span> <span class="Statement">(</span><span class="PreProc">Toploop</span>.<span class="ocamlLCIdentifier"><a href="toploop.mli.html#L97" title="ocaml/toplevel/toploop.mli:97">mod_use_input</a></span> <span class="ocamlLCIdentifier">ppf</span> <span class="Statement">(</span><span class="PreProc">Toploop</span>.<span class="Constant">File</span> <span class="ocamlLCIdentifier"><a href="byte/topeval.ml.html#L287" title="ocaml/toplevel/byte/topeval.ml:287">name</a></span><span class="Statement">))<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Statement">_</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L147" title="ocaml/toplevel/topcommon.mli:147">add_directive</a></span> <span class="Constant">&quot;use&quot;</span> <span class="Statement">(</span><span class="Constant">Directive_string</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L132" title="ocaml/toplevel/topdirs.ml:132">with_error_fmt</a></span> <span class="ocamlLCIdentifier"><a href="#L157" title="ocaml/toplevel/topdirs.ml:157">dir_use</a></span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">section</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L35" title="ocaml/toplevel/topdirs.ml:35">section_run</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">doc</span> <span class="Statement">=</span> <span class="Constant">&quot;Read, compile and execute source phrases from the given <a href="byte/topeval.ml.html#L269" title="ocaml/toplevel/byte/topeval.ml:269">file</a>.&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Statement">_</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L147" title="ocaml/toplevel/topcommon.mli:147">add_directive</a></span> <span class="Constant">&quot;<a href="toploop.mli.html#L95" title="ocaml/toplevel/toploop.mli:95">use_output</a>&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">Directive_string</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L132" title="ocaml/toplevel/topdirs.ml:132">with_error_fmt</a></span> <span class="ocamlLCIdentifier"><a href="#L159" title="ocaml/toplevel/topdirs.ml:159">dir_use_output</a></span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">section</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L35" title="ocaml/toplevel/topdirs.ml:35">section_run</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">doc</span> <span class="Statement">=</span> <span class="Constant">&quot;Execute a command and read, compile and execute source phrases \<br/></li>
<li></span><span class="Constant">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; from its output.&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Statement">_</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L147" title="ocaml/toplevel/topcommon.mli:147">add_directive</a></span> <span class="Constant">&quot;mod_use&quot;</span> <span class="Statement">(</span><span class="Constant">Directive_string</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L132" title="ocaml/toplevel/topdirs.ml:132">with_error_fmt</a></span> <span class="ocamlLCIdentifier"><a href="#L160" title="ocaml/toplevel/topdirs.ml:160">dir_mod_use</a></span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">section</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L35" title="ocaml/toplevel/topdirs.ml:35">section_run</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">doc</span> <span class="Statement">=</span> <span class="Constant">&quot;Usage is identical to #use but #mod_use \<br/></li>
<li></span><span class="Constant">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; wraps the contents in a module.&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Install, remove a <a href="genprintval.ml.html#L130" title="ocaml/toplevel/genprintval.ml:130">printer</a> *)<br/></li>
<li></span><br/></li>
<li><span class="Statement">module</span><span class="PreProc"> Printer</span><span class="ocamlPreDef"> </span><span class="Statement">=</span> <span class="PreProc">struct<br/></li>
<li><a id="L187">&#x200c;</a></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">type</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">kind</span></span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Old</span><span class="ocamlStruct"> </span><span class="Statement">of</span><span class="ocamlStruct"> </span><span class="PreProc">Types</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">type_expr<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Comment">(* 'a -&gt; unit *)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Simple</span><span class="ocamlStruct"> </span><span class="Statement">of</span><span class="ocamlStruct"> </span><span class="PreProc">Types</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">type_expr<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Comment">(* Format.formatter -&gt; 'a -&gt; unit *)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Generic</span><span class="ocamlStruct"> </span><span class="Statement">of</span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ty_path</span><span class="ocamlStruct">: </span><span class="PreProc">Path</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L28" title="ocaml/toplevel/genprintval.ml:28">t</a></span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">arity</span><span class="ocamlStruct">: </span><span class="Type">int</span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="Statement">}<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Comment">(* (formatter -&gt; 'a1 -&gt; unit) -&gt;<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (formatter -&gt; 'a2 -&gt; unit) -&gt;<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; ... -&gt;<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; (formatter -&gt; 'an -&gt; unit) -&gt;<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; formatter -&gt; ('a1, 'a2, ..., 'an) <a href="genprintval.ml.html#L28" title="ocaml/toplevel/genprintval.ml:28">t</a> -&gt; unit<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="PreProc">end<br/></li>
<li></span><br/></li>
<li><a id="L201">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">filter_arrow</span></span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L233" title="ocaml/toplevel/genprintval.ml:233">ty</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L233" title="ocaml/toplevel/genprintval.ml:233">ty</a></span> <span class="Statement">=</span> <span class="PreProc">Ctype</span>.<span class="ocamlLCIdentifier">expand_head</span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L41" title="ocaml/toplevel/topcommon.mli:41">toplevel_env</a></span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L233" title="ocaml/toplevel/genprintval.ml:233">ty</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">get_desc</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L233" title="ocaml/toplevel/genprintval.ml:233">ty</a></span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Tarrow</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">lbl</span>, <span class="ocamlLCIdentifier">l</span>, <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L419" title="ocaml/toplevel/genprintval.ml:419">r</a></span>, <span class="Statement">_)</span> <span class="Statement">when</span> <span class="Statement">not</span> <span class="Statement">(</span><span class="PreProc">Btype</span>.<span class="ocamlLCIdentifier">is_optional</span> <span class="ocamlLCIdentifier">lbl</span><span class="Statement">)</span> <span class="Statement">-&gt;</span> <span class="Constant">Some</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">l</span>, <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L419" title="ocaml/toplevel/genprintval.ml:419">r</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">None<br/></li>
<li></span><br/></li>
<li><a id="L207">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">extract_last_arrow</span></span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L233" title="ocaml/toplevel/genprintval.ml:233">ty</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier">extract</span> <span class="ocamlLCIdentifier">last</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L233" title="ocaml/toplevel/genprintval.ml:233">ty</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L201" title="ocaml/toplevel/topdirs.ml:201">filter_arrow</a></span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L233" title="ocaml/toplevel/genprintval.ml:233">ty</a></span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">None</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">last<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Some</span> <span class="Statement">((_</span>, <span class="ocamlLCIdentifier">rest</span><span class="Statement">)</span> <span class="Statement">as</span> <span class="ocamlLCIdentifier">next</span><span class="Statement">)</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">extract</span> <span class="Statement">(</span><span class="Constant">Some</span> <span class="ocamlLCIdentifier">next</span><span class="Statement">)</span> <span class="ocamlLCIdentifier">rest<br/></li>
<li></span>&nbsp; <span class="Statement">in</span> <span class="ocamlLCIdentifier">extract</span> <span class="Constant">None</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L233" title="ocaml/toplevel/genprintval.ml:233">ty</a><br/></li>
<li></span><br/></li>
<li><a id="L214">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">extract_target_type</span></span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L233" title="ocaml/toplevel/genprintval.ml:233">ty</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="PreProc">Option</span>.<span class="ocamlLCIdentifier">map</span> <span class="ocamlLCIdentifier">fst</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L207" title="ocaml/toplevel/topdirs.ml:207">extract_last_arrow</a></span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L233" title="ocaml/toplevel/genprintval.ml:233">ty</a></span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><a id="L217">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">extract_target_parameters</span></span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L233" title="ocaml/toplevel/genprintval.ml:233">ty</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L214" title="ocaml/toplevel/topdirs.ml:214">extract_target_type</a></span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L233" title="ocaml/toplevel/genprintval.ml:233">ty</a></span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">None</span> <span class="Statement">-&gt;</span> <span class="Constant">None<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Some</span> <span class="ocamlLCIdentifier">tgt</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">tgt</span> <span class="Statement">=</span> <span class="PreProc">Ctype</span>.<span class="ocamlLCIdentifier">expand_head</span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L41" title="ocaml/toplevel/topcommon.mli:41">toplevel_env</a></span> <span class="ocamlLCIdentifier">tgt</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">get_desc</span> <span class="ocamlLCIdentifier">tgt</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Tconstr</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span>, <span class="Statement">(_</span> <span class="Statement">::</span> <span class="Statement">_</span> <span class="Statement">as</span> <span class="ocamlLCIdentifier">args</span><span class="Statement">)</span>, <span class="Statement">_)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">when</span> <span class="PreProc">Ctype</span>.<span class="ocamlLCIdentifier">all_distinct_vars</span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L41" title="ocaml/toplevel/topcommon.mli:41">toplevel_env</a></span> <span class="ocamlLCIdentifier">args</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Some</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span>, <span class="ocamlLCIdentifier">args</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">None<br/></li>
<li></span><br/></li>
<li><a id="L228">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">match_simple_printer_type</span></span> <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span> <span class="Statement">~</span><span class="Identifier">is_old_style</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">make_printer_type</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement"><a href="#L786" title="ocaml/toplevel/topdirs.ml:786">if</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">is_old_style<br/></li>
<li></span><span class="ocamlNone">&nbsp; &nbsp; </span><span class="Statement">then</span> <span class="PreProc">Topprinters</span>.<span class="ocamlLCIdentifier"><a href="topprinters.ml.html#L33" title="ocaml/toplevel/topprinters.ml:33">printer_type_old</a><br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">else</span> <span class="PreProc">Topprinters</span>.<span class="ocamlLCIdentifier"><a href="topprinters.ml.html#L36" title="ocaml/toplevel/topprinters.ml:36">printer_type_new</a><br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">match<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">Ctype</span>.<span class="ocamlLCIdentifier">with_local_level</span> <span class="Statement">~</span><span class="Identifier">post</span>:<span class="PreProc">Ctype</span>.<span class="ocamlLCIdentifier">generalize</span> <span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">fun</span><span class="ocamlEnd"> </span><span class="Constant">()</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li><a id="L236">&#x200c;</a></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><span class="linkable">ty_arg</span></span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="PreProc">Ctype</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">newvar</span><span class="Constant">()</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="PreProc">Ctype</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">unify</span><span class="ocamlEnd"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L41" title="ocaml/toplevel/topcommon.mli:41">toplevel_env</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier">make_printer_type</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L236" title="ocaml/toplevel/topdirs.ml:236">ty_arg</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="PreProc">Ctype</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">instance</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">val_type</span><span class="Statement">);<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L236" title="ocaml/toplevel/topdirs.ml:236">ty_arg</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span>&nbsp; <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">exception</span> <span class="PreProc">Ctype</span>.<span class="Constant">Unify</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">None<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="ocamlLCIdentifier"><a href="#L236" title="ocaml/toplevel/topdirs.ml:236">ty_arg</a></span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement"><a href="#L786" title="ocaml/toplevel/topdirs.ml:786">if</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">is_old_style<br/></li>
<li></span><span class="ocamlNone">&nbsp; &nbsp; &nbsp; </span><span class="Statement">then</span> <span class="Constant">Some</span> <span class="Statement">(</span><span class="PreProc">Printer</span>.<span class="Constant">Old</span> <span class="ocamlLCIdentifier"><a href="#L236" title="ocaml/toplevel/topdirs.ml:236">ty_arg</a></span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">else</span> <span class="Constant">Some</span> <span class="Statement">(</span><span class="PreProc">Printer</span>.<span class="Constant">Simple</span> <span class="ocamlLCIdentifier"><a href="#L236" title="ocaml/toplevel/topdirs.ml:236">ty_arg</a></span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><a id="L249">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">match_generic_printer_type</span></span> <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span> <span class="ocamlLCIdentifier">ty_path</span> <span class="ocamlLCIdentifier">params</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">make_printer_type</span> <span class="Statement">=</span> <span class="PreProc">Topprinters</span>.<span class="ocamlLCIdentifier"><a href="topprinters.ml.html#L36" title="ocaml/toplevel/topprinters.ml:36">printer_type_new</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">match<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">Ctype</span>.<span class="ocamlLCIdentifier">with_local_level</span> <span class="Statement">~</span><span class="Identifier">post</span>:<span class="Statement">(</span><span class="PreProc">List</span>.<span class="ocamlLCIdentifier">iter</span> <span class="PreProc">Ctype</span>.<span class="ocamlLCIdentifier">generalize</span><span class="Statement">)</span> <span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">fun</span><span class="ocamlEnd"> </span><span class="Constant">()</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">args</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="PreProc">List</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">map</span><span class="ocamlEnd"> </span><span class="Statement">(fun</span><span class="ocamlEnd"> </span><span class="Statement">_</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="PreProc">Ctype</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">newvar</span><span class="ocamlEnd"> </span><span class="Constant">()</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">params</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ty_target</span><span class="ocamlEnd"> </span><span class="Statement">=</span><span class="ocamlEnd"> </span><span class="PreProc">Ctype</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">newty</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="Constant">Tconstr</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">ty_path</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">args</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">ref</span><span class="ocamlEnd"> </span><span class="Constant">Mnil</span><span class="Statement">))</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">printer_args_ty</span><span class="ocamlEnd"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">List</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">map</span><span class="ocamlEnd"> </span><span class="Statement">(fun</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ty_var</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">make_printer_type</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ty_var</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">args</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ty_expected</span><span class="ocamlEnd"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">List</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">fold_right</span><span class="ocamlEnd"> </span><span class="PreProc">Topprinters</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="topprinters.ml.html#L20" title="ocaml/toplevel/topprinters.ml:20">type_arrow</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">printer_args_ty</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">make_printer_type</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ty_target</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="PreProc">Ctype</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">unify</span><span class="ocamlEnd"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L41" title="ocaml/toplevel/topcommon.mli:41">toplevel_env</a><br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">ty_expected<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="PreProc">Ctype</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">instance</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">val_type</span><span class="Statement">);<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">args<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span>&nbsp; <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">exception</span> <span class="PreProc">Ctype</span>.<span class="Constant">Unify</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">None<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="ocamlLCIdentifier">args</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement"><a href="#L786" title="ocaml/toplevel/topdirs.ml:786">if</a></span><span class="ocamlNone"> </span><span class="PreProc">Ctype</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">all_distinct_vars</span><span class="ocamlNone"> </span><span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L41" title="ocaml/toplevel/topcommon.mli:41">toplevel_env</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">args<br/></li>
<li></span><span class="ocamlNone">&nbsp; &nbsp; &nbsp; </span><span class="Statement">then</span> <span class="Constant">Some</span> <span class="Constant">()<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">else</span> <span class="Constant">None<br/></li>
<li></span><br/></li>
<li><a id="L272">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">match_printer_type</span></span> <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L228" title="ocaml/toplevel/topdirs.ml:228">match_simple_printer_type</a></span> <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span> <span class="Statement">~</span><span class="Identifier">is_old_style</span>:<span class="Constant">false</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Some</span> <span class="Statement">_</span> <span class="Statement">as</span> <span class="ocamlLCIdentifier">res</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">res<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">None</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L228" title="ocaml/toplevel/topdirs.ml:228">match_simple_printer_type</a></span> <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span> <span class="Statement">~</span><span class="Identifier">is_old_style</span>:<span class="Constant">true</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Some</span> <span class="Statement">_</span> <span class="Statement">as</span> <span class="ocamlLCIdentifier">res</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">res<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">None</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L217" title="ocaml/toplevel/topdirs.ml:217">extract_target_parameters</a></span> <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span>.<span class="ocamlLCIdentifier">val_type</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">None</span> <span class="Statement">-&gt;</span> <span class="Constant">None<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Some</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">ty_path</span>, <span class="ocamlLCIdentifier">args</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L249" title="ocaml/toplevel/topdirs.ml:249">match_generic_printer_type</a></span> <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span> <span class="ocamlLCIdentifier">ty_path</span> <span class="ocamlLCIdentifier">args</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">None</span> <span class="Statement">-&gt;</span> <span class="Constant">None<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Some</span> <span class="Constant">()</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Some</span> <span class="Statement">(</span><span class="PreProc">Printer</span>.<span class="Constant">Generic</span> <span class="Statement">{</span> <span class="ocamlLCIdentifier">ty_path</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">arity</span> <span class="Statement">=</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L298" title="ocaml/toplevel/genprintval.ml:298">length</a></span> <span class="ocamlLCIdentifier">args</span><span class="Statement">;</span> <span class="Statement">})<br/></li>
<li></span><br/></li>
<li><a id="L287">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">find_printer</span></span> <span class="ocamlLCIdentifier">lid</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="PreProc">Env</span>.<span class="ocamlLCIdentifier">find_value_by_name</span> <span class="ocamlLCIdentifier">lid</span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L41" title="ocaml/toplevel/topcommon.mli:41">toplevel_env</a></span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">exception</span> <span class="Constant">Not_found</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">report</span> <span class="ocamlLCIdentifier">ppf</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">fprintf</span> <span class="ocamlLCIdentifier">ppf</span> <span class="Constant">&quot;Unbound value %a.@.&quot;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">Printtyp</span>.<span class="ocamlLCIdentifier">longident</span> <span class="ocamlLCIdentifier">lid<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">in</span> <span class="Constant">Error</span> <span class="ocamlLCIdentifier">report<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span>, <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L272" title="ocaml/toplevel/topdirs.ml:272">match_printer_type</a></span> <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">None</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">report</span> <span class="ocamlLCIdentifier">ppf</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">fprintf</span> <span class="ocamlLCIdentifier">ppf</span> <span class="Constant">&quot;%a has the wrong type for a printing function.@.&quot;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">Printtyp</span>.<span class="ocamlLCIdentifier">longident</span> <span class="ocamlLCIdentifier">lid<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">in</span> <span class="Constant">Error</span> <span class="ocamlLCIdentifier">report<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Some</span> <span class="ocamlLCIdentifier"><a href="#L187" title="ocaml/toplevel/topdirs.ml:187">kind</a></span> <span class="Statement">-&gt;</span> <span class="Constant">Ok</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span>, <span class="ocamlLCIdentifier"><a href="#L187" title="ocaml/toplevel/topdirs.ml:187">kind</a></span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><a id="L303">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">install_printer_by_kind</span></span> <span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span> <span class="ocamlLCIdentifier"><a href="#L187" title="ocaml/toplevel/topdirs.ml:187">kind</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L376" title="ocaml/toplevel/genprintval.ml:376">v</a></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="toploop.mli.html#L104" title="ocaml/toplevel/toploop.mli:104">eval_value_path</a></span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L41" title="ocaml/toplevel/topcommon.mli:41">toplevel_env</a></span> <span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L187" title="ocaml/toplevel/topdirs.ml:187">kind</a></span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="PreProc">Printer</span>.<span class="Constant">Old</span> <span class="ocamlLCIdentifier"><a href="#L236" title="ocaml/toplevel/topdirs.ml:236">ty_arg</a></span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L117" title="ocaml/toplevel/topcommon.mli:117">install_printer</a></span> <span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span> <span class="ocamlLCIdentifier"><a href="#L236" title="ocaml/toplevel/topdirs.ml:236">ty_arg</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(fun</span> <span class="ocamlLCIdentifier">_formatter</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L29" title="ocaml/toplevel/genprintval.ml:29">repr</a></span> <span class="Statement">-&gt;</span> <span class="PreProc">Obj</span>.<span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L30" title="ocaml/toplevel/genprintval.ml:30">obj</a></span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L376" title="ocaml/toplevel/genprintval.ml:376">v</a></span> <span class="Statement">(</span><span class="PreProc">Obj</span>.<span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L30" title="ocaml/toplevel/genprintval.ml:30">obj</a></span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L29" title="ocaml/toplevel/genprintval.ml:29">repr</a></span><span class="Statement">))<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="PreProc">Printer</span>.<span class="Constant">Simple</span> <span class="ocamlLCIdentifier"><a href="#L236" title="ocaml/toplevel/topdirs.ml:236">ty_arg</a></span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L117" title="ocaml/toplevel/topcommon.mli:117">install_printer</a></span> <span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span> <span class="ocamlLCIdentifier"><a href="#L236" title="ocaml/toplevel/topdirs.ml:236">ty_arg</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(fun</span> <span class="ocamlLCIdentifier">formatter</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L29" title="ocaml/toplevel/genprintval.ml:29">repr</a></span> <span class="Statement">-&gt;</span> <span class="PreProc">Obj</span>.<span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L30" title="ocaml/toplevel/genprintval.ml:30">obj</a></span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L376" title="ocaml/toplevel/genprintval.ml:376">v</a></span> <span class="ocamlLCIdentifier">formatter</span> <span class="Statement">(</span><span class="PreProc">Obj</span>.<span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L30" title="ocaml/toplevel/genprintval.ml:30">obj</a></span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L29" title="ocaml/toplevel/genprintval.ml:29">repr</a></span><span class="Statement">))<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="PreProc">Printer</span>.<span class="Constant">Generic</span> <span class="Statement">{</span> <span class="ocamlLCIdentifier">ty_path</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">arity</span> <span class="Statement">}</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier">build</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L376" title="ocaml/toplevel/genprintval.ml:376">v</a></span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">|</span> <span class="Constant">0</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Zero<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(fun</span> <span class="ocamlLCIdentifier">formatter</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L29" title="ocaml/toplevel/genprintval.ml:29">repr</a></span> <span class="Statement">-&gt;</span> <span class="PreProc">Obj</span>.<span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L30" title="ocaml/toplevel/genprintval.ml:30">obj</a></span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L376" title="ocaml/toplevel/genprintval.ml:376">v</a></span> <span class="ocamlLCIdentifier">formatter</span> <span class="Statement">(</span><span class="PreProc">Obj</span>.<span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L30" title="ocaml/toplevel/genprintval.ml:30">obj</a></span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L29" title="ocaml/toplevel/genprintval.ml:29">repr</a></span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">|</span> <span class="ocamlLCIdentifier">n</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Constant">Succ<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(fun</span> <span class="ocamlLCIdentifier">fn</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">build</span> <span class="Statement">((</span><span class="PreProc">Obj</span>.<span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L30" title="ocaml/toplevel/genprintval.ml:30">obj</a></span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L376" title="ocaml/toplevel/genprintval.ml:376">v</a></span> : <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="PreProc">Obj</span>.<span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L28" title="ocaml/toplevel/genprintval.ml:28">t</a></span><span class="Statement">)</span> <span class="ocamlLCIdentifier">fn</span><span class="Statement">)</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">n</span> - <span class="Constant">1</span><span class="Statement">))</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L119" title="ocaml/toplevel/topcommon.mli:119">install_generic_printer</a></span>' <span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span> <span class="ocamlLCIdentifier">ty_path</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">build</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L376" title="ocaml/toplevel/genprintval.ml:376">v</a></span> <span class="ocamlLCIdentifier">arity</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><a id="L322">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">remove_installed_printer</span></span> <span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L126" title="ocaml/toplevel/topcommon.mli:126">remove_printer</a></span> <span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">()</span> <span class="Statement">-&gt;</span> <span class="Constant">Ok</span> <span class="Constant">()<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">exception</span> <span class="Constant">Not_found</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">report</span> <span class="ocamlLCIdentifier">ppf</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">fprintf</span> <span class="ocamlLCIdentifier">ppf</span> <span class="Constant">&quot;The <a href="genprintval.ml.html#L130" title="ocaml/toplevel/genprintval.ml:130">printer</a> named %a is not installed.@.&quot;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">Printtyp</span>.<span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span> <span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a><br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">in</span> <span class="Constant">Error</span> <span class="ocamlLCIdentifier">report<br/></li>
<li></span><br/></li>
<li><a id="L331">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">dir_install_printer</span></span> <span class="ocamlLCIdentifier">ppf</span> <span class="ocamlLCIdentifier">lid</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L287" title="ocaml/toplevel/topdirs.ml:287">find_printer</a></span> <span class="ocamlLCIdentifier">lid</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Error</span> <span class="ocamlLCIdentifier">report</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier">report</span> <span class="ocamlLCIdentifier">ppf<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Ok</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span>, <span class="ocamlLCIdentifier"><a href="#L187" title="ocaml/toplevel/topdirs.ml:187">kind</a></span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L303" title="ocaml/toplevel/topdirs.ml:303">install_printer_by_kind</a></span> <span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span> <span class="ocamlLCIdentifier"><a href="#L187" title="ocaml/toplevel/topdirs.ml:187">kind</a><br/></li>
<li></span><br/></li>
<li><a id="L338">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">dir_remove_printer</span></span> <span class="ocamlLCIdentifier">ppf</span> <span class="ocamlLCIdentifier">lid</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L287" title="ocaml/toplevel/topdirs.ml:287">find_printer</a></span> <span class="ocamlLCIdentifier">lid</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Error</span> <span class="ocamlLCIdentifier">report</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier">report</span> <span class="ocamlLCIdentifier">ppf<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Ok</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span>, <span class="ocamlLCIdentifier">_kind</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L322" title="ocaml/toplevel/topdirs.ml:322">remove_installed_printer</a></span> <span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Ok</span> <span class="Constant">()</span> <span class="Statement">-&gt;</span> <span class="Constant">()<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Error</span> <span class="ocamlLCIdentifier">report</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">report</span> <span class="ocamlLCIdentifier">ppf<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Statement">_</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L147" title="ocaml/toplevel/topcommon.mli:147">add_directive</a></span> <span class="Constant">&quot;<a href="topcommon.mli.html#L117" title="ocaml/toplevel/topcommon.mli:117">install_printer</a>&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">Directive_ident</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L132" title="ocaml/toplevel/topdirs.ml:132">with_error_fmt</a></span> <span class="ocamlLCIdentifier"><a href="#L331" title="ocaml/toplevel/topdirs.ml:331">dir_install_printer</a></span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">section</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L38" title="ocaml/toplevel/topdirs.ml:38">section_print</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">doc</span> <span class="Statement">=</span> <span class="Constant">&quot;Registers a <a href="genprintval.ml.html#L130" title="ocaml/toplevel/genprintval.ml:130">printer</a> for values of a certain type.&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Statement">_</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L147" title="ocaml/toplevel/topcommon.mli:147">add_directive</a></span> <span class="Constant">&quot;<a href="topcommon.mli.html#L126" title="ocaml/toplevel/topcommon.mli:126">remove_printer</a>&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">Directive_ident</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L132" title="ocaml/toplevel/topdirs.ml:132">with_error_fmt</a></span> <span class="ocamlLCIdentifier"><a href="#L338" title="ocaml/toplevel/topdirs.ml:338">dir_remove_printer</a></span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">section</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L38" title="ocaml/toplevel/topdirs.ml:38">section_print</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">doc</span> <span class="Statement">=</span> <span class="Constant">&quot;Remove the named function from the table of toplevel <a href="genprintval.ml.html#L135" title="ocaml/toplevel/genprintval.ml:135">printers</a>.&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">}<br/></li>
<li></span><br/></li>
<li><a id="L361">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">parse_warnings</span></span> <span class="ocamlLCIdentifier">ppf</span> <span class="ocamlLCIdentifier">iserr</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">try</span> <span class="PreProc">Option</span>.<span class="ocamlLCIdentifier">iter</span> <span class="PreProc">Location</span>.<span class="Statement">(</span><span class="ocamlLCIdentifier">prerr_alert</span> <span class="ocamlLCIdentifier">none</span><span class="Statement">)</span> @@ <span class="PreProc">Warnings</span>.<span class="ocamlLCIdentifier">parse_options</span> <span class="ocamlLCIdentifier">iserr</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a><br/></li>
<li></span>&nbsp; <span class="Statement">with</span> <span class="PreProc">Arg</span>.<span class="Constant">Bad</span> <span class="ocamlLCIdentifier">err</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">fprintf</span> <span class="ocamlLCIdentifier">ppf</span> <span class="Constant">&quot;%<a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a>.@.&quot;</span> <span class="ocamlLCIdentifier">err</span><span class="Statement">;</span> <span class="ocamlLCIdentifier"><a href="#L29" title="ocaml/toplevel/topdirs.ml:29">action_on_suberror</a></span> <span class="Constant">true<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Typing information *)<br/></li>
<li></span><br/></li>
<li><a id="L367">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">trim_signature</span></span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">Mty_signature</span> <span class="ocamlLCIdentifier">sg</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">Mty_signature<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">(</span><span class="PreProc">List</span>.<span class="ocamlLCIdentifier">map<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(function<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">Sig_module</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span>, <span class="ocamlLCIdentifier">pres</span>, <span class="ocamlLCIdentifier">md</span>, <span class="ocamlLCIdentifier"><a href="#L546" title="ocaml/toplevel/topdirs.ml:546">rs</a></span>, <span class="ocamlLCIdentifier">priv</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">attribute</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="PreProc">Ast_helper</span>.<span class="PreProc">Attr</span>.<span class="ocamlLCIdentifier">mk<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(</span><span class="PreProc">Location</span>.<span class="ocamlLCIdentifier">mknoloc</span> <span class="Constant">&quot;...&quot;</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(</span><span class="PreProc">Parsetree</span>.<span class="Constant">PStr</span> <span class="Constant">[]</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">Sig_module</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span>, <span class="ocamlLCIdentifier">pres</span>, <span class="Statement">{</span><span class="ocamlLCIdentifier">md</span> <span class="Statement">with</span> <span class="ocamlLCIdentifier">md_attributes</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">attribute</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier">md</span>.<span class="ocamlLCIdentifier">md_attributes</span><span class="Statement">}</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L546" title="ocaml/toplevel/topdirs.ml:546">rs</a></span>, <span class="ocamlLCIdentifier">priv</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Comment">(*| Sig_modtype (<a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a>, Modtype_manifest mty) -&gt;<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; Sig_modtype (<a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a>, Modtype_manifest (trim_modtype mty))*)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">|</span> <span class="ocamlLCIdentifier">item</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">item</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">sg</span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="ocamlLCIdentifier">mty</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">mty<br/></li>
<li></span><br/></li>
<li><a id="L387">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">show_prim</span></span> <span class="ocamlLCIdentifier">to_sig</span> <span class="ocamlLCIdentifier">ppf</span> <span class="ocamlLCIdentifier">lid</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">env</span> <span class="Statement">=</span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L41" title="ocaml/toplevel/topcommon.mli:41">toplevel_env</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">loc</span> <span class="Statement">=</span> <span class="PreProc">Location</span>.<span class="ocamlLCIdentifier">none</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">try<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">lid</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="PreProc">Longident</span>.<span class="Constant">Lident</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a></span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="PreProc">Longident</span>.<span class="Constant">Ldot</span> <span class="Statement">(_</span>,<span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a></span><span class="Statement">)</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="PreProc">Longident</span>.<span class="Constant">Lapply</span> <span class="Statement">_</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">fprintf</span> <span class="ocamlLCIdentifier">ppf</span> <span class="Constant">&quot;Invalid <a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a> %a@.&quot;</span> <span class="PreProc">Printtyp</span>.<span class="ocamlLCIdentifier">longident</span> <span class="ocamlLCIdentifier">lid</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">raise</span> <span class="Constant">Exit<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_persistent</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">sg</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">to_sig</span> <span class="ocamlLCIdentifier">env</span> <span class="ocamlLCIdentifier">loc</span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span> <span class="ocamlLCIdentifier">lid</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">Printtyp</span>.<span class="ocamlLCIdentifier">wrap_printing_env</span> <span class="Statement">~</span><span class="Identifier">error</span>:<span class="Constant">false</span> <span class="ocamlLCIdentifier">env<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(fun</span> <span class="Constant">()</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">fprintf</span> <span class="ocamlLCIdentifier">ppf</span> <span class="Constant">&quot;@[%a@]@.&quot;</span> <span class="PreProc">Printtyp</span>.<span class="ocamlLCIdentifier">signature</span> <span class="ocamlLCIdentifier">sg</span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Not_found</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">fprintf</span> <span class="ocamlLCIdentifier">ppf</span> <span class="Constant">&quot;@[Unknown element.@]@.&quot;<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Exit</span> <span class="Statement">-&gt;</span> <span class="Constant">()<br/></li>
<li></span><br/></li>
<li><a id="L408">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">all_show_funs</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">ref</span> <span class="Constant">[]<br/></li>
<li></span><br/></li>
<li><a id="L410">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">reg_show_prim</span></span> <span class="ocamlLCIdentifier"><a href="byte/topeval.ml.html#L287" title="ocaml/toplevel/byte/topeval.ml:287">name</a></span> <span class="ocamlLCIdentifier">to_sig</span> <span class="ocamlLCIdentifier">doc</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="#L408" title="ocaml/toplevel/topdirs.ml:408">all_show_funs</a></span> <span class="Statement">:=</span> <span class="ocamlLCIdentifier">to_sig</span> <span class="Statement">::</span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L408" title="ocaml/toplevel/topdirs.ml:408">all_show_funs</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L147" title="ocaml/toplevel/topcommon.mli:147">add_directive</a><br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="byte/topeval.ml.html#L287" title="ocaml/toplevel/byte/topeval.ml:287">name</a><br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">Directive_ident</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L387" title="ocaml/toplevel/topdirs.ml:387">show_prim</a></span> <span class="ocamlLCIdentifier">to_sig</span> <span class="ocamlLCIdentifier">std_formatter</span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">section</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L36" title="ocaml/toplevel/topdirs.ml:36">section_env</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">doc</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Constant">()</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="#L410" title="ocaml/toplevel/topdirs.ml:410">reg_show_prim</a></span> <span class="Constant">&quot;show_val&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(fun</span> <span class="ocamlLCIdentifier">env</span> <span class="ocamlLCIdentifier">loc</span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span> <span class="ocamlLCIdentifier">lid</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">_path</span>, <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span> <span class="Statement">=</span> <span class="PreProc">Env</span>.<span class="ocamlLCIdentifier">lookup_value</span> <span class="Statement">~</span><span class="Identifier">loc</span> <span class="ocamlLCIdentifier">lid</span> <span class="ocamlLCIdentifier">env</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">[</span> <span class="Constant">Sig_value</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span>, <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span>, <span class="Constant">Exported</span><span class="Statement">)</span> <span class="Statement">]<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">&quot;Print the signature of the corresponding value.&quot;<br/></li>
<li></span><br/></li>
<li><a id="L428">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">is_nonrec_type</span></span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span> <span class="ocamlLCIdentifier">td</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Comment">(* We track both recursive uses of <a href="genprintval.ml.html#L28" title="ocaml/toplevel/genprintval.ml:28">t</a> (`type <a href="genprintval.ml.html#L28" title="ocaml/toplevel/genprintval.ml:28">t</a> = X of <a href="genprintval.ml.html#L28" title="ocaml/toplevel/genprintval.ml:28">t</a>`) and<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; nonrecursive uses (`type nonrec <a href="genprintval.ml.html#L28" title="ocaml/toplevel/genprintval.ml:28">t</a> = <a href="genprintval.ml.html#L28" title="ocaml/toplevel/genprintval.ml:28">t</a>`) to only print the nonrec keyword<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp;&nbsp; when <a href="#L545" title="ocaml/toplevel/topdirs.ml:545">it</a> is necessary to make the type printable.<br/></li>
<li></span><span class="Comment">&nbsp; *)<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">recursive_use</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">ref</span> <span class="Constant">false</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">nonrecursive_use</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier">ref</span> <span class="Constant">false</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L540" title="ocaml/toplevel/topdirs.ml:540">it_path</a></span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="PreProc">Path</span>.<span class="Constant">Pident</span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span>' <span class="Statement">when</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier"><a href="byte/topeval.ml.html#L287" title="ocaml/toplevel/byte/topeval.ml:287">name</a></span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span>' <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier"><a href="byte/topeval.ml.html#L287" title="ocaml/toplevel/byte/topeval.ml:287">name</a></span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement"><a href="#L786" title="ocaml/toplevel/topdirs.ml:786">if</a></span><span class="ocamlNone"> </span><span class="PreProc">Ident</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">same</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span><span class="ocamlNone">' </span><span class="Statement">then<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">recursive_use</span> <span class="Statement">:=</span> <span class="Constant">true<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">nonrecursive_use</span><span class="Statement">:=</span> <span class="Constant">true<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">()<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><a href="#L545" title="ocaml/toplevel/topdirs.ml:545">it</a></span> <span class="Statement">=</span>&nbsp; <span class="PreProc">Btype</span>.<span class="Statement">{</span><span class="ocamlLCIdentifier">type_iterators</span> <span class="Statement">with</span> <span class="ocamlLCIdentifier"><a href="#L540" title="ocaml/toplevel/topdirs.ml:540">it_path</a></span> <span class="Statement">}</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="Constant">()</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L545" title="ocaml/toplevel/topdirs.ml:545">it</a></span>.<span class="ocamlLCIdentifier">it_type_declaration</span> <span class="ocamlLCIdentifier"><a href="#L545" title="ocaml/toplevel/topdirs.ml:545">it</a></span> <span class="ocamlLCIdentifier">td</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">Btype</span>.<span class="ocamlLCIdentifier">unmark_iterators</span>.<span class="ocamlLCIdentifier">it_type_declaration</span> <span class="PreProc">Btype</span>.<span class="ocamlLCIdentifier">unmark_iterators</span> <span class="ocamlLCIdentifier">td<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="Statement">!</span><span class="ocamlLCIdentifier">recursive_use</span>, <span class="Statement">!</span><span class="ocamlLCIdentifier">nonrecursive_use</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">false</span>, <span class="Constant">true</span> <span class="Statement">-&gt;</span> <span class="Constant">Trec_not<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">true</span>, <span class="Statement">_</span> <span class="Statement">|</span> <span class="Statement">_</span>, <span class="Constant">false</span> <span class="Statement">-&gt;</span> <span class="Constant">Trec_first<br/></li>
<li></span>&nbsp; &nbsp; <span class="Comment">(* note: true, true is possible *)<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Constant">()</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="#L410" title="ocaml/toplevel/topdirs.ml:410">reg_show_prim</a></span> <span class="Constant">&quot;show_type&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(fun</span> <span class="ocamlLCIdentifier">env</span> <span class="ocamlLCIdentifier">loc</span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span> <span class="ocamlLCIdentifier">lid</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L456">&#x200c;</a></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">path</span></span>, <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span> <span class="Statement">=</span> <span class="PreProc">Env</span>.<span class="ocamlLCIdentifier">lookup_type</span> <span class="Statement">~</span><span class="Identifier">loc</span> <span class="ocamlLCIdentifier">lid</span> <span class="ocamlLCIdentifier">env</span> <span class="Statement">in<br/></li>
<li><a id="L457">&#x200c;</a></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">id</span></span>, <span class="ocamlLCIdentifier"><a href="#L546" title="ocaml/toplevel/topdirs.ml:546">rs</a></span> <span class="Statement">=</span> <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">|</span> <span class="Constant">Pident</span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span>, <span class="ocamlLCIdentifier"><a href="#L428" title="ocaml/toplevel/topdirs.ml:428">is_nonrec_type</a></span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span> <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span>, <span class="Constant">Trec_first<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">[</span> <span class="Constant">Sig_type</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span>, <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span>, <span class="ocamlLCIdentifier"><a href="#L546" title="ocaml/toplevel/topdirs.ml:546">rs</a></span>, <span class="Constant">Exported</span><span class="Statement">)</span> <span class="Statement">]<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">&quot;Print the signature of the corresponding type constructor.&quot;<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Each registered <a href="#L387" title="ocaml/toplevel/topdirs.ml:387">show_prim</a> function is called in turn<br/></li>
<li></span><span class="Comment"> * and any output produced is sent to std_out.<br/></li>
<li></span><span class="Comment"> * Two <a href="#L387" title="ocaml/toplevel/topdirs.ml:387">show_prim</a> functions are needed for constructors,<br/></li>
<li></span><span class="Comment"> * one for exception constructors and another for<br/></li>
<li></span><span class="Comment"> * non-exception constructors (normal and extensible variants). *)<br/></li>
<li><a id="L470">&#x200c;</a></span><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">is_exception_constructor</span></span> <span class="ocamlLCIdentifier">env</span> <span class="ocamlLCIdentifier">type_expr</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="PreProc">Ctype</span>.<span class="ocamlLCIdentifier">is_equal</span> <span class="ocamlLCIdentifier">env</span> <span class="Constant">true</span> <span class="Statement">[</span><span class="ocamlLCIdentifier">type_expr</span><span class="Statement">]</span> <span class="Statement">[</span><span class="PreProc">Predef</span>.<span class="ocamlLCIdentifier">type_exn</span><span class="Statement">]<br/></li>
<li></span><br/></li>
<li><a id="L473">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">is_extension_constructor</span></span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Cstr_extension</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">true<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">false<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Constant">()</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Comment">(* This <a href="#L387" title="ocaml/toplevel/topdirs.ml:387">show_prim</a> function will only <a href="#L634" title="ocaml/toplevel/topdirs.ml:634">show</a> constructor types<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; * that are not also exception types. *)<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="#L410" title="ocaml/toplevel/topdirs.ml:410">reg_show_prim</a></span> <span class="Constant">&quot;show_constructor&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(fun</span> <span class="ocamlLCIdentifier">env</span> <span class="ocamlLCIdentifier">loc</span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span> <span class="ocamlLCIdentifier">lid</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L482">&#x200c;</a></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">desc</span></span> <span class="Statement">=</span> <span class="PreProc">Env</span>.<span class="ocamlLCIdentifier">lookup_constructor</span> <span class="Statement">~</span><span class="Identifier">loc</span> <span class="PreProc">Env</span>.<span class="Constant">Positive</span> <span class="ocamlLCIdentifier">lid</span> <span class="ocamlLCIdentifier">env</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement"><a href="#L786" title="ocaml/toplevel/topdirs.ml:786">if</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L470" title="ocaml/toplevel/topdirs.ml:470">is_exception_constructor</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">env</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">cstr_res</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">raise</span> <span class="Constant">Not_found</span><span class="Statement">;<br/></li>
<li><a id="L485">&#x200c;</a></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">path</span></span> <span class="Statement">=</span> <span class="PreProc">Btype</span>.<span class="ocamlLCIdentifier">cstr_type_path</span> <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span> <span class="Statement">in<br/></li>
<li><a id="L486">&#x200c;</a></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">type_decl</span></span> <span class="Statement">=</span> <span class="PreProc">Env</span>.<span class="ocamlLCIdentifier">find_type</span> <span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span> <span class="ocamlLCIdentifier">env</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement"><a href="#L786" title="ocaml/toplevel/topdirs.ml:786">if</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L473" title="ocaml/toplevel/topdirs.ml:473">is_extension_constructor</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">cstr_tag</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li><a id="L488">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">ret_type</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement"><a href="#L786" title="ocaml/toplevel/topdirs.ml:786">if</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">cstr_generalized</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="Constant">Some</span> <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span>.<span class="ocamlLCIdentifier">cstr_res<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">else</span> <span class="Constant">None<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">in<br/></li>
<li><a id="L492">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">ext</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">{</span> <span class="ocamlLCIdentifier">ext_type_path</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">ext_type_params</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L486" title="ocaml/toplevel/topdirs.ml:486">type_decl</a></span>.<span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L401" title="ocaml/toplevel/genprintval.ml:401">type_params</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">ext_args</span> <span class="Statement">=</span> <span class="Constant">Cstr_tuple</span> <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span>.<span class="ocamlLCIdentifier">cstr_args</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">ext_ret_type</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L488" title="ocaml/toplevel/topdirs.ml:488">ret_type</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">ext_private</span> <span class="Statement">=</span> <span class="PreProc">Asttypes</span>.<span class="Constant">Public</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">ext_loc</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span>.<span class="ocamlLCIdentifier">cstr_loc</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">ext_attributes</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span>.<span class="ocamlLCIdentifier">cstr_attributes</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">ext_uid</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span>.<span class="ocamlLCIdentifier">cstr_uid</span><span class="Statement">;</span> <span class="Statement">}<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">[</span><span class="Constant">Sig_typext</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span>, <span class="ocamlLCIdentifier"><a href="#L492" title="ocaml/toplevel/topdirs.ml:492">ext</a></span>, <span class="Constant">Text_first</span>, <span class="Constant">Exported</span><span class="Statement">)]<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">else<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Comment">(* make up a fake Ident.<a href="genprintval.ml.html#L28" title="ocaml/toplevel/genprintval.ml:28">t</a> as <a href="#L486" title="ocaml/toplevel/topdirs.ml:486">type_decl</a> : Types.type_declaration<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * does not have an Ident.<a href="genprintval.ml.html#L28" title="ocaml/toplevel/genprintval.ml:28">t</a> yet. Ident.create_presistent is a<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * good choice because <a href="#L545" title="ocaml/toplevel/topdirs.ml:545">it</a> has no side-effects.<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; * *)<br/></li>
<li><a id="L508">&#x200c;</a></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">type_id</span></span> <span class="Statement">=</span> <span class="PreProc">Ident</span>.<span class="ocamlLCIdentifier">create_persistent</span> <span class="Statement">(</span><span class="PreProc">Path</span>.<span class="ocamlLCIdentifier"><a href="byte/topeval.ml.html#L287" title="ocaml/toplevel/byte/topeval.ml:287">name</a></span> <span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span><span class="Statement">)</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">[</span> <span class="Constant">Sig_type</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L508" title="ocaml/toplevel/topdirs.ml:508">type_id</a></span>, <span class="ocamlLCIdentifier"><a href="#L486" title="ocaml/toplevel/topdirs.ml:486">type_decl</a></span>, <span class="Constant">Trec_first</span>, <span class="Constant">Exported</span><span class="Statement">)</span> <span class="Statement">]<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">&quot;Print the signature of the corresponding value constructor.&quot;<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Constant">()</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="#L410" title="ocaml/toplevel/topdirs.ml:410">reg_show_prim</a></span> <span class="Constant">&quot;show_exception&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(fun</span> <span class="ocamlLCIdentifier">env</span> <span class="ocamlLCIdentifier">loc</span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span> <span class="ocamlLCIdentifier">lid</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L516">&#x200c;</a></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">desc</span></span> <span class="Statement">=</span> <span class="PreProc">Env</span>.<span class="ocamlLCIdentifier">lookup_constructor</span> <span class="Statement">~</span><span class="Identifier">loc</span> <span class="PreProc">Env</span>.<span class="Constant">Positive</span> <span class="ocamlLCIdentifier">lid</span> <span class="ocamlLCIdentifier">env</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement"><a href="#L786" title="ocaml/toplevel/topdirs.ml:786">if</a></span><span class="ocamlNone"> </span><span class="Statement">not</span><span class="ocamlNone"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L470" title="ocaml/toplevel/topdirs.ml:470">is_exception_constructor</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">env</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">cstr_res</span><span class="Statement">)</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">raise</span> <span class="Constant">Not_found</span><span class="Statement">;<br/></li>
<li><a id="L519">&#x200c;</a></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">ret_type</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement"><a href="#L786" title="ocaml/toplevel/topdirs.ml:786">if</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">cstr_generalized</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="Constant">Some</span> <span class="PreProc">Predef</span>.<span class="ocamlLCIdentifier">type_exn<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">else</span> <span class="Constant">None<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">in<br/></li>
<li><a id="L523">&#x200c;</a></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">ext</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">{</span> <span class="ocamlLCIdentifier">ext_type_path</span> <span class="Statement">=</span> <span class="PreProc">Predef</span>.<span class="ocamlLCIdentifier">path_exn</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">ext_type_params</span> <span class="Statement">=</span> <span class="Constant">[]</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">ext_args</span> <span class="Statement">=</span> <span class="Constant">Cstr_tuple</span> <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span>.<span class="ocamlLCIdentifier">cstr_args</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">ext_ret_type</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L488" title="ocaml/toplevel/topdirs.ml:488">ret_type</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">ext_private</span> <span class="Statement">=</span> <span class="PreProc">Asttypes</span>.<span class="Constant">Public</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">ext_loc</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span>.<span class="ocamlLCIdentifier">cstr_loc</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">ext_attributes</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span>.<span class="ocamlLCIdentifier">cstr_attributes</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier">ext_uid</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span>.<span class="ocamlLCIdentifier">cstr_uid</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">}<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">[</span><span class="Constant">Sig_typext</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span>, <span class="ocamlLCIdentifier"><a href="#L492" title="ocaml/toplevel/topdirs.ml:492">ext</a></span>, <span class="Constant">Text_exception</span>, <span class="Constant">Exported</span><span class="Statement">)]<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">&quot;Print the signature of the corresponding exception.&quot;<br/></li>
<li></span><br/></li>
<li><a id="L538">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">is_rec_module</span></span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span> <span class="ocamlLCIdentifier">md</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="Statement">exception</span> <span class="Constant">Exit</span> <span class="Statement">in<br/></li>
<li><a id="L540">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier"><span class="linkable">it_path</span></span> <span class="Statement">=</span> <span class="Statement">function<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="PreProc">Path</span>.<span class="Constant">Pdot</span><span class="Statement">(</span><span class="ocamlLCIdentifier">root</span>, <span class="Statement">_</span> <span class="Statement">)</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="#L540" title="ocaml/toplevel/topdirs.ml:540">it_path</a></span> <span class="ocamlLCIdentifier">root<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="PreProc">Path</span>.<span class="Constant">Pident</span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span>' <span class="Statement">-&gt;</span> <span class="Statement"><a href="#L786" title="ocaml/toplevel/topdirs.ml:786">if</a></span><span class="ocamlNone"> </span><span class="Statement">(</span><span class="PreProc">Ident</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">same</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span><span class="ocamlNone">'</span><span class="Statement">)</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="Statement">raise</span> <span class="Constant">Exit<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">()<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li><a id="L545">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">it</span></span> <span class="Statement">=</span>&nbsp; <span class="PreProc">Btype</span>.<span class="Statement">{</span><span class="ocamlLCIdentifier">type_iterators</span> <span class="Statement">with</span> <span class="ocamlLCIdentifier"><a href="#L540" title="ocaml/toplevel/topdirs.ml:540">it_path</a></span> <span class="Statement">}</span> <span class="Statement">in<br/></li>
<li><a id="L546">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">rs</span></span> <span class="Statement">=</span> <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L545" title="ocaml/toplevel/topdirs.ml:545">it</a></span>.<span class="ocamlLCIdentifier">it_module_declaration</span> <span class="ocamlLCIdentifier"><a href="#L545" title="ocaml/toplevel/topdirs.ml:545">it</a></span> <span class="ocamlLCIdentifier">md</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">()</span> <span class="Statement">-&gt;</span> <span class="Constant">Trec_not<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Statement">exception</span> <span class="Constant">Exit</span> <span class="Statement">-&gt;</span> <span class="Constant">Trec_first<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="PreProc">Btype</span>.<span class="ocamlLCIdentifier">unmark_iterators</span>.<span class="ocamlLCIdentifier">it_module_declaration</span> <span class="PreProc">Btype</span>.<span class="ocamlLCIdentifier">unmark_iterators</span> <span class="ocamlLCIdentifier">md</span><span class="Statement">;<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="#L546" title="ocaml/toplevel/topdirs.ml:546">rs</a><br/></li>
<li></span><br/></li>
<li><a id="L553">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">secretly_the_same_path</span></span> <span class="ocamlLCIdentifier">env</span> <span class="ocamlLCIdentifier">path1</span> <span class="ocamlLCIdentifier">path2</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">norm</span> <span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span> <span class="Statement">=</span> <span class="PreProc">Printtyp</span>.<span class="ocamlLCIdentifier">rewrite_double_underscore_paths</span> <span class="ocamlLCIdentifier">env</span> <span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="PreProc">Path</span>.<span class="ocamlLCIdentifier">same</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">norm</span> <span class="ocamlLCIdentifier">path1</span><span class="Statement">)</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">norm</span> <span class="ocamlLCIdentifier">path2</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Constant">()</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="#L410" title="ocaml/toplevel/topdirs.ml:410">reg_show_prim</a></span> <span class="Constant">&quot;show_module&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(fun</span> <span class="ocamlLCIdentifier">env</span> <span class="ocamlLCIdentifier">loc</span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span> <span class="ocamlLCIdentifier">lid</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L560">&#x200c;</a></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">path</span></span>, <span class="ocamlLCIdentifier">md</span> <span class="Statement">=</span> <span class="PreProc">Env</span>.<span class="ocamlLCIdentifier">lookup_module</span> <span class="Statement">~</span><span class="Identifier">loc</span> <span class="ocamlLCIdentifier">lid</span> <span class="ocamlLCIdentifier">env</span> <span class="Statement">in<br/></li>
<li><a id="L561">&#x200c;</a></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">id</span></span> <span class="Statement">=</span> <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">|</span> <span class="Constant">Pident</span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">in<br/></li>
<li><a id="L565">&#x200c;</a></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier"><span class="linkable">accum_aliases</span></span> <span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span> <span class="ocamlLCIdentifier">md</span> <span class="ocamlLCIdentifier">acc</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">def</span> <span class="ocamlLCIdentifier"><a href="#L546" title="ocaml/toplevel/topdirs.ml:546">rs</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">Sig_module</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span>, <span class="Constant">Mp_present</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">{</span><span class="ocamlLCIdentifier">md</span> <span class="Statement">with</span> <span class="ocamlLCIdentifier">md_type</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L367" title="ocaml/toplevel/topdirs.ml:367">trim_signature</a></span> <span class="ocamlLCIdentifier">md</span>.<span class="ocamlLCIdentifier">md_type</span><span class="Statement">}</span>,<br/></li>
<li>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L546" title="ocaml/toplevel/topdirs.ml:546">rs</a></span>, <span class="Constant">Exported</span><span class="Statement">)</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">md</span>.<span class="ocamlLCIdentifier">md_type</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">|</span> <span class="Constant">Mty_alias</span> <span class="ocamlLCIdentifier">new_path</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">md</span> <span class="Statement">=</span> <span class="PreProc">Env</span>.<span class="ocamlLCIdentifier">find_module</span> <span class="ocamlLCIdentifier">new_path</span> <span class="ocamlLCIdentifier">env</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L565" title="ocaml/toplevel/topdirs.ml:565">accum_aliases</a></span> <span class="ocamlLCIdentifier">new_path</span> <span class="ocamlLCIdentifier">md<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(<a href="#L786" title="ocaml/toplevel/topdirs.ml:786">if</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L553" title="ocaml/toplevel/topdirs.ml:553">secretly_the_same_path</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">env</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">new_path<br/></li>
<li></span><span class="ocamlNone">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">then</span> <span class="ocamlLCIdentifier">acc<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else</span> <span class="ocamlLCIdentifier">def</span> <span class="Constant">Trec_not</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier">acc</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">|</span> <span class="Constant">Mty_ident</span> <span class="Statement">_</span> <span class="Statement">|</span> <span class="Constant">Mty_signature</span> <span class="Statement">_</span> <span class="Statement">|</span> <span class="Constant">Mty_functor</span> <span class="Statement">_</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">rev</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">def</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L538" title="ocaml/toplevel/topdirs.ml:538">is_rec_module</a></span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span> <span class="ocamlLCIdentifier">md</span><span class="Statement">)</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier">acc</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L565" title="ocaml/toplevel/topdirs.ml:565">accum_aliases</a></span> <span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span> <span class="ocamlLCIdentifier">md</span> <span class="Constant">[]<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">&quot;Print the signature of the corresponding module.&quot;<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Constant">()</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="#L410" title="ocaml/toplevel/topdirs.ml:410">reg_show_prim</a></span> <span class="Constant">&quot;show_module_type&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(fun</span> <span class="ocamlLCIdentifier">env</span> <span class="ocamlLCIdentifier">loc</span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span> <span class="ocamlLCIdentifier">lid</span> <span class="Statement">-&gt;<br/></li>
<li><a id="L587">&#x200c;</a></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">path</span></span>, <span class="ocamlLCIdentifier">mtd</span> <span class="Statement">=</span> <span class="PreProc">Env</span>.<span class="ocamlLCIdentifier">lookup_modtype</span> <span class="Statement">~</span><span class="Identifier">loc</span> <span class="ocamlLCIdentifier">lid</span> <span class="ocamlLCIdentifier">env</span> <span class="Statement">in<br/></li>
<li><a id="L588">&#x200c;</a></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">id</span></span> <span class="Statement">=</span> <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">|</span> <span class="Constant">Pident</span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">|</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a><br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">in<br/></li>
<li><a id="L592">&#x200c;</a></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier"><span class="linkable">accum_defs</span></span> <span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span> <span class="ocamlLCIdentifier">mtd</span> <span class="ocamlLCIdentifier">acc</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">def</span> <span class="Statement">=</span> <span class="Constant">Sig_modtype</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span>, <span class="ocamlLCIdentifier">mtd</span>, <span class="Constant">Exported</span><span class="Statement">)</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">mtd</span>.<span class="ocamlLCIdentifier">mtd_type</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">|</span> <span class="Constant">Some</span> <span class="Statement">(</span><span class="Constant">Mty_ident</span> <span class="ocamlLCIdentifier">new_path</span><span class="Statement">)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">mtd</span> <span class="Statement">=</span> <span class="PreProc">Env</span>.<span class="ocamlLCIdentifier">find_modtype</span> <span class="ocamlLCIdentifier">new_path</span> <span class="ocamlLCIdentifier">env</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L592" title="ocaml/toplevel/topdirs.ml:592">accum_defs</a></span> <span class="ocamlLCIdentifier">new_path</span> <span class="ocamlLCIdentifier">mtd<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">(<a href="#L786" title="ocaml/toplevel/topdirs.ml:786">if</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L553" title="ocaml/toplevel/topdirs.ml:553">secretly_the_same_path</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">env</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">new_path<br/></li>
<li></span><span class="ocamlNone">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">then</span> <span class="ocamlLCIdentifier">acc<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="Statement">else</span> <span class="ocamlLCIdentifier">def</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier">acc</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">|</span> <span class="Constant">None</span> <span class="Statement">|</span> <span class="Constant">Some</span> <span class="Statement">(</span><span class="Constant">Mty_alias</span> <span class="Statement">_</span> <span class="Statement">|</span> <span class="Constant">Mty_signature</span> <span class="Statement">_</span> <span class="Statement">|</span> <span class="Constant">Mty_functor</span> <span class="Statement">_)</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">rev</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">def</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier">acc</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="ocamlLCIdentifier"><a href="#L592" title="ocaml/toplevel/topdirs.ml:592">accum_defs</a></span> <span class="ocamlLCIdentifier"><a href="#L456" title="ocaml/toplevel/topdirs.ml:456">path</a></span> <span class="ocamlLCIdentifier">mtd</span> <span class="Constant">[]<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">&quot;Print the signature of the corresponding module type.&quot;<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Constant">()</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="#L410" title="ocaml/toplevel/topdirs.ml:410">reg_show_prim</a></span> <span class="Constant">&quot;show_class&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(fun</span> <span class="ocamlLCIdentifier">env</span> <span class="ocamlLCIdentifier">loc</span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span> <span class="ocamlLCIdentifier">lid</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">_path</span>, <span class="ocamlLCIdentifier">desc_class</span> <span class="Statement">=</span> <span class="PreProc">Env</span>.<span class="ocamlLCIdentifier">lookup_class</span> <span class="Statement">~</span><span class="Identifier">loc</span> <span class="ocamlLCIdentifier">lid</span> <span class="ocamlLCIdentifier">env</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">_path</span>, <span class="ocamlLCIdentifier">desc_cltype</span> <span class="Statement">=</span> <span class="PreProc">Env</span>.<span class="ocamlLCIdentifier">lookup_cltype</span> <span class="Statement">~</span><span class="Identifier">loc</span> <span class="ocamlLCIdentifier">lid</span> <span class="ocamlLCIdentifier">env</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">_path</span>, <span class="ocamlLCIdentifier">typedcl</span> <span class="Statement">=</span> <span class="PreProc">Env</span>.<span class="ocamlLCIdentifier">lookup_type</span> <span class="Statement">~</span><span class="Identifier">loc</span> <span class="ocamlLCIdentifier">lid</span> <span class="ocamlLCIdentifier">env</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">[<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">Sig_class</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span>, <span class="ocamlLCIdentifier">desc_class</span>, <span class="Constant">Trec_not</span>, <span class="Constant">Exported</span><span class="Statement">);<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">Sig_class_type</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span>, <span class="ocamlLCIdentifier">desc_cltype</span>, <span class="Constant">Trec_not</span>, <span class="Constant">Exported</span><span class="Statement">);<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">Sig_type</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span>, <span class="ocamlLCIdentifier">typedcl</span>, <span class="Constant">Trec_not</span>, <span class="Constant">Exported</span><span class="Statement">);<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">]<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">&quot;Print the signature of the corresponding class.&quot;<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Constant">()</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="#L410" title="ocaml/toplevel/topdirs.ml:410">reg_show_prim</a></span> <span class="Constant">&quot;show_class_type&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(fun</span> <span class="ocamlLCIdentifier">env</span> <span class="ocamlLCIdentifier">loc</span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span> <span class="ocamlLCIdentifier">lid</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">_path</span>, <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span> <span class="Statement">=</span> <span class="PreProc">Env</span>.<span class="ocamlLCIdentifier">lookup_cltype</span> <span class="Statement">~</span><span class="Identifier">loc</span> <span class="ocamlLCIdentifier">lid</span> <span class="ocamlLCIdentifier">env</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">_path</span>, <span class="ocamlLCIdentifier">typedcl</span> <span class="Statement">=</span> <span class="PreProc">Env</span>.<span class="ocamlLCIdentifier">lookup_type</span> <span class="Statement">~</span><span class="Identifier">loc</span> <span class="ocamlLCIdentifier">lid</span> <span class="ocamlLCIdentifier">env</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">[<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">Sig_class_type</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span>, <span class="ocamlLCIdentifier"><a href="#L482" title="ocaml/toplevel/topdirs.ml:482">desc</a></span>, <span class="Constant">Trec_not</span>, <span class="Constant">Exported</span><span class="Statement">);<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp;&nbsp; <span class="Constant">Sig_type</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span>, <span class="ocamlLCIdentifier">typedcl</span>, <span class="Constant">Trec_not</span>, <span class="Constant">Exported</span><span class="Statement">);<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">]<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Constant">&quot;Print the signature of the corresponding class type.&quot;<br/></li>
<li></span><br/></li>
<li><a id="L634">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">show</span></span> <span class="ocamlLCIdentifier">env</span> <span class="ocamlLCIdentifier">loc</span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span> <span class="ocamlLCIdentifier">lid</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">sg</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">fold_left<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">(fun</span> <span class="ocamlLCIdentifier">sg</span> <span class="ocamlLCIdentifier">f</span> <span class="Statement">-&gt;</span> <span class="Statement">try</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">f</span> <span class="ocamlLCIdentifier">env</span> <span class="ocamlLCIdentifier">loc</span> <span class="ocamlLCIdentifier"><a href="#L457" title="ocaml/toplevel/topdirs.ml:457">id</a></span> <span class="ocamlLCIdentifier">lid</span><span class="Statement">)</span> @ <span class="ocamlLCIdentifier">sg</span> <span class="Statement">with</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">sg</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Constant">[]</span> <span class="Statement">!</span><span class="ocamlLCIdentifier"><a href="#L408" title="ocaml/toplevel/topdirs.ml:408">all_show_funs</a><br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement"><a href="#L786" title="ocaml/toplevel/topdirs.ml:786">if</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">sg</span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">[]</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="Statement">raise</span> <span class="Constant">Not_found</span> <span class="Statement">else</span> <span class="ocamlLCIdentifier">sg<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Constant">()</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L147" title="ocaml/toplevel/topcommon.mli:147">add_directive</a></span> <span class="Constant">&quot;<a href="#L634" title="ocaml/toplevel/topdirs.ml:634">show</a>&quot;</span> <span class="Statement">(</span><span class="Constant">Directive_ident</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L387" title="ocaml/toplevel/topdirs.ml:387">show_prim</a></span> <span class="ocamlLCIdentifier"><a href="#L634" title="ocaml/toplevel/topdirs.ml:634">show</a></span> <span class="ocamlLCIdentifier">std_formatter</span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">section</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L36" title="ocaml/toplevel/topdirs.ml:36">section_env</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">doc</span> <span class="Statement">=</span> <span class="Constant">&quot;Print the signatures of components \<br/></li>
<li></span><span class="Constant">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; from any of the categories below.&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Control the printing of values *)<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Statement">_</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L147" title="ocaml/toplevel/topcommon.mli:147">add_directive</a></span> <span class="Constant">&quot;print_depth&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">Directive_int</span><span class="Statement">(fun</span> <span class="ocamlLCIdentifier">n</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L58" title="ocaml/toplevel/topcommon.mli:58">max_printer_depth</a></span> <span class="Statement">:=</span> <span class="ocamlLCIdentifier">n</span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">section</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L38" title="ocaml/toplevel/topdirs.ml:38">section_print</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">doc</span> <span class="Statement">=</span> <span class="Constant">&quot;Limit the printing of values to a maximal depth of n.&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Statement">_</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L147" title="ocaml/toplevel/topcommon.mli:147">add_directive</a></span> <span class="Constant">&quot;print_length&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">Directive_int</span><span class="Statement">(fun</span> <span class="ocamlLCIdentifier">n</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L59" title="ocaml/toplevel/topcommon.mli:59">max_printer_steps</a></span> <span class="Statement">:=</span> <span class="ocamlLCIdentifier">n</span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">section</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L38" title="ocaml/toplevel/topdirs.ml:38">section_print</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">doc</span> <span class="Statement">=</span> <span class="Constant">&quot;Limit the number of value nodes printed to at most n.&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Set various compiler flags *)<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Statement">_</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L147" title="ocaml/toplevel/topcommon.mli:147">add_directive</a></span> <span class="Constant">&quot;debug&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">Directive_bool</span><span class="Statement">(fun</span> <span class="ocamlLCIdentifier">b</span> <span class="Statement">-&gt;</span> <span class="PreProc">Clflags</span>.<span class="ocamlLCIdentifier">debug</span> <span class="Statement">:=</span> <span class="ocamlLCIdentifier">b</span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">section</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L40" title="ocaml/toplevel/topdirs.ml:40">section_options</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">doc</span> <span class="Statement">=</span> <span class="Constant">&quot;Choose whether to generate debugging <a href="byte/topeval.ml.html#L226" title="ocaml/toplevel/byte/topeval.ml:226">events</a>.&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Statement">_</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L147" title="ocaml/toplevel/topcommon.mli:147">add_directive</a></span> <span class="Constant">&quot;labels&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">Directive_bool</span><span class="Statement">(fun</span> <span class="ocamlLCIdentifier">b</span> <span class="Statement">-&gt;</span> <span class="PreProc">Clflags</span>.<span class="ocamlLCIdentifier">classic</span> <span class="Statement">:=</span> <span class="Statement">not</span> <span class="ocamlLCIdentifier">b</span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">section</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L40" title="ocaml/toplevel/topdirs.ml:40">section_options</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">doc</span> <span class="Statement">=</span> <span class="Constant">&quot;Choose whether to ignore labels in function types.&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Statement">_</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L147" title="ocaml/toplevel/topcommon.mli:147">add_directive</a></span> <span class="Constant">&quot;principal&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">Directive_bool</span><span class="Statement">(fun</span> <span class="ocamlLCIdentifier">b</span> <span class="Statement">-&gt;</span> <span class="PreProc">Clflags</span>.<span class="ocamlLCIdentifier">principal</span> <span class="Statement">:=</span> <span class="ocamlLCIdentifier">b</span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">section</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L40" title="ocaml/toplevel/topdirs.ml:40">section_options</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">doc</span> <span class="Statement">=</span> <span class="Constant">&quot;Make sure that all types are derived in a principal way.&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Statement">_</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L147" title="ocaml/toplevel/topcommon.mli:147">add_directive</a></span> <span class="Constant">&quot;rectypes&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">Directive_none</span><span class="Statement">(fun</span> <span class="Constant">()</span> <span class="Statement">-&gt;</span> <span class="PreProc">Clflags</span>.<span class="ocamlLCIdentifier">recursive_types</span> <span class="Statement">:=</span> <span class="Constant">true</span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">section</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L40" title="ocaml/toplevel/topdirs.ml:40">section_options</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">doc</span> <span class="Statement">=</span> <span class="Constant">&quot;Allow arbitrary recursive types during type-checking.&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Statement">_</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L147" title="ocaml/toplevel/topcommon.mli:147">add_directive</a></span> <span class="Constant">&quot;ppx&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">Directive_string</span><span class="Statement">(fun</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a></span> <span class="Statement">-&gt;</span> <span class="PreProc">Clflags</span>.<span class="ocamlLCIdentifier">all_ppx</span> <span class="Statement">:=</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a></span> <span class="Statement">::</span> <span class="Statement">!</span><span class="PreProc">Clflags</span>.<span class="ocamlLCIdentifier">all_ppx</span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">section</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L40" title="ocaml/toplevel/topdirs.ml:40">section_options</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">doc</span> <span class="Statement">=</span> <span class="Constant">&quot;After parsing, pipe the abstract \<br/></li>
<li></span><span class="Constant">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; syntax tree through the preprocessor command.&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Statement">_</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L147" title="ocaml/toplevel/topcommon.mli:147">add_directive</a></span> <span class="Constant">&quot;warnings&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">Directive_string</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L132" title="ocaml/toplevel/topdirs.ml:132">with_error_fmt</a></span><span class="Statement">(fun</span> <span class="ocamlLCIdentifier">ppf</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a></span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="#L361" title="ocaml/toplevel/topdirs.ml:361">parse_warnings</a></span> <span class="ocamlLCIdentifier">ppf</span> <span class="Constant">false</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a></span><span class="Statement">)))<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">section</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L40" title="ocaml/toplevel/topdirs.ml:40">section_options</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">doc</span> <span class="Statement">=</span> <span class="Constant">&quot;Enable or disable warnings according to the argument.&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">}<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Statement">_</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L147" title="ocaml/toplevel/topcommon.mli:147">add_directive</a></span> <span class="Constant">&quot;warn_error&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">Directive_string</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L132" title="ocaml/toplevel/topdirs.ml:132">with_error_fmt</a></span><span class="Statement">(fun</span> <span class="ocamlLCIdentifier">ppf</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a></span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="#L361" title="ocaml/toplevel/topdirs.ml:361">parse_warnings</a></span> <span class="ocamlLCIdentifier">ppf</span> <span class="Constant">true</span> <span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a></span><span class="Statement">)))<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">section</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L40" title="ocaml/toplevel/topdirs.ml:40">section_options</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">doc</span> <span class="Statement">=</span> <span class="Constant">&quot;Treat as errors the warnings enabled by the argument.&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">}<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* #help directive *)<br/></li>
<li></span><br/></li>
<li><a id="L720">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">directive_sections</span></span> <span class="Constant">()</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">sections</span> <span class="Statement">=</span> <span class="PreProc">Hashtbl</span>.<span class="ocamlLCIdentifier">create</span> <span class="Constant">10</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">add_dir</span> <span class="ocamlLCIdentifier"><a href="byte/topeval.ml.html#L287" title="ocaml/toplevel/byte/topeval.ml:287">name</a></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">dir</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L149" title="ocaml/toplevel/topcommon.mli:149">get_directive</a></span> <span class="ocamlLCIdentifier"><a href="byte/topeval.ml.html#L287" title="ocaml/toplevel/byte/topeval.ml:287">name</a></span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Some</span> <span class="ocamlLCIdentifier">dir</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">dir<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">None</span> <span class="Statement">-&gt;</span> <span class="Statement">assert</span> <span class="Constant">false<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">section</span>, <span class="ocamlLCIdentifier">doc</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L151" title="ocaml/toplevel/topcommon.mli:151">get_directive_info</a></span> <span class="ocamlLCIdentifier"><a href="byte/topeval.ml.html#L287" title="ocaml/toplevel/byte/topeval.ml:287">name</a></span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Some</span> <span class="Statement">{</span> <span class="ocamlLCIdentifier">section</span><span class="Statement">;</span> <span class="ocamlLCIdentifier">doc</span> <span class="Statement">}</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">section</span>, <span class="Constant">Some</span> <span class="ocamlLCIdentifier">doc<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">None</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;Undocumented&quot;</span>, <span class="Constant">None<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">Hashtbl</span>.<span class="ocamlLCIdentifier">replace</span> <span class="ocamlLCIdentifier">sections</span> <span class="ocamlLCIdentifier">section<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">((</span><span class="ocamlLCIdentifier"><a href="byte/topeval.ml.html#L287" title="ocaml/toplevel/byte/topeval.ml:287">name</a></span>, <span class="ocamlLCIdentifier">dir</span>, <span class="ocamlLCIdentifier">doc</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; &nbsp;&nbsp; <span class="Statement">::</span> <span class="Statement">(try</span> <span class="PreProc">Hashtbl</span>.<span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L455" title="ocaml/toplevel/genprintval.ml:455">find</a></span> <span class="ocamlLCIdentifier">sections</span> <span class="ocamlLCIdentifier">section</span> <span class="Statement">with</span> <span class="Constant">Not_found</span> <span class="Statement">-&gt;</span> <span class="Constant">[]</span><span class="Statement">))<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">iter</span> <span class="ocamlLCIdentifier">add_dir</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L153" title="ocaml/toplevel/topcommon.mli:153">all_directive_names</a></span> <span class="Constant">()</span><span class="Statement">);<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">take_section</span> <span class="ocamlLCIdentifier">section</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement"><a href="#L786" title="ocaml/toplevel/topdirs.ml:786">if</a></span><span class="ocamlNone"> </span><span class="Statement">not</span><span class="ocamlNone"> </span><span class="Statement">(</span><span class="PreProc">Hashtbl</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">mem</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">sections</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">section</span><span class="Statement">)</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">section</span>, <span class="Constant">[]</span><span class="Statement">)<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">else</span> <span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">section_dirs</span><span class="ocamlEnd"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">Hashtbl</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="genprintval.ml.html#L455" title="ocaml/toplevel/genprintval.ml:455">find</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">sections</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">section<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|&gt;</span><span class="ocamlEnd"> </span><span class="PreProc">List</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">sort</span><span class="ocamlEnd"> </span><span class="Statement">(fun</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">n1</span><span class="ocamlEnd">, </span><span class="Statement">_</span><span class="ocamlEnd">, </span><span class="Statement">_)</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">n2</span><span class="ocamlEnd">, </span><span class="Statement">_</span><span class="ocamlEnd">, </span><span class="Statement">_)</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="PreProc">String</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">compare</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">n1</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">n2</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="PreProc">Hashtbl</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">remove</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">sections</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">section</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="ocamlLCIdentifier">section</span><span class="ocamlEnd">, </span><span class="ocamlLCIdentifier">section_dirs</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span>&nbsp; <span class="Statement">in<br/></li>
<li><a id="L748">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">before</span></span>, <span class="ocamlLCIdentifier">after</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L48" title="ocaml/toplevel/topdirs.ml:48">order_of_sections</a></span> <span class="Statement">in<br/></li>
<li><a id="L749">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">sections_before</span></span> <span class="Statement">=</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">map</span> <span class="ocamlLCIdentifier">take_section</span> <span class="ocamlLCIdentifier"><a href="#L748" title="ocaml/toplevel/topdirs.ml:748">before</a></span> <span class="Statement">in<br/></li>
<li><a id="L750">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">sections_after</span></span> <span class="Statement">=</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">map</span> <span class="ocamlLCIdentifier">take_section</span> <span class="ocamlLCIdentifier">after</span> <span class="Statement">in<br/></li>
<li><a id="L751">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">sections_user</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; &nbsp; <span class="PreProc">Hashtbl</span>.<span class="ocamlLCIdentifier">fold</span> <span class="Statement">(fun</span> <span class="ocamlLCIdentifier">section</span> <span class="Statement">_</span> <span class="ocamlLCIdentifier">acc</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">section</span><span class="Statement">::</span><span class="ocamlLCIdentifier">acc</span><span class="Statement">)</span> <span class="ocamlLCIdentifier">sections</span> <span class="Constant">[]<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|&gt;</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">sort</span> <span class="PreProc">String</span>.<span class="ocamlLCIdentifier">compare<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|&gt;</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">map</span> <span class="ocamlLCIdentifier">take_section</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="ocamlLCIdentifier"><a href="#L749" title="ocaml/toplevel/topdirs.ml:749">sections_before</a></span> @ <span class="ocamlLCIdentifier"><a href="#L751" title="ocaml/toplevel/topdirs.ml:751">sections_user</a></span> @ <span class="ocamlLCIdentifier"><a href="#L750" title="ocaml/toplevel/topdirs.ml:750">sections_after</a><br/></li>
<li></span><br/></li>
<li><a id="L757">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">print_directive</span></span> <span class="ocamlLCIdentifier">ppf</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="byte/topeval.ml.html#L287" title="ocaml/toplevel/byte/topeval.ml:287">name</a></span>, <span class="ocamlLCIdentifier">directive</span>, <span class="ocamlLCIdentifier">doc</span><span class="Statement">)</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">param</span> <span class="Statement">=</span> <span class="Statement">match</span> <span class="ocamlLCIdentifier">directive</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Directive_none</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot;&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Directive_string</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot; &lt;str&gt;&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Directive_int</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot; &lt;int&gt;&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Directive_bool</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot; &lt;bool&gt;&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">|</span> <span class="Constant">Directive_ident</span> <span class="Statement">_</span> <span class="Statement">-&gt;</span> <span class="Constant">&quot; &lt;ident&gt;&quot;</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">doc</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">None</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">fprintf</span> <span class="ocamlLCIdentifier">ppf</span> <span class="Constant">&quot;#%<a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a>%<a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a>@.&quot;</span> <span class="ocamlLCIdentifier"><a href="byte/topeval.ml.html#L287" title="ocaml/toplevel/byte/topeval.ml:287">name</a></span> <span class="ocamlLCIdentifier">param<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Some</span> <span class="ocamlLCIdentifier">doc</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">fprintf</span> <span class="ocamlLCIdentifier">ppf</span> <span class="Constant">&quot;@[&lt;hov 2&gt;#%<a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a>%<a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a>@\n%a@]@.&quot;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="byte/topeval.ml.html#L287" title="ocaml/toplevel/byte/topeval.ml:287">name</a></span> <span class="ocamlLCIdentifier">param<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; &nbsp; <span class="PreProc">Format</span>.<span class="ocamlLCIdentifier">pp_print_text</span> <span class="ocamlLCIdentifier">doc<br/></li>
<li></span><br/></li>
<li><a id="L771">&#x200c;</a><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">print_section</span></span> <span class="ocamlLCIdentifier">ppf</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">section</span>, <span class="ocamlLCIdentifier">directives</span><span class="Statement">)</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement"><a href="#L786" title="ocaml/toplevel/topdirs.ml:786">if</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">directives</span><span class="ocamlNone"> </span><span class="Statement">&lt;&gt;</span><span class="ocamlNone"> </span><span class="Constant">[]</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier">fprintf</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ppf</span><span class="ocamlEnd"> </span><span class="Constant">&quot;%30s%<a href="genprintval.ml.html#L323" title="ocaml/toplevel/genprintval.ml:323">s</a>@.&quot;</span><span class="ocamlEnd"> </span><span class="Constant">&quot;&quot;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">section</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="PreProc">List</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">iter</span><span class="ocamlEnd"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L757" title="ocaml/toplevel/topdirs.ml:757">print_directive</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ppf</span><span class="Statement">)</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">directives</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier">fprintf</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ppf</span><span class="ocamlEnd"> </span><span class="Constant">&quot;@.&quot;</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; </span><span class="Statement">end<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="ocamlLCIdentifier">print_directives</span> <span class="ocamlLCIdentifier">ppf</span> <span class="Constant">()</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">iter</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L771" title="ocaml/toplevel/topdirs.ml:771">print_section</a></span> <span class="ocamlLCIdentifier">ppf</span><span class="Statement">)</span> <span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L720" title="ocaml/toplevel/topdirs.ml:720">directive_sections</a></span> <span class="Constant">()</span><span class="Statement">)<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Statement">_</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="topcommon.mli.html#L147" title="ocaml/toplevel/topcommon.mli:147">add_directive</a></span> <span class="Constant">&quot;help&quot;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">(</span><span class="Constant">Directive_none</span> <span class="Statement">(</span><span class="ocamlLCIdentifier">print_directives</span> <span class="ocamlLCIdentifier">std_formatter</span><span class="Statement">))<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">{<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">section</span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L34" title="ocaml/toplevel/topdirs.ml:34">section_general</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier">doc</span> <span class="Statement">=</span> <span class="Constant">&quot;Prints a list of all available directives, with \<br/></li>
<li><a id="L786">&#x200c;</a></span><span class="Constant">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; corresponding argument type <span class="linkable">if</span> appropriate.&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">}<br/></li>
</ol></span></code>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="index.html">Top Level</a></span>
 </p>

 </body>
</html>
