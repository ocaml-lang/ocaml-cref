<!-- generated by the vscode.pl tool from vscoded.-->

<html>
 <head>
  <title>ocaml/tools/lintapidiff.ml - ocaml</title>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <style>
body {
    text-align: left;
    text-align-last: left;
}

.nav-bar {
    font-size: 120%;
    margin-top: 5px;
    margin-bottom: 5px;
}

.nav-link {
    padding-left: 5em;
    padding-right: 5em;
}

ul.toc {
    line-height: 200%;
    font-size: 150%;
}

code {
    font-family: consolas, monospace;
    line-height: 130%;
}

span.Constant {
    color: DarkGreen;
}

span.Special {
    color: #c06000;
}

span.Comment {
    color: DarkRed;
    font-style: italic;
}

span.Identifier {
    color: DarkCyan;
}

span.PreProc {
    color: DarkMagenta;
}

span.Statement, span.Type, span.Keyword, span.Repeat, span.Conditional,
    span.Operator, span.Exception
{
    color: DarkBlue;
}

span.Todo {
    color: DarkRed;
    background-color: Gold;
    font-style: italic;
}

span.Underlined {
    text-decoration: underline;
}

span.linkable {
    font-weight: bold;
}

code ol {
    counter-reset: item;
    list-style-type: none;
    margin-left: 0;
    padding-left: 0;
    list-style-position: inside;
}

code li {
    display: block;
}

code li:before {
    content: counter(item) "  ";
    counter-increment: item;
    color: #999;
    padding-right: 0.5em;
    padding-left: 0.4em;
    list-style-position: inside;
    text-align: right
}

  </style>
 </head>
 <body>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="index.html">Top Level</a></span>
 </p>

  <h1>ocaml/tools/lintapidiff.ml - ocaml</h1>
 <h2>Global variables defined</h2>
 <ul class="toc">
<li><a href="#L127">add_item</a></li>
<li><a href="#L175">add_items</a></li>
<li><a href="#L118">add_path</a></li>
<li><a href="#L272">check_changes</a></li>
<li><a href="#L323">count</a></li>
<li><a href="#L300">file</a></li>
<li><a href="#L100">get</a></li>
<li><a href="#L86">get_doc</a></li>
<li><a href="#L38">ignore_changes_for</a></li>
<li><a href="#L239">info_latest</a></li>
<li><a href="#L92">is_deprecated</a></li>
<li><a href="#L57">is_same</a></li>
<li><a href="#L58">is_strictly_older</a></li>
<li><a href="#L59">of_string_exn</a></li>
<li><a href="#L35">oldest</a></li>
<li><a href="#L185">parse_file</a></li>
<li><a href="#L253">parse_file_at_rev</a></li>
<li><a href="#L321">paths</a></li>
<li><a href="#L310">read_lines</a></li>
<li><a href="#L316">tags</a></li>
<li><a href="#L200">with_show</a></li>
</ul>
 <h2>Data types defined</h2>
 <ul class="toc">
<li><a href="#L30">diff_error</a></li>
<li><a href="#L55">t</a></li>
</ul>
 <h2>Source code</h2>

  <code><ol><li><span class="Comment">(**************************************************************************)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; OCaml&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Edwin Tö<a href="ocamltex.ml.html#L130" title="ocaml/tools/ocamltex.ml:130">r</a>ök&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; Copyright 2016--2017 Edwin Tö<a href="ocamltex.ml.html#L130" title="ocaml/tools/ocamltex.ml:130">r</a>ök&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; All rights reserved.&nbsp; This <a href="#L300" title="ocaml/tools/lintapidiff.ml:300">file</a> is distributed under the terms of&nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; the GNU Lesser General Public License version 2.1, with the&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp;&nbsp; special exception on linking described in the <a href="#L300" title="ocaml/tools/lintapidiff.ml:300">file</a> LICENSE.&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; *)<br/></li>
<li></span><span class="Comment">(**************************************************************************)<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* Detects newly added symbols that are missing &quot;@since&quot; annotations,<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; or removed symbols that didn'<a href="ocamltex.ml.html#L411" title="ocaml/tools/ocamltex.ml:411">t</a> have &quot;@deprecated&quot; annotation before.<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp;&nbsp; Handles: values, exceptions.<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; Ignores: variants, record fields, classes, module aliasing or includes, ...<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; Out of scope: changes in arity, parameters, ...<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp;&nbsp; Missing attributes on undocumented identifiers in undocumented modules<br/></li>
<li></span><span class="Comment">&nbsp;&nbsp; are not reported.<br/></li>
<li></span><br/></li>
<li><span class="Comment">&nbsp;&nbsp; Use 'make lintapidiff' in the root directory to run<br/></li>
<li></span><span class="Comment">*)<br/></li>
<li></span><span class="Statement"><a href="ocamlcmt.ml.html#L53" title="ocaml/tools/ocamlcmt.ml:53">open</a></span><span class="ocamlNone"> </span><span class="PreProc">Location<br/></li>
<li></span><span class="Statement"><a href="ocamlcmt.ml.html#L53" title="ocaml/tools/ocamlcmt.ml:53">open</a></span><span class="ocamlNone"> </span><span class="PreProc">Parsetree<br/></li>
<li></span><br/></li>
<li><a id="L30">&#x200c;</a><span class="Statement">type</span> <span class="ocamlLCIdentifier"><span class="linkable">diff_error</span></span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">File_not_found<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Constant">Other_error<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* <a href="#L35" title="ocaml/tools/lintapidiff.ml:35">oldest</a> Ocaml version that we show missing @since errors for *)<br/></li>
<li><a id="L35">&#x200c;</a></span><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">oldest</span></span> <span class="Statement">=</span> <span class="Constant">&quot;4.00.0&quot;<br/></li>
<li></span><br/></li>
<li><span class="Comment">(* do not check @since annotations for these *)<br/></li>
<li><a id="L38">&#x200c;</a></span><span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">ignore_changes_for</span></span> <span class="Statement">=</span> <span class="Statement">[<br/></li>
<li></span>&nbsp; <span class="Constant">&quot;type Pervasives.format6&quot;</span> <span class="Comment">(* this <a href="primreq.ml.html#L24" title="ocaml/tools/primreq.ml:24">used</a> to be <a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a> built-in type *)</span><span class="Statement">;<br/></li>
<li></span>&nbsp; <span class="Comment">(* discarded by <a href="ocamltex.ml.html#L45" title="ocaml/tools/ocamltex.ml:45">stop</a> comments: *)<br/></li>
<li></span>&nbsp; <span class="Constant">&quot;type Unix.map_file_impl&quot;</span><span class="Statement">;<br/></li>
<li></span>&nbsp; <span class="Constant">&quot;value Unix.map_file_impl&quot;</span><span class="Statement">;<br/></li>
<li></span><span class="Statement">]<br/></li>
<li></span><br/></li>
<li><span class="Statement">module</span><span class="PreProc"> IdMap</span><span class="ocamlPreDef"> </span><span class="Statement">=</span> <span class="PreProc">Misc.Stdlib.String.Map<br/></li>
<li></span><br/></li>
<li><span class="Statement">module</span><span class="PreProc"> Version</span><span class="ocamlPreDef"> : </span><span class="PreProc">sig<br/></li>
<li></span><span class="ocamlSig">&nbsp; </span><span class="Statement">type</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L411" title="ocaml/tools/ocamltex.ml:411">t</a><br/></li>
<li></span><span class="ocamlSig">&nbsp; </span><span class="Statement">val</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="#L35" title="ocaml/tools/lintapidiff.ml:35">oldest</a></span><span class="ocamlSig"> : </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L411" title="ocaml/tools/ocamltex.ml:411">t</a><br/></li>
<li></span><span class="ocamlSig">&nbsp; </span><span class="Statement">val</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="#L57" title="ocaml/tools/lintapidiff.ml:57">is_same</a></span><span class="ocamlSig"> : </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L411" title="ocaml/tools/ocamltex.ml:411">t</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L411" title="ocaml/tools/ocamltex.ml:411">t</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="Type">bool<br/></li>
<li></span><span class="ocamlSig">&nbsp; </span><span class="Statement">val</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="#L58" title="ocaml/tools/lintapidiff.ml:58">is_strictly_older</a></span><span class="ocamlSig">: </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L411" title="ocaml/tools/ocamltex.ml:411">t</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier">than</span><span class="ocamlSig">:</span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L411" title="ocaml/tools/ocamltex.ml:411">t</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="Type">bool<br/></li>
<li></span><span class="ocamlSig">&nbsp; </span><span class="Statement">val</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="#L59" title="ocaml/tools/lintapidiff.ml:59">of_string_exn</a></span><span class="ocamlSig"> : </span><span class="Type">string</span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L411" title="ocaml/tools/ocamltex.ml:411">t</a><br/></li>
<li></span><span class="ocamlSig">&nbsp; </span><span class="Statement">val</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L420" title="ocaml/tools/ocamltex.ml:420">pp</a></span><span class="ocamlSig"> : </span><span class="PreProc">Format</span><span class="ocamlSig">.</span><span class="ocamlLCIdentifier">formatter</span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L411" title="ocaml/tools/ocamltex.ml:411">t</a></span><span class="ocamlSig"> </span><span class="Statement">-&gt;</span><span class="ocamlSig"> </span><span class="Type">unit<br/></li>
<li></span><span class="PreProc">end</span> <span class="Statement">=</span> <span class="PreProc">struct<br/></li>
<li><a id="L55">&#x200c;</a></span><span class="ocamlFuncStruct">&nbsp; </span><span class="Statement">type</span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">t</span></span><span class="ocamlFuncStruct"> </span><span class="Statement">=</span><span class="ocamlFuncStruct"> </span><span class="Type">int</span><span class="ocamlFuncStruct"> </span><span class="Statement">*</span><span class="ocamlFuncStruct"> </span><span class="Type">int</span><span class="ocamlFuncStruct"> </span><span class="Statement">*</span><span class="ocamlFuncStruct"> </span><span class="Type">int<br/></li>
<li></span><br/></li>
<li><a id="L57">&#x200c;</a><span class="ocamlFuncStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">is_same</span></span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier"><a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a></span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier">b</span><span class="ocamlFuncStruct"> </span><span class="Statement">=</span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier"><a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a></span><span class="ocamlFuncStruct"> </span><span class="Statement">=</span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier">b<br/></li>
<li><a id="L58">&#x200c;</a></span><span class="ocamlFuncStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">is_strictly_older</span></span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier"><a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a></span><span class="ocamlFuncStruct"> </span><span class="Statement">~</span><span class="Identifier">than</span><span class="ocamlFuncStruct"> </span><span class="Statement">=</span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier"><a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a></span><span class="ocamlFuncStruct"> </span><span class="Statement">&lt;</span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier">than<br/></li>
<li><a id="L59">&#x200c;</a></span><span class="ocamlFuncStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">of_string_exn</span></span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier">str</span><span class="ocamlFuncStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlFuncStruct">&nbsp; &nbsp; </span><span class="Statement">try</span><span class="ocamlFuncStruct"> </span><span class="PreProc">Scanf</span><span class="ocamlFuncStruct">.</span><span class="ocamlLCIdentifier">sscanf</span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier">str</span><span class="ocamlFuncStruct"> </span><span class="Constant">&quot;%u.%u.%u&quot;</span><span class="ocamlFuncStruct"> </span><span class="Statement">(fun</span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier"><a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a></span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier">b</span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier">c</span><span class="ocamlFuncStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlFuncStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a></span><span class="ocamlFuncStruct">,</span><span class="ocamlLCIdentifier">b</span><span class="ocamlFuncStruct">,</span><span class="ocamlLCIdentifier">c</span><span class="Statement">))<br/></li>
<li></span><span class="ocamlFuncStruct">&nbsp; &nbsp; </span><span class="Statement">with</span><span class="ocamlFuncStruct"> </span><span class="Statement">_</span><span class="ocamlFuncStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlFuncStruct"> </span><span class="PreProc">Scanf</span><span class="ocamlFuncStruct">.</span><span class="ocamlLCIdentifier">sscanf</span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier">str</span><span class="ocamlFuncStruct"> </span><span class="Constant">&quot;%u.%u&quot;</span><span class="ocamlFuncStruct"> </span><span class="Statement">(fun</span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier"><a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a></span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier">b</span><span class="ocamlFuncStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlFuncStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a></span><span class="ocamlFuncStruct">,</span><span class="ocamlLCIdentifier">b</span><span class="ocamlFuncStruct">,</span><span class="Constant">0</span><span class="Statement">))<br/></li>
<li></span><br/></li>
<li><span class="ocamlFuncStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier"><a href="#L35" title="ocaml/tools/lintapidiff.ml:35">oldest</a></span><span class="ocamlFuncStruct"> </span><span class="Statement">=</span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier"><a href="#L59" title="ocaml/tools/lintapidiff.ml:59">of_string_exn</a></span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier"><a href="#L35" title="ocaml/tools/lintapidiff.ml:35">oldest</a><br/></li>
<li></span><span class="ocamlFuncStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L420" title="ocaml/tools/ocamltex.ml:420">pp</a></span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier">ppf</span><span class="ocamlFuncStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">major</span><span class="ocamlFuncStruct">,</span><span class="ocamlLCIdentifier">minor</span><span class="ocamlFuncStruct">,</span><span class="ocamlLCIdentifier">patch</span><span class="Statement">)</span><span class="ocamlFuncStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlFuncStruct">&nbsp; &nbsp; </span><span class="PreProc">Format</span><span class="ocamlFuncStruct">.</span><span class="ocamlLCIdentifier">fprintf</span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier">ppf</span><span class="ocamlFuncStruct"> </span><span class="Constant">&quot;%u.%02u.%u&quot;</span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier">major</span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier">minor</span><span class="ocamlFuncStruct"> </span><span class="ocamlLCIdentifier">patch<br/></li>
<li></span><span class="PreProc">end<br/></li>
<li></span><br/></li>
<li><span class="Statement">module</span><span class="PreProc"> Doc</span><span class="ocamlPreDef"> </span><span class="Statement">=</span> <span class="PreProc">struct<br/></li>
<li></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">type</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L411" title="ocaml/tools/ocamltex.ml:411">t</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">{<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier">since</span><span class="ocamlStruct">: </span><span class="PreProc">Version</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L411" title="ocaml/tools/ocamltex.ml:411">t</a></span><span class="ocamlStruct"> </span><span class="Type">option</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier">deprecated</span><span class="ocamlStruct">: </span><span class="Type">bool</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L540" title="ocaml/tools/ocamltex.ml:540">loc</a></span><span class="ocamlStruct">: </span><span class="PreProc">Location</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L411" title="ocaml/tools/ocamltex.ml:411">t</a></span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier">has_doc_parent</span><span class="ocamlStruct">: </span><span class="Type">bool</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier">has_doc</span><span class="ocamlStruct">: </span><span class="Type">bool</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">}<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">empty</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier">since</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Constant">None</span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">deprecated</span><span class="Statement">=</span><span class="Constant">false</span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L540" title="ocaml/tools/ocamltex.ml:540">loc</a></span><span class="Statement">=</span><span class="PreProc">Location</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">none</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="ocamlLCIdentifier">has_doc_parent</span><span class="Statement">=</span><span class="Constant">false</span><span class="Statement">;</span><span class="ocamlLCIdentifier">has_doc</span><span class="Statement">=</span><span class="Constant">false</span><span class="Statement">}<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">since</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Str</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">regexp</span><span class="ocamlStruct"> </span><span class="Constant">&quot;\\(.\\|\n\\)*@since +\\([^ ]+\\).*&quot;<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">find_attr</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">lst</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">attrs</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">try</span><span class="ocamlStruct"> </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="PreProc">List</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L576" title="ocaml/tools/ocamltex.ml:576">find</a></span><span class="ocamlStruct"> </span><span class="Statement">(fun</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">attr</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="PreProc">List</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">mem</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">attr</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">attr_name</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">txt</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">lst</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">attrs</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">with</span><span class="ocamlStruct"> </span><span class="Constant">Not_found</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">None<br/></li>
<li></span><br/></li>
<li><a id="L86">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">get_doc</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">lst</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">attrs</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">match</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">find_attr</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">lst</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">attrs</span><span class="ocamlStruct"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">attr_payload</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Constant">PStr</span><span class="ocamlStruct"> </span><span class="Statement">[{</span><span class="ocamlLCIdentifier">pstr_desc</span><span class="Statement">=</span><span class="Constant">Pstr_eval</span><span class="Statement">(<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">{</span><span class="ocamlLCIdentifier">pexp_desc</span><span class="Statement">=</span><span class="Constant">Pexp_constant</span><span class="Statement">(</span><span class="Constant">Pconst_string</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">doc</span><span class="ocamlStruct">, </span><span class="Statement">_</span><span class="ocamlStruct">,</span><span class="Statement">_));_}</span><span class="ocamlStruct">, </span><span class="Statement">_);_}]}<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">when</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">doc</span><span class="ocamlStruct"> </span><span class="Statement">&lt;&gt;</span><span class="ocamlStruct"> </span><span class="Constant">&quot;/*&quot;</span><span class="ocamlStruct"> </span><span class="Statement">&amp;&amp;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">doc</span><span class="ocamlStruct"> </span><span class="Statement">&lt;&gt;</span><span class="ocamlStruct"> </span><span class="Constant">&quot;&quot;</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">doc<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">None<br/></li>
<li></span><br/></li>
<li><a id="L92">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">is_deprecated</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">attrs</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier">find_attr</span><span class="ocamlStruct"> </span><span class="Statement">[</span><span class="Constant">&quot;ocaml.deprecated&quot;</span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="Constant">&quot;deprecated&quot;</span><span class="Statement">]</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">attrs</span><span class="ocamlStruct"> </span><span class="Statement">&lt;&gt;</span><span class="ocamlStruct"> </span><span class="Constant">None</span><span class="ocamlStruct"> </span><span class="Statement">||<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">match</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L86" title="ocaml/tools/lintapidiff.ml:86">get_doc</a></span><span class="ocamlStruct"> </span><span class="Statement">[</span><span class="Constant">&quot;ocaml.text&quot;</span><span class="Statement">]</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">attrs</span><span class="ocamlStruct"> </span><span class="Statement">with</span><span class="ocamlStruct"> </span><span class="Comment">(* for toplevel module annotation *)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">None</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">false<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">text</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">try</span><span class="ocamlStruct"> </span><span class="PreProc">Misc</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">search_substring</span><span class="ocamlStruct"> </span><span class="Constant">&quot;@deprecated&quot;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">text</span><span class="ocamlStruct"> </span><span class="Constant">0</span><span class="ocamlStruct"> </span><span class="Statement">&gt;=</span><span class="ocamlStruct"> </span><span class="Constant">0<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">with</span><span class="ocamlStruct"> </span><span class="Constant">Not_found</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">false<br/></li>
<li></span><br/></li>
<li><a id="L100">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">get</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">parent_info</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L540" title="ocaml/tools/ocamltex.ml:540">loc</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">attrs</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">doc</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L86" title="ocaml/tools/lintapidiff.ml:86">get_doc</a></span><span class="ocamlStruct"> </span><span class="Statement">[</span><span class="Constant">&quot;ocaml.doc&quot;</span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="Constant">&quot;ocaml.text&quot;</span><span class="Statement">]</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">attrs</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">{<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">since</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">(match</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">doc</span><span class="ocamlStruct"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">doc</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="PreProc">Str</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">string_match</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">since</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">doc</span><span class="ocamlNone"> </span><span class="Constant">0</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="PreProc">Str</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">matched_group</span><span class="ocamlStruct"> </span><span class="Constant">2</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">doc</span><span class="ocamlStruct"> </span><span class="Statement">|&gt;</span><span class="ocamlStruct"> </span><span class="PreProc">String</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">trim<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|&gt;</span><span class="ocamlStruct"> </span><span class="PreProc">Version</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="#L59" title="ocaml/tools/lintapidiff.ml:59">of_string_exn</a></span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">parent_info</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">since<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">None</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">parent_info</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">since</span><span class="Statement">);<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">deprecated</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">parent_info</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">deprecated</span><span class="ocamlStruct"> </span><span class="Statement">||</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L92" title="ocaml/tools/lintapidiff.ml:92">is_deprecated</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">attrs</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L540" title="ocaml/tools/ocamltex.ml:540">loc</a></span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">has_doc_parent</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">parent_info</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">has_doc_parent</span><span class="ocamlStruct"> </span><span class="Statement">||</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">parent_info</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">has_doc</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">has_doc</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">doc</span><span class="ocamlStruct"> </span><span class="Statement">&lt;&gt;</span><span class="ocamlStruct"> </span><span class="Constant">None<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">}<br/></li>
<li></span><span class="PreProc">end<br/></li>
<li></span><br/></li>
<li><span class="Statement">module</span><span class="PreProc"> Ast</span><span class="ocamlPreDef"> </span><span class="Statement">=</span> <span class="PreProc">struct<br/></li>
<li><a id="L118">&#x200c;</a></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">add_path</span></span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier">f</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">prefix</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L539" title="ocaml/tools/ocamltex.ml:539">name</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">attrs</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">inherits</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">map</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Path</span><span class="ocamlStruct">.</span><span class="Constant">Pdot</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct">, </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L539" title="ocaml/tools/ocamltex.ml:539">name</a></span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">txt</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">id</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">prefix</span><span class="ocamlStruct"> </span><span class="Statement">^</span><span class="ocamlStruct"> </span><span class="Constant">&quot; &quot;</span><span class="ocamlStruct"> </span><span class="Statement">^</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="PreProc">Printtyp</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">string_of_path</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">path</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Comment">(* inherits: annotation on parent is inherited by all children,<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; &nbsp;&nbsp; so it suffices to annotate just the new module, and not all its elements<br/></li>
<li></span><span class="Comment">&nbsp; &nbsp; *)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">info</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">f</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">inherits</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L539" title="ocaml/tools/ocamltex.ml:539">name</a></span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L540" title="ocaml/tools/ocamltex.ml:540">loc</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">attrs</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="PreProc">IdMap</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">add</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">id</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">info</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">map<br/></li>
<li></span><br/></li>
<li><a id="L127">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="Statement">rec</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">add_item</span></span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier">f</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">inherits</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">map</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">item</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="Statement">rec</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">add_module_type</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ty</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">inherits</span><span class="ocamlStruct">, </span><span class="ocamlLCIdentifier">map</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">self</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L127" title="ocaml/tools/lintapidiff.ml:127">add_item</a></span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier">f</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">inherits</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">match</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ty</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">pmty_desc</span><span class="ocamlStruct"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Pmty_signature</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">lst</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="PreProc">List</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">fold_left</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">self</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">map</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">lst<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Pmty_functor</span><span class="ocamlStruct"> </span><span class="Statement">((</span><span class="Constant">Named</span><span class="ocamlStruct"> </span><span class="Statement">({</span><span class="ocamlLCIdentifier">txt</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">txt0</span><span class="Statement">}</span><span class="ocamlStruct">,</span><span class="Statement">_))</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">m</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ident</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Ident</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">create_persistent</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">txt0</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Path</span><span class="ocamlStruct">.</span><span class="Constant">Papply</span><span class="Statement">(</span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct">, </span><span class="PreProc">Path</span><span class="ocamlStruct">.</span><span class="Constant">Pident</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ident</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">add_module_type</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">m</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">inherits</span><span class="ocamlStruct">, </span><span class="ocamlLCIdentifier">map</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Pmty_ident</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Pmty_with</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Pmty_typeof</span><span class="ocamlStruct"> </span><span class="Statement">_|</span><span class="ocamlStruct"> </span><span class="Constant">Pmty_extension</span><span class="ocamlStruct"> </span><span class="Statement">_<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Pmty_alias</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Pmty_functor</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="Constant">Named</span><span class="ocamlStruct"> </span><span class="Statement">({</span><span class="ocamlLCIdentifier">txt</span><span class="Statement">=</span><span class="Constant">None</span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">}</span><span class="ocamlStruct">, </span><span class="Statement">_)</span><span class="ocamlStruct">, </span><span class="Statement">_)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Pmty_functor</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="Constant">Unit</span><span class="ocamlStruct">, </span><span class="Statement">_)</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">map<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">enter_path</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L539" title="ocaml/tools/ocamltex.ml:539">name</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ty</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">attrs</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">map</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Path</span><span class="ocamlStruct">.</span><span class="Constant">Pdot</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct">, </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L539" title="ocaml/tools/ocamltex.ml:539">name</a></span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">txt</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">inherits</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">f</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">inherits</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L539" title="ocaml/tools/ocamltex.ml:539">name</a></span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L540" title="ocaml/tools/ocamltex.ml:540">loc</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">attrs</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">add_module_type</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ty</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">inherits</span><span class="ocamlStruct">, </span><span class="ocamlLCIdentifier">map</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">add_module</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">map</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">m</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L539" title="ocaml/tools/ocamltex.ml:539">name</a></span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">match</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">m</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">pmd_name</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">txt</span><span class="ocamlStruct"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">None</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">failwith</span><span class="ocamlStruct"> </span><span class="Constant">&quot;<a href="ocamlcp_common.mli.html#L26" title="ocaml/tools/ocamlcp_common.mli:26">anonymous</a> functor arguments are not supported&quot;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">n</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">m</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">pmd_name</span><span class="ocamlStruct"> </span><span class="Statement">with</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">txt</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">n</span><span class="Statement">}<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">enter_path</span><span class="ocamlStruct">&nbsp; </span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L539" title="ocaml/tools/ocamltex.ml:539">name</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">m</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">pmd_type</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">m</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">pmd_attributes</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">map<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">match</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">item</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">psig_desc</span><span class="ocamlStruct"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Psig_value</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">vd</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L118" title="ocaml/tools/lintapidiff.ml:118">add_path</a></span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier">f</span><span class="ocamlStruct"> </span><span class="Constant">&quot;value&quot;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">vd</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">pval_name</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">vd</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">pval_attributes</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">inherits</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">map<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Psig_type</span><span class="ocamlStruct"> </span><span class="Statement">(_</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">lst</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">List</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">fold_left</span><span class="ocamlStruct"> </span><span class="Statement">(fun</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">map</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L411" title="ocaml/tools/ocamltex.ml:411">t</a></span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L118" title="ocaml/tools/lintapidiff.ml:118">add_path</a></span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier">f</span><span class="ocamlStruct"> </span><span class="Constant">&quot;type&quot;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L411" title="ocaml/tools/ocamltex.ml:411">t</a></span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">ptype_name</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L411" title="ocaml/tools/ocamltex.ml:411">t</a></span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">ptype_attributes</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">inherits</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">map<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">map</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">lst<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Psig_exception</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L118" title="ocaml/tools/lintapidiff.ml:118">add_path</a></span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier">f</span><span class="ocamlStruct"> </span><span class="Constant">&quot;exception&quot;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">ptyexn_constructor</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">pext_name<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">e</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">ptyexn_attributes</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">inherits</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">map<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Psig_module</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">m</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">add_module</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">map</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">m<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Psig_recmodule</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">lst</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="PreProc">List</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">fold_left</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">add_module</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">map</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">lst<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Psig_modtype</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a></span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a></span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">pmtd_type</span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">None</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">map<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Some</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ty</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">enter_path</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">path</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a></span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">pmtd_name</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ty</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a></span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">pmtd_attributes</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">map<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Psig_typext</span><span class="ocamlStruct"> </span><span class="Statement">_|</span><span class="Constant">Psig_open</span><span class="ocamlStruct"> </span><span class="Statement">_|</span><span class="Constant">Psig_include</span><span class="ocamlStruct"> </span><span class="Statement">_|</span><span class="Constant">Psig_class</span><span class="ocamlStruct"> </span><span class="Statement">_|</span><span class="Constant">Psig_class_type</span><span class="ocamlStruct"> </span><span class="Statement">_<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Psig_attribute</span><span class="ocamlStruct"> </span><span class="Statement">_|</span><span class="Constant">Psig_extension</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Psig_typesubst</span><span class="ocamlStruct"> </span><span class="Statement">_<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Psig_modsubst</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Psig_modtypesubst</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">map<br/></li>
<li></span><br/></li>
<li><a id="L175">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">add_items</span></span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier">f</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">inherits</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">map</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">items</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Comment">(* module doc *)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">inherits</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">List</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">fold_left</span><span class="ocamlStruct"> </span><span class="Statement">(fun</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">inherits</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Statement">function<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier">psig_desc</span><span class="Statement">=</span><span class="Constant">Psig_attribute</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a></span><span class="Statement">;_}<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">when</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="PreProc">Doc</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="#L86" title="ocaml/tools/lintapidiff.ml:86">get_doc</a></span><span class="ocamlStruct"> </span><span class="Statement">[</span><span class="Constant">&quot;ocaml.doc&quot;</span><span class="Statement">;</span><span class="Constant">&quot;ocaml.text&quot;</span><span class="Statement">][</span><span class="ocamlLCIdentifier"><a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a></span><span class="Statement">]</span><span class="ocamlStruct"> </span><span class="Statement">&lt;&gt;</span><span class="ocamlStruct"> </span><span class="Constant">None</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">f</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">inherits</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="PreProc">Location</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">none</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">[</span><span class="ocamlLCIdentifier"><a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a></span><span class="Statement">]<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">inherits<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">inherits</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">items</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="PreProc">List</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">fold_left</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L127" title="ocaml/tools/lintapidiff.ml:127">add_item</a></span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier">f</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">inherits</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">map</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">items<br/></li>
<li></span><br/></li>
<li><a id="L185">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">parse_file</span></span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier"><a href="dumpobj.ml.html#L498" title="ocaml/tools/dumpobj.ml:498">orig</a></span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier">f</span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier">init</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">input</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">try<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">id</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="dumpobj.ml.html#L498" title="ocaml/tools/dumpobj.ml:498">orig</a></span><span class="ocamlStruct"> </span><span class="Statement">|&gt;</span><span class="ocamlStruct"> </span><span class="PreProc">Filename</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">chop_extension</span><span class="ocamlStruct"> </span><span class="Statement">|&gt;</span><span class="ocamlStruct"> </span><span class="PreProc">Filename</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">basename</span><span class="ocamlStruct"> </span><span class="Statement">|&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">String</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">capitalize_ascii</span><span class="ocamlStruct"> </span><span class="Statement">|&gt;</span><span class="ocamlStruct"> </span><span class="PreProc">Ident</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">create_persistent</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L681" title="ocaml/tools/ocamltex.ml:681">ast</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Pparse</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="#L300" title="ocaml/tools/lintapidiff.ml:300">file</a></span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier">tool_name</span><span class="ocamlStruct">:</span><span class="Constant">&quot;lintapidiff&quot;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">input<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">Parse</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">interface</span><span class="ocamlStruct"> </span><span class="PreProc">Pparse</span><span class="ocamlStruct">.</span><span class="Constant">Signature</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="PreProc">Location</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">input_name</span><span class="ocamlStruct"> </span><span class="Statement">:=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="dumpobj.ml.html#L498" title="ocaml/tools/dumpobj.ml:498">orig</a></span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="#L175" title="ocaml/tools/lintapidiff.ml:175">add_items</a></span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier">f</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="PreProc">Path</span><span class="ocamlStruct">.</span><span class="Constant">Pident</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">id</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">init</span><span class="ocamlStruct">,</span><span class="PreProc">IdMap</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">empty</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L681" title="ocaml/tools/ocamltex.ml:681">ast</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">with</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">e</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="PreProc">Format</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L114" title="ocaml/tools/ocamltex.ml:114">eprintf</a></span><span class="ocamlStruct"> </span><span class="Constant">&quot;%<a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a>@.&quot;</span><span class="ocamlStruct"> </span><span class="PreProc">Location</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">report_exception</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">e</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">raise</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">e<br/></li>
<li></span><span class="PreProc">end<br/></li>
<li></span><br/></li>
<li><span class="Statement">module</span><span class="PreProc"> Git</span><span class="ocamlPreDef"> </span><span class="Statement">=</span> <span class="PreProc">struct<br/></li>
<li><a id="L200">&#x200c;</a></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">with_show</span></span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier">f</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">rev</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">obj</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">rev</span><span class="ocamlStruct"> </span><span class="Statement">^</span><span class="ocamlStruct"> </span><span class="Constant">&quot;:&quot;</span><span class="ocamlStruct"> </span><span class="Statement">^</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">suffix</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Printf</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">sprintf</span><span class="ocamlStruct"> </span><span class="Constant">&quot;-%<a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a>:%<a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a>&quot;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">rev</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="PreProc">Filename</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">basename</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">path</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">tmp</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Filename</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">temp_file</span><span class="ocamlStruct"> </span><span class="Constant">&quot;lintapidiff&quot;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">suffix</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cmd</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Printf</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">sprintf</span><span class="ocamlStruct"> </span><span class="Constant">&quot;git show %<a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a> &gt;%<a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a> 2&gt;/dev/null&quot;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="PreProc">Filename</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">quote</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">obj</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="PreProc">Filename</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">quote</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">tmp</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="PreProc">Misc</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">try_finally</span><span class="ocamlStruct"> </span><span class="Statement">(fun</span><span class="ocamlStruct"> </span><span class="Constant">()</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">match</span><span class="ocamlStruct"> </span><span class="PreProc">Sys</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">command</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">cmd</span><span class="ocamlStruct"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">0</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">Ok</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">f</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">tmp</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">128</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="PreProc">Result</span><span class="ocamlStruct">.</span><span class="Constant">Error</span><span class="ocamlStruct"> </span><span class="Constant">File_not_found<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L130" title="ocaml/tools/ocamltex.ml:130">r</a></span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">Location</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">errorf</span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier"><a href="ocamltex.ml.html#L540" title="ocaml/tools/ocamltex.ml:540">loc</a></span><span class="ocamlStruct">:</span><span class="Statement">(</span><span class="ocamlLCIdentifier">in_file</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">obj</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Constant">&quot;exited with code %d&quot;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L130" title="ocaml/tools/ocamltex.ml:130">r</a></span><span class="ocamlStruct"> </span><span class="Statement">|&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">Location</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">print_report</span><span class="ocamlStruct"> </span><span class="PreProc">Format</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">err_formatter</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">Result</span><span class="ocamlStruct">.</span><span class="Constant">Error</span><span class="ocamlStruct"> </span><span class="Constant">Other_error</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">~</span><span class="Identifier">always</span><span class="ocamlStruct">:</span><span class="Statement">(fun</span><span class="ocamlStruct"> </span><span class="Constant">()</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="PreProc">Misc</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">remove_file</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">tmp</span><span class="Statement">)<br/></li>
<li></span><span class="PreProc">end<br/></li>
<li></span><br/></li>
<li><span class="Statement">module</span><span class="PreProc"> Diff</span><span class="ocamlPreDef"> </span><span class="Statement">=</span> <span class="PreProc">struct<br/></li>
<li></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">type</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">seen_info</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">{<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier">last_not_seen</span><span class="ocamlStruct">: </span><span class="PreProc">Version</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L411" title="ocaml/tools/ocamltex.ml:411">t</a></span><span class="ocamlStruct"> </span><span class="Type">option</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier">first_seen</span><span class="ocamlStruct">: </span><span class="PreProc">Version</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L411" title="ocaml/tools/ocamltex.ml:411">t</a></span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier">deprecated</span><span class="ocamlStruct">: </span><span class="Type">bool</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; </span><span class="Statement">}<br/></li>
<li></span><br/></li>
<li><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">err</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">k</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L540" title="ocaml/tools/ocamltex.ml:540">loc</a></span><span class="ocamlStruct">, </span><span class="ocamlLCIdentifier">msg</span><span class="ocamlStruct">, </span><span class="ocamlLCIdentifier">seen</span><span class="ocamlStruct">, </span><span class="ocamlLCIdentifier">latest</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">info_seen</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ppf</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">function<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">None</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">Format</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">fprintf</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ppf</span><span class="ocamlStruct"> </span><span class="Constant">&quot;%<a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a> was not seen in any analyzed version&quot;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">k<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a></span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a></span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">last_not_seen</span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Some</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">v</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">Format</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">fprintf</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ppf</span><span class="ocamlEnd"> </span><span class="Constant">&quot;%<a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a> was not seen in version %<a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a>&quot;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">k</span><span class="ocamlEnd"> </span><span class="PreProc">Version</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L420" title="ocaml/tools/ocamltex.ml:420">pp</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">v<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">None</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="PreProc">Format</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">fprintf</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ppf</span><span class="ocamlEnd"> </span><span class="Constant">&quot;%<a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a> was seen in all analyzed versions&quot;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">k<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">Format</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">fprintf</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ppf</span><span class="ocamlStruct"> </span><span class="Constant">&quot;@,%<a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a> was seen in version %<a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a>&quot;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">k</span><span class="ocamlStruct"> </span><span class="PreProc">Version</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L420" title="ocaml/tools/ocamltex.ml:420">pp</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a></span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">first_seen</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a></span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">deprecated</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">Format</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">fprintf</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ppf</span><span class="ocamlStruct"> </span><span class="Constant">&quot;@,%<a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a> was marked as deprecated&quot;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">k<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">in<br/></li>
<li><a id="L239">&#x200c;</a></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">info_latest</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ppf</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">function<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">None</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="PreProc">Format</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">fprintf</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ppf</span><span class="ocamlStruct"> </span><span class="Constant">&quot;%<a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a> was deleted in HEAD&quot;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">k<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a></span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">begin</span><span class="ocamlEnd"> </span><span class="Statement">match</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier"><a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a></span><span class="ocamlEnd">.</span><span class="PreProc">Doc</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">since</span><span class="ocamlEnd"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">Some</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">v</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="PreProc">Format</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">fprintf</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ppf</span><span class="ocamlEnd"> </span><span class="Constant">&quot;%<a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a> has @since %<a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a>&quot;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">k</span><span class="ocamlEnd"> </span><span class="PreProc">Version</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L420" title="ocaml/tools/ocamltex.ml:420">pp</a></span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">v<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlEnd"> </span><span class="Constant">None</span><span class="ocamlEnd"> </span><span class="Statement">-&gt;</span><span class="ocamlEnd"> </span><span class="PreProc">Format</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier">fprintf</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">ppf</span><span class="ocamlEnd"> </span><span class="Constant">&quot;%<a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a> has no @since annotation&quot;</span><span class="ocamlEnd"> </span><span class="ocamlLCIdentifier">k<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">end;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a></span><span class="ocamlNone">.</span><span class="PreProc">Doc</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">deprecated</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="PreProc">Format</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">fprintf</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">ppf</span><span class="ocamlStruct"> </span><span class="Constant">&quot;@,%<a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a> is marked as deprecated&quot;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">k<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="PreProc">Location</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">errorf</span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier"><a href="ocamltex.ml.html#L540" title="ocaml/tools/ocamltex.ml:540">loc</a></span><span class="ocamlStruct"> </span><span class="Constant">&quot;@[%<a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a> %<a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a>@,%<a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a>@,%<a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a>@]&quot;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">msg</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">k<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="ocamlLCIdentifier">info_seen</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">seen</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L239" title="ocaml/tools/lintapidiff.ml:239">info_latest</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">latest</span><span class="ocamlStruct"> </span><span class="Statement">|&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="PreProc">Location</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">print_report</span><span class="ocamlStruct"> </span><span class="PreProc">Format</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">err_formatter<br/></li>
<li></span><br/></li>
<li><a id="L253">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">parse_file_at_rev</span></span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier">path</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">prev</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">accum</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">rev</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">merge</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">b</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">match</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a></span><span class="ocamlStruct">, </span><span class="ocamlLCIdentifier">b</span><span class="ocamlStruct"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a></span><span class="ocamlStruct">, </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">b</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a></span><span class="ocamlStruct"> </span><span class="Statement">with</span><span class="ocamlStruct">&nbsp; </span><span class="ocamlLCIdentifier">deprecated</span><span class="Statement">=</span><span class="ocamlLCIdentifier">b</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">deprecated</span><span class="ocamlStruct"> </span><span class="Statement">}<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">None</span><span class="ocamlStruct">, </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a></span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="dumpobj.ml.html#L89" title="ocaml/tools/dumpobj.ml:89">a</a></span><span class="ocamlStruct"> </span><span class="Statement">with</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">last_not_seen</span><span class="Statement">=</span><span class="ocamlLCIdentifier">prev</span><span class="ocamlStruct"> </span><span class="Statement">}<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct">, </span><span class="Constant">None</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">None</span><span class="ocamlStruct"> </span><span class="Comment">(* deleted *)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">None</span><span class="ocamlStruct">, </span><span class="Constant">None</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Statement">assert</span><span class="ocamlStruct"> </span><span class="Constant">false<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">first_seen</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Version</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="#L59" title="ocaml/tools/lintapidiff.ml:59">of_string_exn</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">rev</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">empty</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier">last_not_seen</span><span class="Statement">=</span><span class="Constant">None</span><span class="Statement">;</span><span class="ocamlLCIdentifier">first_seen</span><span class="Statement">;</span><span class="ocamlLCIdentifier">deprecated</span><span class="Statement">=</span><span class="Constant">false</span><span class="Statement">}</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">f</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Ast</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="#L185" title="ocaml/tools/lintapidiff.ml:185">parse_file</a></span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier"><a href="dumpobj.ml.html#L498" title="ocaml/tools/dumpobj.ml:498">orig</a></span><span class="ocamlStruct">:</span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier">init</span><span class="ocamlStruct">:</span><span class="ocamlLCIdentifier">empty</span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier">f</span><span class="ocamlStruct">:</span><span class="Statement">(fun</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">attrs</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">{</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">last_not_seen</span><span class="Statement">=</span><span class="Constant">None</span><span class="Statement">;</span><span class="ocamlLCIdentifier">first_seen</span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">deprecated</span><span class="Statement">=</span><span class="PreProc">Doc</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="#L92" title="ocaml/tools/lintapidiff.ml:92">is_deprecated</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">attrs</span><span class="ocamlStruct"> </span><span class="Statement">})<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">map</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="Statement">match</span><span class="ocamlStruct"> </span><span class="PreProc">Git</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="#L200" title="ocaml/tools/lintapidiff.ml:200">with_show</a></span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier">f</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">rev</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Ok</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L130" title="ocaml/tools/ocamltex.ml:130">r</a></span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L130" title="ocaml/tools/ocamltex.ml:130">r</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Error</span><span class="ocamlStruct"> </span><span class="Constant">File_not_found</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="PreProc">IdMap</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">empty<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="PreProc">Result</span><span class="ocamlStruct">.</span><span class="Constant">Error</span><span class="ocamlStruct"> </span><span class="Constant">Other_error</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Statement">raise</span><span class="ocamlStruct"> </span><span class="Constant">Exit</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">first_seen</span><span class="ocamlStruct">, </span><span class="PreProc">IdMap</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">merge</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">merge</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">accum</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">map<br/></li>
<li></span><br/></li>
<li><a id="L272">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">check_changes</span></span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier">first</span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier">last</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">default</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">k</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">seen</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">latest</span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">is_old</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">v</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Version</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="#L58" title="ocaml/tools/lintapidiff.ml:58">is_strictly_older</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">v</span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier">than</span><span class="ocamlStruct">:</span><span class="PreProc">Version</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="#L35" title="ocaml/tools/lintapidiff.ml:35">oldest</a></span><span class="ocamlStruct"> </span><span class="Statement">||<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="PreProc">Version</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="#L57" title="ocaml/tools/lintapidiff.ml:57">is_same</a></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">v</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">first<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="PreProc">List</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier">mem</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">k</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L38" title="ocaml/tools/lintapidiff.ml:38">ignore_changes_for</a></span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlStruct"> </span><span class="Constant">None</span><span class="ocamlStruct"> </span><span class="Comment">(* ignored *)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">else</span><span class="ocamlStruct"> </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="Statement"><a href="ocamlcmt.ml.html#L53" title="ocaml/tools/ocamlcmt.ml:53">open</a></span><span class="ocamlNone">! </span><span class="PreProc">Doc</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">match</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">seen</span><span class="ocamlStruct">:</span><span class="ocamlLCIdentifier">seen_info</span><span class="ocamlStruct"> </span><span class="Type">option</span><span class="Statement">)</span><span class="ocamlStruct">, </span><span class="ocamlLCIdentifier">latest</span><span class="ocamlStruct"> </span><span class="Statement">with<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">None</span><span class="ocamlStruct">, </span><span class="Constant">None</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Statement">assert</span><span class="ocamlStruct"> </span><span class="Constant">false<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct">, </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier">has_doc_parent</span><span class="Statement">=</span><span class="Constant">false</span><span class="Statement">;</span><span class="ocamlLCIdentifier">has_doc</span><span class="Statement">=</span><span class="Constant">false</span><span class="Statement">;</span><span class="ocamlLCIdentifier">deprecated</span><span class="Statement">=</span><span class="Constant">false</span><span class="Statement">;_}</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">None</span><span class="ocamlStruct"> </span><span class="Comment">(* undocumented *)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier">deprecated</span><span class="Statement">=</span><span class="Constant">true</span><span class="Statement">;_}</span><span class="ocamlStruct">, </span><span class="Constant">None</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">None</span><span class="ocamlStruct"> </span><span class="Comment">(* deleted deprecated *)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct">, </span><span class="Constant">None</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier">default</span><span class="ocamlStruct">, </span><span class="Constant">&quot;deleted non-deprecated&quot;</span><span class="ocamlStruct">, </span><span class="ocamlLCIdentifier">seen</span><span class="ocamlStruct">, </span><span class="ocamlLCIdentifier">latest</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct">, </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier">deprecated</span><span class="Statement">=</span><span class="Constant">true</span><span class="Statement">;</span><span class="ocamlLCIdentifier">since</span><span class="Statement">=</span><span class="Constant">None</span><span class="Statement">;_}</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;</span><span class="ocamlStruct"> </span><span class="Constant">None</span><span class="ocamlStruct"> </span><span class="Comment">(* marked as deprecated *)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">None</span><span class="ocamlStruct">, </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L540" title="ocaml/tools/ocamltex.ml:540">loc</a></span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">since</span><span class="Statement">=</span><span class="Constant">None</span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="Statement">_}</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L540" title="ocaml/tools/ocamltex.ml:540">loc</a></span><span class="ocamlStruct">, </span><span class="Constant">&quot;missing @since for new&quot;</span><span class="ocamlStruct">, </span><span class="ocamlLCIdentifier">seen</span><span class="ocamlStruct">, </span><span class="ocamlLCIdentifier">latest</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier">first_seen</span><span class="Statement">;_}</span><span class="ocamlStruct">, </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L540" title="ocaml/tools/ocamltex.ml:540">loc</a></span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">since</span><span class="Statement">=</span><span class="Constant">None</span><span class="Statement">;_}</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">is_old</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">first_seen</span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlStruct"> </span><span class="Constant">None<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else</span><span class="ocamlStruct"> </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L540" title="ocaml/tools/ocamltex.ml:540">loc</a></span><span class="ocamlStruct">, </span><span class="Constant">&quot;missing @since&quot;</span><span class="ocamlStruct">, </span><span class="ocamlLCIdentifier">seen</span><span class="ocamlStruct">, </span><span class="ocamlLCIdentifier">latest</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier">first_seen</span><span class="Statement">;_}</span><span class="ocamlStruct">, </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L540" title="ocaml/tools/ocamltex.ml:540">loc</a></span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">since</span><span class="Statement">=</span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a></span><span class="Statement">;_}</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="PreProc">Version</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier"><a href="#L57" title="ocaml/tools/lintapidiff.ml:57">is_same</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">first_seen</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a></span><span class="ocamlNone"> </span><span class="Statement">then</span><span class="ocamlStruct"> </span><span class="Constant">None</span><span class="ocamlStruct"> </span><span class="Comment">(* OK, @since matches *)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else</span><span class="ocamlStruct"> </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L540" title="ocaml/tools/ocamltex.ml:540">loc</a></span><span class="ocamlStruct">, </span><span class="Constant">&quot;mismatched @since&quot;</span><span class="ocamlStruct">, </span><span class="ocamlLCIdentifier">seen</span><span class="ocamlStruct">, </span><span class="ocamlLCIdentifier">latest</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">|</span><span class="ocamlStruct"> </span><span class="Constant">None</span><span class="ocamlStruct">, </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="Statement">{</span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L540" title="ocaml/tools/ocamltex.ml:540">loc</a></span><span class="Statement">;</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">since</span><span class="Statement">=</span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a></span><span class="Statement">;_}</span><span class="ocamlStruct"> </span><span class="Statement">-&gt;<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">if</span><span class="ocamlNone"> </span><span class="PreProc">Version</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier"><a href="#L58" title="ocaml/tools/lintapidiff.ml:58">is_strictly_older</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a></span><span class="ocamlNone"> </span><span class="Statement">~</span><span class="Identifier">than</span><span class="ocamlNone">:</span><span class="ocamlLCIdentifier">last</span><span class="ocamlNone"> </span><span class="Statement">||<br/></li>
<li></span><span class="ocamlNone">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="PreProc">Version</span><span class="ocamlNone">.</span><span class="ocamlLCIdentifier"><a href="#L57" title="ocaml/tools/lintapidiff.ml:57">is_same</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="ocamlmklib.ml.html#L86" title="ocaml/tools/ocamlmklib.ml:86">s</a></span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier">last</span><span class="ocamlNone"> </span><span class="Statement">then<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Constant">Some</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L540" title="ocaml/tools/ocamltex.ml:540">loc</a></span><span class="ocamlStruct">, </span><span class="Constant">&quot;too old @since for new&quot;</span><span class="ocamlStruct">, </span><span class="ocamlLCIdentifier">seen</span><span class="ocamlStruct">, </span><span class="ocamlLCIdentifier">latest</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">else</span><span class="ocamlStruct"> </span><span class="Constant">None<br/></li>
<li></span><br/></li>
<li><a id="L300">&#x200c;</a><span class="ocamlStruct">&nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><span class="linkable">file</span></span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L316" title="ocaml/tools/lintapidiff.ml:316">tags</a></span><span class="ocamlStruct"> </span><span class="Statement">=<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="Statement">_</span><span class="ocamlStruct">,</span><span class="ocamlLCIdentifier">syms_vers</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">List</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">fold_left</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L253" title="ocaml/tools/lintapidiff.ml:253">parse_file_at_rev</a></span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier">path</span><span class="Statement">)<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="Statement">(</span><span class="Constant">None</span><span class="ocamlStruct">,</span><span class="PreProc">IdMap</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">empty</span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L316" title="ocaml/tools/lintapidiff.ml:316">tags</a></span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">current</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Ast</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="#L185" title="ocaml/tools/lintapidiff.ml:185">parse_file</a></span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier"><a href="dumpobj.ml.html#L498" title="ocaml/tools/dumpobj.ml:498">orig</a></span><span class="ocamlStruct">:</span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier">f</span><span class="ocamlStruct">:</span><span class="PreProc">Doc</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="#L100" title="ocaml/tools/lintapidiff.ml:100">get</a></span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier">init</span><span class="ocamlStruct">:</span><span class="PreProc">Doc</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">empty</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L540" title="ocaml/tools/ocamltex.ml:540">loc</a></span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">Location</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">in_file</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">path</span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">let</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">first</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">List</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">hd</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L316" title="ocaml/tools/lintapidiff.ml:316">tags</a></span><span class="ocamlStruct"> </span><span class="Statement">|&gt;</span><span class="ocamlStruct"> </span><span class="PreProc">Version</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="#L59" title="ocaml/tools/lintapidiff.ml:59">of_string_exn</a><br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="Statement">and</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">last</span><span class="ocamlStruct"> </span><span class="Statement">=</span><span class="ocamlStruct"> </span><span class="PreProc">List</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">hd</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="PreProc">List</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">rev</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="#L316" title="ocaml/tools/lintapidiff.ml:316">tags</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="Statement">|&gt;</span><span class="ocamlStruct"> </span><span class="PreProc">Version</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier"><a href="#L59" title="ocaml/tools/lintapidiff.ml:59">of_string_exn</a></span><span class="ocamlStruct"> </span><span class="Statement">in<br/></li>
<li></span><span class="ocamlStruct">&nbsp; &nbsp; </span><span class="PreProc">IdMap</span><span class="ocamlStruct">.</span><span class="ocamlLCIdentifier">merge</span><span class="ocamlStruct"> </span><span class="Statement">(</span><span class="ocamlLCIdentifier"><a href="#L272" title="ocaml/tools/lintapidiff.ml:272">check_changes</a></span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier">first</span><span class="ocamlStruct"> </span><span class="Statement">~</span><span class="Identifier">last</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L540" title="ocaml/tools/ocamltex.ml:540">loc</a></span><span class="Statement">)</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">syms_vers</span><span class="ocamlStruct"> </span><span class="ocamlLCIdentifier">current<br/></li>
<li></span><span class="PreProc">end<br/></li>
<li></span><br/></li>
<li><a id="L310">&#x200c;</a><span class="Statement">let</span> <span class="Statement">rec</span> <span class="ocamlLCIdentifier"><span class="linkable">read_lines</span></span> <span class="ocamlLCIdentifier">accum</span> <span class="Statement">=<br/></li>
<li></span>&nbsp; <span class="Statement">match</span> <span class="ocamlLCIdentifier">input_line</span> <span class="ocamlLCIdentifier">stdin</span> <span class="Statement">with<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="ocamlLCIdentifier">line</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier"><a href="#L310" title="ocaml/tools/lintapidiff.ml:310">read_lines</a></span> <span class="Statement">(</span><span class="ocamlLCIdentifier">line</span> <span class="Statement">::</span> <span class="ocamlLCIdentifier">accum</span><span class="Statement">)<br/></li>
<li></span>&nbsp; <span class="Statement">|</span> <span class="Statement">exception</span> <span class="Constant">End_of_file</span> <span class="Statement">-&gt;</span> <span class="ocamlLCIdentifier">accum<br/></li>
<li></span><br/></li>
<li><span class="Statement">let</span> <span class="Constant">()</span> <span class="Statement">=<br/></li>
<li><a id="L316">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">tags</span></span> <span class="Statement">=</span> <span class="PreProc">Sys</span>.<span class="ocamlLCIdentifier">argv</span> <span class="Statement">|&gt;</span> <span class="PreProc">Array</span>.<span class="ocamlLCIdentifier">to_list</span> <span class="Statement">|&gt;</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">tl</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L316" title="ocaml/tools/lintapidiff.ml:316">tags</a></span><span class="ocamlNone"> </span><span class="Statement">=</span><span class="ocamlNone"> </span><span class="Constant">[]</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="Statement">begin<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="PreProc">Printf</span><span class="ocamlEnd">.</span><span class="ocamlLCIdentifier"><a href="ocamltex.ml.html#L114" title="ocaml/tools/ocamltex.ml:114">eprintf</a></span><span class="ocamlEnd"> </span><span class="Constant">&quot;<a href="#L316" title="ocaml/tools/lintapidiff.ml:316">tags</a> list is empty!\n&quot;</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; &nbsp; </span><span class="ocamlLCIdentifier"><a href="ocamlmklib.ml.html#L196" title="ocaml/tools/ocamlmklib.ml:196">exit</a></span><span class="ocamlEnd"> </span><span class="Constant">1</span><span class="Statement">;<br/></li>
<li></span><span class="ocamlEnd">&nbsp; </span><span class="Statement">end;<br/></li>
<li><a id="L321">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">paths</span></span> <span class="Statement">=</span> <span class="ocamlLCIdentifier"><a href="#L310" title="ocaml/tools/lintapidiff.ml:310">read_lines</a></span> <span class="Constant">[]</span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="PreProc">Printf</span>.<span class="ocamlLCIdentifier">printf</span> <span class="Constant">&quot;Parsing\n%!&quot;</span><span class="Statement">;<br/></li>
<li><a id="L323">&#x200c;</a></span>&nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier"><span class="linkable">count</span></span> <span class="Statement">=</span> <span class="PreProc">List</span>.<span class="ocamlLCIdentifier">fold_left</span> <span class="Statement">(fun</span> <span class="ocamlLCIdentifier"><span class="linkable">count</span></span> <span class="ocamlLCIdentifier">path</span> <span class="Statement">-&gt;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="Statement">let</span> <span class="ocamlLCIdentifier">problems</span> <span class="Statement">=</span> <span class="PreProc">Diff</span>.<span class="ocamlLCIdentifier"><a href="#L300" title="ocaml/tools/lintapidiff.ml:300">file</a></span> <span class="ocamlLCIdentifier">path</span> <span class="ocamlLCIdentifier"><a href="#L316" title="ocaml/tools/lintapidiff.ml:316">tags</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="PreProc">IdMap</span>.<span class="ocamlLCIdentifier">iter</span> <span class="PreProc">Diff</span>.<span class="ocamlLCIdentifier">err</span> <span class="ocamlLCIdentifier">problems</span><span class="Statement">;<br/></li>
<li></span>&nbsp; &nbsp; &nbsp; <span class="ocamlLCIdentifier"><a href="#L323" title="ocaml/tools/lintapidiff.ml:323">count</a></span> + <span class="PreProc">IdMap</span>.<span class="ocamlLCIdentifier">cardinal</span> <span class="ocamlLCIdentifier">problems<br/></li>
<li></span>&nbsp; &nbsp; <span class="Statement">)</span> <span class="Constant">0</span> <span class="ocamlLCIdentifier"><a href="#L321" title="ocaml/tools/lintapidiff.ml:321">paths</a></span> <span class="Statement">in<br/></li>
<li></span>&nbsp; <span class="PreProc">Printf</span>.<span class="ocamlLCIdentifier">printf</span> <span class="Constant">&quot;Found %d potential problems\n%!&quot;</span> <span class="ocamlLCIdentifier"><a href="#L323" title="ocaml/tools/lintapidiff.ml:323">count</a></span><span class="Statement">;<br/></li>
<li></span>&nbsp; <span class="Statement">if</span><span class="ocamlNone"> </span><span class="ocamlLCIdentifier"><a href="#L323" title="ocaml/tools/lintapidiff.ml:323">count</a></span><span class="ocamlNone"> </span><span class="Statement">&gt;</span><span class="ocamlNone"> </span><span class="Constant">0</span><span class="ocamlNone"> </span><span class="Statement">then</span> <span class="ocamlLCIdentifier"><a href="ocamlmklib.ml.html#L196" title="ocaml/tools/ocamlmklib.ml:196">exit</a></span> <span class="Constant">2<br/></li>
</ol></span></code>
 <p class="nav-bar">
  <span class="nav-link"><a href="./index.html">One Level Up</a></span>
  <span class="nav-link"><a href="index.html">Top Level</a></span>
 </p>

 </body>
</html>
